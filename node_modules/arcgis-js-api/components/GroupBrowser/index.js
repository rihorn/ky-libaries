// COPYRIGHT Â© 2018 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.10/esri/copyright.txt for details.

/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */

define(["../Component","dojo/promise/all","../Loaders/LoaderBars","dojo/i18n!../GroupBrowser/nls/resources","../Navigation/Pager/index","../Dropdowns/SortDropdown/index","../Buttons/Ago2018Checkbox","../Badges/Chip","../GroupCards/GroupCheckCard/index"],function(t,r,e,n,o,u,a,c,i){return function(t){function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var e={};return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(r){return t[r]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=286)}({0:function(t,r,e){"use strict";function n(t,r){function e(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}e.d(r,"b",function(){return n}),e.d(r,"a",function(){return u});var o=function(t,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)},u=function(){return(u=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)}},1:function(r,e){r.exports=t},109:function(t,r){t.exports=a},111:function(t,r,e){"use strict";e.d(r,"a",function(){return s}),e.d(r,"b",function(){return d});var n=e(1),o=e(129),u=e(120),a=e(123),c=e(126),i=e(119),s={config:i.b,parameters:u.b,results:a.b,ui:c.b,utils:o.b},d=Object(n.combineReducers)({config:i.a,parameters:u.a,results:a.a,ui:c.a,utils:o.a})},112:function(t,r,e){"use strict";var n=e(36);e.d(r,"b",function(){return n.d});var o=e(53);e.d(r,"a",function(){return o.c}),e.d(r,"c",function(){return o.d})},119:function(t,r,e){"use strict";e.d(r,"b",function(){return n});var n={groupsPerPage:10,baseQ:""};r.a=function(t){return void 0===t&&(t=n),t}},12:function(t,r,e){"use strict";function n(t){return t.reduce(function(t,r){return r&&r.relatedItems?t.concat(r.relatedItems.map(function(t){return t.id})):t},[])}function o(t,r,e){return t(r,{query:u.a({f:"json"},e)}).then(function(t){return t.data})}e.d(r,"i",function(){return c}),e.d(r,"f",function(){return i}),e.d(r,"c",function(){return s}),e.d(r,"d",function(){return d}),e.d(r,"g",function(){return l}),e.d(r,"h",function(){return p}),e.d(r,"a",function(){return f}),e.d(r,"b",function(){return h}),e.d(r,"j",function(){return g}),e.d(r,"k",function(){return b}),e.d(r,"l",function(){return y}),e.d(r,"e",function(){return m}),e.d(r,"m",function(){return o});var u=e(0),a=e(15),c=function(t,r,e){return o(t,r.restUrl+"/portals/self",{culture:e,default:!0})},i=function(t,r,e){return o(t,r.restUrl+"/content/items/"+e+"/data")},s=function(t,r,e){return o(t,r.restUrl+"/community/groups",{q:e})},d=function(t,r,e){return o(t,r.restUrl+"/community/groups/"+e+"/categorySchema")},l=function(t,r,e){return o(t,r.restUrl+"/portals/"+(e||r.id)+"/categorySchema")},p=function(t,r,e){return o(t,location.protocol+"//"+r.portalHostname+"/sharing/rest/portals/"+(e||r.id))},f=function(t,r,e){return t(r.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+r.id+" AND access:public",num:100,start:e||1,sortField:"title",sortOrder:"asc"}}).then(function(e){return e.data.total>e.data.start+e.data.num?f(t,r,e.data.start+e.data.num).then(function(t){return u.a({},t,{data:u.a({},t.data,{results:e.data.results.concat(t.data.results)})})}):e})},h=function(t,r,e,u){return t(r.restUrl+"/community/users/"+e+"/provisionedListings",{query:{f:"json",num:100,start:u||1}}).then(function(u){var c=u.data.provisionedListings.map(function(e){return o(t,r.restUrl+"/content/items/"+(e.id||e.itemId)+"/relatedItems?relationshipType=Listed2ImplicitlyListed&direction=forward").then(function(t){return t},function(t){})});return u.data.total>u.data.start+u.data.num?h(t,r,e,u.data.start+u.data.num).then(function(t){return a(c).then(function(r){return t.concat(u.data.provisionedListings.filter(function(t){return!!t.itemId}).map(function(t){return t.itemId}).concat(n(r)))})}):a(c).then(function(t){return u.data.provisionedListings.filter(function(t){return!!t.itemId}).map(function(t){return t.itemId}).concat(n(t))})})},g=function(t,r,e){return o(t,r.restUrl+"/community/users/"+(e||r.user.username))},b=function(t,r,e){return o(t,r.restUrl+"/content/users/"+(e||r.user.username))},y=function(t,r,e){return o(t,r.restUrl+"/content/groups/"+e)},m=function(t,r,e){return o(t,r.restUrl+"/community/groups",e)}},120:function(t,r,e){"use strict";e.d(r,"b",function(){return a});var n=e(1),o=e(121),u=e(122),a={searchString:o.b,sort:u.b};r.a=Object(n.combineReducers)({searchString:o.a,sort:u.a})},121:function(t,r,e){"use strict";e.d(r,"b",function(){return u});var n=e(0),o=e(241),u={current:"",previous:""};r.a=function(t,r){switch(void 0===t&&(t=u),r.type){case o.a:return n.a({},t,{current:r.payload,previous:t.current});default:return t}}},122:function(t,r,e){"use strict";e.d(r,"b",function(){return u});var n=e(0),o=e(71),u={field:"title",order:"asc"},a={relevance:"desc",title:"asc",created:"desc",owner:"asc",modified:"desc",numviews:"desc",avgrating:"desc"};r.a=function(t,r){switch(void 0===t&&(t=u),r.type){case o.a:return n.a({},t,{field:r.payload,order:a[r.payload]});case o.b:return n.a({},t,{order:r.payload});default:return t}}},123:function(t,r,e){"use strict";e.d(r,"b",function(){return a});var n=e(1),o=e(124),u=e(125),a={currentQuery:o.b,groups:u.b};r.a=Object(n.combineReducers)({currentQuery:o.a,groups:u.a})},124:function(t,r,e){"use strict";e.d(r,"b",function(){return o});var n=e(36),o={start:1,total:0};r.a=function(t,r){switch(void 0===t&&(t=o),r.type){case n.c:return{start:r.payload.start,total:r.payload.total};default:return t}}},125:function(t,r,e){"use strict";e.d(r,"b",function(){return a});var n=e(0),o=e(53),u=e(36),a={displayGroups:[],selectedGroups:{},status:"loading"};r.a=function(t,r){switch(void 0===t&&(t=a),r.type){case o.a:return n.a({},t,{selectedGroups:r.payload.reduce(function(t,r){return t[r.id]&&delete t[r.id],t},t.selectedGroups)});case o.b:return n.a({},t,{selectedGroups:r.payload.reduce(function(t,r){return t[r.id]=r,t},t.selectedGroups)});case u.a:return n.a({},t,{status:"loading"});case u.c:return n.a({},t,{displayGroups:r.payload.results,status:"loaded"});case u.b:return n.a({},t,{displayGroups:[],status:"failed"});default:return t}}},126:function(t,r,e){"use strict";e.d(r,"b",function(){return a});var n=e(1),o=e(127),u=e(128),a={page:o.b,sort:u.b};r.a=Object(n.combineReducers)({page:o.a,sort:u.a})},127:function(t,r,e){"use strict";e.d(r,"b",function(){return a});var n=e(0),o=e(243),u=e(36),a={number:1};r.a=function(t,r){switch(void 0===t&&(t=a),r.type){case o.a:return n.a({},t,{number:r.payload});case u.c:return n.a({},t,{number:r.payload.num>r.payload.total?1:Math.ceil(r.payload.start/r.payload.num)});case u.b:return n.a({},t,{number:1});default:return t}}},128:function(t,r,e){"use strict";e.d(r,"b",function(){return u});var n=e(71),o=e(244),u=!1;r.a=function(t,r){switch(void 0===t&&(t=u),r.type){case n.a:case n.b:case o.a:return!t;default:return t}}},129:function(t,r,e){"use strict";e.d(r,"b",function(){return n});var n={portal:{},request:function(t){return null}};r.a=function(t){return void 0===t&&(t=n),t}},14:function(t,r,e){"use strict";function n(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(r){return t.reduceRight(function(t,r){return r(t)},r)}}e.d(r,"a",function(){return n})},15:function(t,e){t.exports=r},176:function(t,r,e){"use strict";var n=e(0),o=e(56),u=e(1),a=e(241),c=e(71),i=e(36),s=e(244),d=e(76),l=e.n(d),p=function(t){function r(r){var e=t.call(this,r)||this;return e.handleInputChange=e.handleInputChange.bind(e),e.handleInputKeyDown=e.handleInputKeyDown.bind(e),e.handleSortFieldChange=e.handleSortFieldChange.bind(e),e.handleSortOrderChange=e.handleSortOrderChange.bind(e),e.handleSortClick=e.handleSortClick.bind(e),e}return n.b(r,t),r.prototype.render=function(t){return t("div",{class:"gb-search-area__container"},t("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},t("path",{d:"M19.205 18.295l-7.036-7.035A6.874 6.874 0 0 0 6.875 0 6.874 6.874 0 0 0 0 6.875a6.874 6.874 0 0 0 11.286 5.27l7.035 7.034.884-.884zM1.25 6.875A5.632 5.632 0 0 1 6.875 1.25 5.632 5.632 0 0 1 12.5 6.875 5.632 5.632 0 0 1 6.875 12.5 5.632 5.632 0 0 1 1.25 6.875z",fill:"#595959","fill-rule":"nonzero"})),t("input",{class:"gb-search-area__input",title:o.searchGroups,"aria-label":o.searchGroups,type:"search",oninput:this.handleInputChange,onkeydown:this.handleInputKeyDown,value:this.props.currentSearchString,placeholder:o.searchGroups}),t("div",{class:"gb-search-area__btn-section"},t(l.a,{active:this.props.sortActive,key:"gb-sort-dropdown",field:this.props.sortField,order:this.props.sortOrder,availableFields:["title","owner","created","modified"],onFieldChange:this.handleSortFieldChange,onOrderChange:this.handleSortOrderChange,onClick:this.handleSortClick})))},r.prototype.handleInputChange=function(t){this.props.changeSearchString(t.target.value),""===t.target.value&&this.props.search()},r.prototype.handleInputKeyDown=function(t){13===t.keyCode&&this.props.search()},r.prototype.handleSortFieldChange=function(t){this.props.changeSortField(t),this.props.search()},r.prototype.handleSortOrderChange=function(t){this.props.changeSortOrder(t),this.props.search()},r.prototype.handleSortClick=function(){this.props.toggleSortDropdown()},r}(u.Component);r.a=Object(u.connect)(function(t){return{currentSearchString:t.parameters.searchString.current,sortActive:t.ui.sort,sortField:t.parameters.sort.field,sortOrder:t.parameters.sort.order}},function(t){return{changeSearchString:function(r){return t(Object(a.b)(r))},changeSortField:function(r){return t(Object(c.c)(r))},changeSortOrder:function(r){return t(Object(c.d)(r))},search:function(){return t(Object(i.d)())},toggleSortDropdown:function(){return t(Object(s.b)())}}})(p)},177:function(t,r,e){"use strict";var n=e(0),o=e(1),u=e(30),a=e.n(u),c=e(180),i=e(178),s=e(53),d=function(t){function r(r){var e=t.call(this,r)||this;return e.handleGroupCheck=e.handleGroupCheck.bind(e),e.handleGroupUncheck=e.handleGroupUncheck.bind(e),e}return n.b(r,t),r.prototype.render=function(t){var r="loading"===this.props.status,e={"gb-results-panel__section-container":!0,"gb-results-panel__section-container--loading":r},n=this.props.resultTotal,o=0===n?0:this.props.groupsPerPage*(this.props.pageNumber-1)+1,u=n<this.props.groupsPerPage*this.props.pageNumber?n:this.props.groupsPerPage*this.props.pageNumber;return t("div",{class:"gb-results-panel__container"},r?t(a.a,{key:"group-browser-loader-bars"}):null,t("section",{classes:e},t(i.a,{key:"group-browser-totals",startNum:o,endNum:u,totalItems:n})),t("section",{classes:e},t(c.a,{key:"groups-area",displayGroups:this.props.displayGroups,selectedGroups:this.props.selectedGroups,sortField:this.props.sortField,handleGroupCheck:this.handleGroupCheck,handleGroupUncheck:this.handleGroupUncheck})))},r.prototype.handleGroupCheck=function(t){this.props.selectGroups([t])},r.prototype.handleGroupUncheck=function(t){this.props.deselectGroups([t])},r}(o.Component);r.a=Object(o.connect)(function(t){return{status:t.results.groups.status,resultTotal:t.results.currentQuery.total,groupsPerPage:t.config.groupsPerPage,pageNumber:t.ui.page.number,displayGroups:t.results.groups.displayGroups,selectedGroups:t.results.groups.selectedGroups,sortField:t.parameters.sort.field}},function(t){return{selectGroups:function(r){return t(Object(s.d)(r))},deselectGroups:function(r){return t(Object(s.c)(r))}}})(d)},178:function(t,r,e){"use strict";var n=e(0),o=e(56),u=e(1),a=e(53),c=e(179),i=e.n(c),s=e(109),d=e.n(s),l=function(t){function r(r){var e=t.call(this,r)||this;return e.handleCheckClick=e.handleCheckClick.bind(e),e.handleClearSelection=e.handleClearSelection.bind(e),e}return n.b(r,t),r.prototype.render=function(t){var r=this.props,e=r.displayGroups,n=r.selectedGroups,u=e.reduce(function(t,r){return!!n[r.id]||t},!1),a=e.reduce(function(t,r){return!!n[r.id]&&t},!0);return u?t("div",{class:"gb-total-area__container",key:"gb-total-area-checked"},t(d.a,a?{key:"gb-total-area__checked-input",checked:!0,indeterminate:!1,onChange:this.handleClearSelection}:{key:"gb-total-area__indeterminate-input",checked:!1,indeterminate:!0,onChange:this.handleCheckClick}),t("span",{class:"gb-total-area__result"},t(i.a,{color:"green",text:e.filter(function(t){return n[t.id]}).length+" selected"}),t("button",{class:"gb-total-area__clear-btn",onclick:this.handleClearSelection},o.clearSelection))):t("div",{class:"gb-total-area__container",key:"gb-total-area"},t(d.a,{key:"gb-total-area__select-all-input",checked:!1,onChange:this.handleCheckClick,title:o.selectAll}),t("label",{class:"gb-total-area__label"},this.props.startNum+"-"+this.props.endNum+" of "+this.props.totalItems),t("span",{class:"gb-total-area__result"},this.props.startNum+"-"+this.props.endNum+" of "+this.props.totalItems))},r.prototype.handleCheckClick=function(){this.props.selectGroups(this.props.displayGroups)},r.prototype.handleClearSelection=function(){var t=this;this.props.deselectGroups(this.props.displayGroups.filter(function(r){return t.props.selectedGroups[r.id]}))},r}(u.Component);r.a=Object(u.connect)(function(t){return{displayGroups:t.results.groups.displayGroups,selectedGroups:t.results.groups.selectedGroups}},function(t){return{selectGroups:function(r){return t(Object(a.d)(r))},deselectGroups:function(r){return t(Object(a.c)(r))}}})(l)},179:function(t,r){t.exports=c},180:function(t,r,e){"use strict";var n=e(181),o=e.n(n);r.a=function(t,r){var e=t.displayGroups,n=t.handleGroupCheck,u=t.handleGroupUncheck,a=t.selectedGroups,c=t.sortField;return e.map(function(t){return r(o.a,{checked:!!a[t.id],group:t,key:t.id,sortField:c,onCheckGroup:n,onUncheckGroup:u})})}},181:function(t,r){t.exports=i},24:function(t,r,e){"use strict";function n(t){return 0===Object.keys(t).length&&t.constructor===Object}function o(t,r){return s.apply(null,arguments)}function u(t,r){return d.apply(null,arguments)}e.d(r,"a",function(){return n}),e.d(r,"d",function(){return i}),e.d(r,"b",function(){return o}),e.d(r,"c",function(){return u});var a=e(0),c=e(7),i=Object(c.a)(function(t,r){var e=a.a({},r);return delete e[t],e}),s=Object(c.a)(function(t,r){return Object.keys(r).reduce(function(e,n){return e[n]=t(r[n],n,r),e},{})}),d=Object(c.a)(function(t,r){return Object.keys(r).reduce(function(e,n){return t(r[n],n,r)&&(e[n]=r[n]),e},{})})},241:function(t,r,e){"use strict";e.d(r,"a",function(){return n}),e.d(r,"b",function(){return o});var n="CHANGE_SEARCH_STRING",o=function(t){return{type:n,payload:t}}},242:function(t,r,e){"use strict";e.d(r,"a",function(){return a}),e.d(r,"b",function(){return c});var n=e(14),o=e(24),u=e(98),a=function(t,r){return Object(n.a)(Object(u.a)(t))(r)},c=Object(n.a)(Object(o.d)("thumbURI"))},243:function(t,r,e){"use strict";e.d(r,"a",function(){return o}),e.d(r,"b",function(){return u});var n=e(36),o="GOTO_PAGE",u=function(t){return function(r,e){var u=e();r({type:o,payload:t}),r(Object(n.d)({start:(t-1)*u.config.groupsPerPage+1}))}}},244:function(t,r,e){"use strict";e.d(r,"a",function(){return n}),e.d(r,"b",function(){return o});var n="TOGGLE_SORT_DROPDOWN",o=function(){return{type:n}}},28:function(t,r,e){"use strict";var n=e(112);e.d(r,"a",function(){return n.a}),e.d(r,"b",function(){return n.b}),e.d(r,"c",function(){return n.c})},286:function(t,r,e){"use strict";e.r(r),e.d(r,"GroupBrowser",function(){return p});var n=e(0),o=e(1),u=e(111);e.d(r,"reducers",function(){return u.b}),e.d(r,"initialState",function(){return u.a});var a=e(28);e.d(r,"deselectGroups",function(){return a.a}),e.d(r,"selectGroups",function(){return a.c}),e.d(r,"search",function(){return a.b});var c=e(243),i=e(75),s=e.n(i),d=e(176),l=e(177),p=function(t){function r(r){var e=t.call(this,r)||this;return e.handlePageChange=e.handlePageChange.bind(e),e}return n.b(r,t),r.prototype.render=function(t){return t("div",{class:"group-browser__container"},t(d.a,{key:"group-browser-search-area"}),t(l.a,{key:"group-browser-results-panel"}),t(s.a,{key:"group-browse-pager",numPages:this.props.groupsPerPage>this.props.currentTotal?1:Math.ceil(this.props.currentTotal/this.props.groupsPerPage),currentPage:this.props.currentPage,onPageChange:this.handlePageChange}))},r.prototype.handlePageChange=function(t){this.props.gotoPage(t)},r}(o.Component);r.default=Object(o.connect)(function(t){return{currentPage:t.ui.page.number,groupsPerPage:t.config.groupsPerPage,currentTotal:t.results.currentQuery.total}},function(t){return{gotoPage:function(r){return t(Object(c.b)(r))}}})(p)},30:function(t,r){t.exports=e},36:function(t,r,e){"use strict";e.d(r,"a",function(){return a}),e.d(r,"c",function(){return c}),e.d(r,"b",function(){return i}),e.d(r,"d",function(){return s});var n=e(0),o=e(242),u=e(12),a="LOADING_GROUPS",c="LOAD_GROUPS_SUCCESS",i="LOAD_GROUPS_FAILED",s=function(t){return function(r,e){r({type:a}),r(d(t)).then(function(t){var u=e();r({type:c,payload:n.a({},t,{results:t.results.map(function(t){return Object(o.a)(u.utils.portal,t)})})})},function(t){r({type:i,payload:t})})}},d=function(t){return function(r,e){var n=e(),o=n.utils,a=o.request,c=o.portal;return Object(u.e)(a,c,{q:n.config.baseQ+" "+n.parameters.searchString.current,num:n.config.groupsPerPage,sortField:n.parameters.sort.field,sortOrder:n.parameters.sort.order,start:t&&t.start?t.start:1})}}},53:function(t,r,e){"use strict";e.d(r,"b",function(){return o}),e.d(r,"a",function(){return u}),e.d(r,"d",function(){return a}),e.d(r,"c",function(){return c});var n=e(242),o="SELECT_GROUPS",u="DESELECT_GROUPS",a=function(t){return{type:o,payload:t.map(function(t){return Object(n.b)(t)})}},c=function(t){return{type:u,payload:t}}},56:function(t,r){t.exports=n},7:function(t,r,e){"use strict";function n(t){return function r(){for(var e=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.length>=t.length?t.call.apply(t,[this].concat(n)):function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return r.call.apply(r,[e].concat(n,t))}}}e.d(r,"a",function(){return n})},71:function(t,r,e){"use strict";e.d(r,"b",function(){return n}),e.d(r,"a",function(){return o}),e.d(r,"c",function(){return u}),e.d(r,"d",function(){return a});var n="CHANGE_SORT_ORDER",o="CHANGE_SORT_FIELD",u=function(t){return{type:o,payload:t}},a=function(t){return{type:n,payload:t}}},75:function(t,r){t.exports=o},76:function(t,r){t.exports=u},98:function(t,r,e){"use strict";e.d(r,"a",function(){return u});var n=e(0),o=e(7),u=Object(o.a)(function(t,r){return n.a({},r,{thumbURI:function(t,r){var e;return r.thumbnail&&(e=t.restUrl+"/community/groups/"+r.id+"/info/"+r.thumbnail+(t.credential?"?token="+t.credential.token:"")),e}(t,r)})})}})});