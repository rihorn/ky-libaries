// COPYRIGHT Â© 2018 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.10/esri/copyright.txt for details.

/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */

define(["../Component","dojo/i18n!../ItemBrowser/nls/resources","dojo/Deferred","dojo/promise/all","dojo/date/locale","../Buttons/SvgButton","../Loaders/LoaderBars","../Buttons/IconButton","../Filters/CategoriesFilter/index","../Buttons/Toggle","../Navigation/Pager/index","../Dropdowns/SortDropdown/index","../Dropdowns/TextOptionDropdown","dojo/_base/kernel","dojo/debounce","../Modals/Overlay","../Navigation/TabNav","../Modals/MobileWrap","../Filters/MapAreaFilter","../Filters/CreatedFilter/index","../Filters/ItemTypeFilter/index","../Filters/ModifiedFilter/index","../Filters/SharedFilter/index","../Filters/StatusFilter/index","../Filters/FolderFilter/index","../Filters/GroupFilter/index","../Filters/TagsFilter/index","../Dropdowns/AccordionDropdown/index","../Dropdowns/FilterController/index","../ItemCards/AnalysisCard/index","../Badges/Authoritative","../Badges/Deprecated","../Badges/LivingAtlas","../Badges/Marketplace","../Badges/OpenData","../Badges/Premium","../Badges/Subscriber","../ItemCards/MiniCard/index","../ItemCards/MiniCardRow/index"],function(e,t,r,n,i,a,o,s,c,u,l,p,d,f,h,g,m,b,y,v,O,S,C,T,_,k,j,A,I,R,w,F,L,x,E,D,P,M,G){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(t){return e[t]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=289)}([function(e,t,r){"use strict";function n(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}r.d(t,"b",function(){return n}),r.d(t,"a",function(){return a});var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";function n(e,t,r){var n,a,l=t.settings.utils.request,p=Object(o.b)({},t),d=l(p[0],p[1]).then(Object(s.a)(t),function(t){return e({type:O,payload:t})});if(r){var f=Object(o.a)(t,["access","contentstatus","categories"]);n=l(f[0],f[1]);var h=t.settings.config.customSections,y=t.parameters.section;if(Object(m.a)(y)||Object(g.e)(h,y)&&Object(m.a)(Object(g.b)(h,y))){var S=Object(o.c)(t,t.ui.tagsFilter.filterString);a=l(S[0],S[1])}}var C=[d,n,a].filter(function(e){return!!e});c(C).then(function(r){return e(function(e,t){var r=e.settings.utils.iconDir,n=Object(b.a)(e);return{type:v,payload:{search:i.a({},t[0].data,{results:t[0].data.results.map(function(e){return Object(u.a)(n,r,e)})}),aggregations:t[1]&&t[1].data&&t[1].data.aggregations?{counts:t[1].data.aggregations.counts.slice().concat(t[2]&&t[2].data&&t[2].data.aggregations?t[2].data.aggregations.counts.slice():[]),countInfo:{section:e.parameters.section,group:e.parameters.filter.group,custom:e.settings.config.customSections.filter(function(t){return t.name===e.parameters.section})[0]}}:void 0}}}(t,r))},function(t){return e({type:O,payload:t})})}r.d(t,"a",function(){return y}),r.d(t,"c",function(){return v}),r.d(t,"b",function(){return O}),r.d(t,"d",function(){return S}),r.d(t,"f",function(){return C}),r.d(t,"e",function(){return T}),r.d(t,"g",function(){return _}),r.d(t,"h",function(){return k});var i=r(0),a=r(25),o=r(47),s=r(89),c=r(15),u=r(27),l=r(88),p=r(64),d=r(26),f=r(57),h=r(50),g=r(18),m=r(248),b=r(31),y="LOADING_CONTENT",v="LOADING_CONTENT_SUCCESS",O="LOADING_CONTENT_FAILED",S="LOADING_NEXT",C="LOADING_NEXT_SUCCESS",T="LOADING_NEXT_FAILED",_=function(e){return function(t,r){var n=r(),i=n.settings.utils.request,a=n.parameters.nextQuery.nextStart;t({type:S});var c=Object(o.b)({num:e,start:a},n);i(c[0],c[1]).then(Object(s.a)(n),function(e){return t(I(e))}).then(function(e){return t(A(n,e))},function(e){return t(I(e))})}},k=function(e){return function(t,r){var n=r();t({type:y}),n.settings.config.clearSelectionBetweenSearches&&t({type:a.a}),t(j(e))}},j=function(e){return function(t,r){var i=r(),a=i.parameters.section,o=i.settings.utils.portal.user,s=!!o;t(Object(l.b)()).then(function(u){"livingAtlas"===a?t(Object(p.d)(u)).then(function(){return n(t,r(),e)},function(){return t({type:O,payload:"Couldn't load the living atlas info."})}):"myContent"!==a&&"myGroups"!==a&&"myFavorites"!==a&&"subscription"!==a||!s?"myOrganization"===a&&s?t(Object(f.d)()).then(function(){return n(t,r(),e)},function(){return t({type:O,payload:"Couldn't load the organization info."})}):Object(g.e)(i.settings.config.customSections,a)?t(Object(h.e)()).then(function(){return n(t,r(),e)},function(){return t({type:O,payload:"Couldn't load the custom section info."})}):n(t,i,e):c([t(Object(d.l)())].concat(s&&o.orgId?[t(Object(f.d)())]:[])).then(function(){return n(t,r(),e)},function(){return t({type:O,payload:"Couldn't load the user info."})})})}},A=function(e,t){var r=e.settings.utils.iconDir,n=Object(b.a)(e);return{type:C,payload:i.a({},t.data,{results:t.data.results.map(function(e){return Object(u.a)(n,r,e)})})}},I=function(e){return{type:T,payload:e}}},function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"m",function(){return i}),r.d(t,"h",function(){return a}),r.d(t,"i",function(){return o}),r.d(t,"l",function(){return s}),r.d(t,"e",function(){return c}),r.d(t,"g",function(){return u}),r.d(t,"k",function(){return l}),r.d(t,"b",function(){return p}),r.d(t,"o",function(){return d}),r.d(t,"f",function(){return f}),r.d(t,"d",function(){return h}),r.d(t,"p",function(){return g}),r.d(t,"j",function(){return m}),r.d(t,"n",function(){return b}),r.d(t,"q",function(){return y}),r.d(t,"a",function(){return v}),r.d(t,"s",function(){return O}),r.d(t,"C",function(){return S}),r.d(t,"w",function(){return C}),r.d(t,"B",function(){return T}),r.d(t,"x",function(){return _}),r.d(t,"y",function(){return k}),r.d(t,"u",function(){return j}),r.d(t,"A",function(){return A}),r.d(t,"r",function(){return I}),r.d(t,"E",function(){return R}),r.d(t,"t",function(){return w}),r.d(t,"v",function(){return F}),r.d(t,"F",function(){return L}),r.d(t,"z",function(){return x}),r.d(t,"D",function(){return E}),r.d(t,"G",function(){return D});var n="UPDATE_CUSTOM_FILTER",i="UPDATE_ORG_GROUP_FILTER",a="UPDATE_LIVING_ATLAS_CATEGORIES_FILTER",o="UPDATE_LIVING_ATLAS_REGION_FILTER",s="UPDATE_ORG_CATEGORIES_FILTER",c="UPDATE_GROUP_CATEGORIES_FILTER",u="UPDATE_ITEM_TYPE_FILTER",l="UPDATE_MODIFIED_FILTER",p="UPDATE_CREATED_FILTER",d="UPDATE_SHARED_FILTER",f="UPDATE_GROUP_FILTER",h="UPDATE_FOLDER_FILTER",g="UPDATE_STATUS_FILTER",m="UPDATE_MAP_AREA_FILTER",b="UPDATE_SEARCH_ORG_FILTER",y="UPDATE_TAGS_FILTER",v="CLEAR_ALL_FILTERS",O=function(e,t){return{type:n,payload:{index:e,filter:t}}},S=function(e){return{type:i,payload:e}},C=function(e){return{type:u,payload:e}},T=function(e){return{type:s,payload:e}},_=function(e){return{type:a,payload:e}},k=function(e){return{type:o,payload:e}},j=function(e){return{type:c,payload:e}},A=function(e,t){return{type:l,payload:{section:e,modified:t}}},I=function(e,t){return{type:p,payload:{section:e,created:t}}},R=function(e){return{type:d,payload:e}},w=function(e){return{type:h,payload:e}},F=function(e){return{type:f,payload:e}},L=function(e){return{type:g,payload:e}},x=function(e){return{type:m,payload:e}},E=function(e){return{type:b,payload:e}},D=function(e){return{type:y,payload:e}}},,function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r(165);r.d(t,"g",function(){return n.a}),r.d(t,"i",function(){return n.b});var i=r(97);r.d(t,"b",function(){return i.a}),r.d(t,"c",function(){return i.b}),r.d(t,"d",function(){return i.c}),r.d(t,"e",function(){return i.d}),r.d(t,"f",function(){return i.e}),r.d(t,"h",function(){return i.f});var a=r(166);r.d(t,"j",function(){return a.a});var o="CLEAR_SELECTION_STATE"},function(e,t,r){"use strict";function n(e){return function t(){for(var r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.length>=e.length?e.call.apply(e,[this].concat(n)):function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.call.apply(t,[r].concat(n,e))}}}r.d(t,"a",function(){return n})},,,,,function(e,t,r){"use strict";function n(e){return e.reduce(function(e,t){return t&&t.relatedItems?e.concat(t.relatedItems.map(function(e){return e.id})):e},[])}function i(e,t,r){return e(t,{query:a.a({f:"json"},r)}).then(function(e){return e.data})}r.d(t,"i",function(){return s}),r.d(t,"f",function(){return c}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return l}),r.d(t,"g",function(){return p}),r.d(t,"h",function(){return d}),r.d(t,"a",function(){return f}),r.d(t,"b",function(){return h}),r.d(t,"j",function(){return g}),r.d(t,"k",function(){return m}),r.d(t,"l",function(){return b}),r.d(t,"e",function(){return y}),r.d(t,"m",function(){return i});var a=r(0),o=r(15),s=function(e,t,r){return i(e,t.restUrl+"/portals/self",{culture:r,default:!0})},c=function(e,t,r){return i(e,t.restUrl+"/content/items/"+r+"/data")},u=function(e,t,r){return i(e,t.restUrl+"/community/groups",{q:r})},l=function(e,t,r){return i(e,t.restUrl+"/community/groups/"+r+"/categorySchema")},p=function(e,t,r){return i(e,t.restUrl+"/portals/"+(r||t.id)+"/categorySchema")},d=function(e,t,r){return i(e,location.protocol+"//"+t.portalHostname+"/sharing/rest/portals/"+(r||t.id))},f=function(e,t,r){return e(t.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+t.id+" AND access:public",num:100,start:r||1,sortField:"title",sortOrder:"asc"}}).then(function(r){return r.data.total>r.data.start+r.data.num?f(e,t,r.data.start+r.data.num).then(function(e){return a.a({},e,{data:a.a({},e.data,{results:r.data.results.concat(e.data.results)})})}):r})},h=function(e,t,r,a){return e(t.restUrl+"/community/users/"+r+"/provisionedListings",{query:{f:"json",num:100,start:a||1}}).then(function(a){var s=a.data.provisionedListings.map(function(r){return i(e,t.restUrl+"/content/items/"+(r.id||r.itemId)+"/relatedItems?relationshipType=Listed2ImplicitlyListed&direction=forward").then(function(e){return e},function(e){})});return a.data.total>a.data.start+a.data.num?h(e,t,r,a.data.start+a.data.num).then(function(e){return o(s).then(function(t){return e.concat(a.data.provisionedListings.filter(function(e){return!!e.itemId}).map(function(e){return e.itemId}).concat(n(t)))})}):o(s).then(function(e){return a.data.provisionedListings.filter(function(e){return!!e.itemId}).map(function(e){return e.itemId}).concat(n(e))})})},g=function(e,t,r){return i(e,t.restUrl+"/community/users/"+(r||t.user.username))},m=function(e,t,r){return i(e,t.restUrl+"/content/users/"+(r||t.user.username))},b=function(e,t,r){return i(e,t.restUrl+"/content/groups/"+r)},y=function(e,t,r){return i(e,t.restUrl+"/community/groups",r)}},function(e,t){e.exports=r},function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.reduceRight(function(e,t){return t(e)},t)}}r.d(t,"a",function(){return n})},function(e,t){e.exports=n},,,function(e,t,r){"use strict";function n(e){return!!u(e)||!!l(e)}function i(e,t){return e.filter(function(e){return e.name===t})[0]}function a(e,t){return!!i(e,t)}r.d(t,"a",function(){return s}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return l}),r.d(t,"f",function(){return n}),r.d(t,"b",function(){return i}),r.d(t,"e",function(){return a});var o=r(7),s=function(e){return e.filters?e.filters.filter(function(e){return"object"==typeof e&&("group"===e.type||"org"===e.type)}):[]},c=Object(o.a)(function(e,t){if(t.filters)return t.filters.reduce(function(t,r){return"object"==typeof r&&r.type===e?r:t},void 0)}),u=c("group"),l=c("org")},,function(e,t){e.exports=i},,function(e,t){e.exports=a},function(e,t,r){"use strict";function n(e){return Object(s.f)(e,function(e){return e.count&&delete e.count,e})}function i(e,t,r){if(t)return e.counts.filter(function(e){return e.fieldName===r})[0].fieldValues.forEach(function(e){var r=e.value,n=e.count,i=r.split("/").slice(1),a=function(e,t){return Object(s.d)(e,t)}(t,i);a&&(a.count=n)}),t}function a(e){var t=Object(s.c)("categories","title",{title:"root",categories:e});return Object(s.f)(t,function(e){return o.a({},e,{value:e.value.toLowerCase(),displayName:e.displayName?e.displayName:e.value,tooltip:e.description?e.description:void 0})}).children}r.d(t,"a",function(){return n}),r.d(t,"c",function(){return i}),r.d(t,"b",function(){return a});var o=r(0),s=r(39)},function(e,t,r){"use strict";function n(e){return 0===Object.keys(e).length&&e.constructor===Object}function i(e,t){return u.apply(null,arguments)}function a(e,t){return l.apply(null,arguments)}r.d(t,"a",function(){return n}),r.d(t,"d",function(){return c}),r.d(t,"b",function(){return i}),r.d(t,"c",function(){return a});var o=r(0),s=r(7),c=Object(s.a)(function(e,t){var r=o.a({},t);return delete r[e],r}),u=Object(s.a)(function(e,t){return Object.keys(t).reduce(function(r,n){return r[n]=e(t[n],n,t),r},{})}),l=Object(s.a)(function(e,t){return Object.keys(t).reduce(function(r,n){return e(t[n],n,t)&&(r[n]=t[n]),r},{})})},function(e,t,r){"use strict";r.d(t,"e",function(){return i}),r.d(t,"h",function(){return a}),r.d(t,"f",function(){return o}),r.d(t,"g",function(){return s}),r.d(t,"b",function(){return c}),r.d(t,"c",function(){return u}),r.d(t,"a",function(){return l}),r.d(t,"d",function(){return p}),r.d(t,"j",function(){return f}),r.d(t,"i",function(){return g});var n=r(27),i="SELECT_ITEM",a="SELECT_ITEM_SINGLE",o="SELECT_ITEM_ASYNC",s="SELECT_ITEM_ASYNC_FAILED",c="DESELECT_ITEM",u="SELECT_ALL",l="DESELECT_ALL",p="SELECT_ALL_FROM_QUERY_SUCCESS",d=function(e){return{type:i,payload:e}},f=function(e){return function(t,r){var i=r();if(i.settings.config.asynchronousItemSelect){t(m(e));var a=i.settings.config.onSelect([Object(n.b)(e)]);a&&a.then?a.then(function(){t(i.settings.config.singleItemSelect?h(e):d(e))},function(){t({type:s,payload:e})}):console.error("If asynchronous item selection is enabled, the onSelect function in the item browser config must return a dojo deferred.")}else i.settings.config.singleItemSelect?(t(h(e)),i.settings.config.onSelect([Object(n.b)(e)])):(t(d(e)),i.settings.config.onSelect([Object(n.b)(e)]))}},h=function(e){return{type:a,payload:e}},g=function(e){return function(t,r){var i=r();t({type:c,payload:e}),i.settings.config.onDeselect([Object(n.b)(e)])}},m=function(e){return{type:o,payload:e}}},function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"c",function(){return c}),r.d(t,"b",function(){return u}),r.d(t,"d",function(){return l}),r.d(t,"h",function(){return p}),r.d(t,"i",function(){return d}),r.d(t,"j",function(){return f}),r.d(t,"e",function(){return h}),r.d(t,"g",function(){return g}),r.d(t,"f",function(){return m}),r.d(t,"l",function(){return b}),r.d(t,"k",function(){return v}),r.d(t,"m",function(){return O});var n=r(15),i=r(13),a=r(12),o=r(3),s="ADD_TO_FAVORITES",c="ADD_TO_FAVORITES_SUCCESS",u="ADD_TO_FAVORITES_FAIL",l="LOADING_USER_INFO",p="UPDATE_GROUP_CATEGORIES",d="UPDATE_USER_INFO",f="UPDATE_USER_INFO_FAILED",h="REMOVE_FROM_FAVORITES",g="REMOVE_FROM_FAVORITES_SUCCESS",m="REMOVE_FROM_FAVORITES_FAIL",b=function(){return function(e,t){var r=t(),o=r.parameters.filter.group,s=r.results.user.groupCategories;if("loaded"===r.results.user.status)return o&&!s[o.id]?e(y(o.id)):(new i).resolve();if("failed"===r.results.user.status)return(new i).reject();e({type:l});var c=r.settings.utils,u=c.request,p=c.portal;return n([Object(a.j)(u,p).then(function(e){return e.groups.map(function(e){return{id:e.id,title:e.title}})}),Object(a.k)(u,p).then(function(e){return e.folders.map(function(e){return{id:e.id,title:e.title}})}),Object(a.l)(u,p,p.user.favGroupId).then(function(e){return e.items.reduce(function(e,t){return e[t.id]=!0,e},{})}),Object(a.b)(u,p,p.user.username).then(function(e){return e},function(e){return[]})].concat(o?[e(y(o.id))]:[])).then(function(t){e({type:d,payload:{groups:t[0],folders:t[1],favorites:t[2],provisionedContent:t[3]}})},function(t){console.error(t),e({type:f})})}},y=function(e){return function(t,r){var n=r().settings.utils,i=n.request,o=n.portal;return Object(a.d)(i,o,e).then(function(r){var n=r.categorySchema;t({type:p,payload:{id:e,categorySchema:n}})})}},v=function(e){return function(t,r){var n=r(),i=n.settings.utils.portal,a=i.user.favGroupId,o=i.restUrl+"/content/items/"+e.id+"/share",l={f:"json",everyone:e.access&&"public"===e.access||e.sharing&&e.sharing.access&&"public"===e.sharing.access,org:e.access&&"org"===e.access||e.sharing&&e.sharing.access&&"org"===e.sharing.access||!1,groups:[a],items:[e.id]};t({type:s,payload:e}),n.settings.utils.request(o,{method:"post",query:l}).then(function(r){t({type:c,payload:e})},function(r){console.error(r),t({type:u,payload:e})})}},O=function(e){return function(t,r){var n=r(),i=n.settings.utils.portal,a=i.user.favGroupId,s=i.restUrl+"/content/items/"+e.id+"/unshare",c={f:"json",everyone:!1,org:!1,groups:[a],items:[e.id]};t({type:h,payload:e}),n.settings.utils.request(s,{method:"post",query:c}).then(function(s){function c(){t({type:g,payload:e})}"myFavorites"===(n=r()).parameters.section?function r(){n.settings.utils.request(i.restUrl+"/search",{query:{f:"json",q:"(id:"+e.id+") (group:"+a+")"},method:"get"}).then(function(e){e.data.total>0?setTimeout(function(){r()},250):(c(),t(Object(o.h)()))},function(e){console.error(e),c()})}():c()},function(r){t({type:m,payload:e})})}}},function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r.d(t,"b",function(){return p});var n=r(14),i=r(24),a=r(44),o=r(43),s=r(42),c=r(41),u=r(40),l=function(e,t,r){return Object(n.a)(Object(u.a)(e),Object(c.a)(e),Object(s.a)(t),o.a,a.a)(r)},p=Object(n.a)(Object(i.d)("patchedDescription"),Object(i.d)("thumbURI"),Object(i.d)("iconURI"),Object(i.d)("displayName"),Object(i.d)("badges"))},,,function(e,t){e.exports=o},function(e,t,r){"use strict";function n(e){var t=Object(i.b)(e.settings.config.customSections,e.parameters.section);return t&&t.portal?Object(a.b)(t.portal):e.settings.utils.portal}r.d(t,"a",function(){return n});var i=r(18),a=r(34)},,,function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a});var n=r(0),i=function(e){return e.urlKey?location.protocol+"//"+e.urlKey+"."+e.customBaseUrl:location.protocol+"//"+e.portalHostname},a=function(e){return n.a({},e,{baseUrl:i(e)})}},,,function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i}),r.d(t,"d",function(){return a}),r.d(t,"c",function(){return o});var n="CHANGE_SORT_ORDER",i="CHANGE_SORT_FIELD",a=function(e){return{type:n,payload:e}},o=function(e){return{type:i,payload:e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return a}),r.d(t,"a",function(){return o}),r.d(t,"e",function(){return s}),r.d(t,"f",function(){return c}),r.d(t,"g",function(){return u});var n="MAXIMIZE_DLG",i="MINIMIZE_DLG",a="TOGGLE_EXPANDED_FILTERS",o="CLOSE_FULLSCREEN_BROWSER",s="TOGGLE_EXPANDED_SORT",c=function(){return{type:a}},u=function(){return{type:s}}},function(e,t,r){"use strict";function n(e,t){return c("children","value",e,t)}function i(e,t){return function e(t,r,n,i){var a,o=n,s=n[t];return s&&0!==s.length?p.a({},o,(a={},a[t]=s.reduce(function(n,a){return-1!==i.indexOf(a[r])&&n.push(e(t,r,a,i)),n},[]),a)):p.a({},o)}("children","value",e,t)}function a(e){return function(e,t){var r,n=t,i=t[e];return i?p.a({},n,((r={})[e]=function t(r){return 0===r.length?[]:1!==r.length||r[0][e]?r.length>1?r.reduce(function(r,n){var i;if(!n[e])return r.push(n),r;var a=n;return r.push(p.a({},a,((i={})[e]=t(a[e]),i))),r},[]):t(r[0][e]):r}(i),r)):t}("children",e)}function o(e,t){return u("children",e,t)}function s(e,t,r,n){var i=r[e];return r[t]===n?r:i?i.reduce(function(r,i){return r||s(e,t,i,n)},void 0):void 0}function c(e,t,r,n){var i=r[e];if(i)return i.reduce(function(r,i){return i[t]===n[0]?1===n.length?i:c(e,t,i,n.slice(1)):r},void 0)}function u(e,t,r){var n,i=t;return r(p.a({},i,((n={})[e]=i[e]?i[e].map(function(t){return u(e,t,r)}):void 0,n)))}function l(e,t,r){return u(e,r,function(r){var n=r,i=r[t];if(delete r[t],r[e]){var a=r[e];return delete r[e],p.a({},n,{value:i,children:a})}return p.a({},n,{value:i})})}r.d(t,"d",function(){return n}),r.d(t,"g",function(){return i}),r.d(t,"e",function(){return a}),r.d(t,"f",function(){return o}),r.d(t,"a",function(){return s}),r.d(t,"b",function(){return c}),r.d(t,"c",function(){return l});var p=r(0)},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(0),i=r(7),a=Object(i.a)(function(e,t){return n.a({},t,{thumbURI:function(e,t){var r=e.baseUrl+"/home/js/arcgisonline/css/images/default_thumb.png";return t.thumbnail&&(r=e.restUrl+"/content/items/"+t.id+"/info/"+t.thumbnail+(e.credential?"?token="+e.credential.token:"")),r}(e,t)})})},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(0),i=r(7),a=Object(i.a)(function(e,t){return n.a({},t,{patchedDescription:function(e,t){return t.description?t.description.replace(/src=('|")js\/jsapi\/esri\//g,function(t){return"src="+('"'===t[4]?'"':"'")+e.baseUrl+"/home/js/jsapi/esri/"}):void 0}(e,t)})})},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(0),i=r(7),a=Object(i.a)(function(e,t){return n.a({},t,{iconURI:function(e,t,r){var n,i=t&&t.toLowerCase(),a=!1,o=!1,s=!1,c=!1;if(i.indexOf("service")>0||"feature collection"===i||"kml"===i||"wms"===i||"wmts"===i||"wfs"===i){var u=r.indexOf("Hosted Service")>-1;"feature service"===i||"feature collection"===i||"kml"===i||"wfs"===i?(c=r.indexOf("Table")>-1,a=r.indexOf("Route Layer")>-1,o=r.indexOf("Markup")>-1,n=(s=-1!==r.indexOf("Spatiotemporal"))&&c?"spatiotemporaltable":c?"table":a?"routelayer":o?"markup":s?"spatiotemporal":u?"featureshosted":"features"):n="map service"===i||"wms"===i||"wmts"===i?u||r.indexOf("Tiled")>-1||"wmts"===i?"maptiles":"mapimages":"scene service"===i?r.indexOf("Line")>-1?"sceneweblayerline":r.indexOf("3DObject")>-1?"sceneweblayermultipatch":r.indexOf("Point")>-1?"sceneweblayerpoint":r.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":r.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":r.indexOf("Polygon")>-1?"sceneweblayerpolygon":"sceneweblayer":"image service"===i?r.indexOf("Elevation 3D Layer")>-1?"elevationlayer":"imagery":"stream service"===i?"streamlayer":"vector tile service"===i?"vectortile":"datastore catalog service"===i?"datastorecollection":"geocoding service"===i?"geocodeservice":"geoprocessing service"===i&&r.indexOf("Web Tool")>-1?"tool":"layers"}else n="web map"===i||"cityengine web scene"===i?"maps":"web scene"===i?r.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===i||"mobile application"===i||"application"===i||"operation view"===i||"desktop application"===i?"apps":"map document"===i||"map package"===i||"published map"===i||"scene document"===i||"globe document"===i||"basemap package"===i||"mobile basemap package"===i||"mobile map package"===i||"project package"===i||"project template"===i||"pro map"===i||"layout"===i||"layer"===i&&r.indexOf("ArcGIS Pro")>-1||"explorer map"===i&&r.indexOf("Explorer Document")>-1?"mapsgray":"service definition"===i||"csv"===i||"shapefile"===i||"cad drawing"===i||"geojson"===i||"360 vr experience"===i||"netcdf"===i?"datafiles":"explorer add in"===i||"desktop add in"===i||"windows viewer add in"===i||"windows viewer configuration"===i?"appsgray":"arcgis pro add in"===i||"arcgis pro configuration"===i?"addindesktop":"rule package"===i||"file geodatabase"===i||"csv collection"===i||"kml collection"===i||"windows mobile package"===i||"map template"===i||"desktop application template"===i||"arcpad package"===i||"code sample"===i||"form"===i||"document link"===i||"vector tile package"===i||"operations dashboard add in"===i||"rules package"===i||"image"===i||"workflow manager package"===i||"explorer map"===i&&r.indexOf("Explorer Mapping Application")>-1||r.indexOf("Document")>-1?"datafilesgray":"network analysis service"===i||"geoprocessing service"===i||"geodata service"===i||"geometry service"===i||"geoprocessing package"===i||"locator package"===i||"geoprocessing sample"===i||"workflow manager service"===i||"raster function template"===i?"toolsgray":"layer"===i||"layer package"===i||"explorer layer"===i?"layersgray":"scene package"===i?"scenepackage":"tile package"===i?"tilepackage":"task file"===i?"taskfile":"report template"===i?"report-template":"statistical data collection"===i?"statisticaldatacollection":"insights workbook"===i?"workbook":"insights model"===i?"insightsmodel":"insights page"===i?"insightspage":"hub initiative"===i?"hubinitiative":"hub page"===i?"hubpage":"hub site application"===i?"hubsite":"relational database connection"===i?"relationaldatabaseconnection":"big data file share"===i?"datastorecollection":"image collection"===i?"imagecollection":"desktop style"===i?"desktopstyle":"style"===i?"style":"dashboard"===i?"dashboard":"maps";return e+"/"+n+"16.png"}(e,t.type,t.typeKeywords?t.typeKeywords:[])})})},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(0),i=function(e){return n.a({},e,{displayName:function(e){var t=e.type,r=e.typeKeywords||[],n=t;return"Feature Service"===t||"Feature Collection"===t?n=r.indexOf("Table")>-1?"Table":r.indexOf("Route Layer")>-1?"Route Layer":r.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===t?n=r.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":"Imagery Layer":"Scene Service"===t?n="Scene Layer":"Scene Package"===t?n="Scene Layer Package":"Stream Service"===t?n="Feature Layer":"Geocoding Service"===t?n="Locator":"Microsoft Powerpoint"===t?n="Microsoft PowerPoint":"GeoJson"===t?n="GeoJSON":"Globe Service"===t?n="Globe Layer":"Vector Tile Service"===t?n="Tile Layer":"netCDF"===t?n="NetCDF":"Map Service"===t?n=-1===r.indexOf("Spatiotemporal")&&(r.indexOf("Hosted Service")>-1||r.indexOf("Tiled")>-1)?"Tile Layer":"Map Image Layer":t&&t.toLowerCase().indexOf("add in")>-1?n=t.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===t&&(n="Big Data File Share"),n}(e)})}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(0),i=function(e){return n.a({},e,{badges:function(e){var t=[],r=e.typeKeywords?e.typeKeywords:[];return e.contentStatus&&("org_authoritative"===e.contentStatus||"public_authoritative"===e.contentStatus?t.push("authoritative"):"deprecated"===e.contentStatus&&t.push("deprecated")),e.groupDesignations&&e.groupDesignations.indexOf("livingatlas")>-1&&t.push("livingAtlas"),r.indexOf("Requires Credits")>-1?t.push("premium"):r.indexOf("Requires Subscription")>-1&&t.push("subscriber"),t}(e)})}},function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i});var n={maps:'(type:("Project Package" OR "Windows Mobile Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Web Map" OR "CityEngine Web Scene" OR "Map Document" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Template") -type:("Web Mapping Application" OR "Layer Package"))',webMaps:'(type:("Web Map" OR "CityEngine Web Scene") -type:("Web Mapping Application"))',mapFiles:'(type:("Map Document" OR "Windows Mobile Package" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Map Template"))',layers:'(type:("Scene Service" OR "Feature Collection" OR "Route Layer" OR "Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "Feature Service" OR "Stream Service" OR "Map Service" OR "Vector Tile Service" OR "Image Service" OR "WMS" OR "WFS" OR "WMTS" OR "KML" OR typekeywords:"OGC" OR typekeywords:"Geodata Service" OR "Globe Service" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Relational Database Connection") -type:("Web Mapping Application" OR "Geodata Service"))',featureLayers:'(type:("Feature Collection" OR "Feature Service" OR "Stream Service" OR "WFS") -typekeywords:"Table")',tileLayers:'(type:("WMTS" OR "Map Service" OR "Vector Tile Service") typekeywords:("Hosted" OR "Tiled"))',mapImageLayers:'(type:("Map Service" OR "WMS") -typekeywords:("Tiled") -type:("Web Map" OR "Web Mapping Application" OR "Shapefile"))',imageryLayers:'(type:"Image Service")',sceneLayers:'(type:"Scene Service")',tables:"(typekeywords:Table)",layerFiles:'(type:("Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Microsoft Excel") -type:("Explorer Maps" OR "Map Documents"))',scenes:'(-type:"CityEngine Web Scene" type:"Web Scene")',apps:'(type:("Code Sample" OR "Web Mapping Application" OR "Mobile Application" OR "Application" OR "Desktop Application Template" OR "Desktop Application" OR "Operation View" OR "Dashboard" OR "Operations Dashboard Extension" OR "Workforce Project" OR "Insights Workbook" OR "Insights Page" OR "Insights Model" OR "Hub Page" OR "Hub Initiative" OR "Hub Site Application"))',webApps:'(type:("Web Mapping Application" OR "Dashboard"))',mobileApps:'(type:"Mobile Application")',desktopApps:'(type:"Desktop Application" -type:"Desktop Application Template")',tools:'((typekeywords:"tool" OR type:"Raster function template" OR type:"Geodata Service" OR type:"Workflow Manager Package" OR type:"Rule Package" OR type:"Operations Dashboard Add In" OR type:"Workflow Manager Service" OR type:"ArcGIS Pro Configuration") -type:"KML")',locators:'(type:("Geocoding Service" OR "Locator Package"))',geodatabaseAccess:'(type:"Geodata Service")',geometricOperations:'(type:"Geometry Service")',geoprocessingTasks:'(type:("Geoprocessing Service" OR "Geoprocessing Package" OR "Geoprocessing Sample"))',networkAnalysis:'(type:"Network Analysis Service")',files:'((typekeywords:"Document" OR type:"Image" OR type:"Layout" OR type:"Desktop Style" OR type:"Project Template" OR type:"Report Template" OR type:"Statistical Data Collection" OR type:"360 VR Experience" OR type:"netCDF") -type:("Map Document" OR "Image Service" OR "Explorer Document" OR "Explorer Map" OR "Globe Document" OR "Scene Document" OR "Microsoft Excel"))',documents:'(typekeywords:"Document" -type:"PDF")',images:'(type:("Image" OR "360 VR Experience") -type:"Image Service")',pdfs:'(type:"PDF")',webTools:'(type:"Geoprocessing Service" AND typekeywords: "Web Tool")',notebooks:'type:("Notebook") OR typekeywords:("Notebook" OR "Jupyter Notebook")'
},i=["Web Map","CityEngine Web Scene","Web Scene","360 VR Experience","Pro Map","Feature Service","Map Service","Image Service","KML","KML Collection","WFS","WMTS","Feature Collection","Feature Collection Template","Vector Tile Service","Scene Service","Relational Database Connection","Web Mapping Application","Mobile Application","Code Attachment","Operations Dashboard Add In","Native Application","Native Application Template","Native Application Installer","Workforce Project","Form","Insights Workbook","Insights Model","Insights Page","Dashboard","Hub Initiative","Hub Site Application","Hub Page","AppBuilder Widget Package","Symbol Set","Color Set","Shapefile","File Geodatabase","CSV","CAD Drawing","Service Definition","Microsoft Word","Microsoft Powerpoint","Microsoft Excel","PDF","Image","Visio Document","iWork Keynote","iWork Pages","iWork Numbers","Report Template","Statistical Data Collection","Map Document","Map Package","Mobile Basemap Package","Mobile Map Package","Tile Package","Vector Tile Package","Project Package","Task File","ArcPad Package","Explorer Map","Globe Document","Scene Document","Published Map","Map Template","Windows Mobile Package","Pro Map","Layout","Project Template","Layer","Layer Package","Explorer Layer","Scene Package","Image Collection","Desktop Style","Geoprocessing Package","Geoprocessing Package (Pro version)","Geoprocessing Sample","Locator Package","Rule Package","Raster function template","ArcGIS Pro Configuration","Workflow Manager Package","Desktop Application","Desktop Application Template","Code Sample","Desktop Add In","Explorer Add In","ArcGIS Pro Add In","Geometry Service","Geocoding Service","Network Analysis Service","Geoprocessing Service","Workflow Manager Service"]},function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return s}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return u});var n=r(47),i=r(27),a=r(89),o="CHANGE_PAGE_SUCCESS",s="CHANGE_PAGE_FAIL",c="CHANGING_PAGE",u=function(e){return function(t,r){var u=r();t({type:c,payload:e});var l=u.settings.utils,p=l.portal,d=l.iconDir,f=u.settings.utils.request,h=u.settings.config.resultsPerQuery,g=h*e-h,m=Object(n.b)({num:h,start:g},u);f(m[0],m[1]).then(Object(a.a)(u),function(e){return t({type:s,payload:{err:e}})}).then(function(r){t({type:o,payload:{organizations:r.data.organizations,displayItems:r.data.results.map(function(e){return Object(i.a)(p,d,e)}),page:e}})},function(e){return t({type:s,payload:{err:e}})})}}},function(e,t,r){"use strict";function n(e,t){var r=["",{method:"get",query:t.settings.config.addRequestParameters?o.a({f:"json",q:Object(u.b)(t),num:e.num?e.num:t.settings.config.resultsPerQuery,sortOrder:t.parameters.sort.order,start:e.start?e.start:1},t.settings.config.addRequestParameters()):{f:"json",q:Object(u.b)(t),num:e.num?e.num:t.settings.config.resultsPerQuery,sortOrder:t.parameters.sort.order,start:e.start?e.start:1}}];return d(t)(r)}function i(e,t){var r=["",{method:"get",query:{f:"json",q:Object(u.a)(e),num:0,countFields:t.join(", "),countSize:200}}];return f(e)(r)}function a(e,t){var r=["",{method:"get",query:{f:"json",q:Object(u.c)(e,t),num:0,countFields:"tags",countSize:200}}];return f(e)(r)}r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i}),r.d(t,"c",function(){return a});var o=r(0),s=r(14),c=r(7),u=r(94),l=r(31),p=r(18),d=function(e){return Object(s.a)(h(e),g(e),m(e))},f=function(e){return Object(s.a)(m(e),b(e))},h=Object(c.a)(function(e,t){var r=t[0],n=t[1],i=e.parameters.sort.field;return"relevance"!==i?[r,o.a({},n,{query:o.a({},n.query,{sortField:i})})]:[r,n]}),g=Object(c.a)(function(e,t){var r=t[0],n=t[1];if(e.parameters.filter.searchMapArea){var i=e.parameters.extent.area,a=i.minx+","+i.miny+","+i.maxx+","+i.maxy;return[r,o.a({},n,{query:o.a({},n.query,{bbox:a})})]}return[r,n]}),m=Object(c.a)(function(e,t){t[0];var r=t[1],n=e.parameters,i=n.section,a=n.filter,o=Object(l.a)(e),s=o.restUrl+"/search";if("myGroups"===i&&a.group)s=o.restUrl+"/content/groups/"+a.group.id+"/search",a.groupCategories&&(s=s+"?categories="+encodeURIComponent(JSON.stringify([a.groupCategories.value])));else if("livingAtlas"===i&&e.results.livingAtlas.groupId)s=o.restUrl+"/content/groups/"+e.results.livingAtlas.groupId+"/search",a.livingAtlasCategories?(s=s+"?categories="+encodeURIComponent(JSON.stringify([a.livingAtlasCategories.value])),a.livingAtlasRegion&&(s=s+"&categories="+encodeURIComponent(JSON.stringify([a.livingAtlasRegion.value])))):a.livingAtlasRegion&&(s=s+"?categories="+encodeURIComponent(JSON.stringify([a.livingAtlasRegion.value])));else if(!a.orgCategories||"myOrganization"!==i&&"myContent"!==i){var c=Object(p.b)(e.settings.config.customSections,i);if(c){Object(p.d)(c)&&a.orgCategories&&(s=s+"?categories="+encodeURIComponent(JSON.stringify([a.orgCategories.value])));var u=Object(p.c)(c);u&&(s=o.restUrl+"/content/groups/"+u.id+"/search",a.groupCategories&&(s=s+"?categories="+encodeURIComponent(JSON.stringify([a.groupCategories.value]))))}}else s=s+"?categories="+encodeURIComponent(JSON.stringify([a.orgCategories.value]));return[s,r]}),b=Object(c.a)(function(e,t){var r=t[0],n=t[1],i=e.parameters.section,a=Object(p.b)(e.settings.config.customSections,i);return"myGroups"===i&&e.parameters.filter.group||"livingAtlas"===i&&e.results.livingAtlas.groupId||a&&Object(p.c)(a)?[r,o.a({},n,{query:o.a({},n.query,{countFields:n.query.countFields?n.query.countFields.replace("categories","groupcategories"):void 0})})]:[r,n]})},function(e,t,r){"use strict";r.d(t,"b",function(){return l}),r.d(t,"a",function(){return p}),r.d(t,"c",function(){return d});var n=r(0),i=r(15),a=r(13),o=r(12),s=r(308),c=r(27),u=r(31),l="UPDATE_FULL_ITEM_DETAILS",p="FETCH_FULL_ITEM_DETAILS_FAILED",d=function(e){return function(t,r){var d=r(),f=Object(u.a)(d),h=d.settings.utils.request,g=[];g.push(Object(o.j)(h,f,e.owner).then(function(e){return Object(s.a)(f,e)},function(e){throw e}));var m=f.restUrl+"/content/items/"+e.id;if(f.user&&e.owner===f.user.username){var b=f.user.username;m=f.restUrl+"/content/users/"+b+"/items/"+e.id}g.push(Object(o.m)(h,m).then(function(e){if(e.item&&e.sharing){var t=new a;return Object(o.m)(h,f.restUrl+"/community/groups",{q:"id: "+e.sharing.groups.map(function(e){return'"'+e+'"'}).join(" OR ")}).then(function(r){return t.resolve(n.a({},Object(c.a)(f,d.settings.utils.iconDir,e.item),{sharing:e.sharing,sharedToGroups:r.results}))},function(e){return t.reject(e)}),t}return Object(c.a)(f,d.settings.utils.iconDir,e)},function(t){throw e.id})),i(g).then(function(e){t(function(e,t){return{type:l,payload:{item:e,owner:t}}}(e[1],e[0]))},function(e){t({type:p,payload:e})})}}},,function(e,t,r){"use strict";r.d(t,"a",function(){return u}),r.d(t,"c",function(){return l}),r.d(t,"d",function(){return p}),r.d(t,"b",function(){return d}),r.d(t,"e",function(){return f});var n=r(15),i=r(13),a=r(55),o=r(12),s=r(7),c=r(18),u="LOADING_CUSTOM_SECTION_INFO",l="UPDATE_CUSTOM_SECTION_SCHEMAS",p="UPDATE_CUSTOM_SECTION_INFO_FAILED",d="UPDATE_CUSTOM_SECTION_GROUPS",f=function(){return function(e,t){function r(t){console.error(t),e({type:p})}var o=t();if("loaded"===o.results.customSections.status)return(new i).resolve();if("failed"===o.results.customSections.status)return(new i).reject();e({type:u});var s=Object(a.c)("id",o.settings.config.customSections.filter(c.f).map(c.a).reduce(function(e,t){return e.concat(t)},[]));return h(e,t,s).then(function(){return o=t(),n(s.map(function(e){return g(o,e).then(function(t){return{id:e.id,type:e.type,response:t}})}))},r).then(function(t){return e({type:l,payload:t})},r)}},h=function(e,t,r){var a=t(),s=new i;if(r.length>0){var c=a.settings.utils,u=c.request,l=c.portal,p=r.filter(function(e){return"group"===e.type}).map(function(e){var t=e.id,r=e.fetchGroupIdByQuery;return Object(o.c)(u,l,r||"id:"+t).then(function(e){return e.results[0]})});n(p).then(function(r){var n=t();e({type:d,payload:{currentSection:n.parameters.section,customSections:n.settings.config.customSections,groups:r}}),s.resolve()})}else s.resolve();return s},g=Object(s.a)(function(e,t){var r=e.settings.utils,n=r.request,a=r.portal;if(t.staticSchema){var s=new i;return s.resolve({categorySchema:t.staticSchema}),s.then(function(e){return e})}return"group"===t.type?Object(o.d)(n,a,t.id):Object(o.g)(n,a,t.id)})},function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i});var n="CHANGE_SEARCH_SECTION",i=function(e){return function(t,r){var i=r();t({type:n,payload:{newSection:e,customSections:i.settings.config.customSections,customSectionGroupSort:i.results.customSections.groupSort}})}}},,,function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i}),r.d(t,"c",function(){return a});var n="CLOSING_DETAILS_PANE",i="CLOSE_DETAILS_PANE",a=function(){return{type:n}}},function(e,t,r){"use strict";function n(e){return e.filter(function(e){return e.length>0})}r.d(t,"b",function(){return a}),r.d(t,"c",function(){return o}),r.d(t,"a",function(){return n});var i=r(7),a=function(e,t,r){return r.indexOf(e)===t},o=Object(i.a)(function(e,t){var r={};return t.filter(function(t){return!r[t[e]]&&(r[t[e]]=!0,!0)})})},,function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return s}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return u});var n=r(15),i=r(13),a=r(12),o="LOADING_ORG_INFO",s="UPDATE_ORG_INFO",c="UPDATE_ORG_INFO_FAILED",u=function(){return function(e,t){var r=t();if("loaded"===r.results.organization.status)return(new i).resolve();if("failed"===r.results.organization.status)return(new i).reject();e({type:o});var u=r.settings.utils,l=u.request,p=u.portal;return n([Object(a.g)(l,p).then(function(e){return e.categorySchema}),Object(a.a)(l,p).then(function(e){return e.data.results})]).then(function(t){e({type:s,payload:{schema:t[0],groups:t[1]}})},function(t){console.error(t),e({type:c})})}}},function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"c",function(){return o}),r.d(t,"b",function(){return s}),r.d(t,"d",function(){return c}),r.d(t,"e",function(){return u});var n=r(186),i=r(47),a="LOADING_TAGS",o="LOADING_TAGS_SUCCESS",s="LOADING_TAGS_FAILED",c="UPDATE_TAGS_FILTER_STRING",u=function(e){return function(t,r){t({type:c,payload:e}),e.length>2&&l(t,r(),e)}},l=n(function(e,t,r){e({type:a});var n=t.settings.utils.request,c=Object(i.c)(t,r);n(c[0],c[1]).then(function(t){e({type:o,payload:t.data})},function(t){return e({type:s,payload:t})})},400)},function(e,t){e.exports=s},,function(e,t){e.exports=c},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(39),s=r(205),c=r(4),u=r(3),l=r(58),p=r(196),d=r.n(p),f=r(197),h=r.n(f),g=r(198),m=r.n(g),b=r(199),y=r.n(b),v=r(200),O=r.n(v),S=r(201),C=r.n(S),T=r(202),_=r.n(T),k=r(203),j=r.n(k),A=r(204),I=r.n(A),R=r(61),w=r.n(R),F=r(206),L=function(e){function t(t){var r=e.call(this,t)||this;return r.handleCustomFilterToggle=r.handleCustomFilterToggle.bind(r),r.handleMapAreaToggle=r.handleMapAreaToggle.bind(r),r.handleSearchOrgToggle=r.handleSearchOrgToggle.bind(r),r.handleCreatedFilterChange=r.handleCreatedFilterChange.bind(r),r.handleItemTypeFilterChange=r.handleItemTypeFilterChange.bind(r),r.handleModifiedFilterChange=r.handleModifiedFilterChange.bind(r),r.handleSharedFilterChange=r.handleSharedFilterChange.bind(r),r.handleStatusFilterChange=r.handleStatusFilterChange.bind(r),r.handleFolderFilterChange=r.handleFolderFilterChange.bind(r),r.handleGroupFilterChange=r.handleGroupFilterChange.bind(r),r.handleOrgGroupFilterChange=r.handleOrgGroupFilterChange.bind(r),r.handleTagsFilterChange=r.handleTagsFilterChange.bind(r),r.handleOrgCategorySelect=r.handleOrgCategorySelect.bind(r),r.handleClearOrgCategories=r.handleClearOrgCategories.bind(r),r.handleGroupCategorySelect=r.handleGroupCategorySelect.bind(r),r.handleClearGroupCategories=r.handleClearGroupCategories.bind(r),r.handleLACategorySelect=r.handleLACategorySelect.bind(r),r.handleClearLACategories=r.handleClearLACategories.bind(r),r.handleLARegionSelect=r.handleLARegionSelect.bind(r),r.handleClearLARegion=r.handleClearLARegion.bind(r),r.handleTagsFilterStringChange=r.handleTagsFilterStringChange.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t=this,r=this.props.stateTree.settings.config,n=this.props.stateTree.parameters.filter,a=this.props.stateTree.settings.utils.portal.user,c=Object(s.a)(this.props.stateTree),u=r.enableMapAreaFilter?e(d.a,{key:"map-area-filter",handleMapAreaToggle:this.handleMapAreaToggle,searchMapArea:this.props.stateTree.parameters.filter.searchMapArea,text:i.filterPane.mapArea}):null,l=c.map(function(s,c){switch(s){case"group":return e(j.a,{key:"group-filter",onGroupSelect:t.handleGroupFilterChange,availableGroups:t.props.stateTree.results.user.groups,groupFilter:t.props.stateTree.parameters.filter.group});case"folder":var u=t.props.stateTree.results.user.folders,l={title:t.props.stateTree.settings.utils.portal.user.username,id:"root"};return e(_.a,{key:"folder-filter",onFolderSelect:t.handleFolderFilterChange,availableFolders:u?[l].concat(u):[l],folderFilter:t.props.stateTree.parameters.filter.folder});case"itemType":return e(m.a,{key:"item-type-filter",onItemTypeSelect:t.handleItemTypeFilterChange,availableItemTypes:r.availableItemTypeFilters,itemTypeFilter:t.props.stateTree.parameters.filter.itemType});case"orgCategories":if((v=t.props.stateTree.results.organization.categorySchema)&&v.children&&v.children[0]&&v.children[0].children)return e(w.a,{key:"org-categories-filter",onCategorySelect:t.handleOrgCategorySelect,onClearCategories:t.handleClearOrgCategories,availableCategories:v.children[0].children,categoriesFilter:t.props.stateTree.parameters.filter.orgCategories,title:i.filterPane.categories,prependValue:"/"+v.children[0].value+"/"});break;case"livingAtlasCategories":if((v=t.props.stateTree.results.livingAtlas.categorySchema)&&v.children&&v.children[0]&&v.children[0].children)return e(w.a,{key:"la-categories-filter",onCategorySelect:t.handleLACategorySelect,onClearCategories:t.handleClearLACategories,availableCategories:v.children[0].children,categoriesFilter:t.props.stateTree.parameters.filter.livingAtlasCategories,title:v.children[0].displayName,prependValue:"/categories/",showTooltips:!0,startActive:!0});break;case"livingAtlasRegion":if((v=t.props.stateTree.results.livingAtlas.categorySchema)&&v.children&&v.children[1]&&v.children[1].children)return e(w.a,{key:"la-region-filter",onCategorySelect:t.handleLARegionSelect,onClearCategories:t.handleClearLARegion,availableCategories:v.children[1].children,categoriesFilter:t.props.stateTree.parameters.filter.livingAtlasRegion,title:v.children[1].displayName,prependValue:"/region/",startActive:!0});break;case"groupCategories":if(n.group&&(v=t.props.stateTree.results.user.groupCategories[n.group.id])&&v.children&&v.children[0]&&v.children[0].children)return e(w.a,{key:"group-categories-filter",onCategorySelect:t.handleGroupCategorySelect,onClearCategories:t.handleClearGroupCategories,availableCategories:v.children[0].children,categoriesFilter:t.props.stateTree.parameters.filter.groupCategories,title:i.filterPane.groupCategories,prependValue:"/"+v.children[0].value+"/"});break;case"orgGroups":break;case"modified":return e(y.a,{key:"modified-filters",onDateModifiedSelect:t.handleModifiedFilterChange,dateModifiedFilter:t.props.stateTree.parameters.filter.dateModified,dateModifiedSection:t.props.stateTree.ui.filters.modifiedSection});case"created":return e(h.a,{key:"created-filters",onDateCreatedSelect:t.handleCreatedFilterChange,dateCreatedFilter:t.props.stateTree.parameters.filter.dateCreated,dateCreatedSection:t.props.stateTree.ui.filters.createdSection});case"shared":return e(O.a,{counts:t.props.stateTree.results.counts.access,key:"shared-filters",onSharedSelect:t.handleSharedFilterChange,sharedFilter:t.props.stateTree.parameters.filter.shared,hideOrgGroupFilters:!!a&&!a.orgId});case"status":var p=t.props.stateTree.results.counts.contentStatus,d=p.deprecated,f=p.orgAuthoritative,g=p.publicAuthoritative;return e(C.a,{counts:{authoritative:a&&a.orgId?f+g:g,deprecated:d},key:"status-filters",onStatusSelect:t.handleStatusFilterChange,statusFilter:t.props.stateTree.parameters.filter.status});case"tags":return e(I.a,{availableTags:t.props.stateTree.ui.tagsFilter.visibleTags,filterString:t.props.stateTree.ui.tagsFilter.filterString,key:"ib-tags-filter",onFilterStringChange:t.handleTagsFilterStringChange,onTagSelect:t.handleTagsFilterChange,tagsFilter:t.props.stateTree.parameters.filter.tags});default:if("object"==typeof s)if("group"===s.type){if((v=t.props.stateTree.results.customSections.groupSchemas[s.id])&&v.children&&v.children[0]&&v.children[0].children){var b=void 0;return s.path&&(b=(S=Object(o.b)("children","value",v,s.path))?S.children:void 0),e(w.a,{key:"custom-group-categories-filter",onCategorySelect:t.handleGroupCategorySelect,onClearCategories:t.handleClearGroupCategories,availableCategories:s.path&&b?b:v.children,categoriesFilter:t.props.stateTree.parameters.filter.groupCategories,title:s.name,prependValue:"/"+(s.path?s.path.join("/")+"/":"")})}}else if("org"===s.type){var v;if((v=t.props.stateTree.results.customSections.orgSchemas[s.id])&&v.children&&v.children[0]&&v.children[0].children){var S;return b=void 0,s.path&&(b=(S=Object(o.b)("children","value",v,s.path))?S.children:void 0),e(w.a,{key:"custom-org-categories-filter",onCategorySelect:t.handleOrgCategorySelect,onClearCategories:t.handleClearOrgCategories,availableCategories:s.path&&b?b:v.children,categoriesFilter:t.props.stateTree.parameters.filter.orgCategories,title:s.name,prependValue:"/"+(s.path?s.path.join("/")+"/":"")})}}else if(s.children){var T=t.props.stateTree.parameters.filter.customFilter[c];return e(F.a,{key:s.displayName+"-filter-accordion",filter:s,index:c,onClear:t.handleCustomFilterToggle,onClick:t.handleCustomFilterToggle,selectedOption:T?T.value:void 0})}return null}return null});return u?[u,e("div",{key:"filter-accordion",class:"ib-filter-pane__accordion"},l)]:e("div",{key:"filter-accordion",class:"ib-filter-pane__accordion"},l)},t.prototype.handleCustomFilterToggle=function(e,t,r){this.props.dispatch(Object(c.s)(e,t?{value:t,text:r}:void 0)),this.props.dispatch(Object(u.h)())},t.prototype.handleMapAreaToggle=function(){this.props.dispatch(Object(c.z)(!this.props.stateTree.parameters.filter.searchMapArea)),this.props.dispatch(Object(u.h)())},t.prototype.handleSearchOrgToggle=function(){var e=this.props.stateTree.parameters.filter.searchOrg;this.props.dispatch(Object(c.D)(!e)),this.props.dispatch(Object(u.h)())},t.prototype.handleItemTypeFilterChange=function(e){this.props.dispatch(Object(c.w)(e)),this.props.dispatch(Object(u.h)())},t.prototype.handleModifiedFilterChange=function(e,t){this.props.dispatch(Object(c.A)(e,t)),this.props.dispatch(Object(u.h)())},t.prototype.handleCreatedFilterChange=function(e,t){this.props.dispatch(Object(c.r)(e,t)),this.props.dispatch(Object(u.h)())},t.prototype.handleSharedFilterChange=function(e){this.props.dispatch(Object(c.E)(e)),this.props.dispatch(Object(u.h)())},t.prototype.handleStatusFilterChange=function(e){this.props.dispatch(Object(c.F)(e)),this.props.dispatch(Object(u.h)())},t.prototype.handleFolderFilterChange=function(e){this.props.dispatch(Object(c.t)(e)),this.props.dispatch(Object(u.h)(!0))},t.prototype.handleGroupFilterChange=function(e){this.props.dispatch(Object(c.v)(e)),this.props.dispatch(Object(u.h)(!0))},t.prototype.handleOrgGroupFilterChange=function(e){this.props.dispatch(Object(c.C)(e)),this.props.dispatch(Object(u.h)())},t.prototype.handleTagsFilterChange=function(e){this.props.dispatch(Object(c.G)(e)),this.props.dispatch(Object(u.h)())},t.prototype.handleOrgCategorySelect=function(e){var t=this.props.stateTree.parameters.filter.orgCategories;t&&t.value===e.value?this.props.dispatch(Object(c.B)()):this.props.dispatch(Object(c.B)(e)),this.props.dispatch(Object(u.h)())},t.prototype.handleClearOrgCategories=function(){this.props.dispatch(Object(c.B)()),this.props.dispatch(Object(u.h)())},t.prototype.handleLACategorySelect=function(e){var t=this.props.stateTree.parameters.filter.livingAtlasCategories;t&&t.value===e.value?this.props.dispatch(Object(c.x)()):this.props.dispatch(Object(c.x)(e)),this.props.dispatch(Object(u.h)())},t.prototype.handleClearLACategories=function(){this.props.dispatch(Object(c.x)()),this.props.dispatch(Object(u.h)())},t.prototype.handleLARegionSelect=function(e){var t=this.props.stateTree.parameters.filter.livingAtlasRegion;t&&t.value===e.value?this.props.dispatch(Object(c.y)()):this.props.dispatch(Object(c.y)(e)),this.props.dispatch(Object(u.h)())},t.prototype.handleClearLARegion=function(){this.props.dispatch(Object(c.y)()),this.props.dispatch(Object(u.h)())},t.prototype.handleGroupCategorySelect=function(e){var t=this.props.stateTree.parameters.filter.groupCategories;t&&t.value===e.value?this.props.dispatch(Object(c.u)()):this.props.dispatch(Object(c.u)(e)),this.props.dispatch(Object(u.h)())},t.prototype.handleClearGroupCategories=function(){this.props.dispatch(Object(c.u)()),this.props.dispatch(Object(u.h)())},t.prototype.handleTagsFilterStringChange=function(e){this.props.dispatch(Object(l.e)(e))},t}(a.Component);t.a=Object(a.connect)(function(e){return{stateTree:e}},function(e){return{dispatch:e}})(L)},,function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return l}),r.d(t,"d",function(){return p});var n=r(0),i=r(2),a=r(13),o=r(102),s=r(307),c="LOADING_LIVING_ATLAS_INFO",u="UPDATE_LIVING_ATLAS_INFO",l="FETCH_LIVING_ATLAS_INFO_FAILED",p=function(e){return function(t,r){var p=r();if("loaded"===p.results.livingAtlas.status)return(new a).resolve();if("failed"===p.results.livingAtlas.status)return(new a).reject();t({type:c});var d=p.settings.utils,f=d.portal,h=d.request,g=f.user&&f.user.culture?f.user.culture:o.locale;return Object(s.a)(h,f,e,g).then(function(e){t({type:u,payload:n.a({},e,{schema:e.schema.map(function(e){return"region"===e.title?n.a({},e,{displayName:i.regions}):e})})})},function(e){console.error(e),t({type:l})})}}},function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return a}),r.d(t,"c",function(){return o});var n=r(27),i="START_CUSTOM_ACTION",a="END_CUSTOM_ACTION",o=function(e,t){return function(r,o){var s=o().settings.config.customActions.filter(function(t){return t.name===e})[0];s&&(s.asynchronous?(r({type:i,payload:t}),s.onAction(Object(n.b)(t)).then(function(){r({type:a,payload:t})},function(){r({type:a,payload:t})})):s.onAction(Object(n.b)(t)))}}},function(e,t){e.exports=u},,,,,,,,,function(e,t){e.exports=l},function(e,t){e.exports=p},function(e,t){e.exports=d},,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"b",function(){return c});var n=r(13),i=r(12),a=r(245),o=r(102),s="UPDATE_PORTAL_SELF",c=function(){return function(e,t){var r=t(),c=r.settings.utils,u=c.portal,l=c.request,p=u.user&&u.user.culture?u.user.culture:o.locale;return r.settings.utils.self?(new n).resolve(r.settings.utils.self):Object(i.i)(l,u,p).then(function(t){var n=Object(a.a)(t);return e({type:s,payload:{self:n,config:r.settings.config}}),n})}}},function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r(0),i=r(13),a=r(15),o=r(7),s=r(55),c=r(12),u=r(245),l=r(31),p=Object(o.a)(function(e,t){var r=e.settings.utils.request,o=Object(l.a)(e),p=new i,d=t.data.results.filter(function(t){return!!t.orgId&&!e.results.allOrganizations[t.orgId]}).map(function(e){return e.orgId}).filter(s.b).map(function(e){return Object(c.h)(r,o,e)});return a(d).then(function(e){p.resolve(n.a({},t,{data:n.a({},t.data,{organizations:e.reduce(function(e,t){var r;return n.a({},e,((r={})[t.id]=Object(u.a)(t),r))},{})})}))},function(e){p.reject(e)}),p})},function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i});var n="CHANGE_SEARCH_STRING",i=function(e){return{type:n,payload:e}}},function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a});var n=r(48),i="VIEW_ITEM_DETAILS",a=function(e){return function(t){t({type:i,payload:e}),t(Object(n.c)(e))}}},function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i});var n="SHOW_EMPTY_RESULTS",i="CHANGE_RESULT_DISPLAY"},,function(e,t,r){"use strict";function n(e){return O(e)([e.parameters.searchString.current]).join(" ")}function i(e){return S(e)([e.parameters.searchString.current]).join(" ")}function a(e,t){return C(e,t)([e.parameters.searchString.current]).join(" ")}r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i}),r.d(t,"c",function(){return a});var o=r(14),s=r(55),c=r(304),u=r(305),l=r(306),p=r(246),d=r(164),f=r(247),h=r(7),g=r(24),m=r(39),b=r(45),y=r(31),v=r(18),O=function(e){return Object(o.a)(Object(o.a)(s.a,_(e),k(e),Object(c.a)(e.parameters.filter.orgGroup),Object(u.a)(e.parameters.filter.status,e.settings.utils.portal.user),T(e)),Object(o.a)(Object(l.a)(e.parameters.filter.shared),Object(p.a)(e.parameters.filter.dateCreated),Object(p.b)(e.parameters.filter.dateModified),Object(d.a)(b.b,{allowedItemTypes:e.settings.config.allowedItemTypes,itemTypeFilter:e.parameters.filter.itemType,specialItemQ:e.settings.config.specialItemQ}),Object(f.b)(e.parameters.filter.tags)))},S=function(e){return Object(o.a)(s.a,_(e),T(e),Object(d.a)(b.b,{allowedItemTypes:e.settings.config.allowedItemTypes,specialItemQ:e.settings.config.specialItemQ}))},C=function(e,t){return Object(o.a)(s.a,_(e),T(e),Object(d.a)(b.b,{allowedItemTypes:e.settings.config.allowedItemTypes,specialItemQ:e.settings.config.specialItemQ}),Object(f.a)(t))},T=Object(h.a)(function(e,t){e.parameters.section;var r=e.parameters.filter,n=e.settings.config,i=Object(y.a)(e);switch(e.parameters.section){case"myContent":return i.user?i.user&&r.folder?t.concat(["(owner:"+i.user.username+") (ownerfolder:"+r.folder.id+")"]):t.concat(["(owner:"+i.user.username+")"]):t;case"myFavorites":return i.user?t.concat(["(group:"+i.user.favGroupId+")"]):t;case"myGroups":if(e.results.user.groups){if(e.parameters.filter.group)return t.concat(["(group:"+e.parameters.filter.group.id+")"]);var a=e.results.user.groups.map(function(e){return e.id});return t.concat(["(group:"+a.join(" OR group:")+")"])}return t;case"myOrganization":return t.concat(["(orgid:"+i.id+")"]);case"subscription":return t.concat(["("+e.results.user.provisionedContent.map(function(e){return"id:"+e}).join(" OR ")+")"]);case"all":return t;default:var o=n.customSections.filter(function(t){return e.parameters.section===t.name})[0];return o?t.concat([o.baseQuery]):t}}),_=Object(h.a)(function(e,t){var r=e.settings.config.addQueryParameters;return r&&"function"==typeof r?t.concat([r(e)]):t}),k=Object(h.a)(function(e,t){var r=Object(v.b)(e.settings.config.customSections,e.parameters.section);if(r&&!Object(g.a)(e.parameters.filter.customFilter)){var n=Object.keys(e.parameters.filter.customFilter).filter(function(t){return!!e.parameters.filter.customFilter[t]}).reduce(function(t,n){var i=parseInt(n,10),a=e.parameters.filter.customFilter[i].value;if(r.filters&&r.filters[i]){var o=r.filters[i],s=Object(m.a)("children","value",o,a);if(s)return t.concat(["("+s.q+")"])}return t},[]).join(" AND ");return t.concat([""+n])}return t})},,function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return l});var n=r(1),i=r(110),a=r(133),o=r(140),s=r(155),c=i.b.config,u={parameters:a.b,settings:i.b,results:o.b,ui:s.b},l=Object(n.combineReducers)({settings:i.a,parameters:a.a,results:o.a,ui:s.a})},function(e,t,r){"use strict";var n=r(25);r.d(t,"a",function(){return n.b}),r.d(t,"b",function(){return n.e}),r.d(t,"c",function(){return n.f}),r.d(t,"d",function(){return n.g}),r.d(t,"e",function(){return n.h});var i=r(3);r.d(t,"f",function(){return i.h})},,function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(0),i=r(34),a=function(e){return n.a({},e,{thumbURI:function(e){var t=Object(i.a)(e);return e.thumbnail?t+"/sharing/rest/portals/"+e.id+"/resources/"+e.thumbnail:t+"/home/images/group-no-image.png"}(e)})}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(0),i=r(34),a=function(e){return n.a({},e,{orgUrl:function(e){return Object(i.a)(e)+"/home/index.html"}(e)})}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(0),i=r(7),a=Object(i.a)(function(e,t){return n.a({},t,{thumbURI:function(e,t){if(t.thumbnail)return e.restUrl+"/community/users/"+t.username+"/info/"+t.thumbnail+(e.credential?"?token="+e.credential.token:"")}(e,t)})})},function(e,t){e.exports=f},function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return a}),r.d(t,"c",function(){return o});var n=r(3),i="UPDATE_EXTENT",a="UNTHROTTLE_EXTENT",o=function(e){return function(t,r){var o=r();o.parameters.extent.throttling||(t({type:i,payload:e}),o.parameters.filter.searchMapArea&&t(Object(n.h)()),setTimeout(function(){t({type:a})},o.settings.config.mapAreaThrottleTime))}}},function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i});var n="VIEW_FILTERS",i=function(){return{type:n}}},function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i});var n="VIEW_SORT",i=function(){return{type:n}}},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(4),s=r(3),c=r(209),u=r.n(c),l=r(18),p=r(24),d={itemType:Object(o.w)(),modified:Object(o.A)(),created:Object(o.r)(),shared:Object(o.E)(),folder:Object(o.t)(),group:Object(o.v)(),status:Object(o.F)(),orgGroup:Object(o.C)()},f=function(e){function t(t){var r=e.call(this,t)||this;return r.handleRemoveMapAreaFilter=r.handleRemoveMapAreaFilter.bind(r),r.handleRemoveSearchOrgFilter=r.handleRemoveSearchOrgFilter.bind(r),r.handleRemoveGeneralFilter=r.handleRemoveGeneralFilter.bind(r),r.handleRemoveOrgCategoriesFilter=r.handleRemoveOrgCategoriesFilter.bind(r),r.handleRemoveLACategoriesFilter=r.handleRemoveLACategoriesFilter.bind(r),r.handleRemoveLARegionFilter=r.handleRemoveLARegionFilter.bind(r),r.handleRemoveGroupCategoriesFilter=r.handleRemoveGroupCategoriesFilter.bind(r),r.handleClearAll=r.handleClearAll.bind(r),r.handleRemoveTagsFilter=r.handleRemoveTagsFilter.bind(r),r.handleRemoveCustomFilter=r.handleRemoveCustomFilter.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t=this,r=this.props.stateTree.parameters.filter,n=[];if(r.searchOrg&&"all"===this.props.stateTree.parameters.section&&this.props.stateTree.settings.utils.portal.user&&this.props.stateTree.settings.utils.portal.user.credential&&this.props.stateTree.settings.utils.portal.name&&n.push({filterId:"searchOrg",onRemove:this.handleRemoveSearchOrgFilter,text:"Organization: "+this.props.stateTree.settings.utils.portal.name}),r.searchMapArea&&n.push({filterId:"searchMapArea",onRemove:this.handleRemoveMapAreaFilter,text:i.filterChips.mapArea}),r.itemType&&n.push({filterId:"itemType",onRemove:this.handleRemoveGeneralFilter,text:i.filterChips.type+": "+r.itemType.text}),r.dateModified&&n.push({filterId:"modified",onRemove:this.handleRemoveGeneralFilter,text:i.filterChips.dateModified+": "+r.dateModified.label}),r.dateCreated&&n.push({filterId:"created",onRemove:this.handleRemoveGeneralFilter,text:i.filterChips.dateCreated+": "+r.dateCreated.label}),r.shared&&n.push({filterId:"shared",onRemove:this.handleRemoveGeneralFilter,text:i.filterChips.access+": "+r.shared.text}),r.group&&"myGroups"===this.props.stateTree.parameters.section?n.push({filterId:"group",onRemove:this.handleRemoveGeneralFilter,text:i.filterChips.group+": "+r.group.title}):r.orgGroup&&"myOrganization"===this.props.stateTree.parameters.section&&n.push({filterId:"orgGroup",onRemove:this.handleRemoveGeneralFilter,text:i.filterChips.group+": "+r.orgGroup.title}),r.folder&&"myContent"===this.props.stateTree.parameters.section&&n.push({filterId:"folder",onRemove:this.handleRemoveGeneralFilter,text:i.filterChips.folder+": "+r.folder.title}),r.status&&n.push({filterId:"status",
onRemove:this.handleRemoveGeneralFilter,text:i.filterChips.status+": "+r.status.text}),r.orgCategories){var a=r.orgCategories;n.push({filterId:a.value,onRemove:this.handleRemoveOrgCategoriesFilter,text:i.filterChips.category+": "+a.text})}if(r.livingAtlasCategories&&(a=r.livingAtlasCategories,n.push({filterId:a.value,onRemove:this.handleRemoveLACategoriesFilter,text:i.filterChips.category+": "+a.text})),r.groupCategories&&(a=r.groupCategories,n.push({filterId:a.value,onRemove:this.handleRemoveGroupCategoriesFilter,text:i.filterChips.category+": "+a.text})),r.livingAtlasRegion&&(a=r.livingAtlasRegion,n.push({filterId:a.value,onRemove:this.handleRemoveLARegionFilter,text:i.filterChips.region+": "+a.text})),r.tags){var o=r.tags;Object.keys(o).forEach(function(e){n.push({filterId:e,onRemove:t.handleRemoveTagsFilter,text:i.filterChips.tagged+": "+e})})}var s=Object(l.b)(this.props.stateTree.settings.config.customSections,this.props.stateTree.parameters.section);if(s&&!Object(p.a)(r.customFilter)&&Object.keys(r.customFilter).filter(function(e){return!!r.customFilter[e]}).forEach(function(e){var i=parseInt(e,10);if(s.filters&&s.filters[i]){var a=s.filters[i];n.push({filterId:""+i,onRemove:t.handleRemoveCustomFilter,text:a.displayName+": "+r.customFilter[e].text})}}),n.length>0)return e("div",{key:"active-filter-area",class:"ib__active-filters"},e(u.a,{key:"item-browser-filter-controller",filters:n.sort(function(e,t){return e.text.localeCompare(t.text)}),onClear:this.handleClearAll,mode:"light"===this.props.theme?"full-width":"expanding",startOpen:"light"!==this.props.theme,theme:this.props.theme}))},t.prototype.handleRemoveCustomFilter=function(e){this.props.dispatch(Object(o.s)(parseInt(e.target.value,10))),this.props.dispatch(Object(s.h)())},t.prototype.handleRemoveGeneralFilter=function(e){this.props.dispatch(d[e.target.value]),this.props.dispatch(Object(s.h)("folder"===e.target.value))},t.prototype.handleRemoveMapAreaFilter=function(e){this.props.dispatch(Object(o.z)(!1)),this.props.dispatch(Object(s.h)())},t.prototype.handleRemoveSearchOrgFilter=function(e){this.props.dispatch(Object(o.D)(!1)),this.props.dispatch(Object(s.h)())},t.prototype.handleClearAll=function(){var e=!!this.props.stateTree.parameters.filter.folder;this.props.dispatch({type:o.a}),this.props.dispatch(Object(s.h)(e))},t.prototype.handleRemoveOrgCategoriesFilter=function(e){this.props.dispatch(Object(o.B)()),this.props.dispatch(Object(s.h)())},t.prototype.handleRemoveLACategoriesFilter=function(e){this.props.dispatch(Object(o.x)()),this.props.dispatch(Object(s.h)())},t.prototype.handleRemoveGroupCategoriesFilter=function(e){this.props.dispatch(Object(o.u)()),this.props.dispatch(Object(s.h)())},t.prototype.handleRemoveLARegionFilter=function(e){this.props.dispatch(Object(o.y)()),this.props.dispatch(Object(s.h)())},t.prototype.handleRemoveTagsFilter=function(e){var t=this.props.stateTree.parameters.filter.tags;if(t&&t[e.target.value]){var r=n.a({},t);delete r[e.target.value],Object.keys(r).length>0?this.props.dispatch(Object(o.G)(r)):this.props.dispatch(Object(o.G)()),this.props.dispatch(Object(s.h)())}},t}(a.Component);t.a=Object(a.connect)(function(e){return{stateTree:e}},function(e){return{dispatch:e}})(f)},,,,function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(1),i=r(131),a=r(132),o={config:i.b,utils:a.b};t.a=Object(n.combineReducers)({config:i.a,utils:a.a})},,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"b",function(){return c});var n=r(2),i=r(50),a=r(45),o=r(55),s=r(18),c={asynchronousItemSelect:!1,dialogTitle:"Item Browser",disableMainAction:!1,mainActionTitle:n.itemDetails.addToMap,mainInverseActionTitle:n.itemDetails.removeFromMap,onSelect:function(){},onDeselect:function(){},baseSections:["all","myContent","myFavorites","myGroups","myOrganization","livingAtlas"],layoutMode:"adjustable",detailsPaneType:"flyout",singleItemSelect:!1,enableMapAreaFilter:!0,mapAreaThrottleTime:2500,enableSelectAllItemsFromQuery:!1,showSubmitButton:!0,submitButtonText:"Submit Selection",clearSelectionBetweenSearches:!1,resultsPerQuery:10,allowedItemTypes:a.a,availableItemTypeFilters:["maps","webMaps","mapFiles","layers","featureLayers","tileLayers","mapImageLayers","imageryLayers","sceneLayers","tables","layerFiles","scenes","apps","webApps","mobileApps","desktopApps","tools","locators","geodatabaseAccess","geometricOperations","geoprocessingTasks","networkAnalysis","files","documents","images","pdfs","notebooks"],disableItemTypeFilters:!1,customActions:[],customSections:[],showCloseBtn:!1,showBackBtn:!0,onBack:function(){},hideEllipses:!1,replaceSectionDropdownWithTitle:!1};t.a=function(e,t){switch(void 0===e&&(e=c),t.type){case i.b:return Object(o.c)("id",e.customSections.filter(s.f).map(s.a).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return"object"==typeof e&&"group"===e.type})).forEach(function(e,r){e.id=t.payload.groups[r].id,delete e.fetchGroupIdByQuery}),e;default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(0),i=r(88),a=r(34),o={iconDir:"",portal:{},request:function(e){return null}};t.a=function(e,t){switch(void 0===e&&(e=o),t.type){case i.a:return n.a({},e,{self:t.payload.self});default:return e.portal.portalHostname&&!e.portal.baseUrl&&(e.portal.baseUrl=Object(a.a)(e.portal)),e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return l});var n=r(1),i=r(134),a=r(135),o=r(136),s=r(139),c=r(137),u=r(138),l={extent:i.b,filter:a.b,nextQuery:o.b,searchString:c.b,section:u.b,sort:s.b};t.a=Object(n.combineReducers)({extent:i.a,filter:a.a,nextQuery:o.a,searchString:c.a,section:u.a,sort:s.a})},function(e,t,r){"use strict";r.d(t,"b",function(){return a});var n=r(0),i=r(103),a={area:{minx:-180,miny:-90,maxx:180,maxy:90},throttling:!1};t.a=function(e,t){switch(void 0===e&&(e=a),t.type){case i.a:return n.a({},e,{throttling:!1});case i.b:return{area:t.payload,throttling:!0};default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(0),i=r(4),a=r(51),o={customFilter:{},searchMapArea:!1};t.a=function(e,t){var r;switch(void 0===e&&(e=o),t.type){case i.a:return{customFilter:{},searchMapArea:!1};case i.m:return n.a({},e,{orgGroup:t.payload});case i.i:return n.a({},e,{livingAtlasRegion:t.payload});case i.h:return n.a({},e,{livingAtlasCategories:t.payload});case i.l:return n.a({},e,{orgCategories:t.payload});case i.e:return n.a({},e,{groupCategories:t.payload});case i.g:return n.a({},e,{itemType:t.payload});case i.k:return n.a({},e,{dateModified:t.payload.modified});case i.b:return n.a({},e,{dateCreated:t.payload.created});case i.o:return n.a({},e,{shared:t.payload});case i.d:return n.a({},e,{folder:t.payload});case i.f:return n.a({},e,{groupCategories:void 0,group:t.payload});case i.p:return n.a({},e,{status:t.payload});case i.j:return n.a({},e,{searchMapArea:t.payload});case i.n:return n.a({},e,{searchOrg:t.payload,orgCategories:void 0});case i.q:return n.a({},e,{tags:t.payload});case i.c:return n.a({},e,{customFilter:n.a({},e.customFilter,(r={},r[t.payload.index]=t.payload.filter,r))});case a.a:return{customFilter:{},searchMapArea:!1};default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return a});var n=r(0),i=r(3),a={nextStart:-1,total:0};t.a=function(e,t){switch(void 0===e&&(e=a),t.type){case i.a:return n.a({},e,{total:0});case i.c:return{nextStart:t.payload.search.nextStart,total:t.payload.search.total};case i.f:return{nextStart:t.payload.nextStart,total:t.payload.total};default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(0),i=r(3),a=r(90),o={current:"",previous:""};t.a=function(e,t){switch(void 0===e&&(e=o),t.type){case i.a:return n.a({},e,{previous:e.current});case a.a:return n.a({},e,{current:t.payload});default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return a});var n=r(51),i=r(88),a="all";t.a=function(e,t){switch(void 0===e&&(e=a),t.type){case n.a:return t.payload.newSection;case i.a:var r=t.payload.config.baseSections,o=t.payload.config.customSections.map(function(e){return e.name});return r.indexOf(e)>-1||o.indexOf(e)>-1?e:r.length>0?r[0]:o.length>0?o[0]:"all";default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return u});var n=r(0),i=r(37),a=r(51),o=r(50),s=r(18),c=r(55),u={field:"relevance",order:"desc"},l={myContent:"modified",myFavorites:"relevance",myGroups:"relevance",myOrganization:"relevance",livingAtlas:"relevance",all:"relevance"},p={relevance:"desc",title:"asc",created:"desc",owner:"asc",modified:"desc",numviews:"desc",avgrating:"desc"};t.a=function(e,t){switch(void 0===e&&(e=u),t.type){case i.b:return n.a({},e,{order:t.payload});case i.a:var r=t.payload;return{field:r,order:p[r]?p[r]:e.order};case a.a:var d=Object(s.b)(t.payload.customSections,t.payload.newSection);if(d&&d.filters){var f=d.filters.filter(function(e){return"object"==typeof e&&"group"===e.type})[0];if(f&&f.id){var h=t.payload.customSectionGroupSort[f.id];if(h)return h}}return{field:l[t.payload.newSection]||"relevance",order:"desc"};case o.b:var g=t.payload,m=g.customSections,b=g.currentSection,y=Object(s.b)(m,b);if(y&&y.filters){var v=Object(c.c)("id",m.filter(s.f).map(s.a).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return"object"==typeof e&&"group"===e.type})),O=y.filters.filter(function(e){return"object"==typeof e&&"group"===e.type})[0],S=t.payload.groups[v.indexOf(O)];if(S)return{field:S.sortField?S.sortField:"relevance",order:S.sortOrder?S.sortOrder:"desc"}}return e;default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return m});var n=r(1),i=r(141),a=r(144),o=r(145),s=r(146),c=r(147),u=r(149),l=r(148),p=r(150),d=r(151),f=r(152),h=r(153),g=r(154),m={counts:i.b,displayItems:a.b,livingAtlas:o.b,loadingItems:s.b,selectedItems:c.b,failedItemDetails:l.b,fullItemDetails:u.b,organization:p.b,user:d.b,customSections:f.b,allOrganizations:h.b,users:g.b};t.a=Object(n.combineReducers)({counts:i.a,displayItems:a.a,loadingItems:s.a,selectedItems:c.a,failedItemDetails:l.a,fullItemDetails:u.a,livingAtlas:o.a,organization:p.a,user:d.a,customSections:f.a,allOrganizations:h.a,users:g.a})},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(1),i=r(142),a=r(143),o={access:i.b,contentStatus:a.b};t.a=Object(n.combineReducers)({access:i.a,contentStatus:a.a})},function(e,t,r){"use strict";r.d(t,"b",function(){return i});var n=r(3),i={org:void 0,private:void 0,public:void 0,shared:void 0};t.a=function(e,t){switch(void 0===e&&(e=i),t.type){case n.c:if(t.payload.aggregations&&t.payload.aggregations.counts){var r=t.payload.aggregations.counts.filter(function(e){return"access"===e.fieldName})[0];if(r){var a=r.fieldValues.filter(function(e){return"account"===e.value})[0],o=r.fieldValues.filter(function(e){return"private"===e.value})[0],s=r.fieldValues.filter(function(e){return"public"===e.value})[0],c=r.fieldValues.filter(function(e){return"shared"===e.value})[0];return{org:a?a.count:void 0,private:o?o.count:void 0,public:s?s.count:void 0,shared:c?c.count:void 0}}}return e;default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return i});var n=r(3),i={publicAuthoritative:0,orgAuthoritative:0,deprecated:0};t.a=function(e,t){switch(void 0===e&&(e=i),t.type){case n.c:if(t.payload.aggregations&&t.payload.aggregations.counts){var r=t.payload.aggregations.counts.filter(function(e){return"contentstatus"===e.fieldName})[0];if(r){var a=r.fieldValues.filter(function(e){return"org_authoritative"===e.value})[0],o=r.fieldValues.filter(function(e){return"public_authoritative"===e.value})[0],s=r.fieldValues.filter(function(e){return"deprecated"===e.value})[0];return{publicAuthoritative:o?o.count:0,orgAuthoritative:a?a.count:0,deprecated:s?s.count:0}}}return e;default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return i});var n=r(3),i=[];t.a=function(e,t){switch(void 0===e&&(e=[]),t.type){case n.c:return t.payload.search.results;case n.f:return e.concat(t.payload.results);default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return s});var n=r(0),i=r(64),a=r(3),o=r(23),s={categorySchema:void 0,groupId:void 0,status:"initial"};t.a=function(e,t){switch(void 0===e&&(e=s),t.type){case i.a:return n.a({},e,{status:"loading"});case i.b:return n.a({},e,{categorySchema:{displayName:t.payload.id,value:t.payload.id,children:Object(o.b)(t.payload.schema)},groupId:t.payload.id,status:"loaded"});case a.c:return e.categorySchema&&t.payload.aggregations&&t.payload.aggregations.countInfo&&"livingAtlas"===t.payload.aggregations.countInfo.section?n.a({},e,{categorySchema:Object(o.c)(t.payload.aggregations,Object(o.a)(e.categorySchema),"groupCategories")}):e;case i.c:return n.a({},e,{status:"failed"});default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return c});var n=r(0),i=r(25),a=r(65),o=r(6),s=r(26),c={};t.a=function(e,t){var r,c,u,l,p,d,f,h,g,m,b,y;switch(void 0===e&&(e={}),t.type){case i.f:return n.a({},e,((r={})[t.payload.id]=t.payload,r));case i.e:return n.a({},e,((c={})[t.payload.id]=void 0,c));case i.h:return n.a({},e,((u={})[t.payload.id]=void 0,u));case i.g:return n.a({},e,((l={})[t.payload.id]=void 0,l));case a.b:return n.a({},e,((p={})[t.payload.id]=t.payload,p));case a.a:return n.a({},e,((d={})[t.payload.id]=void 0,d));case o.a:return{};case s.a:return n.a({},e,((f={})[t.payload.id]=t.payload,f));case s.c:return n.a({},e,((h={})[t.payload.id]=void 0,h));case s.b:return n.a({},e,((g={})[t.payload.id]=void 0,g));case s.e:return n.a({},e,((m={})[t.payload.id]=t.payload,m));case s.g:return n.a({},e,((b={})[t.payload.id]=void 0,b));case s.f:return n.a({},e,((y={})[t.payload.id]=void 0,y));default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(0),i=r(25),a=r(6),o={};t.a=function(e,t){var r,o;switch(void 0===e&&(e={}),t.type){case i.a:return{};case i.c:return n.a({},e,t.payload.reduce(function(e,t){var r;return n.a({},e,((r={})[t.id]=t,r))},{}));case i.b:var s=n.a({},e);return delete s[t.payload.id],s;case i.e:return n.a({},e,((r={})[t.payload.id]=t.payload,r));case i.h:return(o={})[t.payload.id]=t.payload,o;case i.d:return n.a({},e,t.payload);case a.a:return{};default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(0),i=r(48),a=r(91),o={};t.a=function(e,t){var r;switch(void 0===e&&(e=o),t.type){case i.b:return e[t.payload.item.id]?(delete(s=n.a({},e))[t.payload.item.id],s):e;case a.a:var s;return e[t.payload.id]?(delete(s=n.a({},e))[t.payload.id],s):e;case i.a:return n.a({},e,((r={})[t.payload]=!0,r));default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return a});var n=r(0),i=r(48),a={};t.a=function(e,t){var r;switch(void 0===e&&(e=a),t.type){case i.b:return n.a({},e,((r={})[t.payload.item.id]=t.payload.item,r));case i.a:if(e[t.payload]){var o=n.a({},e);return delete o[t.payload],o}return e;default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return s});var n=r(0),i=r(57),a=r(3),o=r(23),s={categorySchema:void 0,groups:void 0,status:"initial"};t.a=function(e,t){switch(void 0===e&&(e=s),t.type){case i.a:return n.a({},e,{status:"loading"});case i.b:return n.a({},e,{groups:t.payload.groups,categorySchema:{displayName:"##orgCatRoot--1337!",value:"##orgCatRoot--1337!",children:Object(o.b)(t.payload.schema)},status:"loaded"});case a.c:return e.categorySchema&&t.payload.aggregations&&t.payload.aggregations.countInfo&&("myOrganization"===t.payload.aggregations.countInfo.section||"myContent"===t.payload.aggregations.countInfo.section||"all"===t.payload.aggregations.countInfo.section)?n.a({},e,{categorySchema:Object(o.c)(t.payload.aggregations,Object(o.a)(e.categorySchema),"categories")}):e;case i.c:return n.a({},e,{status:"failed"});default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return s});var n=r(0),i=r(26),a=r(3),o=r(23),s={favorites:void 0,folders:void 0,groups:void 0,groupCategories:{},provisionedContent:[],status:"initial"};t.a=function(e,t){var r,c,u,l,p;switch(void 0===e&&(e=s),t.type){case i.d:return n.a({},e,{status:"loading"});case i.i:return n.a({},e,{favorites:t.payload.favorites,folders:t.payload.folders,groups:t.payload.groups,provisionedContent:t.payload.provisionedContent,status:"loaded"});case i.h:return n.a({},e,{groupCategories:n.a({},e.groupCategories,(r={},r[t.payload.id]={value:t.payload.id,children:Object(o.b)(t.payload.categorySchema)},r))});case a.c:if(t.payload.aggregations&&t.payload.aggregations.countInfo&&"myGroups"===t.payload.aggregations.countInfo.section&&t.payload.aggregations.countInfo.group){var d=t.payload.aggregations.countInfo.group.id;if(e.groupCategories[d])return n.a({},e,{groupCategories:n.a({},e.groupCategories,(c={},c[d]=Object(o.c)(t.payload.aggregations,Object(o.a)(e.groupCategories[d]),"groupCategories"),c))})}return e;case i.j:return n.a({},e,{status:"failed"});case i.c:return n.a({},e,{favorites:e.favorites?n.a({},e.favorites,(u={},u[t.payload.id]=!0,u)):(l={},l[t.payload.id]=!0,l)});case i.g:return n.a({},e,{favorites:e.favorites?n.a({},e.favorites,(p={},p[t.payload.id]=!1,p)):{}});default:return e}}},function(e,t,r){"use strict";function n(e,t,r){return t.filter(function(t){return t.type===e}).reduce(function(e,t){return e[t.id]||(e[t.id]={value:t.id,children:Object(s.b)(t.response.categorySchema)}),e},i.a({},r))}r.d(t,"b",function(){return c});var i=r(0),a=r(50),o=r(3),s=r(23),c={groupSchemas:{},groupSort:{},orgSchemas:{},status:"initial"};t.a=function(e,t){switch(void 0===e&&(e=c),t.type){case a.a:return i.a({},e,{status:"loading"});case a.b:return i.a({},e,{groupSort:t.payload.groups.reduce(function(e,t){return e[t.id]={field:t.sortField,order:t.sortOrder},e},e.groupSort)});case a.c:return i.a({},e,{orgSchemas:n("org",t.payload,e.orgSchemas),groupSchemas:n("group",t.payload,e.groupSchemas),status:"loaded"});case a.d:return i.a({},e,{status:"failed"});case o.c:if(t.payload.aggregations){var r=t.payload.aggregations.countInfo;if(r.custom&&r.custom.filters)return r.custom.filters.filter(function(e){return"object"==typeof e}).reduce(function(r,n){var a,o;return"group"===n.type?i.a({},e,{groupSchemas:i.a({},e.groupSchemas,(a={},a[n.id]=Object(s.c)(t.payload.aggregations,Object(s.a)(e.groupSchemas[n.id]),"groupCategories"),a))}):"org"===n.type?i.a({},e,{orgSchemas:i.a({},e.orgSchemas,(o={},o[n.id]=Object(s.c)(t.payload.aggregations,Object(s.a)(e.orgSchemas[n.id]),"categories"),o))}):r},e)}return e;default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(0),i=r(3),a=r(46),o={};t.a=function(e,t){switch(void 0===e&&(e=o),t.type){case i.c:return n.a({},e,t.payload.search.organizations);case i.f:case a.b:return n.a({},e,t.payload.organizations);default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return a});var n=r(0),i=r(48),a={};t.a=function(e,t){var r;switch(void 0===e&&(e=a),t.type){case i.b:return n.a({},e,((r={})[t.payload.owner.username]=t.payload.owner,r));default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return l});var n=r(1),i=r(156),a=r(157),o=r(160),s=r(161),c=r(162),u=r(163),l={sidePanel:i.b,expanded:a.b,resultPanel:o.b,filters:s.b,tagsFilter:c.b,pagination:u.b};t.a=Object(n.combineReducers)({sidePanel:i.a,expanded:a.a,resultPanel:o.a,filters:s.a,tagsFilter:c.a,pagination:u.a})},function(e,t,r){"use strict";r.d(t,"b",function(){return u});var n=r(0),i=r(54),a=r(91),o=r(104),s=r(105),c=r(3),u={closing:!1,type:"hidden"};t.a=function(e,t){switch(void 0===e&&(e=u),t.type){case i.b:return n.a({},e,{closing:!0});case i.a:return n.a({},e,{closing:!1,type:"hidden",item:void 0});case a.a:return n.a({},e,{type:"item",item:t.payload});case o.a:return n.a({},e,{type:"filter",item:void 0});case s.a:return n.a({},e,{type:"sort",item:void 0});case c.c:return"item"===e.type&&e.item&&!t.payload.search.results.filter(function(t){return e.item&&t.id===e.item.id})[0]?n.a({},e,{closing:!0}):e;default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return s});var n=r(158),i=r(159),a=r(1),o=r(38),s={filters:n.b,sort:i.b,maximized:!1,closing:!1};t.a=Object(a.combineReducers)({filters:n.a,sort:i.a,maximized:function(e,t){switch(t.type){case o.b:return!0;case o.c:return!1;default:return e}},closing:function(e,t){switch(t.type){case o.a:return!0;default:return e}}})},function(e,t,r){"use strict";r.d(t,"b",function(){return i});var n=r(38),i=!1;t.a=function(e,t){switch(t.type){case n.d:return!e;default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return a});var n=r(38),i=r(37),a=!1;t.a=function(e,t){switch(t.type){case n.e:case i.a:case i.b:return!e;default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(0),i=r(3),a=r(92),o={display:"list",status:"empty"};t.a=function(e,t){switch(void 0===e&&(e=o),t.type){case i.b:return n.a({},e,{status:"failed"});case i.c:return n.a({},e,{status:"success"});case i.e:return n.a({},e,{status:"failed"});case i.f:return n.a({},e,{status:"success"});case i.a:return n.a({},e,{status:"loading"});case i.d:return n.a({},e,{status:"loadingNext"});case a.a:return n.a({},e,{display:"table"===e.display?"list":"table"});case a.b:return n.a({},e,{status:"empty"});default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(0),i=r(4),a=r(51),o={};t.a=function(e,t){switch(void 0===e&&(e=o),t.type){case i.a:return{};case i.k:return n.a({},e,{modifiedSection:t.payload.section});case i.b:return n.a({},e,{createdSection:t.payload.section});case a.a:return{};default:return e}}},function(e,t,r){"use strict";r.d(t,"b",function(){return u});var n=r(0),i=r(14),a=r(55),o=r(51),s=r(58),c=r(3),u={allTags:[],filterString:"",visibleTags:[]};t.a=function(e,t){switch(void 0===e&&(e=u),t.type){case o.a:return n.a({},e,{filterString:""});case s.d:return n.a({},e,{filterString:t.payload,visibleTags:e.allTags.filter(function(e){return 0===t.payload.length||e.value.indexOf(t.payload)>-1})});case s.a:return e;case s.c:if(t.payload.aggregations&&(i=t.payload.aggregations.counts.filter(function(e){return"tags"===e.fieldName})[0])){var r=function(e,t){return p(e.concat(t))}(e.allTags,i.fieldValues);return n.a({},e,{allTags:r,visibleTags:r.filter(function(t){return 0===e.filterString.length||t.value.indexOf(e.filterString)>-1})})}return e;case s.b:return e;case c.c:var i;return t.payload.aggregations&&(i=t.payload.aggregations.counts.filter(function(e){return"tags"===e.fieldName})[0])?(r=p(i.fieldValues),n.a({},e,{allTags:r,visibleTags:r.filter(function(t){return 0===e.filterString.length||t.value.indexOf(e.filterString)>-1})})):e;default:return e}};var l=Object(a.c)("value"),p=Object(i.a)(l,function(e){return e.map(function(e){var t=e.value,r=e.count;return{value:t.trim(),count:r}})},function(e){return e.sort(function(e,t){return t.count-e.count})})},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(0),i=r(46),a=r(3),o={page:1,displayItems:[],status:"loading"};t.a=function(e,t){switch(void 0===e&&(e=o),t.type){case i.c:return n.a({},e,{status:"loading"});case i.b:return n.a({},e,{displayItems:t.payload.displayItems,page:t.payload.page,status:"success"});case i.a:return n.a({},e,{status:"failed"});case a.c:return n.a({},e,{displayItems:t.payload.search.results,status:"success",page:1});default:return e}}},function(e,t,r){"use strict";function n(e){var t=i.a.filter(function(t){return-1===e.indexOf(t)}).filter(function(t){return e.reduce(function(e,r){return t.indexOf(r)>-1||e},!1)});return'((type:"'+e.join('" OR type:"')+'")'+(t.length>0?' AND (-type:"'+t.join('" AND -type:"')+'")':"")+")"}r.d(t,"a",function(){return o});var i=r(45),a=r(7),o=Object(a.a)(function(e,t,r){var i=t.itemTypeFilter,a=t.allowedItemTypes,o=t.specialItemQ;return i?r.concat([e[i.value]+" AND ("+n(a)+(o?" OR ("+o+")":"")+")"]):o?r.concat(["("+n(a)+" OR ("+o+"))"]):r.concat([n(a)])})},function(e,t,r){"use strict";var n=r(51);r.d(t,"a",function(){return n.b});var i=r(103);r.d(t,"b",function(){return i.c})},function(e,t,r){"use strict";var n=r(167);r.d(t,"a",function(){return n.a})},function(e,t,r){"use strict";var n=r(91);r.d(t,"a",function(){return n.b})},,,,,,,,,,,,,,,,,,,function(e,t){e.exports=h},function(e,t,r){"use strict";var n=r(0),i=r(1),a=r(189),o=r(192),s=r(188),c=r.n(s),u=function(e){function t(t){return e.call(this,t)||this}return n.b(t,e),t.prototype.render=function(e){return e("div",{id:"item-browser-container",classes:this.props.containerClasses,key:"ib-expanded"},e(c.a,{closing:this.props.closing,key:"ib-big-overlay",scrollable:!this.props.filtersVisible&&!this.props.sortVisible||!window.matchMedia("(max-width: 860px)").matches},e(a.a,{key:"big-browser-header"}),e(o.a,{key:"big-browser-body"})))},t}(i.Component);t.a=Object(i.connect)(function(e){return{closing:e.ui.expanded.closing,filtersVisible:e.ui.expanded.filters,sortVisible:e.ui.expanded.sort}},function(){return{}})(u)},function(e,t){e.exports=g},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(22),s=r.n(o),c=r(190),u=function(e){function t(t){var r=e.call(this,t)||this;return r.handleContract=r.handleContract.bind(r),r.handleClose=r.handleClose.bind(r),r}return n.b(t,e),t.prototype.render=function(e){return e("header",{class:"ib__big-header"},e("div",{class:"ib__big-header-title-section"},e("h4",{class:"ib__big-header-title"},this.props.dialogTitle),"adjustable"===this.props.layoutMode?e(s.a,{key:"contract-btn",focusable:!0,handleClick:this.handleContract},e("svg",{width:"24",height:"24",viewBox:"0 0 32 32"},e("path",{d:"M20 20h12v3h-6.915L32 29.723v2.109l-.168.168h-2.117L23 25.09V32h-3V20zM0 23h6.915L0 29.723v2.109L.168 32h2.117L9 25.09V32h3V20H0v3zM9 6.91L2.285 0H.168L0 .168v2.109L6.915 9H0v3h12V0H9v6.91zM32 .168L31.832 0h-2.117L23 6.91V0h-3v12h12V9h-6.915L32 2.277V.168z"}))):e(s.a,{key:"main-close-btn",focusable:!0,handleClick:this.handleClose,title:i.close},e("svg",{width:"24",height:"24",viewBox:"0 0 32 32"},e("path",{d:"M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"})))),e(c.a,{key:"big-browser-section-tabs"}))},t.prototype.handleContract=function(){this.props.onBack()},t.prototype.handleClose=function(){this.props.onBack()},t}(a.Component);t.a=Object(a.connect)(function(e){return{dialogTitle:e.settings.config.dialogTitle,layoutMode:e.settings.config.layoutMode,onBack:function(){e.settings.config.onBack&&e.settings.config.onBack()}}},function(){return{}})(u)},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(51),s=r(3),c=r(191),u=r.n(c),l=function(e){function t(t){var r=e.call(this,t)||this;return r.state={options:(r.props.user?r.props.baseSections:r.props.baseSections.filter(function(e){return"livingAtlas"===e||"all"===e})).map(function(e){return{value:e,text:i.header.sectionTitles[e]}}).concat(r.props.customSections.map(function(e){return{value:e.name,text:e.name}}))},r.handleTabSelect=r.handleTabSelect.bind(r),r}return n.b(t,e),t.prototype.render=function(e){return e(u.a,{key:"ib-expanded-nav",options:this.state.options,onSelect:this.handleTabSelect,selectedOptionValue:this.props.currentSection})},t.prototype.handleTabSelect=function(e){this.props.changeSearchSection(e),this.props.search(!0)},t}(a.Component);t.a=Object(a.connect)(function(e){return{user:e.settings.utils.portal.user,baseSections:e.settings.config.baseSections,customSections:e.settings.config.customSections,currentSection:e.parameters.section}},function(e){return{changeSearchSection:function(t){e(Object(o.b)(t))},search:function(t){e(Object(s.h)(t))}}})(l)},function(e,t){e.exports=m},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(195),s=r(208),c=r(210),u=r(194),l=r(75),p=r.n(l),d=r(46),f=r(30),h=r.n(f),g=r(193),m=r.n(g),b=r(62),y=r(38),v=function(e){function t(t){var r=e.call(this,t)||this;return r.handlePageChange=r.handlePageChange.bind(r),r.handleCloseMobileFilters=r.handleCloseMobileFilters.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t=this.props.expandedFiltersActive,r={"ib__big-section":!0,"ib__big-filters":!0,"ib__big-filters--hidden":!t,"ib__big-filters--visible":t},n="loading"===this.props.resultStatus||"loading"===this.props.paginationStatus,a={"ib__big-wrapper":!0,"ib__big-wrapper--faded":n,"ib__big-wrapper--transparent":n&&0===this.props.pageDisplayItems.length},l=Math.ceil(this.props.itemTotal>1e4?1e4/this.props.resultsPerQuery:this.props.itemTotal/this.props.resultsPerQuery);return e("main",{class:"ib__big-body"},e(u.a,{key:"ib__big-search-area"}),e("div",{class:"ib__big-row"},e("section",{classes:r,key:"fullscreen-filters"},e(o.a,null)),e("div",{class:"ib__big-overlay-filters"},e(m.a,{key:"mobile-filter-wrap",maxHeight:!0,open:this.props.expandedFiltersActive,onClose:this.handleCloseMobileFilters,title:"Filter",footer:e("button",{class:"ib__big-filter-results-btn",onclick:this.handleCloseMobileFilters},i.viewResults)},e(b.a,{key:"mobile-filters"}))),e("section",{class:"ib__big-section ib__big-results",key:"results-section"},e("div",{classes:a},e(s.a,{key:"big-browser-input-area"}),e(c.a,{key:"big-browser-result-panel"}),l>1?e(p.a,{key:"big-browser-pager",onPageChange:this.handlePageChange,numPages:l,currentPage:this.props.currentPage,paginationLimitReached:this.props.itemTotal>1e4}):null),n?e("div",{class:"ib-ex__load-container",key:"ib-ex__load-container"},e(h.a,{key:"item-ex-loading"})):null)))},t.prototype.handlePageChange=function(e){this.props.changePage(e)},t.prototype.handleCloseMobileFilters=function(){this.props.toggleExpandedFilters()},t}(a.Component);t.a=Object(a.connect)(function(e){return{expandedFiltersActive:e.ui.expanded.filters,resultStatus:e.ui.resultPanel.status,paginationStatus:e.ui.pagination.status,pageDisplayItems:e.ui.pagination.displayItems,currentPage:e.ui.pagination.page,itemTotal:e.parameters.nextQuery.total,resultsPerQuery:e.settings.config.resultsPerQuery}},function(e){return{changePage:function(t){e(Object(d.d)(t))},toggleExpandedFilters:function(){e(Object(y.f)())}}})(v)},function(e,t){e.exports=b},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(59),s=r.n(o),c=r(38),u=r(37),l=r(90),p=r(3),d=r(76),f=r.n(d),h=["relevance","title","owner","created","modified","numviews"],g={myContent:["modified","title"],myFavorites:["relevance","modified","title","numviews","owner"],myGroups:["relevance","modified","title","numviews","owner"],myOrganization:["relevance","modified","title","numviews","owner"],livingAtlas:["relevance","modified","title","numviews","owner"],all:["relevance","title","owner","modified","numviews"]},m=function(e){function t(t){var r=e.call(this,t)||this;return r.handleToggleFilters=r.handleToggleFilters.bind(r),r.handleSearchChange=r.handleSearchChange.bind(r),r.handleSearchKeyDown=r.handleSearchKeyDown.bind(r),r.handleSortFieldChange=r.handleSortFieldChange.bind(r),r.handleSortOrderChange=r.handleSortOrderChange.bind(r),r.handleSortClick=r.handleSortClick.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t=this.props.searchPlaceholderText?this.props.searchPlaceholderText:i.searchPlaceholders.generic,r=this.props.section,n=g[r]?g[r].slice():h.slice();return e("div",{class:"ib-ex-search-area__container"},e("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},e("path",{d:"M19.205 18.295l-7.036-7.035A6.874 6.874 0 0 0 6.875 0 6.874 6.874 0 0 0 0 6.875a6.874 6.874 0 0 0 11.286 5.27l7.035 7.034.884-.884zM1.25 6.875A5.632 5.632 0 0 1 6.875 1.25 5.632 5.632 0 0 1 12.5 6.875 5.632 5.632 0 0 1 6.875 12.5 5.632 5.632 0 0 1 1.25 6.875z",fill:"#595959","fill-rule":"nonzero"})),e("input",{id:"ib-ex-search-area__input",class:"ib-ex-search-area__input",type:"search",oninput:this.handleSearchChange,onkeydown:this.handleSearchKeyDown,value:this.props.searchString,placeholder:t,title:i.header.search,"aria-label":i.header.search}),e("div",{class:"ib-ex-search-area__btn-section"},e(f.a,{active:this.props.sortActive,key:"ib-ex-sort-dropdown",field:this.props.sortField,order:this.props.sortOrder,availableFields:n,onFieldChange:this.handleSortFieldChange,
onOrderChange:this.handleSortOrderChange,onClick:this.handleSortClick}),e(s.a,{key:"ib-ex-filter-btn",active:this.props.expandedFiltersActive,handleClick:this.handleToggleFilters},e("div",{class:"drp-sort__btn-body"},e("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16"},e("g",{stroke:"none","stroke-width":"1"},e("g",{id:"filter-sliders-1px-16"},e("path",{d:"M7,13 L0,13 L0,12 L7,12 L7,10 L8,10 L8,15 L7,15 L7,13 Z M12,8 L0,8 L0,7 L12,7 L12,5 L13,5 L13,10 L12,10 L12,8 Z M2,3 L0,3 L0,2 L2,2 L2,0 L3,0 L3,5 L2,5 L2,3 Z M4,2 L16,2 L16,3 L4,3 L4,2 Z M14,7 L16,7 L16,8 L14,8 L14,7 Z M9,12 L16,12 L16,13 L9,13 L9,12 Z"})))),e("span",{class:"drp-sort__btn-label"},i.filterPane.filter)))))},t.prototype.handleToggleFilters=function(){this.props.toggleExpandedFilters()},t.prototype.handleSearchChange=function(e){this.props.changeSearchString(e.target.value),""===e.target.value&&""!==this.props.previousSearchString&&this.props.search(!0)},t.prototype.handleSearchKeyDown=function(e){"Enter"===e.key&&this.props.search(!0)},t.prototype.handleSortFieldChange=function(e){this.props.changeSortField(e),this.props.search()},t.prototype.handleSortOrderChange=function(e){this.props.changeSortOrder(e),this.props.search()},t.prototype.handleSortClick=function(){this.props.toggleExpandedSort()},t}(a.Component);t.a=Object(a.connect)(function(e){return{searchPlaceholderText:e.settings.config.searchPlaceholderText,section:e.parameters.section,searchString:e.parameters.searchString.current,previousSearchString:e.parameters.searchString.previous,sortActive:e.ui.expanded.sort,sortField:e.parameters.sort.field,sortOrder:e.parameters.sort.order,expandedFiltersActive:e.ui.expanded.filters}},function(e){return{toggleExpandedFilters:function(){e(Object(c.f)())},toggleExpandedSort:function(){e(Object(c.g)())},changeSortField:function(t){e(Object(u.c)(t))},changeSortOrder:function(t){e(Object(u.d)(t))},changeSearchString:function(t){e(Object(l.b)(t))},search:function(t){e(Object(p.h)(t))}}})(m)},function(e,t,r){"use strict";var n=r(62);t.a=function(e,t){return t(n.a,{key:"big-browser-filters"})}},function(e,t){e.exports=y},function(e,t){e.exports=v},function(e,t){e.exports=O},function(e,t){e.exports=S},function(e,t){e.exports=C},function(e,t){e.exports=T},function(e,t){e.exports=_},function(e,t){e.exports=k},function(e,t){e.exports=j},function(e,t,r){"use strict";function n(e){var t,r=e.settings.utils.portal.user,n=!r,a=!n&&!r.orgId;return t=n||a?a?function(e){switch(e.parameters.section){case"myContent":return["folder","itemType","modified","created","tags","shared"];case"myFavorites":return["itemType","modified","created","tags","status"];case"myGroups":return["groupCategories","group","itemType","modified","tags","created"];case"livingAtlas":return["livingAtlasCategories","livingAtlasRegion","itemType","tags","status"];case"all":return["itemType","modified","status"];default:return i(e)}}(e):function(e){switch(e.parameters.section){case"livingAtlas":return["livingAtlasCategories","livingAtlasRegion","itemType","tags","status"];case"all":return["itemType","modified","status"];default:return i(e)}}(e):function(e){switch(e.parameters.section){case"myContent":return["folder","orgCategories","itemType","modified","created","tags","shared","status"];case"myFavorites":return["itemType","modified","created","tags","shared","status"];case"myGroups":return["groupCategories","group","itemType","modified","created","tags","shared","status"];case"myOrganization":return["orgCategories","itemType","modified","created","tags","shared","status"];case"livingAtlas":return["livingAtlasCategories","livingAtlasRegion","itemType","tags","status"];case"all":return["itemType","modified","shared","status"];default:return i(e)}}(e),function(e,t){var r=t.indexOf("itemType");return e&&r>-1&&t.splice(r,1),t}(e.settings.config.disableItemTypeFilters,t)}function i(e){return e.settings.config.customSections.reduce(function(t,r){return r.name===e.parameters.section&&r.filters?r.filters:t},["itemType","modified","shared"])}r.d(t,"a",function(){return n})},function(e,t,r){"use strict";var n=r(0),i=r(1),a=r(66),o=r.n(a),s=r(207),c=r.n(s),u=function(e){function t(t){var r=e.call(this,t)||this;return r.handleClear=r.handleClear.bind(r),r.handleClick=r.handleClick.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t=this,r=this.props.filter;return e(c.a,{key:r.displayName+"-filter-accordion",clearable:!1,onClear:this.handleClear,title:r.displayName},e("ul",{"aria-label":r.displayName,id:r.displayName+"-filter-accordion-tree",class:"ftr-custom__tree",role:"tree"},r.children?r.children.map(function(r){return e(o.a,{key:r.value,value:r.value,name:r.displayName,onToggleClick:t.handleClick,selectedToggle:t.props.selectedOption,childOptions:r.children})}):null))},t.prototype.handleClear=function(){this.props.onClear(this.props.index)},t.prototype.handleClick=function(e,t){e===this.props.selectedOption?this.props.onClick(this.props.index,void 0):this.props.onClick(this.props.index,e,t)},t}(i.Component);t.a=u},function(e,t){e.exports=A},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(106),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.b(t,e),t.prototype.render=function(e){return e("div",{class:"ib-ex-input__container",key:"ib-result-count-container"},e("span",{class:"ib-ex-input-area__result-count"},this.props.itemTotal.toLocaleString()+" "+(this.props.itemName?this.props.itemName:i.resultCount)),e(o.a,{staticFilters:this.props.staticFilters,key:"ib-ex__active-filters",theme:"dark"}))},t}(a.Component);t.a=Object(a.connect)(function(e){return{itemName:e.settings.config.itemName,itemTotal:e.parameters.nextQuery.total,staticFilters:e.settings.config.staticFilters}},function(){return{}})(s)},function(e,t){e.exports=I},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(211),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.b(t,e),t.prototype.render=function(e){return"success"!==this.props.resultStatus&&"loading"!==this.props.resultStatus||"success"!==this.props.pageStatus&&"loading"!==this.props.pageStatus?e("div",{key:"request-error",class:"ib__results"},e("div",{class:"ib-results__message-container"},e("span",{class:"ib-results__message"},i.results.requestError))):e(o.a,{key:"ib-ex-item-list"})},t}(a.Component);t.a=Object(a.connect)(function(e){return{resultStatus:e.ui.resultPanel.status,pageStatus:e.ui.pagination.status}},function(){return{}})(s)},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(212),s=r.n(o),c=r(31),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.b(t,e),t.prototype.render=function(e){var t=this,r=Object(c.a)(this.props.stateTree),n=this.props.stateTree.ui.pagination.displayItems.map(function(n){var i="public_authoritative"===n.contentStatus&&t.props.stateTree.results.allOrganizations[n.orgId]?t.props.stateTree.results.allOrganizations[n.orgId]:void 0;return e(s.a,{key:n.id,item:n,organization:i,portal:r,mainAction:t.props.stateTree.settings.config.onSelect,mainActionTitle:t.props.stateTree.settings.config.mainActionTitle,customActions:t.props.stateTree.settings.config.customActions,sortField:t.props.stateTree.parameters.sort.field})});return n.length>0?e("div",{key:this.props.key,class:"ib-ex-results__item-list"},n):e("div",{key:this.props.key,class:"ib-ex-results__item-list"},e("div",{class:"ib-ex-results__no-items-container"},e("div",{class:"ib-ex-results__no-items-centered"},e("svg",{viewBox:"0 0 256 256",width:"256"},e("path",{fill:"#ccc",d:"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"})),e("p",{class:"ib-ex-results__no-items-text"},i.results.noItemsFound))))},t}(a.Component);t.a=Object(a.connect)(function(e){return{stateTree:e}},function(){return{}})(u)},function(e,t){e.exports=R},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(54),s=r(215),c=r(216),u=r(214),l=r(227),p=function(e){function t(t){var r=e.call(this,t)||this;return r.handleCloseDetailsPane=r.handleCloseDetailsPane.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t,r=this.props.detailsPaneType,n=this.props.sidePanelType,a=this.props.closing,o={"ib-side__container--fade-in":!a,"ib-side__container--fade-out":a,"ib-side__container--flyout":"flyout"===r,"ib-side__container--flyover":"flyover"===r},p={"ib-side__content--flyout":"flyout"===r,"ib-side__content--in-right":!a&&"flyout"===r,"ib-side__content--out-left":a&&"flyout"===r,"ib-side__content--flyover":"flyover"===r,"ib-side__content--in-left":!a&&"flyover"===r,"ib-side__content--out-right":a&&"flyover"===r};if("sort"===n)t=e(u.a,{key:"sort-pane"});else if("filter"===n)t=e(s.a,{key:"filter-pane"});else if("item"===n&&this.props.sidePanelItem)t=e(c.a,{key:this.props.sidePanelItem.id,item:this.props.sidePanelItem});else if("hidden"===n)return;return e(l.a,{key:"item"===n&&this.props.sidePanelItem?""+this.props.sidePanelItem.id:n,containerClasses:o,contentClasses:p,handleClose:this.handleCloseDetailsPane,i18n:i,type:n},t)},t.prototype.componentWillReceiveProps=function(e){var t=this;if(!this.props.closing&&e.closing){if("item"===this.props.sidePanelType&&this.props.sidePanelItem){var r=document.getElementById("item-"+this.props.sidePanelItem.id+"-card-title");r&&r.focus()}else if("filter"===this.props.sidePanelType){var n=document.getElementById("filter-button");n&&n.focus()}else if("sort"===this.props.sidePanelType){var i=document.getElementById("sort-button");i&&i.focus()}setTimeout(function(){t.props.closeDetailsPaneImmediately()},300)}},t.prototype.handleCloseDetailsPane=function(){this.props.closeDetailsPane()},t}(a.Component);t.a=Object(a.connect)(function(e){return{detailsPaneType:e.settings.config.detailsPaneType,sidePanelType:e.ui.sidePanel.type,sidePanelItem:e.ui.sidePanel.item}},function(e){return{closeDetailsPane:function(){e(Object(o.c)())},closeDetailsPaneImmediately:function(){e({type:o.a})}}})(p)},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(37),s=r(3),c=r(66),u=r.n(c),l=["relevance","title","owner","created","modified","numviews"],p={myContent:["modified","title"],myFavorites:["relevance","modified","title","numviews","owner"],myGroups:["relevance","modified","title","numviews","owner"],myOrganization:["relevance","modified","title","numviews","owner"],livingAtlas:["relevance","modified","title","numviews","owner"],all:["relevance","title","owner","modified","numviews"]},d=function(e){function t(t){var r=e.call(this,t)||this;return r.handleChangeSortField=r.handleChangeSortField.bind(r),r.handleChangeSortAsc=r.handleChangeSortAsc.bind(r),r.handleChangeSortDesc=r.handleChangeSortDesc.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t=this,r=this.props.section,n=(p[r]?p[r].slice():l.slice()).map(function(r){return e(u.a,{key:r,name:i.sortOptions[r],value:r,selectedToggle:t.props.sortField,onToggleClick:t.handleChangeSortField})}),a=this.props.sortField,o=this.props.sortOrder;return e("div",{id:"sort-pane-container",key:"sort-pane-container",class:"ib-sort-pane__container"},e("h4",{class:"ib-sort-pane__title"},i.sortOptions.sort),e("div",{class:"ib-sort-pane__body"},e("h5",{id:"sort-options-title",class:"ib-sort-pane__label"},i.sortOptions.sortBy),e("ul",{key:"sort-option-section",class:"ib-sort-pane__option-section",role:"radiogroup","aria-labelledby":"sort-options-title","aria-activedescendent":this.props.sortField+"-option"},n),e("h5",{id:"sort-dir-title",class:"ib-sort-pane__label",style:"display: "+("relevance"===a?"none":"auto")},i.sortOptions.sortDir),e("ul",{key:"sort-direction-section",class:"ib-sort-pane__dir-section",role:"radiogroup","aria-labelledby":"sort-dir-title","aria-activedescendent":o+"-option",style:"display: "+("relevance"===a?"none":"auto")},e(u.a,{key:"sort-asc-toggle",name:i.sortOptions.ascending[a],value:"asc",onToggleClick:this.handleChangeSortAsc,selectedToggle:o}),e(u.a,{key:"sort-desc-toggle",name:i.sortOptions.descending[a],value:"desc",onToggleClick:this.handleChangeSortDesc,selectedToggle:o}))))},t.prototype.handleChangeSortField=function(e){this.props.changeSortField(e),this.props.search()},t.prototype.handleChangeSortAsc=function(e){"desc"===this.props.sortOrder&&(this.props.changeSortOrder("asc"),this.props.search())},t.prototype.handleChangeSortDesc=function(e){"asc"===this.props.sortOrder&&(this.props.changeSortOrder("desc"),this.props.search())},t}(a.Component);t.a=Object(a.connect)(function(e){return{section:e.parameters.section,sortField:e.parameters.sort.field,sortOrder:e.parameters.sort.order}},function(e){return{changeSortField:function(t){e(Object(o.c)(t))},changeSortOrder:function(t){e(Object(o.d)(t))},search:function(t){e(Object(s.h)(t))}}})(d)},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(62),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.b(t,e),t.prototype.render=function(e){return e("div",{id:"filter-pane-container",key:"filter-pane-container",class:"ib-filter-pane__container"},e("h4",{class:"ib-filter-pane__title"},i.filterPane.filter),e(o.a,{key:"filter-options"}))},t}(a.Component);t.a=s},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(26),s=r(31),c=r(30),u=r.n(c),l=r(225),p=r(217),d=r.n(p),f=r(218),h=r.n(f),g=r(219),m=r.n(g),b=r(220),y=r.n(b),v=r(221),O=r.n(v),S=r(222),C=r.n(S),T=r(223),_=r.n(T),k=r(22),j=r.n(k),A=r(224),I=r(226),R=r(20),w=function(e){function t(t){var r=e.call(this,t)||this;return r.handleItemDetails=r.handleItemDetails.bind(r),r.handleFavorites=r.handleFavorites.bind(r),r}return n.b(t,e),t.prototype.render=function(e){if(!(this.props.stateTree.results.fullItemDetails[this.props.item.id]&&this.props.stateTree.results.users[this.props.item.owner]||this.props.stateTree.results.failedItemDetails[this.props.item.id]))return e(u.a,{key:"loading-item-details"});if(this.props.stateTree.results.failedItemDetails[this.props.item.id])return e("div",{class:"ib-item-pane__message-container"},e("span",{class:"ib-results__message"},i.results.requestError));var t=this.props.stateTree.results.fullItemDetails[this.props.item.id],r=this.props.stateTree.results.users[t.owner],n=Object(s.a)(this.props.stateTree),a=(t&&this.props.stateTree.results.selectedItems[t.id],t&&this.props.stateTree.results.loadingItems[t.id]),o={"ib-item-pane__fader":!0,"ib-item-pane__fader--loading":a},c=new Date(t.modified),p=new Date(t.created),d=this.props.stateTree.results.allOrganizations[t.orgId],f="public_authoritative"===t.contentStatus&&t.orgId&&!!d;return[e("div",{class:"ib-item-pane__thumb-container"},e("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"ib-item-pane__thumbnail",style:"\n                            display: block;\n                            padding: none;\n                            margin: none;\n                            background-image: url("+t.thumbURI+");\n                            width: 15rem;\n                            height: 10rem;\n                        ",alt:""}),e(A.a,{favorites:this.props.stateTree.results.user.favorites,item:t,onToggleFavorite:this.handleFavorites})),e("div",{id:"item-pane-container",class:"ib-item-pane__container",key:t.id+"-container"},e("div",{classes:o},e("div",{key:"item-details"},e("h4",{class:"ib-item-pane__title"},t.title,"Â ",e(j.a,{key:"view-full-item-details",title:i.itemDetails.viewDetails,handleClick:this.handleItemDetails,focusable:!0},e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",style:"transform: translate(0, -2px);"},e("path",{d:"M13 15h-12v-12h10v-1h-11v14h14v-6h-1z"}),e("path",{d:"M13 7.536l3-3-3-3v1.061l1.404 1.404h-1.404c-3.85 0-7 3.15-7 7v1h1v-1c0-3.309 2.691-6 6-6h1.475l-1.475 1.475v1.061z"})))),e("span",{key:"item-owner",class:"ib-item-pane__owner-text"},e("img",{src:t.iconURI,class:"ib-item-pane__type-icon",title:t.displayName}),t.displayName," ",i.itemDetails.by,"Â ",e("a",{class:"ib-item-pane__owner-link",title:f?i.itemDetails.viewOrg:i.itemDetails.viewUser,target:"_blank",href:f?d.orgUrl:n.baseUrl+"/home/user.html?user="+t.owner},f?d.name:t.owner)),e("span",{key:"modified-date",class:"ib-item-pane__modified"},i.itemDetails.lastModified,": "+R.format(c,{selector:"date",formatLength:"long"})),e("div",{class:"ib-item-pane__badges"},this.renderBadges(t,e)),e("div",{class:"ib-item-pane__line",style:"width: 100%; border-bottom: 1px solid #ccc"}),e("span",{key:"snippet",class:"ib-item-pane__snippet"},t.snippet?t.snippet:i.itemDetails.noSnippet),e("h5",{class:"ib-item-pane__details"},i.itemDetails.details),t.patchedDescription?e("span",{key:"item-description",innerHTML:t.patchedDescription,class:"ib-item-pane__description"}):e("span",{key:"item-no-description",class:"ib-item-pane__description"},i.itemDetails.noDescription),e("h5",{class:"ib-item-pane__terms-of-use"},i.itemDetails.termsOfUse),t.licenseInfo?e("span",{key:"item-terms-of-use",innerHTML:t.licenseInfo,class:"ib-item-pane__license-info"}):e("span",{key:"item-no-terms-of-use",class:"ib-item-pane__license-info"},i.itemDetails.noTermsOfUse),e("h5",{class:"ib-item-pane__credits"},i.itemDetails.attribution),t.accessInformation?e("span",{key:"item-access-information",innerHTML:t.accessInformation,class:"ib-item-pane__attribution"}):e("span",{key:"item-no-access-information",class:"ib-item-pane__attribution"},i.itemDetails.noAttribution),f?e("p",null,e("h5",{class:"ib-item-pane__pa-owner"},i.sortOptions.owner),e("div",{class:"ib-item-pane__pa-org"},e("img",{src:d.thumbURI,alt:d.name,class:"ib-item-pane__pa-org-thumb user-image-small-inline padding-right-half display-block js-owner-thumbnail"}),d.name),e("div",{class:"ib-item-pane__pa-managed"},e("span",{class:"ib-item-pane__pa-managed-label"},i.itemDetails.managedBy),e("div",{class:"ib-item-pane__pa-manager"},r.thumbURI?e("img",{src:r.thumbURI,class:"ib-item-pane__pa-managed-thumb"}):e(l.a,{class:"ib-item-pane__pa-managed-thumb"}),t.owner))):null,e("span",{key:"num-views",class:"ib-item-pane__num-views"},e("strong",null,i.itemDetails.views),": "+t.numViews),e("span",{key:"created-date",class:"ib-item-pane__num-views"},e("strong",null,i.itemDetails.created),": "+R.format(p,{selector:"date",formatLength:"long"})),e(I.a,{baseUrl:n.baseUrl,item:t}))),a?e(u.a,{key:"item-pane-loading"}):null)]},t.prototype.renderBadges=function(e,t){var r=this,n=this.props.stateTree.settings.utils.portal.user;return e.badges.map(function(i){switch(i){case"authoritative":return t(d.a,{altOrg:"public_authoritative"===e.contentStatus&&r.props.stateTree.results.allOrganizations[e.orgId]?r.props.stateTree.results.allOrganizations[e.orgId].name:void 0});case"deprecated":return t(h.a,null);case"livingAtlas":return t(m.a,null);case"marketplace":return t(y.a,null);case"openData":return t(O.a,null);case"premium":return t(C.a,{user:n});case"subscriber":return t(_.a,{user:n})}return null})},t.prototype.handleItemDetails=function(){var e=Object(s.a)(this.props.stateTree),t=this.props.stateTree.ui.sidePanel.item;t&&window.open(e.baseUrl+"/home/item.html?id="+t.id,"_blank")},t.prototype.formatSize=function(e,t){return e?e<=1024?["1 ",t("small",{key:"1kb-size"},"KB")]:e<1048576?[Math.round(e/1024).toLocaleString()+" ",t("small",{key:"1kb-size"},"KB")]:[Math.round(e/1048576).toLocaleString()+" ",t("small",{key:"1kb-size"},"MB")]:["0 ",t("small",{key:"0kb-size"},"KB")]},t.prototype.handleFavorites=function(){var e=this.props.stateTree.ui.sidePanel.item,t=this.props.stateTree.results.user.favorites;e&&t&&t[e.id]?this.props.removeFromFavorites(e):e&&t&&!t[e.id]&&this.props.addToFavorites(e)},t}(a.Component);t.a=Object(a.connect)(function(e){return{stateTree:e}},function(e){return{addToFavorites:function(t){e(Object(o.k)(t))},removeFromFavorites:function(t){e(Object(o.m)(t))}}})(w)},function(e,t){e.exports=w},function(e,t){e.exports=F},function(e,t){e.exports=L},function(e,t){e.exports=x},function(e,t){e.exports=E},function(e,t){e.exports=D},function(e,t){e.exports=P},function(e,t,r){"use strict";var n=r(2);t.a=function(e,t){var r=e.favorites,i=e.onToggleFavorite,a=e.item;if(!r)return null;var o=!!r[a.id];return t("button",{onclick:i,classes:{"ib-item-pane__favorites-btn":!0,"ib-item-pane__favorites-btn--active":o}},t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},t("path",{d:"M16.043.367L19.813 12H32l-9.859 7.172 3.789 11.625-9.887-7.193-9.889 7.193 3.787-11.625L0 12h12.271z"})),o?n.itemDetails.removeFromFavorites:n.itemDetails.addToFavorites)}},function(e,t,r){"use strict";t.a=function(e,t){return t("div",{class:e.class},t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 150 150",height:"100%",width:"100%"},t("path",{id:"path3727",d:"m 52,148.35766 c -2.475,-0.18484 -10.8,-0.45343 -18.5,-0.59687 L 19.5,147.5 19.194994,142.1708 C 18.780069,134.92106 24.675201,110.99518 28,106.43495 c 2.119734,-2.90738 3.184268,-3.40501 11.820245,-5.52557 14.015326,-3.441464 12.799724,-4.197584 21.447495,13.34062 4.135724,8.3875 8.291761,16.93353 9.235637,18.99118 0.943876,2.05765 2.065683,3.52516 2.492905,3.26112 0.427221,-0.26404 4.718162,-8.47257 9.535425,-18.24118 4.817262,-9.76862 9.137298,-18.24997 9.600081,-18.847444 1.07417,-1.386813 10.747512,-0.129937 19.839562,2.577794 7.37115,2.19522 11.16896,5.44708 12.85677,11.00853 6.69283,22.05341 7.84944,32.33763 3.67188,32.64913 -1.1,0.082 -6.95,0.62022 -13,1.19598 -11.23048,1.06878 -55.365488,2.12006 -63.5,1.51255 z m 20,-17.37753 c 0,-0.56093 -1.107043,-2.77354 -2.460095,-4.91692 -1.353052,-2.14337 -2.772339,-5.17193 -3.153972,-6.73012 C 66.0043,117.77489 65.377929,116.275 64.993998,116 c -0.383932,-0.275 -2.303235,-3.7147 -4.265118,-7.64379 -2.997369,-6.00286 -3.476188,-7.83951 -2.998076,-11.499996 0.312942,-2.395918 0.973535,-4.62137 1.467986,-4.94545 0.494451,-0.32408 2.959173,0.453755 5.47716,1.728522 2.517988,1.274768 6.181951,2.618632 8.142141,2.986366 3.484798,0.653752 4.619546,0.375908 12.565461,-3.076659 3.34951,-1.455391 3.803432,-1.47865 3.300927,-0.169142 -0.398242,1.037802 -0.124039,1.342318 0.866449,0.962233 C 92.04719,93.384178 91.914975,93.739792 82.242203,114 79.747646,119.225 76.801902,125.4125 75.696105,127.75 73.817142,131.72187 72,133.30992 72,130.98013 Z M 70.29923,93.893977 C 68.538807,93.384871 66.824749,92.525456 66.490213,91.984165 66.155677,91.442874 65.211939,91 64.393017,91 c -1.502433,0 -6.302871,-4.784056 -6.361416,-6.339707 -0.01738,-0.461839 -0.887451,-1.586839 -1.933489,-2.5 C 50.802328,77.537229 48.879628,58.999483 52.441931,46.909154 54.720369,39.176219 55.37403,38.7615 68,37.038257 72.675,36.400195 79.341587,35.480846 82.814638,34.995261 86.28769,34.509675 89.663822,34.317502 90.317154,34.568209 91.693801,35.096478 97,43.197939 97,44.771524 c 0,0.583995 0.454771,1.2134 1.010602,1.398677 1.503878,0.501292 2.439668,18.675087 1.175539,22.829799 -2.185196,7.181885 -3.87855,11.047986 -5.800118,13.242269 -1.087422,1.241752 -2.586953,3.479873 -3.332291,4.973602 -0.745338,1.493728 -1.684447,2.51236 -2.086909,2.263625 -0.402462,-0.248735 -1.79714,0.347041 -3.099286,1.323947 -5.368623,4.027692 -8.806128,4.756927 -14.568307,3.090534 z M 47.015313,60.25 C 47.006891,59.5625 46.333573,59 45.519052,59 43.283015,59 42.644845,54.707151 43.38075,44.616059 44.166271,33.844619 44.896556,30 46.15707,30 c 1.316225,0 7.090208,-4.174219 8.645304,-6.25 0.721069,-0.9625 1.890773,-1.75 2.599342,-1.75 0.70857,0 2.102798,-0.9 3.098284,-2 1.625205,-1.795832 3.079967,-2 14.250617,-2 14.795202,0 15.235286,0.195009 24.330624,10.781341 1.078019,1.254737 2.667599,4.179737 3.532399,6.5 0.86481,2.320262 1.94546,5.118659 2.40144,6.218659 1.51768,3.661163 2.10273,13.653118 0.88532,15.120015 -2.35184,2.833785 -3.74627,1.464615 -4.45065,-4.370015 -0.68461,-5.670783 -5.785078,-16.623556 -8.973492,-19.269704 -1.58533,-1.315707 -2.444358,-1.239512 -24.630153,2.184678 -15.102822,2.330992 -14.275738,1.799234 -17.29574,11.119973 -0.852701,2.631721 -1.557256,6.456721 -1.565678,8.5 C 48.976265,56.828226 48.533156,59.175 48,60 c -0.64625,1 -0.974479,1.083333 -0.984687,0.25 z",fill:"#fff"})))}},function(e,t,r){"use strict";var n=r(2);t.a=function(e,t){var r=e.item,i=e.baseUrl,a=n.itemDetails.shared[r.access];if(r.sharedToGroups&&r.sharedToGroups.length>0){var o=r.sharedToGroups.map(function(e){return t("a",{class:"ib-item-pane__group-link",href:i+"/home/group.html?owner="+e.owner+"&title="+e.title,key:e.id,target:"_blank"},e.title)}).reduce(function(e,t,r){return e[r-1]&&e.push(", "),e.push(t),e},[]);a="public"===r.access||"org"===r.access?[a+", ",o]:o}else if("shared"===r.access&&(!r.sharedToGroups||0===r.sharedToGroups.length))return null;return t("span",{key:"shared-with",class:"ib-item-pane__shared"},t("strong",null,n.itemDetails.sharedWith),": ",a)}},function(e,t,r){"use strict";function n(e){e.focus()}var i=r(22),a=r.n(i),o=r(228);t.a=function(e,t){var r=e.key,i=e.containerClasses,s=e.contentClasses,c=e.handleClose,u=e.i18n,l=e.type,p=e.children,d=null;return"item"===l&&(d=t(o.a,{key:"item-details-footer"})),t("div",{key:"details-pane",classes:i,"aria-expanded":"true"},t("div",{key:"content-container",classes:s},t("header",{class:"ib-side-body__header"},t("div",{class:"ib-side-body__btn-container"},t(a.a,{afterCreate:n,focusable:!0,handleClick:c,key:"side-panel-close-btn",title:u.close},t("svg",{width:"16",height:"16",viewBox:"0 0 16 16",style:"transform: translate(0, -1px);"},t("path",{d:"M13.314 1.99l0.707 0.707-11.314 11.313-0.707-0.707 11.314-11.313z"}),t("path",{d:"M2 2.697l0.707-0.707 11.313 11.314-0.707 0.707-11.313-11.314z"}))))),t("section",{key:r,class:"ib-side-body__content"},p),d))}},function(e,t,r){"use strict";var n=r(0),i=r(1),a=r(25),o=r(65),s=function(e){function t(t){var r=e.call(this,t)||this;return r.handleAddBtnClick=r.handleAddBtnClick.bind(r),r.handleCustomActionClick=r.handleCustomActionClick.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t=this,r=this.props.stateTree.ui.sidePanel.item,i=r&&!!this.props.stateTree.results.selectedItems[r.id],a={"ib-item-pane__btn--disabled":r&&!!this.props.stateTree.results.loadingItems[r.id]},o=n.a({},a,{"ib-item-pane__btn--active":i}),s=this.props.stateTree.settings.config.customActions.filter(function(e){return e.allowed(r||{})});return e("footer",{class:"ib-item-pane__footer"},this.props.stateTree.settings.config.disableMainAction?null:e("button",{key:"select-btn",class:"ib-item-pane__select-btn",classes:o,onclick:this.handleAddBtnClick},i?this.props.stateTree.settings.config.mainInverseActionTitle:this.props.stateTree.settings.config.mainActionTitle),s.map(function(r){return e("button",{key:"usage",class:"ib-item-pane__btn",classes:a,value:r.name,onclick:t.handleCustomActionClick},r.name)}))},t.prototype.handleAddBtnClick=function(){var e=this.props.stateTree.ui.sidePanel.item;e&&(this.props.stateTree.results.selectedItems[e.id]?this.props.deselectItem(e):this.props.selectItem(e))},t.prototype.handleCustomActionClick=function(e){var t=this.props.stateTree.ui.sidePanel.item;t&&this.props.customAction(e.target.value,t)},t}(i.Component);t.a=Object(i.connect)(function(e){return{stateTree:e}},function(e){return{deselectItem:function(t){e(Object(a.i)(t))},selectItem:function(t){e(Object(a.j)(t))},customAction:function(t,r){e(Object(o.c)(t,r))}}})(s)},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(230),s=r(22),c=r.n(s),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.b(t,e),t.prototype.render=function(e){var t=e("div",{class:"ib-header__spacer"});this.props.showBackBtn&&(t=e(c.a,{handleClick:this.props.onBack,key:"main-back-btn",title:i.back,focusable:!0},e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",style:"transform: translate(0, -1px);"},e("path",{d:"M8 1.288l-7.212 7.212 7.212 7.212v-1.414l-5.288-5.297h13.288v-0.99h-13.307l5.307-5.307z"}))));var r=e("div",{class:"ib-header__spacer"});return this.props.showCloseBtn&&(r=e(c.a,{key:"main-close-btn",title:i.close,focusable:!0,handleClick:this.props.onBack},e("svg",{width:"16",height:"16",viewBox:"0 0 32 32"},e("path",{d:"M31.047 28h-5l-12-12 12-12h5l-12 12 12 12zm-26-12l12-12h-5l-12 12 12 12h5l-12-12z"})))),e("div",{classes:{ib__header:!0},key:"header"},e("div",{key:"section-title-container",class:"ib-header__search-section"},t,e(o.a,{key:"section-dropdown"}),r))},t}(a.Component);t.a=Object(a.connect)(function(e){return{showBackBtn:e.settings.config.showBackBtn,showCloseBtn:e.settings.config.showCloseBtn,onBack:function(){e.settings.config.onBack()}}},function(){return{}})(u)},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(51),s=r(3),c=r(77),u=r.n(c),l=r(22),p=r.n(l),d=function(e){function t(t){var r=e.call(this,t)||this,n=(r.props.portal.user?r.props.baseSections:r.props.baseSections.filter(function(e){return"livingAtlas"===e||"all"===e})).map(function(e){return{value:e,text:i.header.sectionTitles[e]}});return r.props.customSections.forEach(function(e){var t={value:e.name,text:e.name};e.addToFront?n.splice(0,0,t):n.push(t)}),r.state={options:n},r.handleOptionSelect=r.handleOptionSelect.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t=this.props.section,r=i.header.sectionTitles[t];return this.state.options.length<2||this.props.replaceSectionDropdownWithTitle?e("h3",{id:"ib-dialog-title",class:"ib-header__dialog-title"},this.props.dialogTitle):e(u.a,{key:"section-dropdown-base",options:this.state.options,onSelect:this.handleOptionSelect,selectedOptionValue:this.props.section},e("h3",{key:"search-"+t+"-dropdown",id:"section-dropdown-toggle",class:"ib-section-dropdown__toggle"},r||t,"Â ",e(p.a,{key:"section-dropdown-button"},e("svg",{width:"12",height:"12",viewBox:"0 0 16 16"},e("path",{d:"M1.5,4 L8,11 L14.5,4 C11.893,4 4.101,4 1.5,4 Z"})))))},t.prototype.handleOptionSelect=function(e){this.props.changeSearchSection(e),this.props.search(!0)},t}(a.Component);t.a=Object(a.connect)(function(e){return{baseSections:e.settings.config.baseSections,customSections:e.settings.config.customSections,portal:e.settings.utils.portal,replaceSectionDropdownWithTitle:e.settings.config.replaceSectionDropdownWithTitle,dialogTitle:e.settings.config.dialogTitle,section:e.parameters.section}},function(e){return{changeSearchSection:function(t){e(Object(o.b)(t))},search:function(t){e(Object(s.h)(t))}}})(d)},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(59),s=r.n(o),c=r(106),u=r(3),l=r(92),p=r(90),d=r(54),f=r(104),h=r(105),g=function(e){function t(t){var r=e.call(this,t)||this;return r.handleSearchChange=r.handleSearchChange.bind(r),r.handleSearchKeyDown=r.handleSearchKeyDown.bind(r),r.handleListClick=r.handleListClick.bind(r),r.handleTableClick=r.handleTableClick.bind(r),r.handleSortClick=r.handleSortClick.bind(r),r.handleFilterClick=r.handleFilterClick.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t=this.props.nextTotal.toLocaleString()+" "+(this.props.replacementItemName?this.props.replacementItemName:i.resultCount),r=this.props.placeholderText?this.props.placeholderText:i.searchPlaceholders.generic;return e("div",null,e("div",{key:"search-input-area",class:"ib__input-area"},e("div",{key:"search-bar-container",class:"ib-input-area__search-bar"},e("input",{id:"item-browser-search-input",class:"ib-input-area__search-input",type:"search",oninput:this.handleSearchChange,onkeydown:this.handleSearchKeyDown,placeholder:r,"aria-label":r,value:this.props.searchString})),e("div",{class:"ib-input-area__result-bar-container"},e("span",{class:"ib-input-area__result-count"},t),e("div",{class:"ib-input-area__icon-button-container"},e(s.a,{active:"table"===this.props.resultPanelType,key:"table-button",handleClick:this.handleTableClick,title:i.compactView},e("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16"},e("g",{stroke:"none","stroke-width":"1"},e("g",null,e("path",{
d:"M4 14h11v1H4v-1zm0-4h11v1H4v-1zm0-3h11V6H4v1zm0-4h11V2H4v1zM3 14H1v1h2v-1zm0-4H1v1h2v-1zm0-4H1v1h2V6zm0-4H1v1h2V2z"}))))),e(s.a,{active:"list"===this.props.resultPanelType,handleClick:this.handleListClick,key:"list-button",title:i.listView},e("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16"},e("g",{stroke:"none","stroke-width":"1"},e("g",null,e("path",{d:"M7 13h8v1H7zm-2-1H2v3h3zm2-8h8V3H7zm0 5h8V8H7zM5 2H2v3h3zm0 5H2v3h3z"}))))),e("div",{class:"ib-input-area__spacer"}),e(s.a,{active:"filter"===this.props.sidePanelType,handleClick:this.handleFilterClick,key:"filter-button",title:"filter"===this.props.sidePanelType?i.close:i.filterPane.filter},e("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16"},e("g",{stroke:"none","stroke-width":"1"},e("g",{id:"filter-sliders-1px-16"},e("path",{d:"M7,13 L0,13 L0,12 L7,12 L7,10 L8,10 L8,15 L7,15 L7,13 Z M12,8 L0,8 L0,7 L12,7 L12,5 L13,5 L13,10 L12,10 L12,8 Z M2,3 L0,3 L0,2 L2,2 L2,0 L3,0 L3,5 L2,5 L2,3 Z M4,2 L16,2 L16,3 L4,3 L4,2 Z M14,7 L16,7 L16,8 L14,8 L14,7 Z M9,12 L16,12 L16,13 L9,13 L9,12 Z"}))))),e(s.a,{active:"sort"===this.props.sidePanelType,handleClick:this.handleSortClick,key:"sort-button",title:"sort"===this.props.sidePanelType?i.close:i.sortOptions.sort},e("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16"},e("g",{stroke:"none","stroke-width":"1"},e("g",{id:"sort-1px-16"},e("path",{d:"M1,1 L15,1 L15,2 L1,2 L1,1 Z M4,5 L15,5 L15,6 L4,6 L4,5 Z M7,9 L15,9 L15,10 L7,10 L7,9 Z M11,13 L15,13 L15,14 L11,14 L11,13 Z"})))))))),e(c.a,{key:"active-filters",theme:"light"}))},t.prototype.handleSearchChange=function(e){this.props.changeSearchString(e.target.value),""===e.target.value&&""!==this.props.previousSearchString&&this.props.search(!0)},t.prototype.handleSearchKeyDown=function(e){"Enter"===e.key&&this.props.search(!0)},t.prototype.handleTableClick=function(e){e.preventDefault(),"list"===this.props.resultPanelType&&this.props.changeResultDisplay()},t.prototype.handleListClick=function(e){e.preventDefault(),"table"===this.props.resultPanelType&&this.props.changeResultDisplay()},t.prototype.handleFilterClick=function(e){e.preventDefault(),"filter"===this.props.sidePanelType?this.props.closeDetailsPane():this.props.viewFilters()},t.prototype.handleSortClick=function(e){e.preventDefault(),"sort"===this.props.sidePanelType?this.props.closeDetailsPane():this.props.viewSort()},t}(a.Component);t.a=Object(a.connect)(function(e){return{nextTotal:e.parameters.nextQuery.total,placeholderText:e.settings.config.searchPlaceholderText,previousSearchString:e.parameters.searchString.previous,replacementItemName:e.settings.config.itemName,resultPanelType:e.ui.resultPanel.display,searchString:e.parameters.searchString.current,sidePanelType:e.ui.sidePanel.type}},function(e){return{search:function(t){e(Object(u.h)(t))},changeResultDisplay:function(){e({type:l.a})},changeSearchString:function(t){e(Object(p.b)(t))},closeDetailsPane:function(){e(Object(d.c)())},viewFilters:function(){e(Object(f.b)())},viewSort:function(){e(Object(h.b)())}}})(g)},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(1),o=r(3),s=r(233),c=r(234),u=r(30),l=r.n(u),p=function(e){function t(t){var r=e.call(this,t)||this;return r.handleScroll=r.handleScroll.bind(r),r.handleCreate=r.handleCreate.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t=this.props.resultPanelStatus;return"success"===t||"loadingNext"===t?e(s.a,{key:"item-list-"+this.props.resultPanelDisplayType,i18n:i,showSubmitButton:this.props.showSubmitButton,results:this.props.displayItems,loadingNext:"loadingNext"===this.props.resultPanelStatus,handleScroll:this.handleScroll,handleCreate:this.handleCreate},e(c.a,{key:"result-items"})):"loading"===t?e("div",{key:"loading-items",class:"ib__results"},e(l.a,{key:"item-loader",text:i.results.loadingItems})):"empty"===t?e("div",{key:"empty-state",class:"ib__results"},e("div",{class:"ib-results__message-container"},e("span",{class:"ib-results__message"},i.results.empty))):e("div",{key:"request-error",class:"ib__results"},e("div",{class:"ib-results__message-container"},e("span",{class:"ib-results__message"},i.results.requestError)))},t.prototype.handleScroll=function(e){(e.target.scrollTop+e.target.offsetHeight)/e.target.scrollHeight>=.99&&"loadingNext"!==this.props.resultPanelStatus&&-1!==this.props.nextStart&&this.props.loadMoreContent()},t.prototype.handleCreate=function(e){var t=this;setTimeout(function(){e.scrollHeight<=e.clientHeight&&"loadingNext"!==t.props.resultPanelStatus&&-1!==t.props.nextStart&&t.props.loadMoreContent(50)},10)},t}(a.Component);t.a=Object(a.connect)(function(e){return{displayItems:e.results.displayItems,nextStart:e.parameters.nextQuery.nextStart,showSubmitButton:e.settings.config.showSubmitButton,resultPanelDisplayType:e.ui.resultPanel.display,resultPanelStatus:e.ui.resultPanel.status}},function(e){return{loadMoreContent:function(t){e(Object(o.g)(t))}}})(p)},function(e,t,r){"use strict";var n=r(30),i=r.n(n);t.a=function(e,t){var r=e.key,n=e.i18n,a=e.results,o=e.loadingNext,s=e.handleScroll,c=e.handleCreate,u=e.children;return a.length>0?t("div",{key:r,class:"ib-results__item-list",onscroll:s,afterCreate:c},u,o?t("div",{class:"ib-results__load-container"},t(i.a,{key:"more-items-loader"})):null):t("div",{key:"no-items-found",class:"ib-results__item-list ib-results__item-list--none"},t("span",{style:"font-size: 0.9375rem;"},n.results.noItemsFound))}},function(e,t,r){"use strict";var n=r(0),i=r(1),a=r(31),o=r(54),s=r(91),c=r(25),u=r(65),l=r(235),p=r.n(l),d=r(236),f=r.n(d),h=function(e){function t(t){var r=e.call(this,t)||this;return r.handleShowItemDetails=r.handleShowItemDetails.bind(r),r.handleSelectionClick=r.handleSelectionClick.bind(r),r.handleCustomActionClick=r.handleCustomActionClick.bind(r),r.startResizePoll=r.startResizePoll.bind(r),r.resizePoll=r.resizePoll.bind(r),r}return n.b(t,e),t.prototype.render=function(e){var t=this.props.stateTree.results;if(t.displayItems.length>0)return e("div",{key:"item-wrapper",id:"resize-detector",afterCreate:this.startResizePoll},this.mapItemsToChildren(t.displayItems,e))},t.prototype.mapItemsToChildren=function(e,t){var r=this;return e.map(function(e){var n=Object(a.a)(r.props.stateTree);if("list"===r.props.stateTree.ui.resultPanel.display){var i="public_authoritative"===e.contentStatus&&r.props.stateTree.results.allOrganizations[e.orgId]?r.props.stateTree.results.allOrganizations[e.orgId]:void 0;return t(p.a,{constrained:r.state.constrained,key:e.id+"-card",item:e,loadingItems:r.props.stateTree.results.loadingItems,selectedItems:r.props.stateTree.results.selectedItems,activeItem:r.props.stateTree.ui.sidePanel.item,portal:n,onShowItemDetails:r.handleShowItemDetails,onSelectionClick:r.handleSelectionClick,customActions:r.props.stateTree.settings.config.customActions,onCustomActionClick:r.handleCustomActionClick,disableMainAction:r.props.stateTree.settings.config.disableMainAction,sortField:r.props.stateTree.parameters.sort.field,hideEllipses:r.props.stateTree.settings.config.hideEllipses,organization:i})}return t(f.a,{key:e.id+"-cardrow",item:e,loadingItems:r.props.stateTree.results.loadingItems,selectedItems:r.props.stateTree.results.selectedItems,activeItem:r.props.stateTree.ui.sidePanel.item,portal:n,onShowItemDetails:r.handleShowItemDetails,onSelectionClick:r.handleSelectionClick,customActions:r.props.stateTree.settings.config.customActions,onCustomActionClick:r.handleCustomActionClick,disableMainAction:r.props.stateTree.settings.config.disableMainAction,sortField:r.props.stateTree.parameters.sort.field,hideEllipses:r.props.stateTree.settings.config.hideEllipses})})},t.prototype.handleShowItemDetails=function(e){var t=this.props.stateTree.ui.sidePanel;t.item&&t.item.id===e.id?this.props.closeDetailsPane():this.props.viewItemDetails(e)},t.prototype.handleSelectionClick=function(e){this.props.stateTree.results.selectedItems[e.id]?this.props.deselectItem(e):this.props.selectItem(e)},t.prototype.handleCustomActionClick=function(e,t){this.props.customAction(e,t)},t.prototype.startResizePoll=function(e){this.resizePoll(e)},t.prototype.resizePoll=function(e){var t=this;e&&e.clientWidth>0&&(e.clientWidth<300&&!this.state.constrained?this.setState({constrained:!0}):e.clientWidth>300&&this.state.constrained&&this.setState({constrained:!1}),setTimeout(function(){t.resizePoll(e)},250))},t}(i.Component);t.a=Object(i.connect)(function(e){return{stateTree:e}},function(e){return{closeDetailsPane:function(){e(Object(o.c)())},viewItemDetails:function(t){e(Object(s.b)(t))},deselectItem:function(t){e(Object(c.i)(t))},selectItem:function(t){e(Object(c.j)(t))},customAction:function(t,r){e(Object(u.c)(t,r))}}})(h)},function(e,t){e.exports=M},function(e,t){e.exports=G},,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(14),i=r(34),a=r(99),o=r(100),s=Object(n.a)(a.a,o.a,i.b)},function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"a",function(){return o});var n=r(7),i=Object(n.a)(function(e,t,r){return t?r.concat(["("+e+":"+function(e){return"[000000"+e.start+" TO 000000"+e.end+"]"}(t)+")"]):r}),a=i("modified"),o=i("uploaded")},function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return a});var n=r(7),i=Object(n.a)(function(e,t){if(e){var r=Object.keys(e);if(r.length>0)return t.concat(["tags:("+r.join(" AND ")+")"])}return t}),a=Object(n.a)(function(e,t){return e.length>2?t.concat(["tags:("+e+"* OR "+e+")"]):t})},function(e,t,r){"use strict";function n(e){return"string"==typeof e?["myContent","myFavorites","myGroups","myOrganization","livingAtlas"].indexOf(e)>-1:!!e.filters&&e.filters.indexOf("tags")>-1}r.d(t,"a",function(){return n})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var n=r(0),i=r(1),a=r(96);r.d(t,"defaultConfig",function(){return a.a}),r.d(t,"reducers",function(){return a.c}),r.d(t,"initialState",function(){return a.b});var o=r(6);r.d(t,"SELECT_ITEM_SINGLE",function(){return o.f}),r.d(t,"SELECT_ITEM",function(){return o.c}),r.d(t,"DESELECT_ITEM",function(){return o.b}),r.d(t,"SELECT_ITEM_ASYNC",function(){return o.d}),r.d(t,"SELECT_ITEM_ASYNC_FAILED",function(){return o.e}),r.d(t,"search",function(){return o.h}),r.d(t,"updateExtent",function(){return o.i}),r.d(t,"viewItemDetails",function(){return o.j}),r.d(t,"changeSearchSection",function(){return o.g});var s=r(229),c=r(231),u=r(232),l=r(213),p=r(187),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.b(t,e),t.prototype.render=function(e){var t=this.props.layoutMode,r={ib__container:!0,"ib__container--expanded":this.props.expanded&&"adjustable"===t||"fullscreen"===t};return"fullscreen"===t?e(p.a,{key:"big-browser",containerClasses:r}):e("div",{id:"item-browser-container",classes:r},e(l.a,{key:"side-panel",closing:this.props.sidePanelClosing}),e(s.a,{key:"header"}),e(c.a,{key:"input-area"}),e(u.a,{key:"result-panel"}))},t}(i.Component);t.default=Object(i.connect)(function(e){return{layoutMode:e.settings.config.layoutMode,expanded:e.ui.expanded.maximized,sidePanelClosing:e.ui.sidePanel.closing}},function(){return{}})(d)},,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(7),i=Object(n.a)(function(e,t){return e?t.concat(["(group:"+e.id+")"]):t})},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(7),i=Object(n.a)(function(e,t,r){if(e)switch(e.value){case"authoritative":return t&&t.orgId?r.concat(["((contentstatus:org_authoritative orgid:"+t.orgId+") OR contentstatus:public_authoritative)"]):r.concat(["(contentstatus:public_authoritative)"]);case"deprecated":return r.concat(["(contentstatus:deprecated)"]);default:return r}return r})},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(7),i=Object(n.a)(function(e,t){return e?t.concat(["(access:"+e.value+")"]):t})},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(13),i=r(12),a=function(e,t,r,n){return Object(i.m)(e,t.restUrl+"/content/groups/"+r+"/search",{q:"typekeywords: "+n})},o=function(e,t,r){return Object(i.m)(e,t.restUrl+"/portals/regions",{culture:r})},s=function(e,t,r,s){function c(n){m=n.categorySchema[0].source.split(".")[1],Object(i.c)(e,t,r.contentCategorySetsGroupQuery).then(u,h),o(e,t,s).then(d,h)}function u(r){r.results[0]?a(e,t,r.results[0].id,m).then(l,h):h("The content category sets group could not be found.")}function l(r){1===r.results.length&&r.results[0]?Object(i.f)(e,t,r.results[0].id).then(p,h):h("The item containing the living atlas categories could not be determined.")}function p(e){b=e.categorySchema[0],r.isPortal&&y?f([b]):y&&f([b,y])}function d(e){var t=e.map(function(e){return{displayName:e.localizedName,title:e.region}}).sort(function(e,t){return"wo"===e.title.toLowerCase()?-1:e.displayName.localeCompare(t.displayName)});y={categories:t,description:"2.0",displayName:"Regions",title:"region"},r.isPortal&&b?f([b]):b&&f([b,y])}function f(e){v.resolve({schema:e,id:g})}function h(e){v.reject(e)}void 0===s&&(s="en");var g,m,b,y,v=new n;return Object(i.c)(e,t,r.livingAtlasGroupQuery).then(function(r){r.results[0]&&r.results[0].id?(g=r.results[0].id,Object(i.d)(e,t,g).then(c,h)):h("The living atlas group could not be found.")},h),v}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(14),i=r(101),a=function(e,t){return Object(n.a)(Object(i.a)(e))(t)}}])});