{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///external \"../Component\"","webpack:///../ItemBrowser/nls/resources\"","webpack:///./src/ItemBrowser/_actions/results/query.ts","webpack:///./src/ItemBrowser/_actions/parameters/filter.ts","webpack:///./src/ItemBrowser/_actions/index.ts","webpack:///./src/_utils/functional/higherOrderFunctions/curry.ts","webpack:///./src/_utils/query/requests/general.ts","webpack:///external \"dojo/Deferred\"","webpack:///./src/_utils/functional/higherOrderFunctions/compose.ts","webpack:///external \"dojo/promise/all\"","webpack:///./src/ItemBrowser/_utils/customSections.ts","webpack:///external \"dojo/date/locale\"","webpack:///external \"../Buttons/SvgButton\"","webpack:///./src/ItemBrowser/_reducers/results/_utils/categories.ts","webpack:///./src/_utils/functional/primitives/object.ts","webpack:///./src/ItemBrowser/_actions/results/selectedItems.ts","webpack:///./src/ItemBrowser/_actions/results/user.ts","webpack:///./src/_utils/metadata/item/index.ts","webpack:///external \"../Loaders/LoaderBars\"","webpack:///./src/ItemBrowser/_utils/getCurrentPortal.ts","webpack:///./src/_utils/metadata/organization/baseUrl.ts","webpack:///./src/ItemBrowser/_actions/parameters/sort.ts","webpack:///./src/ItemBrowser/_actions/ui/expanded.ts","webpack:///./src/_utils/functional/data/tree.ts","webpack:///./src/_utils/metadata/item/thumbnail.ts","webpack:///./src/_utils/metadata/item/patchedDescription.ts","webpack:///./src/_utils/metadata/item/icon.ts","webpack:///./src/_utils/metadata/item/displayName.ts","webpack:///./src/_utils/metadata/item/badge.ts","webpack:///./src/_utils/metadata/item/typeMap.ts","webpack:///./src/ItemBrowser/_actions/ui/pagination.ts","webpack:///./src/ItemBrowser/_actions/results/_utils/requestHelpers.ts","webpack:///./src/ItemBrowser/_actions/results/fetchFullItemDetails.ts","webpack:///./src/ItemBrowser/_actions/results/customSections.ts","webpack:///./src/ItemBrowser/_actions/parameters/section.ts","webpack:///./src/ItemBrowser/_actions/ui/detailsPane/closeDetailsPane.ts","webpack:///./src/_utils/functional/primitives/array.ts","webpack:///./src/ItemBrowser/_actions/results/organization.ts","webpack:///./src/ItemBrowser/_actions/results/tagsFilter.ts","webpack:///external \"../Buttons/IconButton\"","webpack:///external \"../Filters/CategoriesFilter/index\"","webpack:///./src/ItemBrowser/SidePanel/FilterPane/Filters.tsx","webpack:///./src/ItemBrowser/_actions/results/livingAtlas.ts","webpack:///./src/ItemBrowser/_actions/results/customAction.ts","webpack:///external \"../Buttons/Toggle\"","webpack:///external \"../Navigation/Pager/index\"","webpack:///external \"../Dropdowns/SortDropdown/index\"","webpack:///external \"../Dropdowns/TextOptionDropdown\"","webpack:///./src/ItemBrowser/_actions/results/initial.ts","webpack:///./src/ItemBrowser/_actions/results/allOrganizations.ts","webpack:///./src/ItemBrowser/_actions/parameters/searchString.ts","webpack:///./src/ItemBrowser/_actions/ui/detailsPane/viewItemDetails.ts","webpack:///./src/ItemBrowser/_actions/ui/resultPanel/index.ts","webpack:///./src/ItemBrowser/_actions/results/_utils/qHelpers.ts","webpack:///./src/ItemBrowser/_reducers/index.ts","webpack:///./src/ItemBrowser/_actions/results/index.ts","webpack:///./src/_utils/metadata/organization/thumbnail.ts","webpack:///./src/_utils/metadata/organization/url.ts","webpack:///./src/_utils/metadata/user/thumbnail.ts","webpack:///external \"dojo/_base/kernel\"","webpack:///./src/ItemBrowser/_actions/parameters/extent.ts","webpack:///./src/ItemBrowser/_actions/ui/detailsPane/viewFilters.ts","webpack:///./src/ItemBrowser/_actions/ui/detailsPane/viewSort.ts","webpack:///./src/ItemBrowser/InputArea/ActiveFilters.tsx","webpack:///./src/ItemBrowser/_reducers/settings/index.ts","webpack:///./src/ItemBrowser/_reducers/settings/config.ts","webpack:///./src/ItemBrowser/_reducers/settings/utils.ts","webpack:///./src/ItemBrowser/_reducers/parameters/index.ts","webpack:///./src/ItemBrowser/_reducers/parameters/extent.ts","webpack:///./src/ItemBrowser/_reducers/parameters/filter.ts","webpack:///./src/ItemBrowser/_reducers/parameters/nextQuery.ts","webpack:///./src/ItemBrowser/_reducers/parameters/searchString.ts","webpack:///./src/ItemBrowser/_reducers/parameters/section.ts","webpack:///./src/ItemBrowser/_reducers/parameters/sort.ts","webpack:///./src/ItemBrowser/_reducers/results/index.ts","webpack:///./src/ItemBrowser/_reducers/results/counts/index.ts","webpack:///./src/ItemBrowser/_reducers/results/counts/access.ts","webpack:///./src/ItemBrowser/_reducers/results/counts/status.ts","webpack:///./src/ItemBrowser/_reducers/results/displayItems.ts","webpack:///./src/ItemBrowser/_reducers/results/livingAtlas.ts","webpack:///./src/ItemBrowser/_reducers/results/loadingItems.ts","webpack:///./src/ItemBrowser/_reducers/results/selectedItems.ts","webpack:///./src/ItemBrowser/_reducers/results/failedItemDetails.ts","webpack:///./src/ItemBrowser/_reducers/results/fullItemDetails.ts","webpack:///./src/ItemBrowser/_reducers/results/organization.ts","webpack:///./src/ItemBrowser/_reducers/results/user.ts","webpack:///./src/ItemBrowser/_reducers/results/customSections.ts","webpack:///./src/ItemBrowser/_reducers/results/allOrganizations.ts","webpack:///./src/ItemBrowser/_reducers/results/users.ts","webpack:///./src/ItemBrowser/_reducers/ui/index.ts","webpack:///./src/ItemBrowser/_reducers/ui/sidePanel.ts","webpack:///./src/ItemBrowser/_reducers/ui/expanded/index.ts","webpack:///./src/ItemBrowser/_reducers/ui/expanded/filters.ts","webpack:///./src/ItemBrowser/_reducers/ui/expanded/sort.ts","webpack:///./src/ItemBrowser/_reducers/ui/resultPanel.ts","webpack:///./src/ItemBrowser/_reducers/ui/filters.ts","webpack:///./src/ItemBrowser/_reducers/ui/tagsFilter.ts","webpack:///./src/ItemBrowser/_reducers/ui/pagination.ts","webpack:///./src/_utils/query/Q/itemType.ts","webpack:///./src/ItemBrowser/_actions/parameters/index.ts","webpack:///./src/ItemBrowser/_actions/ui/index.ts","webpack:///./src/ItemBrowser/_actions/ui/detailsPane/index.ts","webpack:///external \"dojo/debounce\"","webpack:///./src/ItemBrowser/Expanded/index.tsx","webpack:///external \"../Modals/Overlay\"","webpack:///./src/ItemBrowser/Expanded/Header/index.tsx","webpack:///./src/ItemBrowser/Expanded/Header/SectionTabs.tsx","webpack:///external \"../Navigation/TabNav\"","webpack:///./src/ItemBrowser/Expanded/Body/index.tsx","webpack:///external \"../Modals/MobileWrap\"","webpack:///./src/ItemBrowser/Expanded/Body/SearchArea.tsx","webpack:///./src/ItemBrowser/Expanded/Body/FilterArea/index.tsx","webpack:///external \"../Filters/MapAreaFilter\"","webpack:///external \"../Filters/CreatedFilter/index\"","webpack:///external \"../Filters/ItemTypeFilter/index\"","webpack:///external \"../Filters/ModifiedFilter/index\"","webpack:///external \"../Filters/SharedFilter/index\"","webpack:///external \"../Filters/StatusFilter/index\"","webpack:///external \"../Filters/FolderFilter/index\"","webpack:///external \"../Filters/GroupFilter/index\"","webpack:///external \"../Filters/TagsFilter/index\"","webpack:///./src/ItemBrowser/SidePanel/FilterPane/_utils/getFilters.ts","webpack:///./src/ItemBrowser/SidePanel/FilterPane/CustomFilterAccordion.tsx","webpack:///external \"../Dropdowns/AccordionDropdown/index\"","webpack:///./src/ItemBrowser/Expanded/Body/InputArea/index.tsx","webpack:///external \"../Dropdowns/FilterController/index\"","webpack:///./src/ItemBrowser/Expanded/Body/ResultPanel/index.tsx","webpack:///./src/ItemBrowser/Expanded/Body/ResultPanel/ItemList.tsx","webpack:///external \"../ItemCards/AnalysisCard/index\"","webpack:///./src/ItemBrowser/SidePanel/index.tsx","webpack:///./src/ItemBrowser/SidePanel/SortPane/index.tsx","webpack:///./src/ItemBrowser/SidePanel/FilterPane/index.tsx","webpack:///./src/ItemBrowser/SidePanel/ItemDetailsPane/index.tsx","webpack:///external \"../Badges/Authoritative\"","webpack:///external \"../Badges/Deprecated\"","webpack:///external \"../Badges/LivingAtlas\"","webpack:///external \"../Badges/Marketplace\"","webpack:///external \"../Badges/OpenData\"","webpack:///external \"../Badges/Premium\"","webpack:///external \"../Badges/Subscriber\"","webpack:///./src/ItemBrowser/SidePanel/ItemDetailsPane/FavButton.tsx","webpack:///./src/ItemBrowser/SidePanel/ItemDetailsPane/NoUserThumb.tsx","webpack:///./src/ItemBrowser/SidePanel/ItemDetailsPane/SharedInfo.tsx","webpack:///./src/ItemBrowser/SidePanel/PanelBody.tsx","webpack:///./src/ItemBrowser/SidePanel/ItemDetailsPane/Footer.tsx","webpack:///./src/ItemBrowser/Header/index.tsx","webpack:///./src/ItemBrowser/Header/SectionDropdown.tsx","webpack:///./src/ItemBrowser/InputArea/index.tsx","webpack:///./src/ItemBrowser/ResultPanel/index.tsx","webpack:///./src/ItemBrowser/ResultPanel/ItemList.tsx","webpack:///./src/ItemBrowser/ResultPanel/ItemMapping.tsx","webpack:///external \"../ItemCards/MiniCard/index\"","webpack:///external \"../ItemCards/MiniCardRow/index\"","webpack:///./src/_utils/metadata/organization/index.ts","webpack:///./src/_utils/query/Q/time.ts","webpack:///./src/_utils/query/Q/tags.ts","webpack:///./src/ItemBrowser/_utils/allowTagsQuery.ts","webpack:///./src/ItemBrowser/index.tsx","webpack:///./src/_utils/query/Q/group.ts","webpack:///./src/_utils/query/Q/status.ts","webpack:///./src/_utils/query/Q/access.ts","webpack:///./src/_utils/query/requests/livingAtlas.ts","webpack:///./src/_utils/metadata/user/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","__extends","__assign","extendStatics","b","setPrototypeOf","__proto__","Array","__","this","constructor","assign","arguments","length","apply","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","LOADING_CONTENT","LOADING_CONTENT_SUCCESS","LOADING_CONTENT_FAILED","LOADING_NEXT","LOADING_NEXT_SUCCESS","LOADING_NEXT_FAILED","loadMoreContent","num","dispatch","getState","state","request","settings","utils","start","parameters","nextQuery","nextStart","type","_a","_utils_requestHelpers__WEBPACK_IMPORTED_MODULE_2__","then","_allOrganizations__WEBPACK_IMPORTED_MODULE_3__","err","handleNextError","response","handleNextResponse","search","updateCounts","config","clearSelectionBetweenSearches","_index__WEBPACK_IMPORTED_MODULE_1__","attemptSearch","section","user","portal","loggedIn","_index__WEBPACK_IMPORTED_MODULE_6__","self","_index__WEBPACK_IMPORTED_MODULE_7__","executeSearch","payload","_index__WEBPACK_IMPORTED_MODULE_9__","_utils_index__WEBPACK_IMPORTED_MODULE_11__","customSections","_index__WEBPACK_IMPORTED_MODULE_10__","dojo_promise_all__WEBPACK_IMPORTED_MODULE_4__","_index__WEBPACK_IMPORTED_MODULE_8__","concat","orgId","countsRequest1","countsRequest2","searchRequest","_b","_utils_index__WEBPACK_IMPORTED_MODULE_12__","_c","ui","tagsFilter","filterString","requests","filter","req","responses","imgDir","iconDir","_utils_index__WEBPACK_IMPORTED_MODULE_13__","tslib__WEBPACK_IMPORTED_MODULE_0__","data","results","map","item","_utils_index__WEBPACK_IMPORTED_MODULE_5__","aggregations","counts","slice","countInfo","group","custom","undefined","handleSearchResponse","UPDATE_CUSTOM_FILTER","UPDATE_ORG_GROUP_FILTER","UPDATE_LIVING_ATLAS_CATEGORIES_FILTER","UPDATE_LIVING_ATLAS_REGION_FILTER","UPDATE_ORG_CATEGORIES_FILTER","UPDATE_GROUP_CATEGORIES_FILTER","UPDATE_ITEM_TYPE_FILTER","UPDATE_MODIFIED_FILTER","UPDATE_CREATED_FILTER","UPDATE_SHARED_FILTER","UPDATE_GROUP_FILTER","UPDATE_FOLDER_FILTER","UPDATE_STATUS_FILTER","UPDATE_MAP_AREA_FILTER","UPDATE_SEARCH_ORG_FILTER","UPDATE_TAGS_FILTER","CLEAR_ALL_FILTERS","updateCustomFilter","updateOrgGroupFilter","updateItemTypeFilter","updateOrgCategoriesFilter","updateLivingAtlasCategoriesFilter","updateLivingAtlasRegionFilter","updateGroupCategoriesFilter","updateModifiedFilter","updateCreatedFilter","updateSharedFilter","updateFolderFilter","updateGroupFilter","updateStatusFilter","updateMapAreaFilter","updateSearchOrgFilter","updateTagsFilter","index","itemType","categories","modified","created","shared","folder","status","searchMapArea","searchOrg","tags","CLEAR_SELECTION_STATE","_parameters_index__WEBPACK_IMPORTED_MODULE_0__","_results_index__WEBPACK_IMPORTED_MODULE_1__","_ui_index__WEBPACK_IMPORTED_MODULE_2__","curry","fn","curried","_this","args","_i","rest","fetchSelf","culture","requestJSON","restUrl","default","fetchItemData","itemId","fetchGroupByQuery","searchQuery","q","fetchGroupCategorySchema","groupId","fetchOrgCategorySchema","id","fetchOrgInfo","location","protocol","portalHostname","fetchAllOrgGroups","query","f","sortField","sortOrder","total","response2","fetchAllProvisionedContent","username","relatedItemRequests","provisionedListings","listing","related","dojo_promise_all__WEBPACK_IMPORTED_MODULE_1__","concatenateRelatedItems","reduce","result","current","relatedItems","fetchUser","fetchUserContent","fetchUserFavorites","favGroupId","fetchGroups","queryParams","url","__WEBPACK_EXTERNAL_MODULE__13__","compose","funcs","arg","reduceRight","composed","__WEBPACK_EXTERNAL_MODULE__15__","getCustomCategoryFilters","getSectionGroupCategoryFilter","getSectionOrgCategoryFilter","sectionHasCategoryFilter","getCustomSection","isCustomSection","_utils_index__WEBPACK_IMPORTED_MODULE_0__","filters","getSectionCategoryFilter","sectionName","__WEBPACK_EXTERNAL_MODULE__20__","__WEBPACK_EXTERNAL_MODULE__22__","clearCountsRecursive","schema","_utils_index__WEBPACK_IMPORTED_MODULE_1__","node","count","mapCountsToSchema","fieldName","fieldValues","forEach","path","split","category","getCategoryFromPath","formatRecursive","categorySchema","standardized","title","toLowerCase","displayName","tooltip","description","children","isEmpty","input","keys","scrubObjectProperty","_higherOrderFunctions_index__WEBPACK_IMPORTED_MODULE_1__","propertyName","obj","newObj","mapObjIndexed","curriedMapObjIndexed","acc","pickBy","curriedPickBy","SELECT_ITEM","SELECT_ITEM_SINGLE","SELECT_ITEM_ASYNC","SELECT_ITEM_ASYNC_FAILED","DESELECT_ITEM","SELECT_ALL","DESELECT_ALL","SELECT_ALL_FROM_QUERY_SUCCESS","selectItem","deselectItem","selectItemStandard","asynchronousItemSelect","selectItemAsync","onSelect","singleItemSelect","selectItemSingle","console","error","onDeselect","ADD_TO_FAVORITES","ADD_TO_FAVORITES_SUCCESS","ADD_TO_FAVORITES_FAIL","LOADING_USER_INFO","UPDATE_GROUP_CATEGORIES","UPDATE_USER_INFO","UPDATE_USER_INFO_FAILED","REMOVE_FROM_FAVORITES","REMOVE_FROM_FAVORITES_SUCCESS","REMOVE_FROM_FAVORITES_FAIL","fetchUserInfo","addToFavorites","removeFromFavorites","dojo_promise_all__WEBPACK_IMPORTED_MODULE_0__","dojo_Deferred__WEBPACK_IMPORTED_MODULE_1__","_utils_index__WEBPACK_IMPORTED_MODULE_2__","_query__WEBPACK_IMPORTED_MODULE_3__","groupFilter","loadedGroupCategories","groupCategories","fetchUserGroupCategorySchema","resolve","reject","groups","folders","items","favorites","provisionedContent","everyone","access","sharing","org","method","success","checkForFav","checkResponse","setTimeout","mixinItemInfo","scrubItemInfo","_functional_index__WEBPACK_IMPORTED_MODULE_0__","_functional_index__WEBPACK_IMPORTED_MODULE_1__","_badge__WEBPACK_IMPORTED_MODULE_2__","_displayName__WEBPACK_IMPORTED_MODULE_3__","_icon__WEBPACK_IMPORTED_MODULE_4__","_patchedDescription__WEBPACK_IMPORTED_MODULE_5__","_thumbnail__WEBPACK_IMPORTED_MODULE_6__","__WEBPACK_EXTERNAL_MODULE__30__","getCurrentPortal","_customSections__WEBPACK_IMPORTED_MODULE_0__","matchingSection","getOrgBaseUrl","organization","urlKey","customBaseUrl","mixinOrgBaseUrl","baseUrl","CHANGE_SORT_ORDER","CHANGE_SORT_FIELD","changeSortOrder","changeSortField","newOrder","newField","MAXIMIZE_DLG","MINIMIZE_DLG","TOGGLE_EXPANDED_FILTERS","CLOSE_FULLSCREEN_BROWSER","TOGGLE_EXPANDED_SORT","toggleExpandedFilters","toggleExpandedSort","subtreeFromPath","tree","genericSubtreeFromPath","treePrune","include","genericPrune","childProp","valueProp","indexOf","push","treeCompress","omitSingle","ch","curr","genericCompress","treeMap","genericTreeMap","genericDfs","standardizeTree","mixinItemThumbnail","thumbURI","thumbnail","credential","token","getItemThumbnail","mixinPatchedItemDescription","patchedDescription","replace","match","getPatchedItemDescription","mixinItemIcon","iconURI","typeKeywords","imgName","isRouteLayer","isMarkupLayer","isSpatiotemporal","isTable","isHosted_1","getItemIcon","mixinItemDisplayName","getItemDisplayName","mixinItemBadges","badges","contentStatus","groupDesignations","getItemBadges","itemTypeMap","allItemTypes","maps","webMaps","mapFiles","layers","featureLayers","tileLayers","mapImageLayers","imageryLayers","sceneLayers","tables","layerFiles","scenes","apps","webApps","mobileApps","desktopApps","tools","locators","geodatabaseAccess","geometricOperations","geoprocessingTasks","networkAnalysis","files","documents","images","pdfs","webTools","notebooks","CHANGE_PAGE_SUCCESS","CHANGE_PAGE_FAIL","CHANGING_PAGE","changePage","_results_utils_requestHelpers__WEBPACK_IMPORTED_MODULE_0__","_utils__WEBPACK_IMPORTED_MODULE_1__","_results_allOrganizations__WEBPACK_IMPORTED_MODULE_2__","page","perPage","resultsPerQuery","neededItems","organizations","displayItems","getSearchRequest","options","requestBase","addRequestParameters","_qHelpers__WEBPACK_IMPORTED_MODULE_3__","sort","order","mixinSearchParams","getCountsRequest","countFields","join","countSize","mixinCountParams","getTagsRequest","tagName","mixinRequestSort","mixinRequestBbox","mixinRequestUrl","mixinRequestCountFields","field","mapArea","extent","area","bbox","minx","miny","maxx","maxy","_utils_index__WEBPACK_IMPORTED_MODULE_4__","encodeURIComponent","JSON","stringify","livingAtlas","livingAtlasCategories","livingAtlasRegion","orgCategories","customSection","groupCategoryFilter","UPDATE_FULL_ITEM_DETAILS","FETCH_FULL_ITEM_DETAILS_FAILED","fetchFullItemDetails","_utils_index__WEBPACK_IMPORTED_MODULE_6__","_utils_index__WEBPACK_IMPORTED_MODULE_3__","owner","dfd_1","dojo_Deferred__WEBPACK_IMPORTED_MODULE_2__","sharedToGroups","updateFullItemDetails","LOADING_CUSTOM_SECTION_INFO","UPDATE_CUSTOM_SECTION_INFO","UPDATE_CUSTOM_SECTION_INFO_FAILED","UPDATE_CUSTOM_SECTION_GROUPS","fetchCustomSectionInfo","categoryFilters","fetchCustomSectionGroups","requestSchema","handleCustomSectionInfoError","dfd","request_1","portal_1","groupQueries","fetchGroupIdByQuery","newState","currentSection","staticSchema","CHANGE_SEARCH_SECTION","changeSearchSection","newSection","customSectionGroupSort","groupSort","CLOSING_DETAILS_PANE","CLOSE_DETAILS_PANE","closeDetailsPane","removeDups","removeDupsOnKey","filterEmptyStrings","_higherOrderFunctions_index__WEBPACK_IMPORTED_MODULE_0__","el","arr","seen","LOADING_ORG_INFO","UPDATE_ORG_INFO","UPDATE_ORG_INFO_FAILED","LOADING_TAGS","LOADING_TAGS_SUCCESS","LOADING_TAGS_FAILED","UPDATE_TAGS_FILTER_STRING","updateTagsFilterString","dojo_debounce__WEBPACK_IMPORTED_MODULE_0__","_utils_requestHelpers__WEBPACK_IMPORTED_MODULE_1__","loadTags","__WEBPACK_EXTERNAL_MODULE__59__","__WEBPACK_EXTERNAL_MODULE__61__","FilterPane","_super","props","handleCustomFilterToggle","handleMapAreaToggle","handleSearchOrgToggle","handleCreatedFilterChange","handleItemTypeFilterChange","handleModifiedFilterChange","handleSharedFilterChange","handleStatusFilterChange","handleFolderFilterChange","handleGroupFilterChange","handleOrgGroupFilterChange","handleTagsFilterChange","handleOrgCategorySelect","handleClearOrgCategories","handleGroupCategorySelect","handleClearGroupCategories","handleLACategorySelect","handleClearLACategories","handleLARegionSelect","handleClearLARegion","handleTagsFilterStringChange","render","tsx","stateTree","filterParams","availableFilters","_utils_getFilters__WEBPACK_IMPORTED_MODULE_4__","mapAreaFilter","enableMapAreaFilter","_Filters_MapAreaFilter__WEBPACK_IMPORTED_MODULE_8___default","a","text","dojo_i18n_nls_resources__WEBPACK_IMPORTED_MODULE_1__","sectionFilters","_Filters_GroupFilter_index__WEBPACK_IMPORTED_MODULE_15___default","onGroupSelect","availableGroups","rootFolder","_Filters_FolderFilter_index__WEBPACK_IMPORTED_MODULE_14___default","onFolderSelect","availableFolders","folderFilter","_Filters_ItemTypeFilter_index__WEBPACK_IMPORTED_MODULE_10___default","onItemTypeSelect","availableItemTypes","availableItemTypeFilters","itemTypeFilter","_Filters_CategoriesFilter_index__WEBPACK_IMPORTED_MODULE_17___default","onCategorySelect","onClearCategories","availableCategories","categoriesFilter","prependValue","showTooltips","startActive","_Filters_ModifiedFilter_index__WEBPACK_IMPORTED_MODULE_11___default","onDateModifiedSelect","dateModifiedFilter","dateModified","dateModifiedSection","modifiedSection","_Filters_CreatedFilter_index__WEBPACK_IMPORTED_MODULE_9___default","onDateCreatedSelect","dateCreatedFilter","dateCreated","dateCreatedSection","createdSection","_Filters_SharedFilter_index__WEBPACK_IMPORTED_MODULE_12___default","onSharedSelect","sharedFilter","hideOrgGroupFilters","deprecated","orgAuthoritative","publicAuthoritative","_Filters_StatusFilter_index__WEBPACK_IMPORTED_MODULE_13___default","authoritative","onStatusSelect","statusFilter","_Filters_TagsFilter_index__WEBPACK_IMPORTED_MODULE_16___default","availableTags","visibleTags","onFilterStringChange","onTagSelect","groupSchemas","pathCategories","subTree","orgSchemas","customFilter","_CustomFilterAccordion__WEBPACK_IMPORTED_MODULE_18__","onClear","onClick","selectedOption","class","_actions_index__WEBPACK_IMPORTED_MODULE_5__","_actions_index__WEBPACK_IMPORTED_MODULE_6__","itemTypeOption","modifiedOption","createdOption","sharedOption","statusOption","folderOption","groupOption","_actions_index__WEBPACK_IMPORTED_MODULE_7__","_Component__WEBPACK_IMPORTED_MODULE_2__","LOADING_LIVING_ATLAS_INFO","UPDATE_LIVING_ATLAS_INFO","UPDATE_LIVING_ATLAS_INFO_FAILED","fetchLivingAtlasInfo","dojo_base_kernel__WEBPACK_IMPORTED_MODULE_3__","set","START_CUSTOM_ACTION","END_CUSTOM_ACTION","customAction","actionName","action","customActions","asynchronous","onAction","__WEBPACK_EXTERNAL_MODULE__66__","__WEBPACK_EXTERNAL_MODULE__75__","__WEBPACK_EXTERNAL_MODULE__76__","__WEBPACK_EXTERNAL_MODULE__77__","UPDATE_PORTAL_SELF","initialize","dojo_Deferred__WEBPACK_IMPORTED_MODULE_0__","mixSelf","mixinOrganizationInfo","_utils_getCurrentPortal__WEBPACK_IMPORTED_MODULE_7__","orgRequests","allOrganizations","dojo_promise_all__WEBPACK_IMPORTED_MODULE_2__","orgResponses","CHANGE_SEARCH_STRING","changeSearchString","searchString","VIEW_ITEM_DETAILS","viewItemDetails","_results_fetchFullItemDetails__WEBPACK_IMPORTED_MODULE_0__","SHOW_EMPTY_RESULTS","CHANGE_RESULT_DISPLAY","getQ","getCountsQ","getTagsQ","_utils_index__WEBPACK_IMPORTED_MODULE_7__","_utils_index__WEBPACK_IMPORTED_MODULE_8__","_utils_index__WEBPACK_IMPORTED_MODULE_9__","_utils_index__WEBPACK_IMPORTED_MODULE_10__","appendQs","appendCountsQs","appendTagsQs","appendAdditionalQ","appendCustomFilterQ","orgGroup","appendSectionQ","allowedItemTypes","specialItemQ","groupIds","baseQuery","addQueryParameters","customFilterQ","parseInt","params","defaultConfig","initialState","reducers","_Component__WEBPACK_IMPORTED_MODULE_0__","_settings_index__WEBPACK_IMPORTED_MODULE_1__","_parameters_index__WEBPACK_IMPORTED_MODULE_2__","_results_index__WEBPACK_IMPORTED_MODULE_3__","_ui_index__WEBPACK_IMPORTED_MODULE_4__","_selectedItems__WEBPACK_IMPORTED_MODULE_0__","_query__WEBPACK_IMPORTED_MODULE_1__","mixinOrgThumbnail","_baseUrl__WEBPACK_IMPORTED_MODULE_1__","getOrgThumbnail","mixinOrgUrl","orgUrl","getOrgUrl","mixinUserThumbnail","getUserThumbnail","__WEBPACK_EXTERNAL_MODULE__102__","UPDATE_EXTENT","UNTHROTTLE_EXTENT_UPDATE","updateExtent","_results_index__WEBPACK_IMPORTED_MODULE_0__","newExtent","throttling","mapAreaThrottleTime","VIEW_FILTERS","viewFilters","VIEW_SORT","viewSort","generalUpdateActions","_actions_index__WEBPACK_IMPORTED_MODULE_3__","ActiveFilters","handleRemoveMapAreaFilter","handleRemoveSearchOrgFilter","handleRemoveGeneralFilter","handleRemoveOrgCategoriesFilter","handleRemoveLACategoriesFilter","handleRemoveLARegionFilter","handleRemoveGroupCategoriesFilter","handleClearAll","handleRemoveTagsFilter","handleRemoveCustomFilter","activeFilters","filterId","onRemove","label","catFilter","region","tagged","_utils__WEBPACK_IMPORTED_MODULE_6__","_utils__WEBPACK_IMPORTED_MODULE_7__","_Dropdowns_FilterController_index__WEBPACK_IMPORTED_MODULE_5___default","localeCompare","theme","startOpen","e","target","_actions_index__WEBPACK_IMPORTED_MODULE_4__","hasFolderFilter","newTags","_config__WEBPACK_IMPORTED_MODULE_1__","_utils__WEBPACK_IMPORTED_MODULE_2__","dojo_i18n_nls_resources__WEBPACK_IMPORTED_MODULE_0__","_actions__WEBPACK_IMPORTED_MODULE_1__","_utils__WEBPACK_IMPORTED_MODULE_3__","_utils__WEBPACK_IMPORTED_MODULE_4__","dialogTitle","disableMainAction","mainActionTitle","addToMap","mainInverseActionTitle","removeFromMap","baseSections","layoutMode","detailsPaneType","enableSelectAllItemsFromQuery","showSubmitButton","submitButtonText","disableItemTypeFilters","showCloseBtn","showBackBtn","onBack","hideEllipses","replaceSectionDropdownWithTitle","categoryFilter","_actions_index__WEBPACK_IMPORTED_MODULE_1__","_extent__WEBPACK_IMPORTED_MODULE_1__","_filter__WEBPACK_IMPORTED_MODULE_2__","_nextQuery__WEBPACK_IMPORTED_MODULE_3__","_sort__WEBPACK_IMPORTED_MODULE_4__","_searchString__WEBPACK_IMPORTED_MODULE_5__","_section__WEBPACK_IMPORTED_MODULE_6__","_actions_index__WEBPACK_IMPORTED_MODULE_2__","previous","_actions_index__WEBPACK_IMPORTED_MODULE_0__","customSectionNames","defaultSortField","myContent","myFavorites","myGroups","myOrganization","all","defaultSortDirection","relevance","numviews","avgrating","cSection","sortParams","groupCategoryFilters","_utils__WEBPACK_IMPORTED_MODULE_5__","sectionGroupFilter","_counts_index__WEBPACK_IMPORTED_MODULE_1__","_displayItems__WEBPACK_IMPORTED_MODULE_2__","_livingAtlas__WEBPACK_IMPORTED_MODULE_3__","_loadingItems__WEBPACK_IMPORTED_MODULE_4__","_selectedItems__WEBPACK_IMPORTED_MODULE_5__","_fullItemDetails__WEBPACK_IMPORTED_MODULE_6__","_failedItemDetails__WEBPACK_IMPORTED_MODULE_7__","_organization__WEBPACK_IMPORTED_MODULE_8__","_user__WEBPACK_IMPORTED_MODULE_9__","_customSections__WEBPACK_IMPORTED_MODULE_10__","_allOrganizations__WEBPACK_IMPORTED_MODULE_11__","_users__WEBPACK_IMPORTED_MODULE_12__","loadingItems","selectedItems","failedItemDetails","fullItemDetails","users","_access__WEBPACK_IMPORTED_MODULE_1__","_status__WEBPACK_IMPORTED_MODULE_2__","private","public","statusCounts","acctCounts","privateCounts","publicCounts","sharedCounts","orgAuthCounts","publicAuthCounts","depCounts","_utils_categories__WEBPACK_IMPORTED_MODULE_3__","_d","_e","_f","_g","_h","_j","_k","_l","_m","setSchemasByType","filterSets","schemas","_actions__WEBPACK_IMPORTED_MODULE_2__","_sidePanel__WEBPACK_IMPORTED_MODULE_1__","_expanded_index__WEBPACK_IMPORTED_MODULE_2__","_resultPanel__WEBPACK_IMPORTED_MODULE_3__","_filters__WEBPACK_IMPORTED_MODULE_4__","_tagsFilter__WEBPACK_IMPORTED_MODULE_5__","_pagination__WEBPACK_IMPORTED_MODULE_6__","sidePanel","expanded","resultPanel","pagination","closing","_filters__WEBPACK_IMPORTED_MODULE_0__","_sort__WEBPACK_IMPORTED_MODULE_1__","_actions__WEBPACK_IMPORTED_MODULE_3__","maximized","_actions__WEBPACK_IMPORTED_MODULE_0__","display","allTags","tag","taggregations","currentTags","trimAndRemoveDups","mixinNewTags","removeDuplicateTags","trim","_actions_ui_pagination__WEBPACK_IMPORTED_MODULE_1__","appendItemTypeQ","_metadata_item_index__WEBPACK_IMPORTED_MODULE_0__","getAllowedItemTypesQuery","partialMatches","_section__WEBPACK_IMPORTED_MODULE_0__","_detailsPane_index__WEBPACK_IMPORTED_MODULE_0__","_viewItemDetails__WEBPACK_IMPORTED_MODULE_0__","__WEBPACK_EXTERNAL_MODULE__186__","Expanded","classes","containerClasses","_Modals_Overlay__WEBPACK_IMPORTED_MODULE_4___default","scrollable","filtersVisible","sortVisible","window","matchMedia","matches","_Header_index__WEBPACK_IMPORTED_MODULE_2__","_Body_index__WEBPACK_IMPORTED_MODULE_3__","_Component__WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_EXTERNAL_MODULE__188__","Header","handleContract","handleClose","_Buttons_SvgButton__WEBPACK_IMPORTED_MODULE_3___default","focusable","handleClick","width","height","viewBox","_SectionTabs__WEBPACK_IMPORTED_MODULE_4__","SectionTabs","sectionTitles","handleTabSelect","_Navigation_TabNav__WEBPACK_IMPORTED_MODULE_5___default","selectedOptionValue","__WEBPACK_EXTERNAL_MODULE__191__","Body","handlePageChange","handleCloseMobileFilters","expandedFilters","expandedFiltersActive","filterClasses","ib__big-section","ib__big-filters","ib__big-filters--hidden","ib__big-filters--visible","loading","resultStatus","paginationStatus","fadedClasses","ib__big-wrapper","ib__big-wrapper--faded","ib__big-wrapper--transparent","pageDisplayItems","numPages","Math","ceil","itemTotal","_SearchArea__WEBPACK_IMPORTED_MODULE_6__","_FilterArea_index__WEBPACK_IMPORTED_MODULE_3__","_Modals_MobileWrap__WEBPACK_IMPORTED_MODULE_10___default","maxHeight","open","onClose","footer","onclick","_SidePanel_FilterPane_Filters__WEBPACK_IMPORTED_MODULE_11__","_InputArea_index__WEBPACK_IMPORTED_MODULE_4__","_ResultPanel_index__WEBPACK_IMPORTED_MODULE_5__","_Navigation_Pager__WEBPACK_IMPORTED_MODULE_7___default","onPageChange","currentPage","paginationLimitReached","_Loaders_LoaderBars__WEBPACK_IMPORTED_MODULE_9___default","_actions_ui_pagination__WEBPACK_IMPORTED_MODULE_8__","_actions__WEBPACK_IMPORTED_MODULE_12__","__WEBPACK_EXTERNAL_MODULE__193__","defaultOptions","availableOptionsMap","SearchArea","handleToggleFilters","handleSearchChange","handleSearchKeyDown","handleSortFieldChange","handleSortOrderChange","handleSortClick","placeholder","searchPlaceholderText","generic","availableOptions","fill","fill-rule","oninput","onkeydown","aria-label","_Dropdowns_SortDropdown__WEBPACK_IMPORTED_MODULE_8___default","active","sortActive","availableFields","onFieldChange","onOrderChange","_Buttons_IconButton__WEBPACK_IMPORTED_MODULE_3___default","stroke","stroke-width","previousSearchString","newString","_SidePanel_FilterPane_Filters__WEBPACK_IMPORTED_MODULE_0__","__WEBPACK_EXTERNAL_MODULE__196__","__WEBPACK_EXTERNAL_MODULE__197__","__WEBPACK_EXTERNAL_MODULE__198__","__WEBPACK_EXTERNAL_MODULE__199__","__WEBPACK_EXTERNAL_MODULE__200__","__WEBPACK_EXTERNAL_MODULE__201__","__WEBPACK_EXTERNAL_MODULE__202__","__WEBPACK_EXTERNAL_MODULE__203__","__WEBPACK_EXTERNAL_MODULE__204__","getFilters","anonymous","publicUser","getCustomSectionFilters","getOrgUserFilters","getPublicUserFilters","getAnonFilters","itemTypeIndex","splice","removeItemTypeFilter","CustomFilterAccordion","handleClear","_Dropdowns_AccordionDropdown__WEBPACK_IMPORTED_MODULE_3___default","clearable","role","option","_Buttons_Toggle__WEBPACK_IMPORTED_MODULE_2___default","onToggleClick","selectedToggle","childOptions","__WEBPACK_EXTERNAL_MODULE__207__","InputArea","toLocaleString","itemName","_InputArea_ActiveFilters__WEBPACK_IMPORTED_MODULE_3__","staticFilters","__WEBPACK_EXTERNAL_MODULE__209__","ResultPanel","pageStatus","requestError","_ItemList__WEBPACK_IMPORTED_MODULE_3__","ItemList","_ItemCards_AnalysisCard__WEBPACK_IMPORTED_MODULE_3___default","mainAction","noItemsFound","__WEBPACK_EXTERNAL_MODULE__212__","SidePanel","handleCloseDetailsPane","content","displayType","paneType","sidePanelType","ib-side__container--fade-in","ib-side__container--fade-out","ib-side__container--flyout","ib-side__container--flyover","contentClasses","ib-side__content--flyout","ib-side__content--in-right","ib-side__content--out-left","ib-side__content--flyover","ib-side__content--in-left","ib-side__content--out-right","_SortPane_index__WEBPACK_IMPORTED_MODULE_6__","_FilterPane_index__WEBPACK_IMPORTED_MODULE_4__","sidePanelItem","_ItemDetailsPane_index__WEBPACK_IMPORTED_MODULE_5__","_PanelBody__WEBPACK_IMPORTED_MODULE_7__","i18n","componentWillReceiveProps","nextProps","cardTitle","document","getElementById","focus","filterBtn","sortBtn","closeDetailsPaneImmediately","SortPane","handleChangeSortField","handleChangeSortAsc","handleChangeSortDesc","sortOptions","optionKey","_Buttons_Toggle__WEBPACK_IMPORTED_MODULE_5___default","sortBy","aria-labelledby","aria-activedescendent","style","sortDir","ascending","descending","_Filters__WEBPACK_IMPORTED_MODULE_3__","ItemDetailsPane","handleItemDetails","handleFavorites","_Loaders_LoaderBars__WEBPACK_IMPORTED_MODULE_5___default","faderClasses","ib-item-pane__fader","ib-item-pane__fader--loading","modifiedDate","Date","createdDate","displayPublicAuthoritative","src","alt","_FavButton__WEBPACK_IMPORTED_MODULE_15__","onToggleFavorite","_Buttons_SvgButton__WEBPACK_IMPORTED_MODULE_14___default","viewDetails","by","viewOrg","viewUser","href","lastModified","dojo_date_locale__WEBPACK_IMPORTED_MODULE_17__","selector","formatLength","renderBadges","snippet","noSnippet","details","innerHTML","noDescription","termsOfUse","licenseInfo","noTermsOfUse","attribution","accessInformation","noAttribution","managedBy","_NoUserThumb__WEBPACK_IMPORTED_MODULE_6__","views","numViews","_SharedInfo__WEBPACK_IMPORTED_MODULE_16__","badgeType","_Badges_Authoritative__WEBPACK_IMPORTED_MODULE_7___default","altOrg","_Badges_Deprecated__WEBPACK_IMPORTED_MODULE_8___default","_Badges_LivingAtlas__WEBPACK_IMPORTED_MODULE_9___default","_Badges_Marketplace__WEBPACK_IMPORTED_MODULE_10___default","_Badges_OpenData__WEBPACK_IMPORTED_MODULE_11___default","_Badges_Premium__WEBPACK_IMPORTED_MODULE_12___default","_Badges_Subscriber__WEBPACK_IMPORTED_MODULE_13___default","formatSize","val","round","__WEBPACK_EXTERNAL_MODULE__217__","__WEBPACK_EXTERNAL_MODULE__218__","__WEBPACK_EXTERNAL_MODULE__219__","__WEBPACK_EXTERNAL_MODULE__220__","__WEBPACK_EXTERNAL_MODULE__221__","__WEBPACK_EXTERNAL_MODULE__222__","__WEBPACK_EXTERNAL_MODULE__223__","favorite","ib-item-pane__favorites-btn","ib-item-pane__favorites-btn--active","xmlns","sharedString","groupsList","sharedWith","_Buttons_SvgButton__WEBPACK_IMPORTED_MODULE_0__","_Buttons_SvgButton__WEBPACK_IMPORTED_MODULE_0___default","_ItemDetailsPane_Footer__WEBPACK_IMPORTED_MODULE_1__","focusMe","aria-expanded","afterCreate","close","Footer","handleAddBtnClick","handleCustomActionClick","selected","btnClasses","ib-item-pane__btn--disabled","addBtnClasses","ib-item-pane__btn--active","availableActions","allowed","backBtn","_Buttons_SvgButton__WEBPACK_IMPORTED_MODULE_4___default","closeBtn","ib__header","_SectionDropdown__WEBPACK_IMPORTED_MODULE_3__","SectionDropdown","addToFront","handleOptionSelect","sectionTitle","_Dropdowns_TextOptionDropdown__WEBPACK_IMPORTED_MODULE_5___default","_Buttons_SvgButton__WEBPACK_IMPORTED_MODULE_6___default","handleListClick","handleTableClick","handleFilterClick","resultCount","nextTotal","replacementItemName","placeholderText","resultPanelType","_ActiveFilters__WEBPACK_IMPORTED_MODULE_4__","preventDefault","changeResultDisplay","_actions_index__WEBPACK_IMPORTED_MODULE_8__","_actions_index__WEBPACK_IMPORTED_MODULE_9__","_actions_index__WEBPACK_IMPORTED_MODULE_10__","handleScroll","handleCreate","resultPanelStatus","_ItemList__WEBPACK_IMPORTED_MODULE_4__","resultPanelDisplayType","loadingNext","_ItemMapping__WEBPACK_IMPORTED_MODULE_5__","_Loaders_LoaderBars__WEBPACK_IMPORTED_MODULE_6___default","empty","scrollTop","offsetHeight","scrollHeight","clientHeight","_Loaders_LoaderBars__WEBPACK_IMPORTED_MODULE_0__","_Loaders_LoaderBars__WEBPACK_IMPORTED_MODULE_0___default","onscroll","ItemMapping","handleShowItemDetails","handleSelectionClick","startResizePoll","resizePoll","mapItemsToChildren","_ItemCards_MiniCard_index__WEBPACK_IMPORTED_MODULE_7___default","constrained","activeItem","onShowItemDetails","onSelectionClick","onCustomActionClick","_ItemCards_MiniCardRow_index__WEBPACK_IMPORTED_MODULE_8___default","sidePanelState","clientWidth","setState","__WEBPACK_EXTERNAL_MODULE__235__","__WEBPACK_EXTERNAL_MODULE__236__","mixinOrgInfo","_thumbnail__WEBPACK_IMPORTED_MODULE_2__","_url__WEBPACK_IMPORTED_MODULE_3__","appendDateModifiedQ","appendDateCreatedQ","appendTimeRangeQ","range","end","formatDateRange","appendTagsQ","appendTagQ","tagsArr","allowTagsQuery","ItemBrowser","ib__container","ib__container--expanded","_Expanded_index__WEBPACK_IMPORTED_MODULE_8__","_SidePanel_index__WEBPACK_IMPORTED_MODULE_7__","sidePanelClosing","_Header_index__WEBPACK_IMPORTED_MODULE_4__","_InputArea_index__WEBPACK_IMPORTED_MODULE_5__","_ResultPanel_index__WEBPACK_IMPORTED_MODULE_6__","appendGroupQ","appendStatusQ","appendAccessQ","fetchAllLivingAtlasInfo","_general__WEBPACK_IMPORTED_MODULE_1__","fetchLivingAtlasCategoryItem","typekeywords","fetchPortalRegions","defaultSelf","locale","livingAtlasGroupId","livingAtlasCategoryTypeKeywords","livingAtlasCategorySchema","livingAtlasRegionSchema","livingAtlasGroupQuery","handleLASchemaSuccess","handleLivingAtlasError","source","contentCategorySetsGroupQuery","handleCategorySetsGroupSuccess","handlePortalRegionSuccess","handleLACategoryItemSuccess","handleLAItemDataSuccess","isPortal","handleLivingAtlasCategorySchemaSuccess","regions","localizedName","mixinUserInfo","_thumbnail__WEBPACK_IMPORTED_MODULE_1__"],"mappings":"mpCACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA0DA,OArDAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,oCClFAnC,EAAAU,EAAA0B,EAAA,sBAAAC,IAAArC,EAAAU,EAAA0B,EAAA,sBAAAE;;;;;;;;;;;;;;;AAgBA,IAAAC,EAAA,SAAA7B,EAAA8B,GAIA,OAHAD,EAAAzB,OAAA2B,iBACUC,wBAAgBC,OAAA,SAAAjC,EAAA8B,GAAsC9B,EAAAgC,UAAAF,IAChE,SAAA9B,EAAA8B,GAAyB,QAAAN,KAAAM,IAAAP,eAAAC,KAAAxB,EAAAwB,GAAAM,EAAAN,MACzBxB,EAAA8B,IAGO,SAAAH,EAAA3B,EAAA8B,GAEP,SAAAI,IAAmBC,KAAAC,YAAApC,EADnB6B,EAAA7B,EAAA8B,GAEA9B,EAAAsB,UAAA,OAAAQ,EAAA1B,OAAAY,OAAAc,IAAAI,EAAAZ,UAAAQ,EAAAR,UAAA,IAAAY,GAGO,IAAAN,EAAA,WAQP,OAPAA,EAAAxB,OAAAiC,QAAA,SAAAzB,GACA,QAAAa,EAAA/B,EAAA,EAAAyB,EAAAmB,UAAAC,OAAgD7C,EAAAyB,EAAOzB,IAEvD,QAAA8B,KADAC,EAAAa,UAAA5C,GACAU,OAAAkB,UAAAC,eAAA1B,KAAA4B,EAAAD,KAAAZ,EAAAY,GAAAC,EAAAD,IAEA,OAAAZ,IAEA4B,MAAAL,KAAAG,2BCrCA7C,EAAAD,QAAAiD,iBCAAhD,EAAAD,QAAAkD,oZCkBaC,EAAkB,kBAClBC,EAA0B,0BAC1BC,EAAyB,yBACzBC,EAAe,eACfC,EAAuB,uBACvBC,EAAsB,sBAMtBC,EAAkB,SAACC,GAAiB,gBAACC,EAAeC,GAC7D,IAAMC,EAAQD,IACRE,EAAUD,EAAME,SAASC,MAAMF,QAC/BG,EAAQJ,EAAMK,WAAWC,UAAUC,UAEzCT,GAAWU,KAAMf,IAEX,IAAAgB,EAAA1D,OAAA2D,EAAA,EAAA3D,EAAA8C,MAAAO,SAAAJ,GACNC,EADOQ,EAAA,GAAKA,EAAA,IAEPE,KAAK5D,OAAA6D,EAAA,EAAA7D,CAAsBiD,GAAQ,SAACa,GAAa,OAAAf,EAASgB,EAAgBD,MAC1EF,KACG,SAACI,GAAkB,OAAAjB,EAASkB,EAAmBhB,EAAOe,KACtD,SAACF,GAAa,OAAAf,EAASgB,EAAgBD,QAQtCI,EAAS,SAACC,GAA2B,gBAACpB,EAAeC,GAC9D,IAAMC,EAAQD,IAEdD,GAAWU,KAAMlB,IACbU,EAAME,SAASiB,OAAOC,+BACtBtB,GAAWU,KAAMa,EAAA,IAGrBvB,EAASwB,EAAcJ,MAOrBI,EAAgB,SAACJ,GAA2B,gBAACpB,EAAeC,GAC9D,IAAIC,EAAQD,IACNwB,EAAUvB,EAAMK,WAAWkB,QAC3BC,EAAOxB,EAAME,SAASC,MAAMsB,OAAOD,KACnCE,IAAaF,EAEnB1B,EAAS/C,OAAA4E,EAAA,EAAA5E,IAAc4D,KAAK,SAACiB,GACT,gBAAZL,EACAzB,EAAS/C,OAAA8E,EAAA,EAAA9E,CAAqB6E,IACzBjB,KACG,WAAM,OAAAmB,EAAchC,EAAUC,IAAYmB,IAC1C,WAAM,OAAApB,GAAWU,KAAMhB,EAAwBuC,QAAS,2CAIhD,cAAZR,GACY,aAAZA,GACY,gBAAZA,GACY,iBAAZA,IACCG,EAYc,mBAAZH,GAAgCG,EACvC5B,EAAS/C,OAAAiF,EAAA,EAAAjF,IACJ4D,KACG,WAAM,OAAAmB,EAAchC,EAAUC,IAAYmB,IAC1C,WAAM,OAAApB,GAAWU,KAAMhB,EAAwBuC,QAAS,2CAEzDhF,OAAAkF,EAAA,EAAAlF,CAAgBiD,EAAME,SAASiB,OAAOe,eAAgBX,GAC7DzB,EAAS/C,OAAAoF,EAAA,EAAApF,IACJ4D,KACG,WAAM,OAAAmB,EAAchC,EAAUC,IAAYmB,IAC1C,WAAM,OAAApB,GAAWU,KAAMhB,EAAwBuC,QAAS,6CAGhED,EAAchC,EAAUE,EAAOkB,GAvB/BkB,GACKtC,EAAS/C,OAAAsF,EAAA,EAAAtF,KAAkBuF,OACxBZ,GAAYF,EAAKe,OACZzC,EAAS/C,OAAAiF,EAAA,EAAAjF,UAGjB4D,KACG,WAAM,OAAAmB,EAAchC,EAAUC,IAAYmB,IAC1C,WAAM,OAAApB,GAAWU,KAAMhB,EAAwBuC,QAAS,uCA0B5E,SAASD,EAAchC,EAAeE,EAAyBkB,GAC3D,IASIsB,EACAC,EAVExC,EAAUD,EAAME,SAASC,MAAMF,QAC/BQ,EAAA1D,OAAA2D,EAAA,EAAA3D,IAAAiD,GAEA0C,EAAgBzC,EAFfQ,EAAA,GAAKA,EAAA,IAGPE,KACG5D,OAAA6D,EAAA,EAAA7D,CAAsBiD,GACtB,SAACa,GAAa,OAAAf,GAAWU,KAAMhB,EAAwBuC,QAASlB,MAKxE,GAAMK,EAAc,CACV,IAAAyB,EAAA5F,OAAA2D,EAAA,EAAA3D,CAAAiD,GAAA,wCACNwC,EAAiBvC,EADV0C,EAAA,GAAWA,EAAA,IAGlB,IAAMT,EAAiBlC,EAAME,SAASiB,OAAOe,eACvCX,EAAUvB,EAAMK,WAAWkB,QACjC,GACIxE,OAAA6F,EAAA,EAAA7F,CAAewE,IAEXxE,OAAAkF,EAAA,EAAAlF,CAAgBmF,EAAgBX,IAChCxE,OAAA6F,EAAA,EAAA7F,CAAeA,OAAAkF,EAAA,EAAAlF,CAAiBmF,EAAgBX,IAEtD,CACQ,IAAAsB,EAAA9F,OAAA2D,EAAA,EAAA3D,CAAAiD,IAAA8C,GAAAC,WAAAC,cACNP,EAAiBxC,EADV4C,EAAA,GAAWA,EAAA,KAK1B,IAAMI,GAAYP,EAAeF,EAAgBC,GAC5CS,OAAO,SAACC,GAAa,QAAEA,IAE5Bf,EAAIa,GACCtC,KACG,SAACyC,GAAmB,OAAAtD,EAUhC,SAA8BE,EAAyBoD,GACnD,IAAMC,EAASrD,EAAME,SAASC,MAAMmD,QAC9B7B,EAAS1E,OAAAwG,EAAA,EAAAxG,CAAiBiD,GAChC,OACIQ,KAAMjB,EACNwC,SACId,OAAQuC,EAAA,KACDJ,EAAU,GAAGK,MAChBC,QAASN,EAAU,GAAGK,KAAKC,QAAQC,IAAI,SAACC,GAAe,OAAA7G,OAAA8G,EAAA,EAAA9G,CAAc0E,EAAQ4B,EAAQO,OAEzFE,aACIV,EAAU,IAAMA,EAAU,GAAGK,MAAQL,EAAU,GAAGK,KAAKK,cAEnDC,OAAYX,EAAU,GAAGK,KAAKK,aAAaC,OAAMC,QAC5C1B,OACGc,EAAU,IAAMA,EAAU,GAAGK,MAAQL,EAAU,GAAGK,KAAKK,aAC/CV,EAAU,GAAGK,KAAKK,aAAaC,OAAMC,YAErDC,WACI1C,QAASvB,EAAMK,WAAWkB,QAC1B2C,MAAOlE,EAAMK,WAAW6C,OAAOgB,MAC/BC,OAAQnE,EAAME,SAASiB,OAAOe,eAAegB,OACzC,SAAC3B,GAAiB,OAAAA,EAAQ3E,OAASoD,EAAMK,WAAWkB,UACtD,UAEN6C,IAnCqBC,CAAqBrE,EAAOoD,KACzD,SAACvC,GAAa,OAAAf,GAAWU,KAAMhB,EAAwBuC,QAASlB,MA4C5E,IAAMG,EAAqB,SAAChB,EAAyBe,GACjD,IAAMsC,EAASrD,EAAME,SAASC,MAAMmD,QAC9B7B,EAAS1E,OAAAwG,EAAA,EAAAxG,CAAiBiD,GAChC,OACIQ,KAAMd,EACNqC,QAASyB,EAAA,KACFzC,EAAS0C,MACZC,QAAS3C,EAAS0C,KAAKC,QAAQC,IAAI,SAACC,GAAe,OAAA7G,OAAA8G,EAAA,EAAA9G,CAAc0E,EAAQ4B,EAAQO,SASvF9C,EAAkB,SAACD,GAAa,OAChCL,KAAMb,EAAqBoC,QAASlB,kCCtN1C5E,EAAAU,EAAA0B,EAAA,sBAAAiG,IAAArI,EAAAU,EAAA0B,EAAA,sBAAAkG,IAAAtI,EAAAU,EAAA0B,EAAA,sBAAAmG,IAAAvI,EAAAU,EAAA0B,EAAA,sBAAAoG,IAAAxI,EAAAU,EAAA0B,EAAA,sBAAAqG,IAAAzI,EAAAU,EAAA0B,EAAA,sBAAAsG,IAAA1I,EAAAU,EAAA0B,EAAA,sBAAAuG,IAAA3I,EAAAU,EAAA0B,EAAA,sBAAAwG,IAAA5I,EAAAU,EAAA0B,EAAA,sBAAAyG,IAAA7I,EAAAU,EAAA0B,EAAA,sBAAA0G,IAAA9I,EAAAU,EAAA0B,EAAA,sBAAA2G,IAAA/I,EAAAU,EAAA0B,EAAA,sBAAA4G,IAAAhJ,EAAAU,EAAA0B,EAAA,sBAAA6G,IAAAjJ,EAAAU,EAAA0B,EAAA,sBAAA8G,IAAAlJ,EAAAU,EAAA0B,EAAA,sBAAA+G,IAAAnJ,EAAAU,EAAA0B,EAAA,sBAAAgH,IAAApJ,EAAAU,EAAA0B,EAAA,sBAAAiH,IAAArJ,EAAAU,EAAA0B,EAAA,sBAAAkH,IAAAtJ,EAAAU,EAAA0B,EAAA,sBAAAmH,IAAAvJ,EAAAU,EAAA0B,EAAA,sBAAAoH,IAAAxJ,EAAAU,EAAA0B,EAAA,sBAAAqH,IAAAzJ,EAAAU,EAAA0B,EAAA,sBAAAsH,IAAA1J,EAAAU,EAAA0B,EAAA,sBAAAuH,IAAA3J,EAAAU,EAAA0B,EAAA,sBAAAwH,IAAA5J,EAAAU,EAAA0B,EAAA,sBAAAyH,IAAA7J,EAAAU,EAAA0B,EAAA,sBAAA0H,IAAA9J,EAAAU,EAAA0B,EAAA,sBAAA2H,IAAA/J,EAAAU,EAAA0B,EAAA,sBAAA4H,IAAAhK,EAAAU,EAAA0B,EAAA,sBAAA6H,IAAAjK,EAAAU,EAAA0B,EAAA,sBAAA8H,IAAAlK,EAAAU,EAAA0B,EAAA,sBAAA+H,IAAAnK,EAAAU,EAAA0B,EAAA,sBAAAgI,IAAApK,EAAAU,EAAA0B,EAAA,sBAAAiI,IAAO,IAAMhC,EAAuB,uBACvBC,EAA0B,0BAC1BC,EAAwC,wCACxCC,EAAoC,oCACpCC,EAA+B,+BAC/BC,EAAiC,iCACjCC,EAA0B,0BAC1BC,EAAyB,yBACzBC,EAAwB,wBACxBC,EAAuB,uBACvBC,EAAsB,sBACtBC,EAAuB,uBACvBC,EAAuB,uBACvBC,EAAyB,yBACzBC,EAA2B,2BAC3BC,EAAqB,qBACrBC,EAAoB,oBAEpBC,EAAqB,SAACgB,EAAerD,GAA8C,OAC5F1C,KAAM8D,EACNvC,SAAWwE,MAAKA,EAAErD,OAAMA,KAGfsC,EAAuB,SAACtB,GACjC,OACI1D,KAAM+D,EACNxC,QAASmC,IAIJuB,EAAuB,SAACe,GACjC,OACIhG,KAAMoE,EACN7C,QAASyE,IAIJd,EAA4B,SAACe,GACtC,OACIjG,KAAMkE,EACN3C,QAAS0E,IAIJd,EAAoC,SAACc,GAC9C,OACIjG,KAAMgE,EACNzC,QAAS0E,IAIJb,EAAgC,SAACa,GAC1C,OACIjG,KAAMiE,EACN1C,QAAS0E,IAIJZ,EAA8B,SACvCY,GAEA,OACIjG,KAAMmE,EACN5C,QAAS0E,IAIJX,EAAuB,SAC5BvE,EACAmF,GAEJ,OACIlG,KAAMqE,EACN9C,SAAWR,QAAOA,EAAEmF,SAAQA,KAIvBX,EAAsB,SAC/BxE,EACAoF,GAEA,OACInG,KAAMsE,EACN/C,SAAWR,QAAOA,EAAEoF,QAAOA,KAItBX,EAAqB,SAACY,GAC/B,OACIpG,KAAMuE,EACNhD,QAAS6E,IAIJX,EAAqB,SAACY,GAC/B,OACIrG,KAAMyE,EACNlD,QAAS8E,IAIJX,EAAoB,SAAChC,GAC9B,OACI1D,KAAMwE,EACNjD,QAASmC,IAIJiC,EAAqB,SAACW,GAC/B,OACItG,KAAM0E,EACNnD,QAAS+E,IAIJV,EAAsB,SAACW,GAChC,OACIvG,KAAM2E,EACNpD,QAASgF,IAIJV,EAAwB,SAACW,GAClC,OACIxG,KAAM4E,EACNrD,QAASiF,IAIJV,EAAmB,SAACW,GAC7B,OACIzG,KAAM6E,EACNtD,QAASkF,mCCtIjBhL,EAAAU,EAAA0B,EAAA,sBAAA6I,IAAA,IAAAC,EAAAlL,EAAA,KAAAA,EAAAU,EAAA0B,EAAA,sBAAA8I,EAAA,IAAAlL,EAAAU,EAAA0B,EAAA,sBAAA8I,EAAA,QAAAC,EAAAnL,EAAA,IAAAA,EAAAU,EAAA0B,EAAA,sBAAA+I,EAAA,IAAAnL,EAAAU,EAAA0B,EAAA,sBAAA+I,EAAA,IAAAnL,EAAAU,EAAA0B,EAAA,sBAAA+I,EAAA,IAAAnL,EAAAU,EAAA0B,EAAA,sBAAA+I,EAAA,IAAAnL,EAAAU,EAAA0B,EAAA,sBAAA+I,EAAA,IAAAnL,EAAAU,EAAA0B,EAAA,sBAAA+I,EAAA,QAAAC,EAAApL,EAAA,KAAAA,EAAAU,EAAA0B,EAAA,sBAAAgJ,EAAA,IAIO,IAAMH,EAAwB,sDC2F9B,SAASI,EACZC,GAEA,OAAO,SAASC,QAAT,IAAAC,EAAA3I,KAA4B4I,KAAAC,EAAA,EAAAA,EAAA1I,UAAAC,OAAAyI,IAAAD,EAAAC,GAAA1I,UAAA0I,GAC/B,OAAOD,EAAKxI,QAAUqI,EAAGrI,OACrBqI,EAAG/K,KAAI2C,MAAPoI,GAAQzI,MAAIwD,OAAKoF,IACjB,eAAC,IAAAE,KAAAD,EAAA,EAAAA,EAAA1I,UAAAC,OAAAyI,IAAAC,EAAAD,GAAA1I,UAAA0I,GACG,OAAOH,EAAQhL,KAAI2C,MAAZqI,GAAaC,GAAInF,OAAKoF,EAASE,MAPtD3L,EAAAU,EAAA0B,EAAA,sBAAAiJ,ydCrFaO,EAAY,SAAC5H,EAAkBwB,EAAcqG,GACtD,OAAAC,EAAY9H,EAAYwB,EAAOuG,QAAO,iBAAmBF,QAAOA,EAAEG,SAAS,KAQlEC,EAAgB,SAACjI,EAAkBwB,EAAc0G,GAC1D,OAAAJ,EAAY9H,EAAYwB,EAAOuG,QAAO,kBAAkBG,EAAM,UAQrDC,EAAoB,SAACnI,EAAkBwB,EAAc4G,GAC9D,OAAAN,EAAY9H,EAAYwB,EAAOuG,QAAO,qBAAuBM,EAAGD,KAQvDE,EAA2B,SAACtI,EAAkBwB,EAAc+G,GACrE,OAAAT,EAAY9H,EAAYwB,EAAOuG,QAAO,qBAAqBQ,EAAO,oBAQzDC,EAAyB,SAACxI,EAAkBwB,EAAciH,GACnE,OAAAX,EAAY9H,EAAYwB,EAAOuG,QAAO,aAAYU,GAAUjH,EAAOiH,IAAE,oBAQ5DC,EAAe,SAAC1I,EAAkBwB,EAAciH,GACzD,OAAAX,EACI9H,EACG2I,SAASC,SAAQ,KAAKpH,EAAOqH,eAAc,0BAAyBJ,GAAUjH,EAAOiH,MAUnFK,EAAoB,SAAC9I,EAAkBwB,EAAcrB,GAAwB,OACtFH,EACOwB,EAAOuG,QAAO,qBAEbgB,OACIC,EAAG,OACHX,EAAG,SAAS7G,EAAOiH,GAAE,qBACrB7I,IAAK,IACLO,MAAOA,GAAgB,EACvB8I,UAAW,QACXC,UAAW,SAGrBxI,KAAK,SAACI,GACJ,OAAIA,EAAS0C,KAAK2F,MAAQrI,EAAS0C,KAAKrD,MAAQW,EAAS0C,KAAK5D,IACnDkJ,EAAkB9I,EAASwB,EAAQV,EAAS0C,KAAKrD,MAAQW,EAAS0C,KAAK5D,KACzEc,KAAK,SAAC0I,GACH,OAAO7F,EAAA,KACA6F,GACH5F,KAAMD,EAAA,KACC6F,EAAU5F,MACbC,QAAS3C,EAAS0C,KAAKC,QAAQpB,OAAO+G,EAAU5F,KAAKC,eAKlE3C,KAWFuI,EAA6B,SACtCrJ,EACAwB,EACA8H,EACAnJ,GACM,OACNH,EACOwB,EAAOuG,QAAO,oBAAoBuB,EAAQ,wBAEzCP,OACIC,EAAG,OACHpJ,IAAK,IACLO,MAAOA,GAAgB,KAGjCO,KAAK,SAACI,GACJ,IAAMyI,EAAsBzI,EAAS0C,KAAKgG,oBAAoB9F,IAAI,SAAC+F,GAAiB,OAChF3B,EACI9H,EACGwB,EAAOuG,QAAO,mBAAkB0B,EAAQhB,IAAMgB,EAAQvB,QAAM,4EACjExH,KACE,SAACgJ,GAAiB,OAAAA,GAClB,SAAC9I,QAGT,OAAIE,EAAS0C,KAAK2F,MAAQrI,EAAS0C,KAAKrD,MAAQW,EAAS0C,KAAK5D,IACnDyJ,EAA2BrJ,EAASwB,EAAQ8H,EAAUxI,EAAS0C,KAAKrD,MAAQW,EAAS0C,KAAK5D,KAC5Fc,KAAK,SAAC0I,GACH,OAAOO,EACHJ,GACF7I,KACE,SAACyC,GACG,OAAOiG,EAAU/G,OACbvB,EAAS0C,KAAKgG,oBACTvG,OAAO,SAACwG,GAAiB,QAAEA,EAAQvB,SACnCxE,IAAI,SAAC+F,GAAiB,OAAAA,EAAQvB,SAC9B7F,OAAOuH,EAAwBzG,SAMrDwG,EACHJ,GACF7I,KACE,SAACyC,GACG,OAAOrC,EAAS0C,KAAKgG,oBAChBvG,OAAO,SAACwG,GAAiB,QAAEA,EAAQvB,SACnCxE,IAAI,SAAC+F,GAAiB,OAAAA,EAAQvB,SAC9B7F,OAAOuH,EAAwBzG,SAMpD,SAASyG,EAAwBzG,GAC7B,OAAOA,EAAU0G,OAAO,SAACC,EAAkBC,GACvC,OAAIA,GAAWA,EAAQC,aACZF,EAAOzH,OAAO0H,EAAQC,aAAatG,IAAI,SAACC,GAAc,OAAAA,EAAK8E,MAE/DqB,OAUR,IAAMG,EAAY,SAACjK,EAAkBwB,EAAc8H,GACtD,OAAAxB,EAAY9H,EAAYwB,EAAOuG,QAAO,qBAAoBuB,GAAsB9H,EAAOD,KAAK+H,YAQnFY,EAAmB,SAAClK,EAAkBwB,EAAc8H,GAC7D,OAAAxB,EAAY9H,EAAYwB,EAAOuG,QAAO,mBAAkBuB,GAAsB9H,EAAOD,KAAK+H,YAQjFa,EAAqB,SAACnK,EAAkBwB,EAAc4I,GAC/D,OAAAtC,EAAY9H,EAAYwB,EAAOuG,QAAO,mBAAmBqC,IAQhDC,EAAc,SAACrK,EAAkBwB,EAAc8I,GACxD,OAAAxC,EAAY9H,EAAYwB,EAAOuG,QAAO,oBAAqBuC,IAQxD,SAASxC,EAAY9H,EAAkBuK,EAAaD,GACvD,OAAOtK,EACHuK,GAEIxB,MAAOxF,EAAA,GACHyF,EAAG,QACAsB,KAGb5J,KAAK,SAACI,GAAkB,OAAAA,EAAS0C,uBC5NvCrH,EAAAD,QAAAsO,gCCuGO,SAASC,QAAQ,IAAAC,KAAAhD,EAAA,EAAAA,EAAA1I,UAAAC,OAAAyI,IAAAgD,EAAAhD,GAAA1I,UAAA0I,GACpB,OAAO,SAACiD,GAAa,OAAAD,EAAME,YAAY,SAACC,EAAU7B,GAAM,OAAAA,EAAE6B,IAAWF,IADzE3O,EAAAU,EAAA0B,EAAA,sBAAAqM,mBCvGAtO,EAAAD,QAAA4O,kCCAA9O,EAAAU,EAAA0B,EAAA,sBAAA2M,IAAA/O,EAAAU,EAAA0B,EAAA,sBAAA4M,IAAAhP,EAAAU,EAAA0B,EAAA,sBAAA6M,IAAAjP,EAAAU,EAAA0B,EAAA,sBAAA8M,IAAAlP,EAAAU,EAAA0B,EAAA,sBAAA+M,IAAAnP,EAAAU,EAAA0B,EAAA,sBAAAgN,IAAA,IAAAC,EAAArP,EAAA,GAGa+O,EAA2B,SAACzJ,GAA2B,OAAAA,EAAQgK,QACxEhK,EAAQgK,QAAQrI,OACZ,SAACA,GAA2B,MAAkB,iBAAXA,IAClB,UAAhBA,EAAO1C,MAAoC,QAAhB0C,EAAO1C,YAG9BgL,EAA2BzO,OAAAuO,EAAA,EAAAvO,CAAM,SAACyD,EAAce,GACzD,GAAKA,EAAQgK,QAGb,OAAOhK,EAAQgK,QAAQzB,OAAO,SAACC,EAAoCC,GAC/D,MAAuB,iBAAZA,GAAwBA,EAAQxJ,OAASA,EACzCwJ,EAEJD,QACR3F,KAEM6G,EAAgCO,EAAyB,SACzDN,EAA8BM,EAAyB,OAE7D,SAASL,EAAyB5J,GACrC,QAAU0J,EAA8B1J,MAAc2J,EAA4B3J,GAY/E,SAAS6J,EAAiBlJ,EAAiCuJ,GAC9D,OAAOvJ,EAAegB,OAAO,SAAC3B,GAAY,OAAAA,EAAQ3E,OAAS6O,IAAa,GAGrE,SAASJ,EAAgBnJ,EAAiCuJ,GAC7D,QAASL,EAAiBlJ,EAAgBuJ,oBCzC9CrP,EAAAD,QAAAuP,kBCAAtP,EAAAD,QAAAwP,mJCYO,SAASC,EAAqBC,GACjC,OAAO9O,OAAA+O,EAAA,EAAA/O,CAAsB8O,EAAQ,SAACE,GAIlC,OAHIA,EAAKC,cACED,EAAKC,MAETD,IAQR,SAASE,EACZnI,EACA+H,EACArL,GAEA,GAAKqL,EAYL,OATc/H,EAAaC,OAAOb,OAAO,SAAC+F,GAAW,OAAAA,EAAEiD,YAAc1L,IAAM,GAClD2L,YACdC,QAAQ,SAAC3L,OAAEnD,EAAAmD,EAAAnD,MAAO0O,EAAAvL,EAAAuL,MACnBK,EAAO/O,EAAMgP,MAAM,KAAKtI,MAAM,GAC9BuI,EAhBP,SAA6BV,EAAsBQ,GACtD,OAAOtP,OAAA+O,EAAA,EAAA/O,CAAgB8O,EAAQQ,GAeVG,CAAoBX,EAAQQ,GACzCE,IACAA,EAASP,MAAQA,KAGlBH,EAGJ,SAASY,EAAgBC,GAC5B,IAAMC,EAAe5P,OAAA+O,EAAA,EAAA/O,CACjB,aACA,SACE6P,MAAO,OAAQnG,WAAYiG,IAGjC,OAAO3P,OAAA+O,EAAA,EAAA/O,CAAsB4P,EAAc,SAACZ,GACxC,OAAOvI,EAAA,KACAuI,GACHzO,MAAOyO,EAAKzO,MAAMuP,cAClBC,YAAaf,EAAKe,YAAcf,EAAKe,YAAcf,EAAKzO,MACxDyP,QAAShB,EAAKiB,YAAcjB,EAAKiB,iBAAc5I,MAEpD6I,0LCrDA,SAASC,EAAQC,GACpB,OAAqC,IAA9BpQ,OAAOqQ,KAAKD,GAAOjO,QAAgBiO,EAAMpO,cAAgBhC,OAQ7D,IAAMsQ,EAAsBtQ,OAAAuQ,EAAA,EAAAvQ,CAAM,SAACwQ,EAAsBC,GAC5D,IAAMC,EAASjK,EAAA,KAAKgK,GAEpB,cADOC,EAAOF,GACPE,IAgBJ,SAASC,EAAcnG,EAASiG,GACnC,OAAOG,EAAqBxO,MAAM,KAAMF,WAE5C,IAAM0O,EAAuB5Q,OAAAuQ,EAAA,EAAAvQ,CAAM,SAC/BwK,EACAiG,GAC6B,OAC7BzQ,OAAOqQ,KAAKI,GAAK1D,OACb,SAAC8D,EAAQhQ,GAEL,OADAgQ,EAAIhQ,GAAO2J,EAAGiG,EAAI5P,GAAMA,EAAK4P,GACtBI,SAcZ,SAASC,EAAOtG,EAASiG,GAC5B,OAAOM,EAAc3O,MAAM,KAAMF,WAErC,IAAM6O,EAAgB/Q,OAAAuQ,EAAA,EAAAvQ,CAAM,SAAOwK,EAAmDiG,GAAc,OAChGzQ,OAAOqQ,KAAKI,GAAK1D,OACb,SAAC8D,EAAQhQ,GAIL,OAHI2J,EAAGiG,EAAI5P,GAAMA,EAAK4P,KAClBI,EAAIhQ,GAAO4P,EAAI5P,IAEZgQ,uCClEnB3R,EAAAU,EAAA0B,EAAA,sBAAA0P,IAAA9R,EAAAU,EAAA0B,EAAA,sBAAA2P,IAAA/R,EAAAU,EAAA0B,EAAA,sBAAA4P,IAAAhS,EAAAU,EAAA0B,EAAA,sBAAA6P,IAAAjS,EAAAU,EAAA0B,EAAA,sBAAA8P,IAAAlS,EAAAU,EAAA0B,EAAA,sBAAA+P,IAAAnS,EAAAU,EAAA0B,EAAA,sBAAAgQ,IAAApS,EAAAU,EAAA0B,EAAA,sBAAAiQ,IAAArS,EAAAU,EAAA0B,EAAA,sBAAAkQ,IAAAtS,EAAAU,EAAA0B,EAAA,sBAAAmQ,IAAA,IAAAlD,EAAArP,EAAA,IAGa8R,EAAc,cACdC,EAAqB,qBACrBC,EAAoB,oBACpBC,EAA2B,2BAC3BC,EAAgB,gBAChBC,EAAa,aACbC,EAAe,eAGfC,EAAgC,gCAEvCG,EAAqB,SAAC7K,GAAe,OACvCpD,KAAMuN,EACNhM,QAAS6B,IAGA2K,EAAa,SAAC3K,GAAe,gBAAC9D,EAAeC,GACtD,IAAMC,EAAQD,IAEd,GAAIC,EAAME,SAASiB,OAAOuN,uBAAwB,CAC9C5O,EAAS6O,EAAgB/K,IACzB,IAAMgL,EAAW5O,EAAME,SAASiB,OAAOyN,UAAU7R,OAAAuO,EAAA,EAAAvO,CAAc6G,KACzDgL,GAAYA,EAASjO,KACvBiO,EAASjO,KACL,WACQX,EAAME,SAASiB,OAAO0N,iBACtB/O,EAASgP,EAAiBlL,IAE1B9D,EAAS2O,EAAmB7K,KAGpC,WACI9D,GACIU,KAAM0N,EACNnM,QAAS6B,MAIrBmL,QAAQC,MAAM,iIAEXhP,EAAME,SAASiB,OAAO0N,kBAC7B/O,EAASgP,EAAiBlL,IAC1B5D,EAAME,SAASiB,OAAOyN,UAAU7R,OAAAuO,EAAA,EAAAvO,CAAc6G,OAE9C9D,EAAS2O,EAAmB7K,IAC5B5D,EAAME,SAASiB,OAAOyN,UAAU7R,OAAAuO,EAAA,EAAAvO,CAAc6G,QAIzCkL,EAAmB,SAAClL,GAAe,OAC5CpD,KAAMwN,EACNjM,QAAS6B,IAGA4K,EAAe,SAAC5K,GAAe,gBAAC9D,EAAeC,GACxD,IAAMC,EAAQD,IACdD,GACIU,KAAM2N,EACNpM,QAAS6B,IAEb5D,EAAME,SAASiB,OAAO8N,YAAYlS,OAAAuO,EAAA,EAAAvO,CAAc6G,OAGvC+K,EAAkB,SAAC/K,GAAe,OAC3CpD,KAAMyN,EACNlM,QAAS6B,kCCrEb3H,EAAAU,EAAA0B,EAAA,sBAAA6Q,IAAAjT,EAAAU,EAAA0B,EAAA,sBAAA8Q,IAAAlT,EAAAU,EAAA0B,EAAA,sBAAA+Q,IAAAnT,EAAAU,EAAA0B,EAAA,sBAAAgR,IAAApT,EAAAU,EAAA0B,EAAA,sBAAAiR,IAAArT,EAAAU,EAAA0B,EAAA,sBAAAkR,IAAAtT,EAAAU,EAAA0B,EAAA,sBAAAmR,IAAAvT,EAAAU,EAAA0B,EAAA,sBAAAoR,IAAAxT,EAAAU,EAAA0B,EAAA,sBAAAqR,IAAAzT,EAAAU,EAAA0B,EAAA,sBAAAsR,IAAA1T,EAAAU,EAAA0B,EAAA,sBAAAuR,IAAA3T,EAAAU,EAAA0B,EAAA,sBAAAwR,IAAA5T,EAAAU,EAAA0B,EAAA,sBAAAyR,IAAA,IAAAC,EAAA9T,EAAA,IAAA+T,EAAA/T,EAAA,IAAAgU,EAAAhU,EAAA,IAAAiU,EAAAjU,EAAA,GAOaiT,EAAmB,mBACnBC,EAA2B,2BAC3BC,EAAwB,wBACxBC,EAAoB,oBACpBC,EAA0B,0BAC1BC,EAAmB,mBACnBC,EAA0B,0BAC1BC,EAAwB,wBACxBC,EAAgC,gCAChCC,EAA6B,6BAE7BC,EAAgB,WAAM,gBAAC9P,EAAeC,GAC/C,IAAMC,EAAQD,IACRoQ,EAAcnQ,EAAMK,WAAW6C,OAAOgB,MACtCkM,EAAwBpQ,EAAM0D,QAAQlC,KAAK6O,gBAEjD,GAAkC,WAA9BrQ,EAAM0D,QAAQlC,KAAKsF,OACnB,OAAIqJ,IAAgBC,EAAsBD,EAAYzH,IAC3C5I,EAASwQ,EAA6BH,EAAYzH,MAEtD,IAAKsH,GAAUO,UACnB,GAAkC,WAA9BvQ,EAAM0D,QAAQlC,KAAKsF,OAC1B,OAAO,IAAKkJ,GAAUQ,SAG1B1Q,GAAWU,KAAM6O,IAEX,IAAA5O,EAAAT,EAAAE,SAAAC,MAAEF,EAAAQ,EAAAR,QAASwB,EAAAhB,EAAAgB,OAEjB,OAAOsO,GACHhT,OAAAkT,EAAA,EAAAlT,CAAUkD,EAASwB,GAAQd,KAAK,SAACI,GAC7B,OAAOA,EAAS0P,OAAO9M,IAAI,SAACO,GAAgB,OACxCwE,GAAIxE,EAAMwE,GACVkE,MAAO1I,EAAM0I,WAGrB7P,OAAAkT,EAAA,EAAAlT,CAAiBkD,EAASwB,GAAQd,KAAK,SAACI,GACpC,OAAOA,EAAS2P,QAAQ/M,IAAI,SAACkD,GAAiB,OAC1C6B,GAAI7B,EAAO6B,GACXkE,MAAO/F,EAAO+F,WAGtB7P,OAAAkT,EAAA,EAAAlT,CAAmBkD,EAASwB,EAAQA,EAAOD,KAAK6I,YAAY1J,KAAK,SAACI,GAC9D,OAAOA,EAAS4P,MAAM7G,OAAO,SAACC,EAAcC,GAExC,OADAD,EAAOC,EAAQtB,KAAM,EACdqB,SAGfhN,OAAAkT,EAAA,EAAAlT,CAA2BkD,EAASwB,EAAQA,EAAOD,KAAK+H,UAAU5I,KAC9D,SAACI,GAAkB,OAAAA,GACnB,SAACF,GAAa,YAEpByB,OAAO6N,GAAgBrQ,EAASwQ,EAA6BH,EAAYzH,WAAqB/H,KAC5F,SAACyC,GACGtD,GACIU,KAAM+O,EACNxN,SACI0O,OAAQrN,EAAU,GAClBsN,QAAStN,EAAU,GACnBwN,UAAWxN,EAAU,GACrByN,mBAAoBzN,EAAU,OAO9C,SAA6BvC,GACzBkO,QAAQC,MAAMnO,GACdf,GAAWU,KAAMgP,QAIZc,EAA+B,SAAC5H,GAAe,gBAAC5I,EAAeC,GAClE,IAAAU,EAAAV,IAAAG,SAAAC,MAAEF,EAAAQ,EAAAR,QAASwB,EAAAhB,EAAAgB,OACjB,OAAO1E,OAAAkT,EAAA,EAAAlT,CAAyBkD,EAASwB,EAAQiH,GAAI/H,KAAK,SAACF,OAAEiM,EAAAjM,EAAAiM,eACzD5M,GACIU,KAAM8O,EACNvN,SAAW2G,GAAEA,EAAEgE,eAAcA,SAK5BmD,EAAiB,SAACjM,GAAe,gBAAC9D,EAAeC,GAC1D,IAAIC,EAAQD,IACN0B,EAASzB,EAAME,SAASC,MAAMsB,OAC9B4I,EAAa5I,EAAOD,KAAK6I,WACzBG,EAAS/I,EAAOuG,QAAO,kBAAkBpE,EAAK8E,GAAE,SAKhDM,GACFC,EAAG,OACH6H,SANclN,EAAKmN,QAA0B,WAAhBnN,EAAKmN,QACjCnN,EAAKoN,SAAWpN,EAAKoN,QAAQD,QAAkC,WAAxBnN,EAAKoN,QAAQD,OAMrDE,IALSrN,EAAKmN,QAA0B,QAAhBnN,EAAKmN,QAC5BnN,EAAKoN,SAAWpN,EAAKoN,QAAQD,QAAkC,QAAxBnN,EAAKoN,QAAQD,SAAqB,EAK1EN,QAASpG,GACTsG,OAAQ/M,EAAK8E,KAGjB5I,GACIU,KAAM0O,EACNnN,QAAS6B,IAGb5D,EAAME,SAASC,MAAMF,QACjBuK,GAAO0G,OAAQ,OAAQlI,MAAKA,IAC9BrI,KAAK,SAACI,GACJjB,GACIU,KAAM2O,EACNpN,QAAS6B,KAEd,SAAC/C,GACAkO,QAAQC,MAAMnO,GACdf,GACIU,KAAM4O,EACNrN,QAAS6B,QAKRkM,EAAsB,SAAClM,GAAe,gBAAC9D,EAAeC,GAC/D,IAAIC,EAAQD,IACN0B,EAASzB,EAAME,SAASC,MAAMsB,OAC9B4I,EAAa5I,EAAOD,KAAK6I,WACzBG,EAAS/I,EAAOuG,QAAO,kBAAkBpE,EAAK8E,GAAE,WAChDM,GACFC,EAAG,OACH6H,UAAU,EACVG,KAAK,EACLR,QAASpG,GACTsG,OAAQ/M,EAAK8E,KAGjB5I,GACIU,KAAMiP,EACN1N,QAAS6B,IAGb5D,EAAME,SAASC,MAAMF,QACjBuK,GAAO0G,OAAQ,OAAQlI,MAAKA,IAC9BrI,KAAK,SAACI,GAkCJ,SAASoQ,IACLrR,GACIU,KAAMkP,EACN3N,QAAS6B,IAlCgB,iBAFjC5D,EAAQD,KAEEM,WAAWkB,QAMrB,SAAS6P,IACLpR,EAAME,SAASC,MAAMF,QACdwB,EAAOuG,QAAO,WAEbgB,OACIC,EAAG,OACHX,EAAG,OAAO1E,EAAK8E,GAAE,YAAY2B,EAAU,KAE3C6G,OAAQ,QAEdvQ,KAAK,SAAC0Q,GACAA,EAAc5N,KAAK2F,MAAQ,EAC3BkI,WAAW,WACPF,KACD,MAEHD,IACArR,EAAS/C,OAAAmT,EAAA,EAAAnT,MAEd,SAAC8D,GACAkO,QAAQC,MAAMnO,GACdsQ,MA1BJC,GAEAD,KAkCL,SAACtQ,GACAf,GACIU,KAAMmP,EACN5N,QAAS6B,sCC/LrB3H,EAAAU,EAAA0B,EAAA,sBAAAkT,IAAAtV,EAAAU,EAAA0B,EAAA,sBAAAmT,IAAA,IAAAC,EAAAxV,EAAA,IAAAyV,EAAAzV,EAAA,IAAA0V,EAAA1V,EAAA,IAAA2V,EAAA3V,EAAA,IAAA4V,EAAA5V,EAAA,IAAA6V,EAAA7V,EAAA,IAAA8V,EAAA9V,EAAA,IAeasV,EAAgB,SAAC9P,EAAc4B,EAAgBO,GAAe,OAAA7G,OAAA0U,EAAA,EAAA1U,CACvEA,OAAAgV,EAAA,EAAAhV,CAAmB0E,GACnB1E,OAAA+U,EAAA,EAAA/U,CAA4B0E,GAC5B1E,OAAA8U,EAAA,EAAA9U,CAAcsG,GACduO,EAAA,EACAD,EAAA,EALuE5U,CAMzE6G,IAMW4N,EAAgBzU,OAAA0U,EAAA,EAAA1U,CACzBA,OAAA2U,EAAA,EAAA3U,CAAoB,sBACpBA,OAAA2U,EAAA,EAAA3U,CAAoB,YACpBA,OAAA2U,EAAA,EAAA3U,CAAoB,WACpBA,OAAA2U,EAAA,EAAA3U,CAAoB,eACpBA,OAAA2U,EAAA,EAAA3U,CAAoB,4BChCxBX,EAAAD,QAAA6V,gCCCA/V,EAAAU,EAAA0B,EAAA,sBAAA4T,IAAA,IAAAC,EAAAjW,EAAA,IAAA6P,EAAA7P,EAAA,IAQO,SAASgW,EAAiBjS,GAC7B,IAAMmS,EAAkBpV,OAAAmV,EAAA,EAAAnV,CAAiBiD,EAAME,SAASiB,OAAOe,eAAgBlC,EAAMK,WAAWkB,SAChG,OAAM4Q,GAAqBA,EAAgB1Q,OAChC1E,OAAA+O,EAAA,EAAA/O,CAAgBoV,EAAgB1Q,QAEpCzB,EAAME,SAASC,MAAMsB,mHCRnB2Q,EAAgB,SAACC,GAC1B,OAAAA,EAAaC,OACN1J,SAASC,SAAQ,KAAKwJ,EAAaC,OAAM,IAAID,EAAaE,cAC1D3J,SAASC,SAAQ,KAAKwJ,EAAavJ,gBAMjC0J,EAAkB,SAACH,GAAuB,OAAC7O,EAAA,KACjD6O,GACHI,QAASL,EAAcC,sCCf3BpW,EAAAU,EAAA0B,EAAA,sBAAAqU,IAAAzW,EAAAU,EAAA0B,EAAA,sBAAAsU,IAAA1W,EAAAU,EAAA0B,EAAA,sBAAAuU,IAAA3W,EAAAU,EAAA0B,EAAA,sBAAAwU,IAAO,IAAMH,EAAoB,oBACpBC,EAAoB,oBAEpBC,EAAkB,SAACE,GAA8D,OAC1FtS,KAAMkS,EACN3Q,QAAS+Q,IAGAD,EAAkB,SAACE,GAA8D,OAC1FvS,KAAMmS,EACN5Q,QAASgR,kCCVb9W,EAAAU,EAAA0B,EAAA,sBAAA2U,IAAA/W,EAAAU,EAAA0B,EAAA,sBAAA4U,IAAAhX,EAAAU,EAAA0B,EAAA,sBAAA6U,IAAAjX,EAAAU,EAAA0B,EAAA,sBAAA8U,IAAAlX,EAAAU,EAAA0B,EAAA,sBAAA+U,IAAAnX,EAAAU,EAAA0B,EAAA,sBAAAgV,IAAApX,EAAAU,EAAA0B,EAAA,sBAAAiV,IAAO,IAAMN,EAAe,eACfC,EAAe,eACfC,EAA0B,0BAC1BC,EAA2B,2BAC3BC,EAAuB,uBAUvBC,EAAwB,WAAc,OAC/C7S,KAAM0S,IAGGI,EAAqB,WAAc,OAC5C9S,KAAM4S,6QCWH,SAASG,EAAgBC,EAAYnH,GACxC,OAAOoH,EAAsC,WAAY,QAASD,EAAMnH,GAQrE,SAASqH,EAAUF,EAAYG,GAClC,OAgHG,SAASC,EAAmCC,EAAoBC,EAAcN,EAASG,SAC1F,IAAMpW,EAAIiW,EACV,IAAMvG,EAAWuG,EAAKK,GACtB,IAAK5G,GAAgC,IAApBA,EAAS/N,OACtB,OAAOsE,EAAA,KACAjG,GAGX,OAAOiG,EAAA,KACAjG,GAACkD,OACHoT,GAAY5G,EAASnD,OAAO,SAACC,EAAaC,GAIvC,OAH6C,IAAzC2J,EAAQI,QAAQ/J,EAAQ8J,KACxB/J,EAAOiK,KAAKJ,EAAaC,EAAWC,EAAW9J,EAAS2J,IAErD5J,OACLtJ,IA/HHmT,CAA4B,WAAY,QAASJ,EAAMG,GAO3D,SAASM,EAAaT,GACzB,OAgIG,SAA4BK,EAAoBL,SAC7CjW,EAAIiW,EACJvG,EAAWuG,EAAKK,GACtB,IAAK5G,EACD,OAAOuG,EAEX,OAAOhQ,EAAA,KACAjG,IAACkD,MACHoT,GAGL,SAASK,EAAWC,GAChB,GAAkB,IAAdA,EAAGjV,OACH,SACG,GAAkB,IAAdiV,EAAGjV,SAAiBiV,EAAG,GAAGN,GACjC,OAAOM,EACJ,GAAIA,EAAGjV,OAAS,EACnB,OAAOiV,EAAGrK,OAAO,SAACC,EAAaC,SAC3B,IAAKA,EAAQ6J,GAET,OADA9J,EAAOiK,KAAKhK,GACLD,EAEX,IAAMqK,EAAOpK,EAKb,OAJAD,EAAOiK,KAAKxQ,EAAA,KACL4Q,IAAI3T,MACNoT,GAAYK,EAAWE,EAAKP,IAAWpT,KAErCsJ,OAGf,OAAOmK,EAAWC,EAAG,GAAGN,IAtBXK,CAAWjH,GAASxM,IAxI9B4T,CAAsB,WAAYb,GAQtC,SAASc,EAAWd,EAAYjM,GACnC,OAAOgN,EAAwB,WAAYf,EAAMjM,GAmB9C,SAASiN,EAAiCX,EAAoBC,EAAcN,EAASlW,GACxF,IAAM2P,EAAWuG,EAAKK,GACtB,OAAIL,EAAKM,KAAexW,EACbkW,EACCvG,EAGLA,EAASnD,OAAO,SAACC,EAAuBC,GAC3C,OAAMD,GAGCyK,EAAWX,EAAWC,EAAW9J,EAAS1M,SAClD8G,QARI,EAgDJ,SAASqP,EAA6CI,EAAoBC,EAAcN,EAASnH,GACpG,IAAMY,EAAWuG,EAAKK,GACtB,GAAK5G,EAGL,OAAOA,EAASnD,OAAO,SAACC,EAAuBC,GAC3C,OAAIA,EAAQ8J,KAAezH,EAAK,GACR,IAAhBA,EAAKnN,OACE8K,EAEJyJ,EAAuBI,EAAWC,EAAW9J,EAASqC,EAAKrI,MAAM,IAErE+F,QACR3F,GA6FA,SAASmQ,EACZV,EACAL,EACAjM,SAEMhK,EAAIiW,EACV,OAAOjM,EAAG/D,EAAA,KACHjG,IAACkD,MACHoT,GAAYtW,EAAEsW,GACXtW,EAAEsW,GAAWlQ,IAAI,SAACoI,GAAY,OAAAwI,EAAeV,EAAW9H,EAAMxE,UAC9DnD,EAAS3D,KAUd,SAASgU,EAAsCZ,EAAoBC,EAAcN,GACpF,OAAOe,EACHV,EACAL,EACA,SAACzH,GACG,IAAMxO,EAAIwO,EACJzO,EAAQyO,EAAK+H,GAEnB,UADO/H,EAAK+H,GACR/H,EAAK8H,GAAY,CACjB,IAAM5G,EAAWlB,EAAK8H,GAEtB,cADO9H,EAAK8H,GACLrQ,EAAA,KACAjG,GACHD,MAAKA,EACL2P,SAAQA,IAGhB,OAAOzJ,EAAA,KACAjG,GACHD,MAAKA,uFC1PRoX,EAAqB3X,OAAA2U,EAAA,EAAA3U,CAAM,SAAC0E,EAAcmC,GAAe,OAACJ,EAAA,KAChEI,GACH+Q,SAnB4B,SAAClT,EAAcmC,GAC3C,IAAI+Q,EAAclT,EAAOgR,QAAO,qDAQhC,OAPI7O,EAAKgR,YACLD,EAAclT,EAAOuG,QAAO,kBAAkBpE,EAAK8E,GAAE,SAAS9E,EAAKgR,WAC/DnT,EAAOoT,WACH,UAAUpT,EAAOoT,WAAWC,MAC5B,KAGLH,EAUGI,CAAiBtT,EAAQmC,uFCN1BoR,EAA8BjY,OAAA2U,EAAA,EAAA3U,CAAM,SAAC0E,EAAcmC,GAAe,OAACJ,EAAA,KACzEI,GACHqR,mBAfqC,SAACxT,EAAcmC,GACpD,OAAOA,EAAKoJ,YACRpJ,EAAKoJ,YAAYkI,QACb,8BACA,SAACC,GAAkB,cAAoB,MAAbA,EAAM,GAAa,IAAM,KAAM1T,EAAOgR,QAAO,8BACvErO,EAUYgR,CAA0B3T,EAAQmC,uFC8H7CyR,EAAgBtY,OAAA2U,EAAA,EAAA3U,CAAM,SAACsG,EAAgBO,GAAe,OAACJ,EAAA,KAC7DI,GACH0R,QA9IuB,SAACjS,EAAgB7C,EAAc+U,GACtD,IAOIC,EAPEhP,EAAWhG,GAAQA,EAAKqM,cAG1B4I,GAAe,EACfC,GAAgB,EAChBC,GAAmB,EACnBC,GAAU,EAGd,GAAIpP,EAASuN,QAAQ,WAAa,GAAkB,uBAAbvN,GAAkD,QAAbA,GAAmC,QAAbA,GAAmC,SAAbA,GAAoC,QAAbA,EAAoB,CACjK,IAAIqP,EAAWN,EAAaxB,QAAQ,mBAAqB,EACxC,oBAAbvN,GAA+C,uBAAbA,GAAkD,QAAbA,GAAmC,QAAbA,GAC/FoP,EAAUL,EAAaxB,QAAQ,UAAY,EAC3C0B,EAAeF,EAAaxB,QAAQ,gBAAkB,EACtD2B,EAAgBH,EAAaxB,QAAQ,WAAa,EAElDyB,GADAG,GAA+D,IAA5CJ,EAAaxB,QAAQ,oBAElB6B,EAChB,sBACAA,EACE,QACAH,EACE,aACAC,EACE,SACAC,EACE,iBACAE,EACE,iBACA,YAEhBL,EADsB,gBAAbhP,GAA2C,QAAbA,GAAmC,SAAbA,EAClDqP,GAAYN,EAAaxB,QAAQ,UAAY,GAAkB,SAAbvN,EAAuB,WAAa,YAC3E,kBAAbA,EACL+O,EAAaxB,QAAQ,SAAW,EACxB,oBACDwB,EAAaxB,QAAQ,aAAe,EACnC,0BACDwB,EAAaxB,QAAQ,UAAY,EAChC,qBACDwB,EAAaxB,QAAQ,mBAAqB,EACzC,oBACDwB,EAAaxB,QAAQ,eAAiB,EACrC,0BACDwB,EAAaxB,QAAQ,YAAc,EAClC,uBAEA,gBAEU,kBAAbvN,EACC+O,EAAaxB,QAAQ,uBAAyB,EAAI,iBAAmB,UACzD,mBAAbvN,EACC,cACY,wBAAbA,EACC,aACY,8BAAbA,EACC,sBACY,sBAAbA,EACC,iBACY,0BAAbA,GACE+O,EAAaxB,QAAQ,aAAe,EAAK,OAE1C,cAGZyB,EADsB,YAAbhP,GAAuC,yBAAbA,EACzB,OACY,cAAbA,EACC+O,EAAaxB,QAAQ,sBAAwB,EAAI,gBAAiB,iBACtD,4BAAbvN,GAAuD,uBAAbA,GAAkD,gBAAbA,GAC3E,mBAAbA,GAA8C,wBAAbA,EACvB,OACY,iBAAbA,GAA4C,gBAAbA,GAA2C,kBAAbA,GAA6C,mBAAbA,GACzF,mBAAbA,GAA8C,oBAAbA,GAA+C,2BAAbA,GAAsD,uBAAbA,GAC/F,oBAAbA,GAA+C,qBAAbA,GAAgD,YAAbA,GAAuC,WAAbA,GACjF,UAAbA,GAAwB+O,EAAaxB,QAAQ,eAAiB,GAAoB,iBAAbvN,GAA+B+O,EAAaxB,QAAQ,sBAAwB,EACxI,WACY,uBAAbvN,GAAkD,QAAbA,GAAmC,cAAbA,GAAyC,gBAAbA,GAA2C,YAAbA,GAAuC,sBAAbA,GAAiD,WAAbA,EAClL,YACY,oBAAbA,GAA+C,mBAAbA,GAA8C,0BAAbA,GAAqD,iCAAbA,EAC1G,WACY,sBAAbA,GAAiD,6BAAbA,EACnC,eACY,iBAAbA,GAA4C,qBAAbA,GAAgD,mBAAbA,GAA8C,mBAAbA,GAC/F,2BAAbA,GAAsD,iBAAbA,GAA4C,iCAAbA,GAC3D,mBAAbA,GAA8C,gBAAbA,GAA2C,SAAbA,GAAoC,kBAAbA,GAA6C,wBAAbA,GACzG,gCAAbA,GAA2D,kBAAbA,GAA6C,UAAbA,GAAqC,6BAAbA,GACxF,iBAAbA,GAA+B+O,EAAaxB,QAAQ,iCAAmC,GAAKwB,EAAaxB,QAAQ,aAAe,EACvH,gBACY,6BAAbvN,GAAwD,0BAAbA,GACvC,oBAAbA,GAA+C,qBAAbA,GAAgD,0BAAbA,GACxD,oBAAbA,GAA+C,yBAAbA,GAAoD,6BAAbA,GAAwD,6BAAbA,EAC1G,YACY,UAAbA,GAAqC,kBAAbA,GAA6C,mBAAbA,EACvD,aACY,kBAAbA,EACC,eACY,iBAAbA,EACC,cACY,cAAbA,EACC,WACY,oBAAbA,EACC,kBACY,gCAAbA,EACC,4BACY,sBAAbA,EACC,WACY,mBAAbA,EACC,gBACY,kBAAbA,EACC,eACY,mBAAbA,EACC,gBACY,aAAbA,EACC,UACY,yBAAbA,EACC,UACY,mCAAbA,EACC,+BACY,wBAAbA,EACC,sBACY,qBAAbA,EACC,kBACY,kBAAbA,EACC,eACY,UAAbA,EACC,QACY,cAAbA,EACC,YAEA,OAGZ,OAAUnD,EAAM,IAAImS,EAlIP,SA4IJM,CAAYzS,EAAQO,EAAKpD,KAAMoD,EAAK2R,aAAe3R,EAAK2R,8FC/FxDQ,EAAuB,SAACnS,GAAe,OAACJ,EAAA,KAAKI,GAAMkJ,YAlD9B,SAAClJ,GAC/B,IAAM4C,EAAW5C,EAAKpD,KAChB+U,EAAe3R,EAAK2R,iBACtBzI,EAActG,EAwClB,MAtCiB,oBAAbA,GAA+C,uBAAbA,EAClCsG,EAAcyI,EAAaxB,QAAQ,UAAY,EAAI,QAAWwB,EAAaxB,QAAQ,gBAAkB,EAAI,cAAiBwB,EAAaxB,QAAQ,WAAa,EAAI,SAAW,gBACvJ,kBAAbvN,EACPsG,EAAcyI,EAAaxB,QAAQ,uBAAyB,EAAI,kBAAoB,gBAChE,kBAAbvN,EACPsG,EAAc,cACM,kBAAbtG,EACPsG,EAAc,sBACM,mBAAbtG,EACPsG,EAAc,gBACM,sBAAbtG,EACPsG,EAAc,UACM,yBAAbtG,EAGPsG,EAAc,uBACM,YAAbtG,EAGPsG,EAAc,UACM,kBAAbtG,EACPsG,EAAc,cACM,wBAAbtG,EACPsG,EAAc,aACM,WAAbtG,EACPsG,EAAc,SACM,gBAAbtG,EAEHsG,GAD4C,IAA5CyI,EAAaxB,QAAQ,oBAA6BwB,EAAaxB,QAAQ,mBAAqB,GAAKwB,EAAaxB,QAAQ,UAAY,GACpH,aAEA,kBAEXvN,GAAYA,EAASqG,cAAckH,QAAQ,WAAa,EAC/DjH,EAActG,EAAS0O,QAAQ,aAAc,UACzB,8BAAb1O,IACPsG,EAAc,uBAGXA,EAOkEkJ,CAAmBpS,+ECXnFqS,EAAkB,SAACrS,GAAe,OAACJ,EAAA,KAAKI,GAAMsS,OA7B9B,SAACtS,GAC1B,IAAIsS,KACAX,EAAe3R,EAAK2R,aAAe3R,EAAK2R,gBAoB5C,OAlBI3R,EAAKuS,gBACsB,sBAAvBvS,EAAKuS,eAAgE,yBAAvBvS,EAAKuS,cACnDD,EAAOlC,KAAK,iBACkB,eAAvBpQ,EAAKuS,eACZD,EAAOlC,KAAK,eAIhBpQ,EAAKwS,mBAAqBxS,EAAKwS,kBAAkBrC,QAAQ,gBAAkB,GAC3EmC,EAAOlC,KAAK,eAGZuB,EAAaxB,QAAQ,qBAAuB,EAC5CmC,EAAOlC,KAAK,WACLuB,EAAaxB,QAAQ,0BAA4B,GACxDmC,EAAOlC,KAAK,cAGTkC,EAOwDG,CAAczS,oCCZjF3H,EAAAU,EAAA0B,EAAA,sBAAAiY,IAAAra,EAAAU,EAAA0B,EAAA,sBAAAkY,IAGO,IAAMD,GACTE,KAAM,sZACNC,QAAS,iFACTC,SAAU,qSACVC,OAAQ,ykBACRC,cAAe,wGACfC,WAAY,+FACZC,eAAgB,wHAChBC,cAAe,yBACfC,YAAa,yBACbC,OAAQ,uBACRC,WAAY,4RACZC,OAAQ,kDACRC,KAAM,kXACNC,QAAS,oDACTC,WAAY,8BACZC,YAAa,oEACbC,MAAO,yQACPC,SAAU,oDACVC,kBAAmB,2BACnBC,oBAAqB,4BACrBC,mBAAoB,wFACpBC,gBAAiB,oCACjBC,MAAO,+WACPC,UAAW,wCACXC,OAAQ,gEACRC,KAAM,eACNC,SAAU,8DACVC,UAAW,wEA+BF5B,GACT,UACA,uBACA,YACA,oBACA,UACA,kBACA,cACA,gBACA,MACA,iBACA,MACA,OACA,qBACA,8BACA,sBACA,gBACA,iCACA,0BACA,qBACA,kBACA,8BACA,qBACA,8BACA,+BACA,oBACA,OACA,oBACA,iBACA,gBACA,YACA,iBACA,uBACA,WACA,4BACA,aACA,YACA,YACA,mBACA,MACA,cACA,qBACA,iBACA,uBACA,kBACA,MACA,QACA,iBACA,gBACA,cACA,gBACA,kBACA,8BACA,eACA,cACA,yBACA,qBACA,eACA,sBACA,kBACA,YACA,iBACA,eACA,iBACA,iBACA,gBACA,eACA,yBACA,UACA,SACA,mBACA,QACA,gBACA,iBACA,gBACA,mBACA,gBACA,wBACA,sCACA,uBACA,kBACA,eACA,2BACA,2BACA,2BACA,sBACA,+BACA,cACA,iBACA,kBACA,oBACA,mBACA,oBACA,2BACA,wBACA,0DC9LJta,EAAAU,EAAA0B,EAAA,sBAAA+Z,IAAAnc,EAAAU,EAAA0B,EAAA,sBAAAga,IAAApc,EAAAU,EAAA0B,EAAA,sBAAAia,IAAArc,EAAAU,EAAA0B,EAAA,sBAAAka,IAAA,IAAAC,EAAAvc,EAAA,IAAAwc,EAAAxc,EAAA,IAAAyc,EAAAzc,EAAA,IAMamc,EAAsB,sBACtBC,EAAmB,mBACnBC,EAAgB,gBAEhBC,EAAa,SAACI,GAAiB,gBAAC7Y,EAAeC,GACxD,IAAMC,EAAQD,IAEdD,GACIU,KAAM8X,EACNvW,QAAS4W,IAEP,IAAAlY,EAAAT,EAAAE,SAAAC,MAAEsB,EAAAhB,EAAAgB,OAAQ6B,EAAA7C,EAAA6C,QACVrD,EAAUD,EAAME,SAASC,MAAMF,QAC/B2Y,EAAU5Y,EAAME,SAASiB,OAAO0X,gBAChCC,EAAcF,EAAUD,EAAOC,EAC/BjW,EAAA5F,OAAAyb,EAAA,EAAAzb,EAAA8C,IAAA+Y,EAAAxY,MAAA0Y,GAAA9Y,GACNC,EADQ0C,EAAA,GAAKA,EAAA,IACYhC,KACrB5D,OAAA2b,EAAA,EAAA3b,CAAsBiD,GACtB,SAACa,GAAa,OAAAf,GAAWU,KAAM6X,EAAkBtW,SAAWlB,IAAGA,OACjEF,KACE,SAACI,GACGjB,GACIU,KAAM4X,EACNrW,SACIgX,cAAehY,EAAS0C,KAAKsV,cAC7BC,aAAcjY,EAAS0C,KAAKC,QACvBC,IAAI,SAACC,GAAe,OAAA7G,OAAA0b,EAAA,EAAA1b,CAAc0E,EAAQ6B,EAASM,KACxD+U,KAAIA,MAIhB,SAAC9X,GAAa,OAAAf,GAAWU,KAAM6X,EAAkBtW,SAAWlB,IAAGA,yLCPhE,SAASoY,EAAiBC,EAA2ClZ,GACxE,IAAMmZ,GACF,IAEIjI,OAAQ,MACRlI,MAAOhJ,EAAME,SAASiB,OAAOiY,qBAAuB5V,EAAA,GAChDyF,EAAG,OACHX,EAAGvL,OAAAsc,EAAA,EAAAtc,CAAKiD,GACRH,IAAKqZ,EAAQrZ,IAAMqZ,EAAQrZ,IAAMG,EAAME,SAASiB,OAAO0X,gBACvD1P,UAAWnJ,EAAMK,WAAWiZ,KAAKC,MACjCnZ,MAAO8Y,EAAQ9Y,MAAQ8Y,EAAQ9Y,MAAQ,GACpCJ,EAAME,SAASiB,OAAOiY,yBAEzBnQ,EAAG,OACHX,EAAGvL,OAAAsc,EAAA,EAAAtc,CAAKiD,GACRH,IAAKqZ,EAAQrZ,IAAMqZ,EAAQrZ,IAAMG,EAAME,SAASiB,OAAO0X,gBACvD1P,UAAWnJ,EAAMK,WAAWiZ,KAAKC,MACjCnZ,MAAO8Y,EAAQ9Y,MAAQ8Y,EAAQ9Y,MAAQ,KAKnD,OAAOoZ,EAAkBxZ,EAAlBwZ,CAAyBL,GAO7B,SAASM,EAAiBzZ,EAAyB0Z,GACtD,IAAMP,GACF,IAEIjI,OAAQ,MACRlI,OACIC,EAAG,OACHX,EAAGvL,OAAAsc,EAAA,EAAAtc,CAAWiD,GACdH,IAAK,EACL6Z,YAAaA,EAAYC,KAAK,MAC9BC,UAAW,OAKvB,OAAOC,EAAiB7Z,EAAjB6Z,CAAwBV,GAQ5B,SAASW,EAAe9Z,EAAyB+Z,GACpD,IAAMZ,GACF,IAEIjI,OAAQ,MACRlI,OACIC,EAAG,OACHX,EAAGvL,OAAAsc,EAAA,EAAAtc,CAASiD,EAAO+Z,GACnBla,IAAK,EACL6Z,YAAa,OACbE,UAAW,OAKvB,OAAOC,EAAiB7Z,EAAjB6Z,CAAwBV,GAQnC,IAAMK,EAAoB,SAACxZ,GAA4B,OAAAjD,OAAA+O,EAAA,EAAA/O,CACnDid,EAAiBha,GACjBia,EAAiBja,GACjBka,EAAgBla,KASd6Z,EAAmB,SAAC7Z,GAA4B,OAAAjD,OAAA+O,EAAA,EAAA/O,CAClDmd,EAAgBla,GAChBma,EAAwBna,KAQtBga,EAAmBjd,OAAAkT,EAAA,EAAAlT,CAAM,SAACiD,EAAyBS,OAAE+J,EAAA/J,EAAA,GAAKJ,EAAAI,EAAA,GACtDyI,EAAYlJ,EAAMK,WAAWiZ,KAAKc,MACxC,MAAkB,cAAdlR,GAEIsB,SAEOnK,GACH2I,MAAOxF,EAAA,KACAnD,EAAW2I,OACdE,UAASA,QAKjBsB,EAAKnK,KAQX4Z,EAAmBld,OAAAkT,EAAA,EAAAlT,CAAM,SAACiD,EAAyBS,OAAE+J,EAAA/J,EAAA,GAAKJ,EAAAI,EAAA,GAC5D,GAAIT,EAAMK,WAAW6C,OAAO6D,cAAe,CACvC,IAAMsT,EAAUra,EAAMK,WAAWia,OAAOC,KAClCC,EAAUH,EAAQI,KAAI,IAAIJ,EAAQK,KAAI,IAAIL,EAAQM,KAAI,IAAIN,EAAQO,KACxE,OACIpQ,SAEOnK,GACH2I,MAAOxF,EAAA,KACAnD,EAAW2I,OACdwR,KAAIA,OAKpB,OAAShQ,EAAKnK,KAQZ6Z,EAAkBnd,OAAAkT,EAAA,EAAAlT,CAAM,SAACiD,EAAyBS,GAAEA,EAAA,OAAKJ,EAAAI,EAAA,GACrDkC,EAAA3C,EAAAK,WAAEkB,EAAAoB,EAAApB,QAAS2B,EAAAP,EAAAO,OACXzB,EAAS1E,OAAA8d,EAAA,EAAA9d,CAAiBiD,GAE5BwK,EAAS/I,EAAOuG,QAAO,UAC3B,GAAgB,aAAZzG,GAA4B2B,EAAOgB,MACnCsG,EAAS/I,EAAOuG,QAAO,mBAAmB9E,EAAOgB,MAAMwE,GAAE,UAEnDxF,EAAOmN,kBACT7F,EAAMA,EAAM,eAAesQ,mBAAmBC,KAAKC,WAAW9X,EAAOmN,gBAAgB/S,eAEtF,GAAgB,gBAAZiE,GAA+BvB,EAAM0D,QAAQuX,YAAYzS,QAChEgC,EAAS/I,EAAOuG,QAAO,mBAAmBhI,EAAM0D,QAAQuX,YAAYzS,QAAO,UAErEtF,EAAOgY,uBACT1Q,EAAMA,EACF,eAAesQ,mBAAmBC,KAAKC,WAAW9X,EAAOgY,sBAAsB5d,SAC7E4F,EAAOiY,oBACT3Q,EAAMA,EAAM,eAAesQ,mBAAmBC,KAAKC,WAAW9X,EAAOiY,kBAAkB7d,WAElF4F,EAAOiY,oBAChB3Q,EAAMA,EAAM,eAAesQ,mBAAmBC,KAAKC,WAAW9X,EAAOiY,kBAAkB7d,eAExF,IAAI4F,EAAOkY,eAA8B,mBAAZ7Z,GAA4C,cAAZA,EAE7D,CACH,IAAM8Z,EAAgBte,OAAA8G,EAAA,EAAA9G,CAAiBiD,EAAME,SAASiB,OAAOe,eAAgBX,GAC7E,GAAI8Z,EAAe,CACXte,OAAA8G,EAAA,EAAA9G,CAA4Bse,IAAkBnY,EAAOkY,gBACrD5Q,EAAMA,EAAM,eAAesQ,mBAAmBC,KAAKC,WAAW9X,EAAOkY,cAAc9d,UAGvF,IAAMge,EAAsBve,OAAA8G,EAAA,EAAA9G,CAA8Bse,GACtDC,IACA9Q,EAAS/I,EAAOuG,QAAO,mBAAmBsT,EAAoB5S,GAAE,UAC1DxF,EAAOmN,kBACT7F,EAAMA,EAAM,eAAesQ,mBAAmBC,KAAKC,WAAW9X,EAAOmN,gBAAgB/S,iBAZjGkN,EAAMA,EAAM,eAAesQ,mBAAmBC,KAAKC,WAAW9X,EAAOkY,cAAc9d,SAkBvF,OAASkN,EAAKnK,KAQZ8Z,EAA0Bpd,OAAAkT,EAAA,EAAAlT,CAAM,SAACiD,EAAyBS,OAAE+J,EAAA/J,EAAA,GAAKJ,EAAAI,EAAA,GAC7Dc,EAAUvB,EAAMK,WAAWkB,QAC3B8Z,EAAgBte,OAAA8G,EAAA,EAAA9G,CAAiBiD,EAAME,SAASiB,OAAOe,eAAgBX,GAC7E,MACiB,aAAZA,GAA4BvB,EAAMK,WAAW6C,OAAOgB,OACxC,gBAAZ3C,GAA+BvB,EAAM0D,QAAQuX,YAAYzS,SACzD6S,GAAiBte,OAAA8G,EAAA,EAAA9G,CAA8Bse,IAG5C7Q,SAEOnK,GACH2I,MAAOxF,EAAA,KACAnD,EAAW2I,OACd0Q,YAAarZ,EAAW2I,MAAM0Q,YAC1BrZ,EAAW2I,MAAM0Q,YAAYxE,QAAQ,aAAc,wBACnD9Q,QAKXoG,EAAKnK,+LC5OLkb,EAA2B,2BAE3BC,EAAiC,iCAejCC,EAAuB,SAAC7X,GAAe,gBAAC9D,EAAeC,GAChE,IAAMC,EAAQD,IACR0B,EAAS1E,OAAA2e,EAAA,EAAA3e,CAAiBiD,GACxBC,EAAAD,EAAAE,SAAAC,MAAAF,QAEFgD,KAENA,EAAS+Q,KACLjX,OAAA4e,EAAA,EAAA5e,CAAUkD,EAASwB,EAAQmC,EAAKgY,OAC3Bjb,KACG,SAACa,GAAe,OAAAzE,OAAA8d,EAAA,EAAA9d,CAAc0E,EAAQD,IACtC,SAACX,GAAe,MAAM,KAIlC,IAAI2J,EAAS/I,EAAOuG,QAAO,kBAAkBpE,EAAK8E,GAClD,GAAIjH,EAAOD,MAAQoC,EAAKgY,QAAUna,EAAOD,KAAK+H,SAAU,CACpD,IAAMA,EAAW9H,EAAOD,KAAK+H,SAC7BiB,EAAS/I,EAAOuG,QAAO,kBAAkBuB,EAAQ,UAAU3F,EAAK8E,GAGpEzF,EAAS+Q,KACLjX,OAAA4e,EAAA,EAAA5e,CAAYkD,EAASuK,GAChB7J,KACG,SAACI,GACG,GAAMA,EAAS6C,MAAU7C,EAASiQ,QAAS,CACvC,IAAM6K,EAAM,IAAIC,EAiBhB,OAhBA/e,OAAA4e,EAAA,EAAA5e,CACIkD,EACGwB,EAAOuG,QAAO,qBAEbM,EAAG,OAAOvH,EAASiQ,QAAQP,OAAO9M,IAAI,SAACO,GAAkB,UAAIA,EAAK,MAAKyV,KAAK,UAElFhZ,KACE,SAAC0I,GACG,OAAOwS,EAAItL,QAAQ/M,EAAA,KACZzG,OAAA8G,EAAA,EAAA9G,CAAc0E,EAAQzB,EAAME,SAASC,MAAMmD,QAASvC,EAAS6C,OAChEoN,QAASjQ,EAASiQ,QAClB+K,eAAgB1S,EAAU3F,YAGlC,SAAC7C,GAAa,OAAAgb,EAAIrL,OAAO3P,KAEtBgb,EAEP,OAAO9e,OAAA8G,EAAA,EAAA9G,CAAc0E,EAAQzB,EAAME,SAASC,MAAMmD,QAASvC,IAGnE,SAACF,GACG,MAAM+C,EAAK8E,MAK3BkB,EAAI3G,GACCtC,KACG,SAAC+C,GAAc5D,EArEU,SAAC8D,EAAYgY,GAAgB,OAC9Dpb,KAAM+a,EACNxZ,SACI6B,KAAIA,EACJgY,MAAKA,IAiEuBI,CAAsBtY,EAAQ,GAAIA,EAAQ,MAClE,SAACgF,GAAS5I,GAAWU,KAAMgb,EAAgCzZ,QAAS2G,uCCjFhFzM,EAAAU,EAAA0B,EAAA,sBAAA4d,IAAAhgB,EAAAU,EAAA0B,EAAA,sBAAA6d,IAAAjgB,EAAAU,EAAA0B,EAAA,sBAAA8d,IAAAlgB,EAAAU,EAAA0B,EAAA,sBAAA+d,IAAAngB,EAAAU,EAAA0B,EAAA,sBAAAge,IAAA,IAAAtM,EAAA9T,EAAA,IAAA+T,EAAA/T,EAAA,IAAAgU,EAAAhU,EAAA,IAAA0f,EAAA1f,EAAA,IAAA4e,EAAA5e,EAAA,GAAA4H,EAAA5H,EAAA,IAQaggB,EAA8B,8BAC9BC,EAA6B,gCAC7BC,EAAoC,oCACpCC,EAA+B,+BAE/BC,EAAyB,WAAM,gBAACvc,EAAeC,GACxD,IAAIC,EAAQD,IAEZ,GAA4C,WAAxCC,EAAM0D,QAAQxB,eAAe4E,OAC7B,OAAO,IAAKkJ,GAAUO,UACnB,GAA4C,WAAxCvQ,EAAM0D,QAAQxB,eAAe4E,OACpC,OAAO,IAAKkJ,GAAUQ,SAG1B1Q,GAAWU,KAAMyb,IAEjB,IAAMK,EAAkBvf,OAAAkT,EAAA,EAAAlT,CACpB,KACAiD,EAAME,SAASiB,OAAOe,eACjBgB,OAAOW,EAAA,GACPF,IAAIE,EAAA,GACJiG,OAAO,SAACC,EAA0BC,GAA8B,OAAKD,EAAMzH,OAAK0H,SAezF,OAbuBuS,EAAyBzc,EAAUC,EAAUuc,GAAiB3b,KACjF,WAEI,OADAX,EAAQD,IACDgQ,EACHuM,EACK3Y,IAAI,SAACT,GACF,OAAAsZ,EAAcxc,EAAOkD,GAAQvC,KAAK,SAACI,GAAa,OAAG2H,GAAIxF,EAAOwF,GAAIlI,KAAM0C,EAAO1C,KAAMO,SAAQA,SAI7G0b,GAGkB9b,KAClB,SAACyC,GAAc,OAAAtD,GACXU,KAAM0b,EACNna,QAASqB,KAEbqZ,GAGJ,SAASA,EAA6B5b,GAClCkO,QAAQC,MAAMnO,GACdf,GAAWU,KAAM2b,OAInBI,EAA2B,SAACzc,EAAeC,EAAkCuc,GAC/E,IAAMtc,EAAQD,IACR2c,EAAM,IAAI1M,EAChB,GAAIsM,EAAgBpd,OAAS,EAAG,CACtB,IAAAuB,EAAAT,EAAAE,SAAAC,MAAEwc,EAAAlc,EAAAR,QAAS2c,EAAAnc,EAAAgB,OACXob,EAAeP,EAChBpZ,OAAO,SAAC+F,GAAsB,MAAW,UAAXA,EAAEzI,OAChCmD,IAAI,SAAClD,OAAEiI,EAAAjI,EAAAiI,GAAIoU,EAAArc,EAAAqc,oBACR,OAAO/f,OAAA4e,EAAA,EAAA5e,CACH4f,EACAC,EACAE,GAA4C,MAAMpU,GACpD/H,KAAK,SAACI,GAAkB,OAAAA,EAAS2C,QAAQ,OAEnDqM,EAAI8M,GAAclc,KAAK,SAAC8P,GACpB,IAAMsM,EAAWhd,IACjBD,GACIU,KAAM4b,EACNra,SACIib,eAAgBD,EAAS1c,WAAWkB,QACpCW,eAAgB6a,EAAS7c,SAASiB,OAAOe,eACzCuO,OAAMA,KAGdiM,EAAInM,iBAGRmM,EAAInM,UAER,OAAOmM,GAGLF,EAAgBzf,OAAA8d,EAAA,EAAA9d,CAAM,SAACiD,EAAyBkD,GAC5C,IAAAzC,EAAAT,EAAAE,SAAAC,MAAEF,EAAAQ,EAAAR,QAASwB,EAAAhB,EAAAgB,OACjB,GAAIyB,EAAO+Z,aAAc,CACrB,IAAMP,EAAM,IAAI1M,EAEhB,OADA0M,EAAInM,SAAU7D,eAAgBxJ,EAAO+Z,eAC9BP,EAAI/b,KAAK,SAAAI,GAAY,OAAAA,IAEhC,MAAoB,UAAhBmC,EAAO1C,KACAzD,OAAA4e,EAAA,EAAA5e,CAAyBkD,EAASwB,EAAQyB,EAAOwF,IAErD3L,OAAA4e,EAAA,EAAA5e,CAAuBkD,EAASwB,EAAQyB,EAAOwF,oCClG1DzM,EAAAU,EAAA0B,EAAA,sBAAA6e,IAAAjhB,EAAAU,EAAA0B,EAAA,sBAAA8e,IAAO,IAAMD,EAAwB,wBAExBC,EAAsB,SAACC,GAChC,gBAACtd,EAAeC,GACZ,IAAMC,EAAQD,IACdD,GACIU,KAAM0c,EACNnb,SACIqb,WAAUA,EACVlb,eAAgBlC,EAAME,SAASiB,OAAOe,eACtCmb,uBAAwBrd,EAAM0D,QAAQxB,eAAeob,+CCZrErhB,EAAAU,EAAA0B,EAAA,sBAAAkf,IAAAthB,EAAAU,EAAA0B,EAAA,sBAAAmf,IAAAvhB,EAAAU,EAAA0B,EAAA,sBAAAof,IAAO,IAAMF,EAAuB,uBACvBC,EAAqB,qBAErBC,EAAmB,WAAM,OAAGjd,KAAM+c,kCCH/CthB,EAAAU,EAAA0B,EAAA,sBAAAqf,IAAAzhB,EAAAU,EAAA0B,EAAA,sBAAAsf,IAAA1hB,EAAAU,EAAA0B,EAAA,sBAAAuf,IAAA,IAAAC,EAAA5hB,EAAA,GAQayhB,EAAa,SAACI,EAASvX,EAAewX,GAAe,OAAAA,EAAIhK,QAAQ+J,KAAQvX,GAOzEoX,EAAkB5gB,OAAA8gB,EAAA,EAAA9gB,CAAM,SAACa,EAAauP,GAC/C,IAAI6Q,KACJ,OAAO7Q,EAAMjK,OAAO,SAAC4a,GACjB,OAAKE,EAAKF,EAAGlgB,MACTogB,EAAKF,EAAGlgB,KAAQ,GACT,OAUZ,SAASggB,EAAmBzQ,GAC/B,OAAOA,EAAMjK,OAAO,SAACU,GAAiB,OAAAA,EAAK1E,OAAS,oCC/BxDjD,EAAAU,EAAA0B,EAAA,sBAAA4f,IAAAhiB,EAAAU,EAAA0B,EAAA,sBAAA6f,IAAAjiB,EAAAU,EAAA0B,EAAA,sBAAA8f,IAAAliB,EAAAU,EAAA0B,EAAA,sBAAAsK,IAAA,IAAAoH,EAAA9T,EAAA,IAAA+T,EAAA/T,EAAA,IAAAgU,EAAAhU,EAAA,IAKagiB,EAAmB,mBACnBC,EAAkB,kBAClBC,EAAyB,yBAEzBxV,EAAe,WAAM,gBAAC7I,EAAeC,GAC9C,IAAMC,EAAQD,IAEd,GAA0C,WAAtCC,EAAM0D,QAAQ2O,aAAavL,OAC3B,OAAO,IAAKkJ,GAAUO,UACnB,GAA0C,WAAtCvQ,EAAM0D,QAAQ2O,aAAavL,OAClC,OAAO,IAAKkJ,GAAUQ,SAG1B1Q,GAAWU,KAAMyd,IAEX,IAAAxd,EAAAT,EAAAE,SAAAC,MAAEF,EAAAQ,EAAAR,QAASwB,EAAAhB,EAAAgB,OAEjB,OAAOsO,GACHhT,OAAAkT,EAAA,EAAAlT,CAAuBkD,EAASwB,GAAQd,KAAK,SAACI,GAAkB,OAAAA,EAAS2L,iBACzE3P,OAAAkT,EAAA,EAAAlT,CAAkBkD,EAASwB,GAAQd,KAAK,SAACI,GAAkB,OAAAA,EAAS0C,KAAKC,YAC1E/C,KACC,SAACyC,GACGtD,GACIU,KAAM0d,EACNnc,SACI8J,OAAQzI,EAAU,GAClBqN,OAAQrN,EAAU,OAOlC,SAA4BvC,GACxBkO,QAAQC,MAAMnO,GACdf,GAAWU,KAAM2d,sCCxCzBliB,EAAAU,EAAA0B,EAAA,sBAAA+f,IAAAniB,EAAAU,EAAA0B,EAAA,sBAAAggB,IAAApiB,EAAAU,EAAA0B,EAAA,sBAAAigB,IAAAriB,EAAAU,EAAA0B,EAAA,sBAAAkgB,IAAAtiB,EAAAU,EAAA0B,EAAA,sBAAAmgB,IAAA,IAAAC,EAAAxiB,EAAA,KAAAyiB,EAAAziB,EAAA,IAGamiB,EAAe,eACfC,EAAuB,uBACvBC,EAAsB,sBACtBC,EAA4B,4BAE5BC,EAAyB,SAACzE,GAAoB,gBAACja,EAAeC,GACvED,GACIU,KAAM+d,EACNxc,QAASgY,IAGTA,EAAQ7a,OAAS,GACjByf,EAAS7e,EAAUC,IAAYga,KAI1B4E,EAAWF,EAAS,SAAC3e,EAAeE,EAAyB+Z,GACtEja,GAAWU,KAAM4d,IAEjB,IAAMne,EAAUD,EAAME,SAASC,MAAMF,QAC/BQ,EAAA1D,OAAA2hB,EAAA,EAAA3hB,CAAAiD,EAAA+Z,GAEN9Z,EAFQQ,EAAA,GAASA,EAAA,IAGZE,KACG,SAACI,GAAoBjB,GAAWU,KAAM6d,EAAsBtc,QAAShB,EAAS0C,QAC9E,SAAC5C,GAAa,OAAAf,GAAWU,KAAM8d,EAAqBvc,QAASlB,OAEtE,oBC9BHzE,EAAAD,QAAAyiB,kBCAAxiB,EAAAD,QAAA0iB,4RCyDAC,EAAA,SAAAC,GACI,SAAAD,EAAYE,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAKwX,yBAA2BxX,EAAKwX,yBAAyBphB,KAAK4J,GACnEA,EAAKyX,oBAAsBzX,EAAKyX,oBAAoBrhB,KAAK4J,GACzDA,EAAK0X,sBAAwB1X,EAAK0X,sBAAsBthB,KAAK4J,GAC7DA,EAAK2X,0BAA4B3X,EAAK2X,0BAA0BvhB,KAAK4J,GACrEA,EAAK4X,2BAA6B5X,EAAK4X,2BAA2BxhB,KAAK4J,GACvEA,EAAK6X,2BAA6B7X,EAAK6X,2BAA2BzhB,KAAK4J,GACvEA,EAAK8X,yBAA2B9X,EAAK8X,yBAAyB1hB,KAAK4J,GACnEA,EAAK+X,yBAA2B/X,EAAK+X,yBAAyB3hB,KAAK4J,GACnEA,EAAKgY,yBAA2BhY,EAAKgY,yBAAyB5hB,KAAK4J,GACnEA,EAAKiY,wBAA0BjY,EAAKiY,wBAAwB7hB,KAAK4J,GACjEA,EAAKkY,2BAA6BlY,EAAKkY,2BAA2B9hB,KAAK4J,GACvEA,EAAKmY,uBAAyBnY,EAAKmY,uBAAuB/hB,KAAK4J,GAC/DA,EAAKoY,wBAA0BpY,EAAKoY,wBAAwBhiB,KAAK4J,GACjEA,EAAKqY,yBAA2BrY,EAAKqY,yBAAyBjiB,KAAK4J,GACnEA,EAAKsY,0BAA4BtY,EAAKsY,0BAA0BliB,KAAK4J,GACrEA,EAAKuY,2BAA6BvY,EAAKuY,2BAA2BniB,KAAK4J,GACvEA,EAAKwY,uBAAyBxY,EAAKwY,uBAAuBpiB,KAAK4J,GAC/DA,EAAKyY,wBAA0BzY,EAAKyY,wBAAwBriB,KAAK4J,GACjEA,EAAK0Y,qBAAuB1Y,EAAK0Y,qBAAqBtiB,KAAK4J,GAC3DA,EAAK2Y,oBAAsB3Y,EAAK2Y,oBAAoBviB,KAAK4J,GACzDA,EAAK4Y,6BAA+B5Y,EAAK4Y,6BAA6BxiB,KAAK4J,KAoanF,OA5bgCjE,EAAA,EAAAsb,EAAAC,GA2BrBD,EAAA7gB,UAAAqiB,OAAP,SAAcC,GAAd,IAAA9Y,EAAA3I,KACUqC,EAASrC,KAAKkgB,MAAMwB,UAAUtgB,SAASiB,OACvCsf,EAAe3hB,KAAKkgB,MAAMwB,UAAUngB,WAAW6C,OAC/C1B,EAAO1C,KAAKkgB,MAAMwB,UAAUtgB,SAASC,MAAMsB,OAAOD,KAElDkf,EAAmB3jB,OAAA4jB,EAAA,EAAA5jB,CAAW+B,KAAKkgB,MAAMwB,WAEzCI,EAAgBzf,EAAO0f,oBAErBN,EAACO,EAAAC,GACGnjB,IAAI,kBACJshB,oBAAqBpgB,KAAKogB,oBAC1BnY,cAAejI,KAAKkgB,MAAMwB,UAAUngB,WAAW6C,OAAO6D,cACtDia,KAAMC,EAAA,WAAgB5G,UAE1B,KAEF6G,EAAiBR,EAAiB/c,IAAI,SAACT,EAAgBqD,GACzD,OAAQrD,GACJ,IAAK,QACD,OACIqd,EAACY,EAAAJ,GACGnjB,IAAI,eACJwjB,cAAe3Z,EAAKiY,wBACpB2B,gBAAiB5Z,EAAKuX,MAAMwB,UAAU9c,QAAQlC,KAAKiP,OACnDN,YAAa1I,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAOgB,QAGhE,IAAK,SACD,IAAMwM,EAAUjJ,EAAKuX,MAAMwB,UAAU9c,QAAQlC,KAAKkP,QAC5C4Q,GACF1U,MAAOnF,EAAKuX,MAAMwB,UAAUtgB,SAASC,MAAMsB,OAAOD,KAAK+H,SACvDb,GAAI,QAER,OACI6X,EAACgB,EAAAR,GACGnjB,IAAI,gBACJ4jB,eAAgB/Z,EAAKgY,yBACrBgC,iBAAkB/Q,GAAY4Q,GAAUhf,OAAKoO,IAAc4Q,GAC3DI,aAAcja,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAO2D,SAGjE,IAAK,WACD,OACI0Z,EAACoB,EAAAZ,GACGnjB,IAAI,mBACJgkB,iBAAkBna,EAAK4X,2BACvBwC,mBAAoB1gB,EAAO2gB,yBAC3BC,eAAgBta,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAOsD,WAGnE,IAAK,gBAED,IADMqF,EAASpE,EAAKuX,MAAMwB,UAAU9c,QAAQ2O,aAAa3F,iBACvCb,EAAOoB,UAAcpB,EAAOoB,SAAS,IAAMpB,EAAOoB,SAAS,GAAGA,SAC5E,OACIsT,EAACyB,EAAAjB,GACGnjB,IAAI,wBACJqkB,iBAAkBxa,EAAKoY,wBACvBqC,kBAAmBza,EAAKqY,yBACxBqC,oBAAqBtW,EAAOoB,SAAS,GAAGA,SACxCmV,iBAAkB3a,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAOkY,cACzDxO,MAAOqU,EAAA,WAAgBxa,WACvB4b,aAAc,IAAIxW,EAAOoB,SAAS,GAAG3P,MAAK,MAItD,MAEJ,IAAK,wBAED,IADMuO,EAASpE,EAAKuX,MAAMwB,UAAU9c,QAAQuX,YAAYvO,iBACtCb,EAAOoB,UAAcpB,EAAOoB,SAAS,IAAQpB,EAAOoB,SAAS,GAAGA,SAC9E,OACIsT,EAACyB,EAAAjB,GACGnjB,IAAI,uBACJqkB,iBAAkBxa,EAAKwY,uBACvBiC,kBAAmBza,EAAKyY,wBACxBiC,oBAAqBtW,EAAOoB,SAAS,GAAGA,SACxCmV,iBAAkB3a,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAOgY,sBACzDtO,MAAOf,EAAOoB,SAAS,GAAGH,YAC1BuV,aAAa,eACbC,cAAc,EACdC,aAAa,IAIzB,MAEJ,IAAK,oBAED,IADM1W,EAASpE,EAAKuX,MAAMwB,UAAU9c,QAAQuX,YAAYvO,iBACtCb,EAAOoB,UAAcpB,EAAOoB,SAAS,IAAQpB,EAAOoB,SAAS,GAAGA,SAC9E,OACIsT,EAACyB,EAAAjB,GACGnjB,IAAI,mBACJqkB,iBAAkBxa,EAAK0Y,qBACvB+B,kBAAmBza,EAAK2Y,oBACxB+B,oBAAqBtW,EAAOoB,SAAS,GAAGA,SACxCmV,iBAAkB3a,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAOiY,kBACzDvO,MAAOf,EAAOoB,SAAS,GAAGH,YAC1BuV,aAAa,WACbE,aAAa,IAIzB,MAEJ,IAAK,kBACD,GAAM9B,EAAavc,MAEf,IADM2H,EAASpE,EAAKuX,MAAMwB,UAAU9c,QAAQlC,KAAK6O,gBAAgBoQ,EAAavc,MAAMwE,MAClEmD,EAAOoB,UAAcpB,EAAOoB,SAAS,IAAQpB,EAAOoB,SAAS,GAAGA,SAC9E,OACIsT,EAACyB,EAAAjB,GACGnjB,IAAI,0BACJqkB,iBAAkBxa,EAAKsY,0BACvBmC,kBAAmBza,EAAKuY,2BACxBmC,oBAAqBtW,EAAOoB,SAAS,GAAGA,SACxCmV,iBAAkB3a,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAOmN,gBACzDzD,MAAOqU,EAAA,WAAgB5Q,gBACvBgS,aAAc,IAAIxW,EAAOoB,SAAS,GAAG3P,MAAK,MAK1D,MACJ,IAAK,YAYD,MACJ,IAAK,WACD,OACIijB,EAACiC,EAAAzB,GACGnjB,IAAI,mBACJ6kB,qBAAsBhb,EAAK6X,2BAC3BoD,mBAAoBjb,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAOyf,aAC3DC,oBAAqBnb,EAAKuX,MAAMwB,UAAU1d,GAAGyI,QAAQsX,kBAGjE,IAAK,UACD,OACItC,EAACuC,EAAA/B,GACGnjB,IAAI,kBACJmlB,oBAAqBtb,EAAK2X,0BAC1B4D,kBAAmBvb,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAO+f,YAC1DC,mBAAoBzb,EAAKuX,MAAMwB,UAAU1d,GAAGyI,QAAQ4X,iBAGhE,IAAK,SACD,OACI5C,EAAC6C,EAAArC,GACGhd,OAAQ0D,EAAKuX,MAAMwB,UAAU9c,QAAQK,OAAOgN,OAC5CnT,IAAI,iBACJylB,eAAgB5b,EAAK8X,yBACrB+D,aAAc7b,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAO0D,OACrD2c,sBAAuB/hB,IAASA,EAAKe,QAGjD,IAAK,SACK,IAAA9B,EAAAgH,EAAAuX,MAAAwB,UAAA9c,QAAAK,OAAAoS,cACFqN,EAAA/iB,EAAA+iB,WACAC,EAAAhjB,EAAAgjB,iBACAC,EAAAjjB,EAAAijB,oBAEJ,OACInD,EAACoD,EAAA5C,GACGhd,QACI6f,cACKpiB,GAAQA,EAAKe,MACVkhB,EAAmBC,EACnBA,EACRF,WAAYA,GAEhB5lB,IAAI,iBACJimB,eAAgBpc,EAAK+X,yBACrBsE,aAAcrc,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAO4D,SAGjE,IAAK,OACD,OACIyZ,EAACwD,EAAAhD,GACGiD,cAAevc,EAAKuX,MAAMwB,UAAU1d,GAAGC,WAAWkhB,YAClDjhB,aAAcyE,EAAKuX,MAAMwB,UAAU1d,GAAGC,WAAWC,aACjDpF,IAAI,iBACJsmB,qBAAsBzc,EAAK4Y,6BAC3B8D,YAAa1c,EAAKmY,uBAClB7c,WAAY0E,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAO+D,OAG/D,QACI,GAAsB,iBAAX/D,EACP,GAAuB,UAAnBA,EAAa,MAEb,IADM2I,EAASpE,EAAKuX,MAAMwB,UAAU9c,QAAQxB,eAAekiB,aAAalhB,EAAW,MACjE2I,EAAOoB,UAAcpB,EAAOoB,SAAS,IAAQpB,EAAOoB,SAAS,GAAGA,SAAU,CACxF,IAAIoX,OAAc,EAClB,GAAInhB,EAAa,KAObmhB,GANMC,EAAUvnB,OAAA4e,EAAA,EAAA5e,CACZ,WACA,QACA8O,EACA3I,EAAa,OAEUohB,EAAQrX,cAAW7I,EAElD,OACImc,EAACyB,EAAAjB,GACGnjB,IAAI,iCACJqkB,iBAAkBxa,EAAKsY,0BACvBmC,kBAAmBza,EAAKuY,2BACxBmC,oBACIjf,EAAa,MAAKmhB,EAAiBA,EAAiBxY,EAAOoB,SAE/DmV,iBAAkB3a,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAOmN,gBACzDzD,MAAO1J,EAAa,KACpBmf,aAAc,KAAInf,EAAa,KAAIA,EAAa,KAAEyW,KAAK,KAAO,IAAM,YAI7E,GAAuB,QAAnBzW,EAAa,KAAa,CACjC,IAAM2I,EACN,IADMA,EAASpE,EAAKuX,MAAMwB,UAAU9c,QAAQxB,eAAeqiB,WAAWrhB,EAAW,MAC/D2I,EAAOoB,UAAcpB,EAAOoB,SAAS,IAAQpB,EAAOoB,SAAS,GAAGA,SAAU,CACxF,IAEUqX,EAFND,OAAc,EAClB,GAAInhB,EAAa,KAObmhB,GANMC,EAAUvnB,OAAA4e,EAAA,EAAA5e,CACZ,WACA,QACA8O,EACA3I,EAAa,OAEUohB,EAAQrX,cAAW7I,EAElD,OACImc,EAACyB,EAAAjB,GACGnjB,IAAI,+BACJqkB,iBAAkBxa,EAAKoY,wBACvBqC,kBAAmBza,EAAKqY,yBACxBqC,oBACIjf,EAAa,MAAKmhB,EAAiBA,EAAiBxY,EAAOoB,SAE/DmV,iBAAkB3a,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAOkY,cACzDxO,MAAO1J,EAAa,KACpBmf,aAAc,KAAInf,EAAa,KAAIA,EAAa,KAAEyW,KAAK,KAAO,IAAM,YAI7E,GAAIzW,EAAiB,SAAG,CAC3B,IAAMshB,EAAe/c,EAAKuX,MAAMwB,UAAUngB,WAAW6C,OAAOshB,aAAaje,GACzE,OACIga,EAACkE,EAAA,GACG7mB,IAAQsF,EAAoB,YAAC,oBAC7BA,OAAQA,EACRqD,MAAOA,EACPme,QAASjd,EAAKwX,yBACd0F,QAASld,EAAKwX,yBACd2F,eAAgBJ,EAAeA,EAAalnB,WAAQ8G,IAKpE,OAAO,KAEf,OAAO,OAGX,OAAIwc,GAEIA,EAEIL,EAAA,OAAK3iB,IAAI,mBAAmBinB,MAAM,6BAC7B3D,IAMbX,EAAA,OAAK3iB,IAAI,mBAAmBinB,MAAM,6BAC7B3D,IAKLpC,EAAA7gB,UAAAghB,yBAAR,SAAiC1Y,EAAejJ,EAAgB0jB,GAC5DliB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAmBwJ,EAAOjJ,GAAUA,MAAKA,EAAE0jB,KAAIA,QAAK5c,IACxEtF,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAihB,oBAAR,WACIpgB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,EAAqB+B,KAAKkgB,MAAMwB,UAAUngB,WAAW6C,OAAO6D,gBAChFjI,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAkhB,sBAAR,WACI,IAAMnY,EAAYlI,KAAKkgB,MAAMwB,UAAUngB,WAAW6C,OAAO8D,UACzDlI,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,EAAuBiK,IAC3ClI,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAohB,2BAAR,SAAmC2F,GAC/BlmB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAqBioB,IACzClmB,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAqhB,2BAAR,SACI/d,EACA0jB,GAEAnmB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAqBwE,EAAS0jB,IAClDnmB,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAmhB,0BAAR,SACI7d,EACA2jB,GAEApmB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAoBwE,EAAS2jB,IACjDpmB,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAshB,yBAAR,SAAiC4F,GAC7BrmB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAmBooB,IACvCrmB,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAuhB,yBAAR,SAAiC4F,GAC7BtmB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAmBqoB,IACvCtmB,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAwhB,yBAAR,SAAiC4F,GAC7BvmB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAmBsoB,IACvCvmB,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,EAAO,KAGvB+hB,EAAA7gB,UAAAyhB,wBAAR,SAAgC4F,GAC5BxmB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAkBuoB,IACtCxmB,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,EAAO,KAGvB+hB,EAAA7gB,UAAA0hB,2BAAR,SAAmC2F,GAC/BxmB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAqBuoB,IACzCxmB,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAA2hB,uBAAR,SAA+B3Y,GAC3BnI,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAiBkK,IACrCnI,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAA4hB,wBAAR,SAAgCtT,GAC5B,IAAMrJ,EAASpE,KAAKkgB,MAAMwB,UAAUngB,WAAW6C,OAAOkY,cAClDlY,GAAUA,EAAO5F,QAAUiP,EAASjP,MACpCwB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,IAEpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAA0BwP,IAElDzN,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAA6hB,yBAAR,WACIhhB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,IACpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAgiB,uBAAR,SAA+B1T,GAC3B,IAAMrJ,EAASpE,KAAKkgB,MAAMwB,UAAUngB,WAAW6C,OAAOgY,sBAClDhY,GAAUA,EAAO5F,QAAUiP,EAASjP,MACpCwB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,IAEpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAkCwP,IAE1DzN,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAiiB,wBAAR,WACIphB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,IACpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAkiB,qBAAR,SAA6B5T,GACzB,IAAMrJ,EAASpE,KAAKkgB,MAAMwB,UAAUngB,WAAW6C,OAAOiY,kBAClDjY,GAAUA,EAAO5F,QAAUiP,EAASjP,MACpCwB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,IAEpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAA8BwP,IAEtDzN,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAmiB,oBAAR,WACIthB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,IACpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAA8hB,0BAAR,SAAkCxT,GAC9B,IAAMrJ,EAASpE,KAAKkgB,MAAMwB,UAAUngB,WAAW6C,OAAOmN,gBAClDnN,GAAUA,EAAO5F,QAAUiP,EAASjP,MACpCwB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,IAEpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,CAA4BwP,IAEpDzN,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAA+hB,2BAAR,WACIlhB,KAAKkgB,MAAMlf,SAAS/C,OAAA+nB,EAAA,EAAA/nB,IACpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAAgoB,EAAA,EAAAhoB,KAGhB+hB,EAAA7gB,UAAAoiB,6BAAR,SAAqCtG,GACjCjb,KAAKkgB,MAAMlf,SAAS/C,OAAAwoB,EAAA,EAAAxoB,CAAuBgd,KAEnD+E,EA5bA,CAAgC0G,EAAA,WAycjBnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OAAGwgB,UAAWxgB,IACzB,SAACF,GAAa,OAAGA,SAAQA,IAFd,CAGbgf,8MC7fW2G,EAA4B,4BAC5BC,EAA2B,2BAC3BC,EAAkC,iCAElCC,EAAuB,SAAChkB,GAAe,gBAAC9B,EAAeC,GAChE,IAAIC,EAAQD,IAEZ,GAAyC,WAArCC,EAAM0D,QAAQuX,YAAYnU,OAC1B,OAAO,IAAKgV,GAAUvL,UACnB,GAAyC,WAArCvQ,EAAM0D,QAAQuX,YAAYnU,OACjC,OAAO,IAAKgV,GAAUtL,SAG1B1Q,GAAWU,KAAMilB,IAEX,IAAAhlB,EAAAT,EAAAE,SAAAC,MAAEsB,EAAAhB,EAAAgB,OAAQxB,EAAAQ,EAAAR,QACV6H,EAAUrG,EAAOD,MAAQC,EAAOD,KAAKsG,QAAUrG,EAAOD,KAAKsG,QAAU+d,EAAA,OAE3E,OAAO9oB,OAAA8d,EAAA,EAAA9d,CAAwBkD,EAASwB,EAAQG,EAAMkG,GAASnH,KAC3D,SAACI,GACGjB,GACIU,KAAMklB,EACN3jB,QAASyB,EAAA,KACFzC,GACH8K,OAAQ9K,EAAS8K,OAAOlI,IAAI,SAACmiB,GACzB,MAAc,WAAdA,EAAIlZ,MAAoBpJ,EAAA,KACfsiB,GAAKhZ,YAAamU,EAAA,UACvB6E,SAQxB,SAAoCjlB,GAChCkO,QAAQC,MAAMnO,GACdf,GAAWU,KAAMmlB,sCC5CzB1pB,EAAAU,EAAA0B,EAAA,sBAAA0nB,IAAA9pB,EAAAU,EAAA0B,EAAA,sBAAA2nB,IAAA/pB,EAAAU,EAAA0B,EAAA,sBAAA4nB,IAAA,IAAA3a,EAAArP,EAAA,IAGa8pB,EAAsB,sBACtBC,EAAoB,oBAIpBC,EAAe,SAACC,EAAoBtiB,GAAe,gBAAC9D,EAAeC,GAC5E,IACMomB,EADQpmB,IACOG,SAASiB,OAAOilB,cAAcljB,OAAO,SAAC+iB,GACvD,OAAOA,EAAarpB,OAASspB,IAC9B,GACCC,IACIA,EAAOE,cACPvmB,GAAWU,KAAMulB,EAAqBhkB,QAAS6B,IAC/CuiB,EAAOG,SAASvpB,OAAAuO,EAAA,EAAAvO,CAAc6G,IAAOjD,KAAK,WACtCb,GAAWU,KAAMwlB,EAAmBjkB,QAAS6B,KAC9C,WACC9D,GAAWU,KAAMwlB,EAAmBjkB,QAAS6B,OAGjDuiB,EAAOG,SAASvpB,OAAAuO,EAAA,EAAAvO,CAAc6G,sBCvB1CxH,EAAAD,QAAAoqB,yBCAAnqB,EAAAD,QAAAqqB,iBCAApqB,EAAAD,QAAAsqB,iBCAArqB,EAAAD,QAAAuqB,0CCAAzqB,EAAAU,EAAA0B,EAAA,sBAAAsoB,IAAA1qB,EAAAU,EAAA0B,EAAA,sBAAAuoB,IAAA,IAAAC,EAAA5qB,EAAA,IAAA6P,EAAA7P,EAAA,IAAAgU,EAAAhU,EAAA,KAAA4pB,EAAA5pB,EAAA,KAMa0qB,EAAqB,qBAErBC,EAAa,WAAM,gBAAC9mB,EAAeC,GAC5C,IAAMC,EAAQD,IACRU,EAAAT,EAAAE,SAAAC,MAAEsB,EAAAhB,EAAAgB,OAAQxB,EAAAQ,EAAAR,QACV6H,EAAUrG,EAAOD,MAAQC,EAAOD,KAAKsG,QAAUrG,EAAOD,KAAKsG,QAAU+d,EAAA,OAE3E,OAAI7lB,EAAME,SAASC,MAAMyB,MACd,IAAKilB,GAAUtW,QAAQvQ,EAAME,SAASC,MAAMyB,MAGhD7E,OAAA+O,EAAA,EAAA/O,CAAUkD,EAASwB,EAAQqG,GAASnH,KAAK,SAACiB,GAC7C,IAAMklB,EAAU/pB,OAAAkT,EAAA,EAAAlT,CAAa6E,GAK7B,OAJA9B,GAAWU,KAAMmmB,EAAoB5kB,SACjCH,KAAMklB,EACN3lB,OAAQnB,EAAME,SAASiB,UAEpB2lB,uICdFC,EAAwBhqB,OAAA4e,EAAA,EAAA5e,CAAM,SAACiD,EAAyBe,GACjE,IAAMd,EAAUD,EAAME,SAASC,MAAMF,QAC/BwB,EAAS1E,OAAAiqB,EAAA,EAAAjqB,CAAiBiD,GAC1B0c,EAAM,IAAI1M,EAEViX,EAAclmB,EAAS0C,KAAKC,QAC7BR,OAAO,SAACU,GAAe,QAAEA,EAAKrB,QAAUvC,EAAM0D,QAAQwjB,iBAAiBtjB,EAAKrB,SAC5EoB,IAAI,SAACC,GAAe,OAAAA,EAAKrB,QACzBW,OAAO2X,EAAA,GACPlX,IAAI,SAACpB,GAAkB,OAAAxF,OAAA8G,EAAA,EAAA9G,CAAakD,EAASwB,EAAQc,KAiB1D,OAfA4kB,EAAIF,GAAatmB,KAAK,SAACymB,GACnB1K,EAAInM,QAAQ/M,EAAA,KACLzC,GACH0C,KAAMD,EAAA,KACCzC,EAAS0C,MACZsV,cAAeqO,EAAatd,OAAO,SAACC,EAAcC,SAC9C,OAAOxG,EAAA,KACAuG,IAAMtJ,MACRuJ,EAAQtB,IAAK3L,OAAA2e,EAAA,EAAA3e,CAAaiN,GAAQvJ,eAKpD,SAACI,GAAU6b,EAAIlM,OAAO3P,KAElB6b,kCCnCXzgB,EAAAU,EAAA0B,EAAA,sBAAAgpB,IAAAprB,EAAAU,EAAA0B,EAAA,sBAAAipB,IAAO,IAAMD,EAAuB,uBAEvBC,EAAqB,SAACC,GAAyB,OACxD/mB,KAAM6mB,EACNtlB,QAASwlB,kCCJbtrB,EAAAU,EAAA0B,EAAA,sBAAAmpB,IAAAvrB,EAAAU,EAAA0B,EAAA,sBAAAopB,IAAA,IAAAC,EAAAzrB,EAAA,IAGaurB,EAAoB,oBAEpBC,EAAkB,SAAC7jB,GAAe,gBAAC9D,GAC5CA,GACIU,KAAMgnB,EACNzlB,QAAS6B,IAGb9D,EAAS/C,OAAA2qB,EAAA,EAAA3qB,CAAqB6G,oCCXlC3H,EAAAU,EAAA0B,EAAA,sBAAAspB,IAAA1rB,EAAAU,EAAA0B,EAAA,sBAAAupB,IAAO,IAAMD,EAAqB,qBACrBC,EAAwB,uDCDrC3rB,EAAAU,EAAA0B,EAAA,sBAAAwpB,IAAA5rB,EAAAU,EAAA0B,EAAA,sBAAAypB,IAAA7rB,EAAAU,EAAA0B,EAAA,sBAAA0pB,IAAA,IAAAzc,EAAArP,EAAA,IAAA6P,EAAA7P,EAAA,IAAAgU,EAAAhU,EAAA,KAAA0f,EAAA1f,EAAA,KAAA4e,EAAA5e,EAAA,KAAA4H,EAAA5H,EAAA,KAAAyf,EAAAzf,EAAA,KAAA+rB,EAAA/rB,EAAA,KAAAgsB,EAAAhsB,EAAA,GAAAisB,EAAAjsB,EAAA,IAAAksB,EAAAlsB,EAAA,IAAAgG,EAAAhG,EAAA,IAAA2G,EAAA3G,EAAA,IAAAsH,EAAAtH,EAAA,IAyBO,SAAS4rB,EAAK7nB,GACjB,OAAOooB,EAASpoB,EAATooB,EAAiBpoB,EAAMK,WAAWknB,aAAavd,UAAU2P,KAAK,KAOlE,SAASmO,EAAW9nB,GACvB,OAAOqoB,EAAeroB,EAAfqoB,EAAuBroB,EAAMK,WAAWknB,aAAavd,UAAU2P,KAAK,KAOxE,SAASoO,EAAS/nB,EAAyB+Z,GAC9C,OAAOuO,EAAatoB,EAAO+Z,EAApBuO,EAA8BtoB,EAAMK,WAAWknB,aAAavd,UAAU2P,KAAK,KAOtF,IAAMyO,EAAW,SAACpoB,GAA4B,OAAAjD,OAAAuO,EAAA,EAAAvO,CAE1CA,OAAAuO,EAAA,EAAAvO,CACI+O,EAAA,EACAyc,EAAkBvoB,GAClBwoB,EAAoBxoB,GACpBjD,OAAAkT,EAAA,EAAAlT,CAAaiD,EAAMK,WAAW6C,OAAOulB,UACrC1rB,OAAA4e,EAAA,EAAA5e,CAAciD,EAAMK,WAAW6C,OAAO4D,OAAQ9G,EAAME,SAASC,MAAMsB,OAAOD,MAC1EknB,EAAe1oB,IAEnBjD,OAAAuO,EAAA,EAAAvO,CACIA,OAAA8d,EAAA,EAAA9d,CAAciD,EAAMK,WAAW6C,OAAO0D,QACtC7J,OAAA8G,EAAA,EAAA9G,CAAmBiD,EAAMK,WAAW6C,OAAO+f,aAC3ClmB,OAAA8G,EAAA,EAAA9G,CAAoBiD,EAAMK,WAAW6C,OAAOyf,cAC5C5lB,OAAA2e,EAAA,EAAA3e,CAAgBkF,EAAA,GACZ0mB,iBAAkB3oB,EAAME,SAASiB,OAAOwnB,iBACxC5G,eAAgB/hB,EAAMK,WAAW6C,OAAOsD,SACxCoiB,aAAc5oB,EAAME,SAASiB,OAAOynB,eAExC7rB,OAAAirB,EAAA,EAAAjrB,CAAYiD,EAAMK,WAAW6C,OAAO+D,SAQtCohB,EAAiB,SAACroB,GAA4B,OAAAjD,OAAAuO,EAAA,EAAAvO,CAChD+O,EAAA,EACAyc,EAAkBvoB,GAClB0oB,EAAe1oB,GACfjD,OAAA2e,EAAA,EAAA3e,CAAgBkF,EAAA,GACZ0mB,iBAAkB3oB,EAAME,SAASiB,OAAOwnB,iBACxCC,aAAc5oB,EAAME,SAASiB,OAAOynB,iBAStCN,EAAe,SAACtoB,EAAyB+Z,GAAoB,OAAAhd,OAAAuO,EAAA,EAAAvO,CAC/D+O,EAAA,EACAyc,EAAkBvoB,GAClB0oB,EAAe1oB,GACfjD,OAAA2e,EAAA,EAAA3e,CAAgBkF,EAAA,GACZ0mB,iBAAkB3oB,EAAME,SAASiB,OAAOwnB,iBACxCC,aAAc5oB,EAAME,SAASiB,OAAOynB,eAExC7rB,OAAAirB,EAAA,EAAAjrB,CAAWgd,KAQT2O,EAAiB3rB,OAAAkrB,EAAA,EAAAlrB,CAAM,SAACiD,EAAyBsI,GACnCtI,EAAMK,WAAWkB,QAAjC,IACM2B,EAASlD,EAAMK,WAAW6C,OAC1B/B,EAASnB,EAAME,SAASiB,OACxBM,EAAS1E,OAAA6F,EAAA,EAAA7F,CAAiBiD,GAEhC,OAAQA,EAAMK,WAAWkB,SACrB,IAAK,YACD,OAAIE,EAAOD,KACHC,EAAOD,MAAQ0B,EAAO2D,OACVyB,EAAChG,QAAE,UAAUb,EAAOD,KAAK+H,SAAQ,kBAAkBrG,EAAO2D,OAAO6B,GAAE,MAEvEJ,EAAChG,QAAE,UAAUb,EAAOD,KAAK+H,SAAQ,MAE1CjB,EACX,IAAK,cACD,OAAI7G,EAAOD,KACK8G,EAAChG,QAAE,UAAUb,EAAOD,KAAiB,WAAC,MAE/C8G,EACX,IAAK,WACD,GAAItI,EAAM0D,QAAQlC,KAAKiP,OAAQ,CAC3B,GAAIzQ,EAAMK,WAAW6C,OAAOgB,MACxB,OAAYoE,EAAChG,QAAE,UAAUtC,EAAMK,WAAW6C,OAAOgB,MAAMwE,GAAE,MAE7D,IAAMmgB,EAAW7oB,EAAM0D,QAAQlC,KAAKiP,OAAO9M,IAAI,SAACO,GAAU,OAAAA,EAAMwE,KAChE,OAAYJ,EAAChG,QAAE,UAAUumB,EAASlP,KAAK,cAAa,MAExD,OAAOrR,EACX,IAAK,iBACD,OAAYA,EAAChG,QAAE,UAAUb,EAAOiH,GAAE,MACtC,IAAK,eACD,OAAYJ,EAAChG,QAAE,IACXtC,EAAM0D,QAAQlC,KAAKqP,mBACdlN,IAAI,SAAC+E,GAAO,YAAMA,IAClBiR,KAAK,QAAO,MAEzB,IAAK,MACD,OAAOrR,EACX,QACI,IAAM6J,EAAkBhR,EAAOe,eAAegB,OAC1C,SAACmY,GAAoC,OAAArb,EAAMK,WAAWkB,UAAY8Z,EAAcze,OAClF,GACF,OAAIuV,EACY7J,EAAChG,QAAE6P,EAAgB2W,YAE5BxgB,KASbigB,EAAoBxrB,OAAAkrB,EAAA,EAAAlrB,CAAM,SAACiD,EAAyBsI,GACtD,IAAMygB,EAAqB/oB,EAAME,SAASiB,OAAO4nB,mBACjD,OAAMA,GAAoD,mBAAvBA,EACnBzgB,EAAChG,QAAEymB,EAAmB/oB,KAE/BsI,IAMLkgB,EAAsBzrB,OAAAkrB,EAAA,EAAAlrB,CAAM,SAACiD,EAAyBsI,GACxD,IAAM+S,EAAgBte,OAAAwG,EAAA,EAAAxG,CAAiBiD,EAAME,SAASiB,OAAOe,eAAgBlC,EAAMK,WAAWkB,SAC9F,GAAM8Z,IACGte,OAAAmrB,EAAA,EAAAnrB,CAAQiD,EAAMK,WAAW6C,OAAOshB,cAAe,CAChD,IAAMwE,EAAgBjsB,OAAOqQ,KAAKpN,EAAMK,WAAW6C,OAAOshB,cAErDthB,OAAO,SAACtF,GAAgB,QAAEoC,EAAMK,WAAW6C,OAAOshB,aAAa5mB,KAE/DkM,OACG,SAACC,EAAkBC,GACf,IAAMzD,EAAQ0iB,SAASjf,EAAS,IACxB1M,EAAA0C,EAAAK,WAAA6C,OAAAshB,aAAAje,GAAAjJ,MACR,GAAI+d,EAAc9P,SAAW8P,EAAc9P,QAAQhF,GAAQ,CACvD,IAAMrD,EAASmY,EAAc9P,QAAQhF,GAC/B2iB,EAASnsB,OAAAorB,EAAA,EAAAprB,CACX,WACA,QACAmG,EACA5F,GAEJ,GAAI4rB,EACA,OAAYnf,EAAMzH,QAAE,IAAI4mB,EAAO5gB,EAAC,MAGxC,OAAOyB,OAIb4P,KAAK,SACX,OAAYrR,EAAChG,QAAE,GAAG0mB,IAG1B,OAAO1gB,mCC7MXrM,EAAAU,EAAA0B,EAAA,sBAAA8qB,IAAAltB,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAAntB,EAAAU,EAAA0B,EAAA,sBAAAgrB,IAAA,IAAAC,EAAArtB,EAAA,GAAAstB,EAAAttB,EAAA,KAAAutB,EAAAvtB,EAAA,KAAAwtB,EAAAxtB,EAAA,KAAAytB,EAAAztB,EAAA,KAMaktB,EAAyCI,EAAA,EAAgBpoB,OASzDioB,GACT/oB,WAAYmpB,EAAA,EACZtpB,SAAUqpB,EAAA,EACV7lB,QAAS+lB,EAAA,EACT3mB,GAAI4mB,EAAA,GAGKL,EAAWtsB,OAAAusB,EAAA,gBAAAvsB,EACpBmD,SAAQqpB,EAAA,EACRlpB,WAAUmpB,EAAA,EACV9lB,QAAO+lB,EAAA,EACP3mB,GAAE4mB,EAAA,kCC1BN,IAAAC,EAAA1tB,EAAA,IAAAA,EAAAU,EAAA0B,EAAA,sBAAAsrB,EAAA,IAAA1tB,EAAAU,EAAA0B,EAAA,sBAAAsrB,EAAA,IAAA1tB,EAAAU,EAAA0B,EAAA,sBAAAsrB,EAAA,IAAA1tB,EAAAU,EAAA0B,EAAA,sBAAAsrB,EAAA,IAAA1tB,EAAAU,EAAA0B,EAAA,sBAAAsrB,EAAA,QAAAC,EAAA3tB,EAAA,GAAAA,EAAAU,EAAA0B,EAAA,sBAAAurB,EAAA,sFCmBaC,EAAoB,SAACxX,GAAuB,OAAC7O,EAAA,KACnD6O,GACHsC,SAd2B,SAACtC,GAC5B,IAAMI,EAAU1V,OAAA+sB,EAAA,EAAA/sB,CAAcsV,GAC9B,OAAMA,EAAauC,UACLnC,EAAO,yBAAyBJ,EAAa3J,GAAE,cAAc2J,EAAauC,UAE9EnC,EAAO,kCASPsX,CAAgB1X,uFCPjB2X,EAAc,SAAC3X,GAAuB,OAAC7O,EAAA,KAC7C6O,GACH4X,OATqB,SAAC5X,GACtB,OAAGtV,OAAA+sB,EAAA,EAAA/sB,CAAcsV,GAAa,mBAQtB6X,CAAU7X,sFCIT8X,EAAqBptB,OAAA2U,EAAA,EAAA3U,CAAM,SAAC0E,EAAcD,GAAe,OAACgC,EAAA,KAChEhC,GACHmT,SAd4B,SAAClT,EAAcD,GAC3C,GAAIA,EAAKoT,UACL,OAAUnT,EAAOuG,QAAO,oBAAoBxG,EAAK+H,SAAQ,SAAS/H,EAAKoT,WAAYnT,EAAOoT,WAAa,UAAUpT,EAAOoT,WAAWC,MAAU,IAYvIsV,CAAiB3oB,EAAQD,sBCtBvCpF,EAAAD,QAAAkuB,gCCCApuB,EAAAU,EAAA0B,EAAA,sBAAAisB,IAAAruB,EAAAU,EAAA0B,EAAA,sBAAAksB,IAAAtuB,EAAAU,EAAA0B,EAAA,sBAAAmsB,IAAA,IAAAC,EAAAxuB,EAAA,GAEaquB,EAAgB,gBAChBC,EAA2B,oBAE3BC,EAAe,SAACE,GACzB,gBAAC5qB,EAAeC,GACZ,IAAMC,EAAQD,IACTC,EAAMK,WAAWia,OAAOqQ,aACzB7qB,GACIU,KAAM8pB,EACNvoB,QAAS2oB,IAGT1qB,EAAMK,WAAW6C,OAAO6D,eACxBjH,EAAS/C,OAAA0tB,EAAA,EAAA1tB,IAGbuU,WAAW,WACPxR,GAAWU,KAAM+pB,KAClBvqB,EAAME,SAASiB,OAAOypB,sDCnBrC3uB,EAAAU,EAAA0B,EAAA,sBAAAwsB,IAAA5uB,EAAAU,EAAA0B,EAAA,sBAAAysB,IAAO,IAAMD,EAAe,eAEfC,EAAc,WAAc,OACrCtqB,KAAMqqB,kCCHV5uB,EAAAU,EAAA0B,EAAA,sBAAA0sB,IAAA9uB,EAAAU,EAAA0B,EAAA,sBAAA2sB,IAAO,IAAMD,EAAY,YAEZC,EAAW,WAAc,OAClCxqB,KAAMuqB,2GCyBJE,GACFzkB,SAAUzJ,OAAAmuB,EAAA,EAAAnuB,GACV2J,SAAU3J,OAAAmuB,EAAA,EAAAnuB,GACV4J,QAAS5J,OAAAmuB,EAAA,EAAAnuB,GACT6J,OAAQ7J,OAAAmuB,EAAA,EAAAnuB,GACR8J,OAAQ9J,OAAAmuB,EAAA,EAAAnuB,GACRmH,MAAOnH,OAAAmuB,EAAA,EAAAnuB,GACP+J,OAAQ/J,OAAAmuB,EAAA,EAAAnuB,GACR0rB,SAAU1rB,OAAAmuB,EAAA,EAAAnuB,IAgCdouB,EAAA,SAAApM,GACI,SAAAoM,EAAYnM,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAK2jB,0BAA4B3jB,EAAK2jB,0BAA0BvtB,KAAK4J,GACrEA,EAAK4jB,4BAA8B5jB,EAAK4jB,4BAA4BxtB,KAAK4J,GACzEA,EAAK6jB,0BAA4B7jB,EAAK6jB,0BAA0BztB,KAAK4J,GACrEA,EAAK8jB,gCAAkC9jB,EAAK8jB,gCAAgC1tB,KAAK4J,GACjFA,EAAK+jB,+BAAiC/jB,EAAK+jB,+BAA+B3tB,KAAK4J,GAC/EA,EAAKgkB,2BAA6BhkB,EAAKgkB,2BAA2B5tB,KAAK4J,GACvEA,EAAKikB,kCAAoCjkB,EAAKikB,kCAAkC7tB,KAAK4J,GACrFA,EAAKkkB,eAAiBlkB,EAAKkkB,eAAe9tB,KAAK4J,GAC/CA,EAAKmkB,uBAAyBnkB,EAAKmkB,uBAAuB/tB,KAAK4J,GAC/DA,EAAKokB,yBAA2BpkB,EAAKokB,yBAAyBhuB,KAAK4J,KA2O3E,OAxPmCjE,EAAA,EAAA2nB,EAAApM,GAgBxBoM,EAAAltB,UAAAqiB,OAAP,SAAcC,GAAd,IAAA9Y,EAAA3I,KACUoE,EAASpE,KAAKkgB,MAAMwB,UAAUngB,WAAW6C,OACzC4oB,KAsFN,GAnFM5oB,EAAO8D,WACmC,QAA5ClI,KAAKkgB,MAAMwB,UAAUngB,WAAWkB,SAChCzC,KAAKkgB,MAAMwB,UAAUtgB,SAASC,MAAMsB,OAAOD,MAC3C1C,KAAKkgB,MAAMwB,UAAUtgB,SAASC,MAAMsB,OAAOD,KAAiB,YAC5D1C,KAAKkgB,MAAMwB,UAAUtgB,SAASC,MAAMsB,OAAO7E,MAE3CkvB,EAAc9X,MACV+X,SAAU,YACVC,SAAUltB,KAAKusB,4BACfrK,KAAM,iBAAiBliB,KAAKkgB,MAAMwB,UAAUtgB,SAASC,MAAMsB,OAAO7E,OAIpEsG,EAAO6D,eACT+kB,EAAc9X,MACV+X,SAAU,gBACVC,SAAUltB,KAAKssB,0BACfpK,KAAMC,EAAA,YAAiB5G,UAIzBnX,EAAOsD,UACTslB,EAAc9X,MACV+X,SAAU,WACVC,SAAUltB,KAAKwsB,0BACftK,KAASC,EAAA,YAAiBzgB,KAAI,KAAK0C,EAAOsD,SAASwa,OAIrD9d,EAAOyf,cACTmJ,EAAc9X,MACV+X,SAAU,WACVC,SAAUltB,KAAKwsB,0BACftK,KAASC,EAAA,YAAiB0B,aAAY,KAAKzf,EAAOyf,aAAasJ,QAIjE/oB,EAAO+f,aACT6I,EAAc9X,MACV+X,SAAU,UACVC,SAAUltB,KAAKwsB,0BACftK,KAASC,EAAA,YAAiBgC,YAAW,KAAK/f,EAAO+f,YAAYgJ,QAI/D/oB,EAAO0D,QACTklB,EAAc9X,MACV+X,SAAU,SACVC,SAAUltB,KAAKwsB,0BACftK,KAASC,EAAA,YAAiBlQ,OAAM,KAAK7N,EAAO0D,OAAOoa,OAIrD9d,EAAOgB,OAAqD,aAA5CpF,KAAKkgB,MAAMwB,UAAUngB,WAAWkB,QAClDuqB,EAAc9X,MACV+X,SAAU,QACVC,SAAUltB,KAAKwsB,0BACftK,KAASC,EAAA,YAAiB/c,MAAK,KAAKhB,EAAOgB,MAAM0I,QAE5C1J,EAAOulB,UAAwD,mBAA5C3pB,KAAKkgB,MAAMwB,UAAUngB,WAAWkB,SAC5DuqB,EAAc9X,MACV+X,SAAU,WACVC,SAAUltB,KAAKwsB,0BACftK,KAASC,EAAA,YAAiB/c,MAAK,KAAKhB,EAAOulB,SAAS7b,QAItD1J,EAAO2D,QAAsD,cAA5C/H,KAAKkgB,MAAMwB,UAAUngB,WAAWkB,SACnDuqB,EAAc9X,MACV+X,SAAU,SACVC,SAAUltB,KAAKwsB,0BACftK,KAASC,EAAA,YAAiBpa,OAAM,KAAK3D,EAAO2D,OAAO+F,QAIrD1J,EAAO4D,QACTglB,EAAc9X,MACV+X,SAAU,SACVC,SAAUltB,KAAKwsB,0BACftK,KAASC,EAAA,YAAiBna,OAAM,KAAK5D,EAAO4D,OAAOka,OAIrD9d,EAAOkY,cAAe,CACxB,IAAM8Q,EAAYhpB,EAAOkY,cACzB0Q,EAAc9X,MACV+X,SAAUG,EAAU5uB,MACpB0uB,SAAUltB,KAAKysB,gCACfvK,KAASC,EAAA,YAAiB1U,SAAQ,KAAK2f,EAAUlL,OAIzD,GAAM9d,EAAOgY,sBAAuB,CAC1BgR,EAAYhpB,EAAOgY,sBACzB4Q,EAAc9X,MACV+X,SAAUG,EAAU5uB,MACpB0uB,SAAUltB,KAAK0sB,+BACfxK,KAASC,EAAA,YAAiB1U,SAAQ,KAAK2f,EAAUlL,OAIzD,GAAM9d,EAAOmN,gBAAiB,CACpB6b,EAAYhpB,EAAOmN,gBACzByb,EAAc9X,MACV+X,SAAUG,EAAU5uB,MACpB0uB,SAAUltB,KAAK4sB,kCACf1K,KAASC,EAAA,YAAiB1U,SAAQ,KAAK2f,EAAUlL,OAIzD,GAAM9d,EAAOiY,kBAAmB,CACtB+Q,EAAYhpB,EAAOiY,kBACzB2Q,EAAc9X,MACV+X,SAAUG,EAAU5uB,MACpB0uB,SAAUltB,KAAK2sB,2BACfzK,KAASC,EAAA,YAAiBkL,OAAM,KAAKD,EAAUlL,OAIvD,GAAM9d,EAAO+D,KAAM,CACf,IAAMlE,EAAaG,EAAO+D,KAC1BlK,OAAOqQ,KAAKrK,GAAYqJ,QAAQ,SAACxO,GAC7BkuB,EAAc9X,MACV+X,SAAUnuB,EACVouB,SAAUvkB,EAAKmkB,uBACf5K,KAASC,EAAA,YAAiBmL,OAAM,KAAKxuB,MAKjD,IAAMyd,EAAgBte,OAAAsvB,EAAA,EAAAtvB,CAClB+B,KAAKkgB,MAAMwB,UAAUtgB,SAASiB,OAAOe,eACrCpD,KAAKkgB,MAAMwB,UAAUngB,WAAWkB,SAkBpC,GAhBM8Z,IAAkBte,OAAAuvB,EAAA,EAAAvvB,CAAQmG,EAAOshB,eACnCznB,OAAOqQ,KAAKlK,EAAOshB,cACdthB,OAAO,SAACtF,GAAQ,QAAEsF,EAAOshB,aAAa5mB,KACtCwO,QAAQ,SAACxO,GACN,IAAM2I,EAAQ0iB,SAASrrB,EAAK,IAC5B,GAAIyd,EAAc9P,SAAW8P,EAAc9P,QAAQhF,GAAQ,CACvD,IAAMie,EAAenJ,EAAc9P,QAAQhF,GAC3CulB,EAAc9X,MACV+X,SAAU,GAAGxlB,EACbylB,SAAUvkB,EAAKokB,yBACf7K,KAASwD,EAAa1X,YAAW,KAAK5J,EAAOshB,aAAa5mB,GAAKojB,UAM/E8K,EAAc5sB,OAAS,EACvB,OACIqhB,EAAA,OAAK3iB,IAAI,qBAAqBinB,MAAM,sBAChCtE,EAACgM,EAAAxL,GACGnjB,IAAI,iCACJ2N,QAASugB,EAAcxS,KAAK,SAACyH,EAAQtiB,GAAW,OAAAsiB,EAAEC,KAAKwL,cAAc/tB,EAAEuiB,QACvE0D,QAAS5lB,KAAK6sB,eACdnuB,KAA2B,UAArBsB,KAAKkgB,MAAMyN,MAAoB,aAAe,YACpDC,UAAgC,UAArB5tB,KAAKkgB,MAAMyN,MACtBA,MAAO3tB,KAAKkgB,MAAMyN,UAS9BtB,EAAAltB,UAAA4tB,yBAAR,SAAiCc,GAC7B7tB,KAAKkgB,MAAMlf,SAAS/C,OAAAmuB,EAAA,EAAAnuB,CAAmBksB,SAAS0D,EAAEC,OAAOtvB,MAAO,MAChEwB,KAAKkgB,MAAMlf,SAAS/C,OAAA8vB,EAAA,EAAA9vB,KAGhBouB,EAAAltB,UAAAqtB,0BAAR,SAAkCqB,GAC9B7tB,KAAKkgB,MAAMlf,SAASmrB,EAAqB0B,EAAEC,OAAOtvB,QAClDwB,KAAKkgB,MAAMlf,SAAS/C,OAAA8vB,EAAA,EAAA9vB,CAA0B,WAAnB4vB,EAAEC,OAAOtvB,SAGhC6tB,EAAAltB,UAAAmtB,0BAAR,SAAkCuB,GAC9B7tB,KAAKkgB,MAAMlf,SAAS/C,OAAAmuB,EAAA,EAAAnuB,EAAoB,IACxC+B,KAAKkgB,MAAMlf,SAAS/C,OAAA8vB,EAAA,EAAA9vB,KAGhBouB,EAAAltB,UAAAotB,4BAAR,SAAoCsB,GAChC7tB,KAAKkgB,MAAMlf,SAAS/C,OAAAmuB,EAAA,EAAAnuB,EAAsB,IAC1C+B,KAAKkgB,MAAMlf,SAAS/C,OAAA8vB,EAAA,EAAA9vB,KAGhBouB,EAAAltB,UAAA0tB,eAAR,WACI,IAAMmB,IAAoBhuB,KAAKkgB,MAAMwB,UAAUngB,WAAW6C,OAAO2D,OACjE/H,KAAKkgB,MAAMlf,UAAWU,KAAM0qB,EAAA,IAC5BpsB,KAAKkgB,MAAMlf,SAAS/C,OAAA8vB,EAAA,EAAA9vB,CAAO+vB,KAGvB3B,EAAAltB,UAAAstB,gCAAR,SAAwCoB,GACpC7tB,KAAKkgB,MAAMlf,SAAS/C,OAAAmuB,EAAA,EAAAnuB,IACpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAA8vB,EAAA,EAAA9vB,KAGhBouB,EAAAltB,UAAAutB,+BAAR,SAAuCmB,GACnC7tB,KAAKkgB,MAAMlf,SAAS/C,OAAAmuB,EAAA,EAAAnuB,IACpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAA8vB,EAAA,EAAA9vB,KAGhBouB,EAAAltB,UAAAytB,kCAAR,SAA0CiB,GACtC7tB,KAAKkgB,MAAMlf,SAAS/C,OAAAmuB,EAAA,EAAAnuB,IACpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAA8vB,EAAA,EAAA9vB,KAGhBouB,EAAAltB,UAAAwtB,2BAAR,SAAmCkB,GAC/B7tB,KAAKkgB,MAAMlf,SAAS/C,OAAAmuB,EAAA,EAAAnuB,IACpB+B,KAAKkgB,MAAMlf,SAAS/C,OAAA8vB,EAAA,EAAA9vB,KAGhBouB,EAAAltB,UAAA2tB,uBAAR,SAA+Be,GAC3B,IAAM1lB,EAAOnI,KAAKkgB,MAAMwB,UAAUngB,WAAW6C,OAAO+D,KACpD,GAAIA,GAAUA,EAAK0lB,EAAEC,OAAOtvB,OAAQ,CAChC,IAAMyvB,EAAUvpB,EAAA,KAAKyD,UACd8lB,EAAQJ,EAAEC,OAAOtvB,OACpBP,OAAOqQ,KAAK2f,GAAS7tB,OAAS,EAC9BJ,KAAKkgB,MAAMlf,SAAS/C,OAAAmuB,EAAA,EAAAnuB,CAAiBgwB,IAErCjuB,KAAKkgB,MAAMlf,SAAS/C,OAAAmuB,EAAA,EAAAnuB,IAExB+B,KAAKkgB,MAAMlf,SAAS/C,OAAA8vB,EAAA,EAAA9vB,MAGhCouB,EAxPA,CAAmC3F,EAAA,WAqQpBnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OAAGwgB,UAAWxgB,IACzB,SAACF,GAAa,OAAGA,SAAQA,IAFd,CAGbqrB,oCC9UFlvB,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAAE,EAAArtB,EAAA,GAAA+wB,EAAA/wB,EAAA,KAAAgxB,EAAAhxB,EAAA,KASamtB,GACTjoB,OAAQ6rB,EAAA,EACR7sB,MAAO8sB,EAAA,GAGI5uB,EAAA,EAAAtB,OAAAusB,EAAA,kBACXnoB,OAAM6rB,EAAA,EACN7sB,MAAK8sB,EAAA,sDChBThxB,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAA8D,EAAAjxB,EAAA,GAAAkxB,EAAAlxB,EAAA,IAAAgxB,EAAAhxB,EAAA,IAAAmxB,EAAAnxB,EAAA,IAAAoxB,EAAApxB,EAAA,IAqfamtB,GACT1a,wBAAwB,EACxB4e,YAAa,eACbC,mBAAmB,EACnBC,gBAAiBN,EAAA,YAAiBO,SAClCC,uBAAwBR,EAAA,YAAiBS,cACzC/e,SAAU,aACVK,WAAY,aACZ2e,cAAe,MAAO,YAAa,cAAe,WAAY,iBAAkB,eAChFC,WAAY,aACZC,gBAAiB,SACjBjf,kBAAkB,EAClBgS,qBAAqB,EACrB+J,oBAAqB,KACrBmD,+BAA+B,EAC/BC,kBAAkB,EAClBC,iBAAkB,mBAClB7sB,+BAA+B,EAC/ByX,gBAAiB,GACjB8P,iBAAkBsE,EAAA,EAClBnL,0BACI,OACA,UACA,WACA,SACA,gBACA,aACA,iBACA,gBACA,cACA,SACA,aACA,SACA,OACA,UACA,aACA,cACA,QACA,WACA,oBACA,sBACA,qBACA,kBACA,QACA,YACA,SACA,OACA,aAEJoM,wBAAwB,EACxB9H,iBACAlkB,kBACAisB,cAAc,EACdC,aAAa,EACbC,OAAQ,aACRC,cAAc,EACdC,iCAAiC,GAGtBlwB,EAAA,WAAC2B,EAAmCmmB,GAC/C,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAK2sB,EAAA,EAkBD,OAjBApwB,OAAAqwB,EAAA,EAAArwB,CACI,KACAiD,EAAMkC,eACDgB,OAAOmqB,EAAA,GACP1pB,IAAI0pB,EAAA,GACJvjB,OACG,SAACC,EAA0BC,GAA8B,OAAKD,EAAMzH,OAAK0H,QAG5E9G,OACG,SAACsrB,GACG,MAA0B,iBAAnBA,GAAuD,UAAxBA,EAAehuB,QAEnE4L,QAAQ,SAAClJ,EAAwBqD,GAC/BrD,EAAOwF,GAAKyd,EAAOpkB,QAAQ0O,OAAOlK,GAAOmC,UAClCxF,EAAO4Z,sBAEX9c,EACX,QACI,OAAOA,6FC5jBNopB,GACT9lB,QAAS,GACT7B,UACAxB,QAAS,SAACuK,GAAgB,cAIfnM,EAAA,WAAC2B,EAAkCmmB,GAC9C,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH4B,KAAMukB,EAAOpkB,QAAQH,OAE7B,QAII,OAHM5B,EAAMyB,OAAOqH,iBAAmB9I,EAAMyB,OAAOgR,UAC/CzS,EAAMyB,OAAOgR,QAAU1V,OAAAkT,EAAA,EAAAlT,CAAciD,EAAMyB,SAExCzB,kCC5BnB/D,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAAE,EAAArtB,EAAA,GAAAyyB,EAAAzyB,EAAA,KAAA0yB,EAAA1yB,EAAA,KAAA2yB,EAAA3yB,EAAA,KAAA4yB,EAAA5yB,EAAA,KAAA6yB,EAAA7yB,EAAA,KAAA8yB,EAAA9yB,EAAA,KAiBamtB,GACT9O,OAAQoU,EAAA,EACRxrB,OAAQyrB,EAAA,EACRruB,UAAWsuB,EAAA,EACXrH,aAAcuH,EAAA,EACdvtB,QAASwtB,EAAA,EACTzV,KAAMuV,EAAA,GAGKxwB,EAAA,EAAAtB,OAAAusB,EAAA,kBACXhP,OAAMoU,EAAA,EACNxrB,OAAMyrB,EAAA,EACNruB,UAASsuB,EAAA,EACTrH,aAAYuH,EAAA,EACZvtB,QAAOwtB,EAAA,EACPzV,KAAIuV,EAAA,sFCpBKzF,GACT7O,MACIE,MAAO,IACPC,MAAO,GACPC,KAAM,IACNC,KAAM,IAEV+P,YAAY,GAGDtsB,EAAA,WAAC2B,EAAmCmmB,GAC/C,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH2qB,YAAY,IAEpB,KAAK8D,EAAA,EACD,OACIlU,KAAM4L,EAAOpkB,QACb4oB,YAAY,GAEpB,QACI,OAAO3qB,4FC2BNopB,GACT5E,gBACAzd,eAAe,GAGJ1I,EAAA,WAAC2B,EAAmCmmB,SAC/C,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OACIjK,gBACAzd,eAAe,GAEvB,KAAK0nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHyoB,SAAUtC,EAAOpkB,UAEzB,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHmb,kBAAmBgL,EAAOpkB,UAElC,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHkb,sBAAuBiL,EAAOpkB,UAEtC,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHob,cAAe+K,EAAOpkB,UAE9B,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHqQ,gBAAiB8V,EAAOpkB,UAEhC,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHwG,SAAU2f,EAAOpkB,UAEzB,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH2iB,aAAcwD,EAAOpkB,QAAQ2E,WAErC,KAAK+nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHijB,YAAakD,EAAOpkB,QAAQ4E,UAEpC,KAAK8nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH4G,OAAQuf,EAAOpkB,UAEvB,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH6G,OAAQsf,EAAOpkB,UAEvB,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHqQ,qBAAiBjM,EACjBF,MAAOiiB,EAAOpkB,UAEtB,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQqf,EAAOpkB,UAEvB,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH+G,cAAeof,EAAOpkB,UAE9B,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHgH,UAAWmf,EAAOpkB,QAClBqZ,mBAAehX,IAEvB,KAAKqqB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHiH,KAAMkf,EAAOpkB,UAErB,KAAK0sB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHwkB,aAAchhB,EAAA,KACPxD,EAAMwkB,cAAY/jB,OACpB0lB,EAAOpkB,QAAQwE,OAAQ4f,EAAOpkB,QAAQmB,OAAMzC,MAGzD,KAAKuuB,EAAA,EACD,OACIxK,gBACAzd,eAAe,GAEvB,QACI,OAAO/G,oFC9JNopB,GACT7oB,WAAY,EACZ6I,MAAO,GAGI/K,EAAA,WAAC2B,EAAsCmmB,GAClD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHoJ,MAAO,IAEf,KAAKqlB,EAAA,EACD,OACIluB,UAAW4lB,EAAOpkB,QAAQd,OAAOV,UACjC6I,MAAO+c,EAAOpkB,QAAQd,OAAOmI,OAErC,KAAKqlB,EAAA,EACD,OACIluB,UAAW4lB,EAAOpkB,QAAQxB,UAC1B6I,MAAO+c,EAAOpkB,QAAQqH,OAE9B,QACI,OAAOpJ,4FCvBNopB,GACTpf,QAAS,GACTilB,SAAU,IAGC5wB,EAAA,WACX2B,EACAmmB,GAEA,YAHA,IAAAnmB,MAAAopB,GAGQjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHivB,SAAUjvB,EAAMgK,UAExB,KAAKglB,EAAA,EACD,OAAOxrB,EAAA,KACAxD,GACHgK,QAASmc,EAAOpkB,UAExB,QACI,OAAO/B,kCC5BnB/D,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAA8F,EAAAjzB,EAAA,IAAAwyB,EAAAxyB,EAAA,IAKamtB,EAA6B,MAE3B/qB,EAAA,WAAC2B,EAAoCmmB,GAChD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAK0uB,EAAA,EACD,OAAO/I,EAAOpkB,QAAQqb,WAC1B,KAAKqR,EAAA,EACD,IAAMb,EAAezH,EAAOpkB,QAAQZ,OAAOysB,aACrCuB,EAAqBhJ,EAAOpkB,QAAQZ,OAAOe,eAC5CyB,IAAI,SAACpC,GAA2B,OAAAA,EAAQ3E,OAC7C,OAAIgxB,EAAa7Z,QAAQ/T,IAAU,GAAKmvB,EAAmBpb,QAAQ/T,IAAU,EAClEA,EAGP4tB,EAAa1uB,OAAS,EAClB0uB,EAAa,GAAKuB,EAAmBjwB,OAAS,EAC1CiwB,EAAmB,GACnB,MAEhB,QACI,OAAOnvB,qHCfNopB,GACThP,MAAO,YACPb,MAAO,QAGE6V,GACTC,UAAW,WACXC,YAAa,YACbC,SAAU,YACVC,eAAgB,YAChBvU,YAAa,YACbwU,IAAK,aAGIC,GACTC,UAAW,OACX/iB,MAAO,MACPjG,QAAS,OACTiV,MAAO,MACPlV,SAAU,OACVkpB,SAAU,OACVC,UAAW,QAGfxxB,EAAA,WAAgB2B,EAAiCmmB,GAC7C,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHuZ,MAAO4M,EAAOpkB,UAEtB,KAAK0sB,EAAA,EACD,IAAMrU,EAAQ+L,EAAOpkB,QACrB,OACIqY,MAAKA,EACLb,MAAOmW,EAAqBtV,GAASsV,EAAqBtV,GAASpa,EAAMuZ,OAEjF,KAAKyV,EAAA,EAGD,IAAMc,EAAW/yB,OAAAswB,EAAA,EAAAtwB,CAAiBopB,EAAOpkB,QAAQG,eAAgBikB,EAAOpkB,QAAQqb,YAChF,GAAI0S,GAAYA,EAASvkB,QAAS,CAC9B,IAAM4E,EAAc2f,EAASvkB,QAAQrI,OACjC,SAACA,GAA2B,MAAkB,iBAAXA,GAAuC,UAAhBA,EAAO1C,OACnE,GACF,GAAI2P,GAAeA,EAAYzH,GAAI,CAC/B,IAAMqnB,EAAa5J,EAAOpkB,QAAQsb,uBAAuBlN,EAAYzH,IACrE,GAAIqnB,EACA,OAAOA,GAKnB,IAAM7jB,EAAYkjB,EAAiBjJ,EAAOpkB,QAAQqb,YAClD,OACIhD,MAASlO,GAAwB,YACjCqN,MAAO,QAEf,KAAK2R,EAAA,EAEK,IAAAzqB,EAAA0lB,EAAApkB,QAAEG,EAAAzB,EAAAyB,eAAgB8a,EAAAvc,EAAAuc,eAClB3B,EAAgBte,OAAAswB,EAAA,EAAAtwB,CAAiBmF,EAAgB8a,GACvD,GAAI3B,GAAmBA,EAAc9P,QAAS,CAC1C,IAAMykB,EAAuBjzB,OAAAkzB,EAAA,EAAAlzB,CACzB,KACAmF,EACKgB,OAAOmqB,EAAA,GACP1pB,IAAI0pB,EAAA,GACJvjB,OACG,SAACC,EAA0BC,GAA8B,OAAKD,EAAMzH,OAAK0H,QAG5E9G,OACG,SAACsrB,GACG,MAA0B,iBAAnBA,GAAuD,UAAxBA,EAAehuB,QAG/D0vB,EAAqB7U,EAAc9P,QAAQrI,OAC7C,SAACA,GAA2B,MAAkB,iBAAXA,GAAuC,UAAhBA,EAAO1C,OACnE,GACI0D,EAAQiiB,EAAOpkB,QAAQ0O,OAAOuf,EAAqBjc,QAAQmc,IACjE,GAAIhsB,EACA,OACIkW,MAAOlW,EAAMgF,UAAYhF,EAAMgF,UAAY,YAC3CqQ,MAAOrV,EAAMiF,UAAYjF,EAAMiF,UAAY,QAIvD,OAAOnJ,EACX,QACI,OAAOA,kCCpGnB/D,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAAE,EAAArtB,EAAA,GAAAk0B,EAAAl0B,EAAA,KAAAm0B,EAAAn0B,EAAA,KAAAo0B,EAAAp0B,EAAA,KAAAq0B,EAAAr0B,EAAA,KAAAs0B,EAAAt0B,EAAA,KAAAu0B,EAAAv0B,EAAA,KAAAw0B,EAAAx0B,EAAA,KAAAy0B,EAAAz0B,EAAA,KAAA00B,EAAA10B,EAAA,KAAA20B,EAAA30B,EAAA,KAAA40B,EAAA50B,EAAA,KAAA60B,EAAA70B,EAAA,KA6BamtB,GACTrlB,OAAQosB,EAAA,EACRnX,aAAcoX,EAAA,EACdnV,YAAaoV,EAAA,EACbU,aAAcT,EAAA,EACdU,cAAeT,EAAA,EACfU,kBAAmBR,EAAA,EACnBS,gBAAiBV,EAAA,EACjBne,aAAcqe,EAAA,EACdlvB,KAAMmvB,EAAA,EACNzuB,eAAgB0uB,EAAA,EAChB1J,iBAAkB2J,EAAA,EAClBM,MAAOL,EAAA,GAGIzyB,EAAA,EAAAtB,OAAAusB,EAAA,kBACXvlB,OAAMosB,EAAA,EACNnX,aAAYoX,EAAA,EACZW,aAAYT,EAAA,EACZU,cAAaT,EAAA,EACbU,kBAAiBR,EAAA,EACjBS,gBAAeV,EAAA,EACfvV,YAAWoV,EAAA,EACXhe,aAAYqe,EAAA,EACZlvB,KAAImvB,EAAA,EACJzuB,eAAc0uB,EAAA,EACd1J,iBAAgB2J,EAAA,EAChBM,MAAKL,EAAA,kCCxDT70B,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAAE,EAAArtB,EAAA,GAAAm1B,EAAAn1B,EAAA,KAAAo1B,EAAAp1B,EAAA,KAQamtB,GACTrY,OAAQqgB,EAAA,EACRjb,cAAekb,EAAA,GAGJhzB,EAAA,EAAAtB,OAAAusB,EAAA,kBACXvY,OAAMqgB,EAAA,EACNjb,cAAakb,EAAA,kCCfjBp1B,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAA8F,EAAAjzB,EAAA,GASamtB,GACTnY,SAAK7M,EACLktB,aAASltB,EACTmtB,YAAQntB,EACRwC,YAAQxC,GAGG/F,EAAA,WAAC2B,EAAmCmmB,GAC/C,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAK0uB,EAAA,EACD,GACI/I,EAAOpkB,QAAQ+B,cACfqiB,EAAOpkB,QAAQ+B,aAAaC,OAC9B,CACE,IAAMytB,EAAerL,EAAOpkB,QAAQ+B,aAAaC,OAAOb,OACpD,SAACkX,GAAe,MAAoB,WAApBA,EAAMlO,YACxB,GACF,GAAIslB,EAAc,CACd,IAAMC,EAAaD,EAAarlB,YAAYjJ,OACxC,SAAC5F,GAAe,MAAgB,YAAhBA,EAAMA,QACxB,GACIo0B,EAAgBF,EAAarlB,YAAYjJ,OAC3C,SAAC5F,GAAe,MAAgB,YAAhBA,EAAMA,QACxB,GACIq0B,EAAeH,EAAarlB,YAAYjJ,OAC1C,SAAC5F,GAAe,MAAgB,WAAhBA,EAAMA,QACxB,GACIs0B,EAAeJ,EAAarlB,YAAYjJ,OAC1C,SAAC5F,GAAe,MAAgB,WAAhBA,EAAMA,QACxB,GACF,OACI2T,IAAKwgB,EAAaA,EAAWzlB,WAAQ5H,EACrCktB,QAASI,EAAgBA,EAAc1lB,WAAQ5H,EAC/CmtB,OAAQI,EAAeA,EAAa3lB,WAAQ5H,EAC5CwC,OAAQgrB,EAAeA,EAAa5lB,WAAQ5H,IAIxD,OAAOpE,EACX,QACI,OAAOA,kCCjDnB/D,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAA8F,EAAAjzB,EAAA,GAQamtB,GACT1F,oBAAqB,EACrBD,iBAAkB,EAClBD,WAAY,GAGDnlB,EAAA,WAAC2B,EAA0CmmB,GACtD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAK0uB,EAAA,EACD,GACI/I,EAAOpkB,QAAQ+B,cACfqiB,EAAOpkB,QAAQ+B,aAAaC,OAC9B,CACE,IAAMytB,EAAerL,EAAOpkB,QAAQ+B,aAAaC,OAAOb,OACpD,SAACkX,GAAe,MAAoB,kBAApBA,EAAMlO,YACxB,GACF,GAAIslB,EAAc,CACd,IAAMK,EAAgBL,EAAarlB,YAAYjJ,OAC3C,SAAC5F,GAAe,MAAgB,sBAAhBA,EAAMA,QACxB,GACIw0B,EAAmBN,EAAarlB,YAAYjJ,OAC9C,SAAC5F,GAAe,MAAgB,yBAAhBA,EAAMA,QACxB,GACIy0B,EAAYP,EAAarlB,YAAYjJ,OACvC,SAAC5F,GAAe,MAAgB,eAAhBA,EAAMA,QACxB,GAEF,OACIomB,oBAAqBoO,EAAmBA,EAAiB9lB,MAAQ,EACjEyX,iBAAkBoO,EAAgBA,EAAc7lB,MAAQ,EACxDwX,WAAYuO,EAAYA,EAAU/lB,MAAQ,IAItD,OAAOhM,EACX,QACI,OAAOA,kCC5CnB/D,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAA8F,EAAAjzB,EAAA,GAIamtB,KAEE/qB,EAAA,WAAC2B,EAA+BmmB,GAC3C,YADY,IAAAnmB,UACJmmB,EAAO3lB,MACX,KAAK0uB,EAAA,EACD,OAAO/I,EAAOpkB,QAAQd,OAAOyC,QACjC,KAAKwrB,EAAA,EACD,OAAYlvB,EAAKsC,OAAK6jB,EAAOpkB,QAAQ2B,SACzC,QACI,OAAO1D,oGCGNopB,GACT1c,oBAAgBtI,EAChBoE,aAASpE,EACT0C,OAAQ,WAGGzI,EAAA,WAAC2B,EAAwCmmB,GACpD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,YAEhB,KAAK2nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH0M,gBACII,YAAaqZ,EAAOpkB,QAAQ2G,GAC5BpL,MAAO6oB,EAAOpkB,QAAQ2G,GACtBuE,SAAUlQ,OAAAi1B,EAAA,EAAAj1B,CAAgBopB,EAAOpkB,QAAQ8J,SAE7CrD,QAAS2d,EAAOpkB,QAAQ2G,GACxB5B,OAAQ,WAEhB,KAAKkoB,EAAA,EACD,OACMhvB,EAAM0M,gBACNyZ,EAAOpkB,QAAQ+B,cACfqiB,EAAOpkB,QAAQ+B,aAAaG,WACoB,gBAAlDkiB,EAAOpkB,QAAQ+B,aAAaG,UAAU1C,QAE/BiC,EAAA,KACAxD,GACH0M,eAAgB3P,OAAAi1B,EAAA,EAAAj1B,CACZopB,EAAOpkB,QAAQ+B,aACf/G,OAAAi1B,EAAA,EAAAj1B,CAAqBiD,EAAM0M,gBAC3B,qBAIL1M,EACX,KAAKyuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,WAEhB,QACI,OAAO9G,4GC3CNopB,KAEE/qB,EAAA,WAAC2B,EAA+BmmB,+BAC3C,YADY,IAAAnmB,UACJmmB,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,IAAKS,MACP0lB,EAAOpkB,QAAQ2G,IAAKyd,EAAOpkB,QAAOtB,IAE3C,KAAKguB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,IAAK2C,MACPwjB,EAAOpkB,QAAQ2G,SAAKtE,EAASzB,IAEtC,KAAK8rB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,IAAK6C,MACPsjB,EAAOpkB,QAAQ2G,SAAKtE,EAASvB,IAEtC,KAAK4rB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,IAAKiyB,MACP9L,EAAOpkB,QAAQ2G,SAAKtE,EAAS6tB,IAEtC,KAAKjD,EAAA,EACD,OAAOxrB,EAAA,KACAxD,IAAKkyB,MACP/L,EAAOpkB,QAAQ2G,IAAKyd,EAAOpkB,QAAOmwB,IAE3C,KAAKlD,EAAA,EACD,OAAOxrB,EAAA,KACAxD,IAAKmyB,MACPhM,EAAOpkB,QAAQ2G,SAAKtE,EAAS+tB,IAEtC,KAAKjH,EAAA,EACD,SACJ,KAAK2B,EAAA,EACD,OAAOrpB,EAAA,KACAxD,IAAKoyB,MACPjM,EAAOpkB,QAAQ2G,IAAKyd,EAAOpkB,QAAOqwB,IAE3C,KAAKvF,EAAA,EACD,OAAOrpB,EAAA,KACAxD,IAAKqyB,MACPlM,EAAOpkB,QAAQ2G,SAAKtE,EAASiuB,IAEtC,KAAKxF,EAAA,EACD,OAAOrpB,EAAA,KACAxD,IAAKsyB,MACPnM,EAAOpkB,QAAQ2G,SAAKtE,EAASkuB,IAEtC,KAAKzF,EAAA,EACD,OAAOrpB,EAAA,KACAxD,IAAKuyB,MACPpM,EAAOpkB,QAAQ2G,IAAKyd,EAAOpkB,QAAOwwB,IAE3C,KAAK1F,EAAA,EACD,OAAOrpB,EAAA,KACAxD,IAAKwyB,MACPrM,EAAOpkB,QAAQ2G,SAAKtE,EAASouB,IAEtC,KAAK3F,EAAA,EACD,OAAOrpB,EAAA,KACAxD,IAAKyyB,MACPtM,EAAOpkB,QAAQ2G,SAAKtE,EAASquB,IAEtC,QACI,OAAOzyB,4FCzENopB,KAEE/qB,EAAA,WAAC2B,EAAgCmmB,WAC5C,YADY,IAAAnmB,UACJmmB,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,SACJ,KAAKA,EAAA,EACD,OAAOjrB,EAAA,KACAxD,EACAmmB,EAAOpkB,QAAQ+H,OAAO,SAACC,EAAcnG,SACpC,OAAOJ,EAAA,KACAuG,IAAMtJ,MACRmD,EAAK8E,IAAK9E,EAAInD,UAI/B,KAAKguB,EAAA,EACD,IAAM1R,EAAWvZ,EAAA,KAAKxD,GAEtB,cADO+c,EAASoJ,EAAOpkB,QAAQ2G,IACxBqU,EACX,KAAK0R,EAAA,EACD,OAAOjrB,EAAA,KACAxD,IAAKS,MACP0lB,EAAOpkB,QAAQ2G,IAAKyd,EAAOpkB,QAAOtB,IAE3C,KAAKguB,EAAA,EACD,OAAA9rB,MAAUwjB,EAAOpkB,QAAQ2G,IAAKyd,EAAOpkB,QAAOY,EAChD,KAAK8rB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,EACAmmB,EAAOpkB,SAElB,KAAKitB,EAAA,EACD,SACJ,QACI,OAAOhvB,6FC3CNopB,KAEb/qB,EAAA,WAAgB2B,EAA8CmmB,SAC1D,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAIzuB,EAAMmmB,EAAOpkB,QAAQ6B,KAAK8E,YACpBqU,EAAWvZ,EAAA,KAAKxD,IACNmmB,EAAOpkB,QAAQ6B,KAAK8E,IAC7BqU,GAEJ/c,EACX,KAAKgvB,EAAA,EAEG,IAAMjS,EADV,OAAI/c,EAAMmmB,EAAOpkB,QAAQ2G,YACfqU,EAAWvZ,EAAA,KAAKxD,IACNmmB,EAAOpkB,QAAQ2G,IACxBqU,GAEJ/c,EACX,KAAKyuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,IAAKS,MACP0lB,EAAOpkB,UAAU,EAAItB,IAE9B,QACI,OAAOT,qFCxBNopB,KAEE/qB,EAAA,WAAC2B,EAA4CmmB,SACxD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,IAAKS,MACP0lB,EAAOpkB,QAAQ6B,KAAK8E,IAAKyd,EAAOpkB,QAAQ6B,KAAInD,IAErD,KAAKguB,EAAA,EACD,GAAIzuB,EAAMmmB,EAAOpkB,SAAU,CACvB,IAAMgb,EAAWvZ,EAAA,KAAKxD,GAEtB,cADO+c,EAASoJ,EAAOpkB,SAChBgb,EAEX,OAAO/c,EACX,QACI,OAAOA,oGCJNopB,GACT1c,oBAAgBtI,EAChBqM,YAAQrM,EACR0C,OAAQ,WAMGzI,EAAA,WAAC2B,EAAyCmmB,GACrD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,YAEhB,KAAK2nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHyQ,OAAQ0V,EAAOpkB,QAAQ0O,OACvB/D,gBACII,YAAa,sBACbxP,MAAO,sBACP2P,SAAUlQ,OAAAi1B,EAAA,EAAAj1B,CAAgBopB,EAAOpkB,QAAQ8J,SAE7C/E,OAAQ,WAEhB,KAAKkoB,EAAA,EACD,OACMhvB,EAAM0M,gBACNyZ,EAAOpkB,QAAQ+B,cACfqiB,EAAOpkB,QAAQ+B,aAAaG,YAEwB,mBAAlDkiB,EAAOpkB,QAAQ+B,aAAaG,UAAU1C,SACY,cAAlD4kB,EAAOpkB,QAAQ+B,aAAaG,UAAU1C,SACY,QAAlD4kB,EAAOpkB,QAAQ+B,aAAaG,UAAU1C,SAGnCiC,EAAA,KACAxD,GACH0M,eAAgB3P,OAAAi1B,EAAA,EAAAj1B,CACZopB,EAAOpkB,QAAQ+B,aACf/G,OAAAi1B,EAAA,EAAAj1B,CAAqBiD,EAAM0M,gBAC3B,gBAIL1M,EACX,KAAKyuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,WAEhB,QACI,OAAO9G,oGCzCNopB,GACTxY,eAAWxM,EACXsM,aAAStM,EACTqM,YAAQrM,EACRiM,mBACAQ,sBACA/J,OAAQ,WAGGzI,EAAA,WAAC2B,EAAiCmmB,iBAC7C,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,YAEhB,KAAK2nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH4Q,UAAWuV,EAAOpkB,QAAQ6O,UAC1BF,QAASyV,EAAOpkB,QAAQ2O,QACxBD,OAAQ0V,EAAOpkB,QAAQ0O,OACvBI,mBAAoBsV,EAAOpkB,QAAQ8O,mBACnC/J,OAAQ,WAEhB,KAAK2nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHqQ,gBAAiB7M,EAAA,KACVxD,EAAMqQ,iBAAe5P,OACvB0lB,EAAOpkB,QAAQ2G,KACZpL,MAAO6oB,EAAOpkB,QAAQ2G,GACtBuE,SAAUlQ,OAAAi1B,EAAA,EAAAj1B,CAAgBopB,EAAOpkB,QAAQ2K,iBAC5CjM,MAGb,KAAKuuB,EAAA,EACD,GACM7I,EAAOpkB,QAAQ+B,cACfqiB,EAAOpkB,QAAQ+B,aAAaG,WACoB,aAAlDkiB,EAAOpkB,QAAQ+B,aAAaG,UAAU1C,SACpC4kB,EAAOpkB,QAAQ+B,aAAaG,UAAUC,MAC1C,CACE,IAAMwE,EAAKyd,EAAOpkB,QAAQ+B,aAAaG,UAAUC,MAAMwE,GACvD,GAAI1I,EAAMqQ,gBAAgB3H,GACtB,OAAOlF,EAAA,KACAxD,GACHqQ,gBAAiB7M,EAAA,KACVxD,EAAMqQ,iBAAe1N,OACvB+F,GAAK3L,OAAAi1B,EAAA,EAAAj1B,CACFopB,EAAOpkB,QAAQ+B,aACf/G,OAAAi1B,EAAA,EAAAj1B,CAAqBiD,EAAMqQ,gBAAgB3H,IAC3C,mBACH/F,MAKjB,OAAO3C,EACX,KAAKyuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,WAEhB,KAAK2nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH4Q,UAAW5Q,EAAM4Q,UAAYpN,EAAA,KACpBxD,EAAM4Q,WAAS/N,OAAGsjB,EAAOpkB,QAAQ2G,KAAK,EAAI7F,KAAIovB,KACjDA,EAAC9L,EAAOpkB,QAAQ2G,KAAK,EAAIupB,KAEvC,KAAKxD,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH4Q,UAAW5Q,EAAM4Q,UAAWpN,EAAA,KACnBxD,EAAM4Q,WAASshB,OAAG/L,EAAOpkB,QAAQ2G,KAAK,EAAKwpB,SAG5D,QACI,OAAOlyB,oGCjFNopB,GACThF,gBACA9G,aACAiH,cACAzd,OAAQ,WA8EZ,SAAS4rB,EAAiBlyB,EAAcmyB,EAAmBC,GACvD,OAAOD,EACFzvB,OAAO,SAAC4iB,GAAQ,OAAAA,EAAItlB,OAASA,IAC7BsJ,OACG,SAACC,EAAQC,GAOL,OANKD,EAAOC,EAAQtB,MAChBqB,EAAOC,EAAQtB,KACXpL,MAAO0M,EAAQtB,GACfuE,SAAUlQ,OAAAi1B,EAAA,EAAAj1B,CAAgBiN,EAAQjJ,SAAS2L,kBAG5C3C,GACVvG,EAAA,KACIovB,IAxFFv0B,EAAA,WAAC2B,EAA2CmmB,GACvD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAK2sB,EAAA,EACD,OAAO3pB,EAAA,KACAxD,GACH8G,OAAQ,YAEhB,KAAKqmB,EAAA,EACD,OAAO3pB,EAAA,KACAxD,GACHsd,UAAW6I,EAAOpkB,QAAQ0O,OAAO3G,OAC7B,SAAC8D,EAAuC5D,GAKpC,OAJA4D,EAAI5D,EAAQtB,KACR0R,MAAOpQ,EAAQd,UACfqQ,MAAOvP,EAAQb,WAEZyE,GAEX5N,EAAMsd,aAGlB,KAAK6P,EAAA,EACD,OAAO3pB,EAAA,KACAxD,GACHukB,WAAYmO,EAAiB,MAAOvM,EAAOpkB,QAAS/B,EAAMukB,YAC1DH,aAAcsO,EAAiB,QAASvM,EAAOpkB,QAAS/B,EAAMokB,cAC9Dtd,OAAQ,WAEhB,KAAKqmB,EAAA,EACD,OAAO3pB,EAAA,KACAxD,GACH8G,OAAQ,WAEhB,KAAK+rB,EAAA,EACD,GAAI1M,EAAOpkB,QAAQ+B,aAAc,CAC7B,IAAMG,EAAYkiB,EAAOpkB,QAAQ+B,aAAaG,UAC9C,GAAIA,EAAUE,QAAUF,EAAUE,OAAOoH,QACrC,OAAOtH,EAAUE,OAAOoH,QACnBrI,OAAO,SAAC+F,GAA+B,MAAa,iBAANA,IAC9Ca,OAAO,SAACC,EAA6BC,WAClC,MAAqB,UAAjBA,EAAQxJ,KACDgD,EAAA,KACAxD,GACHokB,aAAc5gB,EAAA,KACPxD,EAAMokB,cAAY3jB,OACpBuJ,EAAQtB,IAAK3L,OAAAi1B,EAAA,EAAAj1B,CACVopB,EAAOpkB,QAAQ+B,aACf/G,OAAAi1B,EAAA,EAAAj1B,CAAqBiD,EAAMokB,aAAapa,EAAQtB,KAChD,mBACHjI,MAGe,QAAjBuJ,EAAQxJ,KACRgD,EAAA,KACAxD,GACHukB,WAAY/gB,EAAA,KACLxD,EAAMukB,YAAU5hB,OAClBqH,EAAQtB,IAAK3L,OAAAi1B,EAAA,EAAAj1B,CACVopB,EAAOpkB,QAAQ+B,aACf/G,OAAAi1B,EAAA,EAAAj1B,CAAqBiD,EAAMukB,WAAWva,EAAQtB,KAC9C,cACH/F,MAINoH,GACR/J,GAGf,OAAOA,EACX,QACI,OAAOA,4FCjGNopB,KAEb/qB,EAAA,WAAgB2B,EAA6CmmB,GACzD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,EACAmmB,EAAOpkB,QAAQd,OAAO8X,eAEjC,KAAK0V,EAAA,EAKL,KAAKO,EAAA,EACD,OAAOxrB,EAAA,KACAxD,EACAmmB,EAAOpkB,QAAQgX,eAE1B,QACI,OAAO/Y,qFCxBNopB,KAEE/qB,EAAA,WAAC2B,EAAkCmmB,SAC9C,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,IAAKS,MACP0lB,EAAOpkB,QAAQ6Z,MAAMrS,UAAW4c,EAAOpkB,QAAQ6Z,MAAKnb,IAE7D,QACI,OAAOT,kCCjBnB/D,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAAE,EAAArtB,EAAA,GAAA62B,EAAA72B,EAAA,KAAA82B,EAAA92B,EAAA,KAAA+2B,EAAA/2B,EAAA,KAAAg3B,EAAAh3B,EAAA,KAAAi3B,EAAAj3B,EAAA,KAAAk3B,EAAAl3B,EAAA,KAiBamtB,GACTgK,UAAWN,EAAA,EACXO,SAAUN,EAAA,EACVO,YAAaN,EAAA,EACbznB,QAAS0nB,EAAA,EACTlwB,WAAYmwB,EAAA,EACZK,WAAYJ,EAAA,GAGD90B,EAAA,EAAAtB,OAAAusB,EAAA,kBACX8J,UAASN,EAAA,EACTO,SAAQN,EAAA,EACRO,YAAWN,EAAA,EACXznB,QAAO0nB,EAAA,EACPlwB,WAAUmwB,EAAA,EACVK,WAAUJ,EAAA,sHCjBD/J,GACToK,SAAS,EACThzB,KAAM,UAGKnC,EAAA,WAAC2B,EAAsCmmB,GAClD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHwzB,SAAS,IAEjB,KAAK/E,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHwzB,SAAS,EACThzB,KAAM,SACNoD,UAAMQ,IAEd,KAAK4qB,EAAA,EACD,OAAOxrB,EAAA,KACAxD,GACHQ,KAAM,OACNoD,KAAMuiB,EAAOpkB,UAErB,KAAKmpB,EAAA,EACD,OAAO1nB,EAAA,KACAxD,GACHQ,KAAM,SACNoD,UAAMQ,IAEd,KAAKyoB,EAAA,EACD,OAAOrpB,EAAA,KACAxD,GACHQ,KAAM,OACNoD,UAAMQ,IAEd,KAAK0gB,EAAA,EACD,MACmB,SAAf9kB,EAAMQ,MACJR,EAAM4D,OACPuiB,EAAOpkB,QAAQd,OAAOyC,QAAQR,OAAO,SAACU,GAAc,OAAA5D,EAAM4D,MAAQA,EAAK8E,KAAO1I,EAAM4D,KAAK8E,KAAI,GAEvFlF,EAAA,KACAxD,GACHwzB,SAAS,IAGVxzB,EACX,QACI,OAAOA,kCCjEnB/D,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAAqK,EAAAx3B,EAAA,KAAAy3B,EAAAz3B,EAAA,KAAAupB,EAAAvpB,EAAA,GAAA03B,EAAA13B,EAAA,IAYamtB,GACT7d,QAASkoB,EAAA,EACTna,KAAMoa,EAAA,EACNE,WAAW,EACXJ,SAAS,GAGEn1B,EAAA,EAAAtB,OAAAyoB,EAAA,kBACXja,QAAOkoB,EAAA,EACPna,KAAIoa,EAAA,EACJE,UAAW,SAAC5zB,EAAgBmmB,GACxB,OAAQA,EAAO3lB,MACX,KAAKmzB,EAAA,EACD,OAAO,EACX,KAAKA,EAAA,EACD,OAAO,EACX,QACI,OAAO3zB,IAGnBwzB,QAAS,SAACxzB,EAAgBmmB,GACtB,OAAQA,EAAO3lB,MACX,KAAKmzB,EAAA,EACD,OAAO,EACX,QACI,OAAO3zB,oCCrCvB/D,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAAyK,EAAA53B,EAAA,IAIamtB,GAAqC,EAEnC/qB,EAAA,WAAC2B,EAA6BmmB,GACzC,OAAQA,EAAO3lB,MACX,KAAKqzB,EAAA,EACD,OAAQ7zB,EACZ,QACI,OAAOA,kCCXnB/D,EAAAU,EAAA0B,EAAA,sBAAA+qB,IAAA,IAAAyK,EAAA53B,EAAA,IAAAkxB,EAAAlxB,EAAA,IAIamtB,GAAkC,EAEhC/qB,EAAA,WAAC2B,EAA0BmmB,GACtC,OAAQA,EAAO3lB,MACX,KAAKqzB,EAAA,EAEL,KAAK1G,EAAA,EAEL,KAAKA,EAAA,EACD,OAAQntB,EACZ,QACI,OAAOA,4FCCNopB,GACT0K,QAAS,OACThtB,OAAQ,SAGGzI,EAAA,WAAC2B,EAAwCmmB,GACpD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,WAEhB,KAAK2nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,YAEhB,KAAK2nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,WAEhB,KAAK2nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,YAEhB,KAAK2nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,YAEhB,KAAK2nB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH8G,OAAQ,gBAEhB,KAAKkoB,EAAA,EACD,OAAOxrB,EAAA,KACAxD,GACH8zB,QAA2B,UAAlB9zB,EAAM8zB,QAAsB,OAAS,UAEtD,KAAK9E,EAAA,EACD,OAAOxrB,EAAA,KACAxD,GACH8G,OAAQ,UAEhB,QACI,OAAO9G,4FCnDNopB,KAEb/qB,EAAA,WAAgB2B,EAAoCmmB,GAChD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAKiuB,EAAA,EACD,SACJ,KAAKA,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACH6iB,gBAAiBsD,EAAOpkB,QAAQR,UAExC,KAAKktB,EAAA,EACD,OAAOjrB,EAAA,KACAxD,GACHmjB,eAAgBgD,EAAOpkB,QAAQR,UAEvC,KAAKytB,EAAA,EACD,SACJ,QACI,OAAOhvB,oHCTNopB,GACT2K,WACA/wB,aAAc,GACdihB,gBAGW5lB,EAAA,WAAC2B,EAAuCmmB,GACnD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAK0qB,EAAA,EACD,OAAO1nB,EAAA,KACAxD,GACHgD,aAAc,KAEtB,KAAK6pB,EAAA,EACD,OAAOrpB,EAAA,KACAxD,GACHgD,aAAcmjB,EAAOpkB,QACrBkiB,YAAajkB,EAAM+zB,QAAQ7wB,OACvB,SAAC8wB,GAAa,OAA0B,IAA1B7N,EAAOpkB,QAAQ7C,QAAgB80B,EAAI12B,MAAMyW,QAAQoS,EAAOpkB,UAAY,MAG9F,KAAK8qB,EAAA,EACD,OAAO7sB,EACX,KAAK6sB,EAAA,EACD,GAAI1G,EAAOpkB,QAAQ+B,aAIf,GAHMmwB,EAAiB9N,EAAOpkB,QAAQ+B,aAAaC,OAAOb,OAAO,SAAC8I,GAAe,MACzD,SAApBA,EAAME,YACP,GACgB,CACf,IAAM6nB,EAwC1B,SAAsBG,EAAoBnH,GACtC,OAAOoH,EAAkBD,EAAY5xB,OAAOyqB,IAzCZqH,CAAap0B,EAAM+zB,QAASE,EAAc9nB,aAC1D,OAAO3I,EAAA,KACAxD,GACH+zB,QAAOA,EACP9P,YAAa8P,EAAQ7wB,OACjB,SAAC8wB,GAAa,OAA8B,IAA9Bh0B,EAAMgD,aAAa9D,QAAgB80B,EAAI12B,MAAMyW,QAAQ/T,EAAMgD,eAAiB,MAK1G,OAAOhD,EACX,KAAK6sB,EAAA,EACD,OAAO7sB,EACX,KAAK8kB,EAAA,EAEG,IAAMmP,EADV,GAAI9N,EAAOpkB,QAAQ+B,aAIf,GAHMmwB,EAAiB9N,EAAOpkB,QAAQ+B,aAAaC,OAAOb,OAAO,SAAC8I,GAAe,MACzD,SAApBA,EAAME,YACP,GACgB,CACT6nB,EAAUI,EAAkBF,EAAc9nB,aAChD,OAAO3I,EAAA,KACAxD,GACH+zB,QAAOA,EACP9P,YAAa8P,EAAQ7wB,OACjB,SAAC8wB,GAAa,OAA8B,IAA9Bh0B,EAAMgD,aAAa9D,QAAgB80B,EAAI12B,MAAMyW,QAAQ/T,EAAMgD,eAAiB,MAK1G,OAAOhD,EACX,QACI,OAAOA,IAgBnB,IAAMq0B,EAAsBt3B,OAAAkT,EAAA,EAAAlT,CAAgB,SAiBtCo3B,EAAoBp3B,OAAA+O,EAAA,EAAA/O,CACtBs3B,EAZa,SAAClnB,GAAiB,OAAAA,EAAMxJ,IAAI,SAAClD,OAAEnD,EAAAmD,EAAAnD,MAAO0O,EAAAvL,EAAAuL,MAAiB,OAAG1O,MAAOA,EAAMg3B,OAAQtoB,MAAKA,MAM1E,SAACmB,GAAiB,OAAAA,EAAMmM,KAAK,SAACyH,EAAQtiB,GAAW,OAAAA,EAAEuN,MAAQ+U,EAAE/U,kGCrG3Eod,GACTzQ,KAAM,EACNK,gBACAlS,OAAQ,WAGZzI,EAAA,WAAgB2B,EAAuCmmB,GACnD,YADY,IAAAnmB,MAAAopB,GACJjD,EAAO3lB,MACX,KAAK+zB,EAAA,EACD,OAAO/wB,EAAA,KACAxD,GACH8G,OAAQ,YAEhB,KAAKytB,EAAA,EACD,OAAO/wB,EAAA,KACAxD,GACHgZ,aAAcmN,EAAOpkB,QAAQiX,aAC7BL,KAAMwN,EAAOpkB,QAAQ4W,KACrB7R,OAAQ,YAEhB,KAAKytB,EAAA,EACD,OAAO/wB,EAAA,KACAxD,GACH8G,OAAQ,WAEhB,KAAK+rB,EAAA,EACD,OAAOrvB,EAAA,KACAxD,GACHgZ,aAAcmN,EAAOpkB,QAAQd,OAAOyC,QACpCoD,OAAQ,UACR6R,KAAM,IAEd,QACI,OAAO3Y,kCC3CnB/D,EAAAU,EAAA0B,EAAA,sBAAAm2B,IAAA,IAAAC,EAAAx4B,EAAA,IAAAyV,EAAAzV,EAAA,GAgBau4B,EAAkBz3B,OAAA2U,EAAA,EAAA3U,CAAM,SACjC4G,EACAuV,EACA5Q,GAEA,IAAM9B,EAAW0S,EAAQ6I,eACnB4G,EAAmBzP,EAAQyP,iBAC3BC,EAAe1P,EAAQ0P,aAC7B,OAAMpiB,EAEK8B,EAAChG,QACDqB,EAAI6C,EAASlJ,OAAM,SAASo3B,EAAyB/L,IACpDC,EACI,QAAQA,EAAY,IACpB,IAAE,MAGPA,EACKtgB,EAAChG,QAAE,IAAIoyB,EAAyB/L,GAAiB,QAAQC,EAAY,OAEzEtgB,EAAChG,QAAEoyB,EAAyB/L,OAO5C,SAAS+L,EAAyB/L,GAC9B,IAAMgM,EAAiBF,EAAA,EAClBvxB,OAAO,SAAC1C,GAAS,OAAoC,IAApCmoB,EAAiB5U,QAAQvT,KAC1C0C,OAAO,SAAC1C,GAAS,OAAAmoB,EAAiB7e,OAC/B,SAACC,EAAiBC,GACd,OAAIxJ,EAAKuT,QAAQ/J,IAAY,GAGtBD,IAEX,KAER,MAAO,WAAW4e,EAAiBhP,KAAK,eAAgB,MACpDgb,EAAez1B,OAAS,EACpB,gBAAgBy1B,EAAehb,KAAK,iBAAkB,KACtD,IAAE,mCC1Dd,IAAAib,EAAA34B,EAAA,IAAAA,EAAAU,EAAA0B,EAAA,sBAAAu2B,EAAA,QAAAlG,EAAAzyB,EAAA,KAAAA,EAAAU,EAAA0B,EAAA,sBAAAqwB,EAAA,kCCAA,IAAAmG,EAAA54B,EAAA,KAAAA,EAAAU,EAAA0B,EAAA,sBAAAw2B,EAAA,kCCAA,IAAAC,EAAA74B,EAAA,IAAAA,EAAAU,EAAA0B,EAAA,sBAAAy2B,EAAA,qCCAA14B,EAAAD,QAAA44B,sFCmCAC,EAAA,SAAAjW,GACI,SAAAiW,EAAYhW,UACRD,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,KAuBpB,OAzB8B0E,EAAA,EAAAwxB,EAAAjW,GAKnBiW,EAAA/2B,UAAAqiB,OAAP,SAAcC,GACV,OACIA,EAAA,OAAK7X,GAAG,yBAAyBusB,QAASn2B,KAAKkgB,MAAMkW,iBAAkBt3B,IAAI,eACvE2iB,EAAC4U,EAAApU,GACGyS,QAAS10B,KAAKkgB,MAAMwU,QACpB51B,IAAI,iBACJw3B,YAESt2B,KAAKkgB,MAAMqW,iBACXv2B,KAAKkgB,MAAMsW,cAEfC,OAAOC,WAAW,sBAAsBC,SAG7ClV,EAACmV,EAAA,GAAO93B,IAAI,uBACZ2iB,EAACoV,EAAA,GAAK/3B,IAAI,wBAK9Bo3B,EAzBA,CAA8BY,EAAA,WAoCfv3B,EAAA,EAAAtB,OAAA64B,EAAA,QAAA74B,CACX,SAACiD,GAAU,OACPwzB,QAASxzB,EAAM8C,GAAGuwB,SAASG,QAC3B6B,eAAgBr1B,EAAM8C,GAAGuwB,SAAS9nB,QAClC+pB,YAAat1B,EAAM8C,GAAGuwB,SAAS/Z,OAEnC,WAAM,UANK,CAOb0b,kBC9EF54B,EAAAD,QAAA05B,mFCoCAC,EAAA,SAAA/W,GACI,SAAA+W,EAAY9W,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAKsuB,eAAiBtuB,EAAKsuB,eAAel4B,KAAK4J,GAC/CA,EAAKuuB,YAAcvuB,EAAKuuB,YAAYn4B,KAAK4J,KAsDjD,OA3D4BjE,EAAA,EAAAsyB,EAAA/W,GAQjB+W,EAAA73B,UAAAqiB,OAAP,SAAcC,GACV,OACIA,EAAA,UAAQsE,MAAM,kBACVtE,EAAA,OAAKsE,MAAM,gCACPtE,EAAA,MAAIsE,MAAM,wBAAwB/lB,KAAKkgB,MAAMsO,aAEf,eAA1BxuB,KAAKkgB,MAAM6O,WAEHtN,EAAC0V,EAAAlV,GACGnjB,IAAI,eACJs4B,WAAW,EACXC,YAAar3B,KAAKi3B,gBAElBxV,EAAA,OACI6V,MAAM,KACNC,OAAO,KACPC,QAAQ,aAER/V,EAAA,QAAM5jB,EAAE,uQAIhB4jB,EAAC0V,EAAAlV,GACGnjB,IAAI,iBACJs4B,WAAW,EACXC,YAAar3B,KAAKk3B,YAClBppB,MAAOqU,EAAA,OAEPV,EAAA,OACI6V,MAAM,KACNC,OAAO,KACPC,QAAQ,aAER/V,EAAA,QAAM5jB,EAAE,sIAMhC4jB,EAACgW,EAAA,GAAY34B,IAAI,+BAKrBk4B,EAAA73B,UAAA83B,eAAR,WACIj3B,KAAKkgB,MAAMqP,UAGPyH,EAAA73B,UAAA+3B,YAAR,WACIl3B,KAAKkgB,MAAMqP,UAEnByH,EA3DA,CAA4BtQ,EAAA,WAyEbnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACPstB,YAAattB,EAAME,SAASiB,OAAOmsB,YACnCO,WAAY7tB,EAAME,SAASiB,OAAO0sB,WAClCQ,OAAQ,WACAruB,EAAME,SAASiB,OAAOktB,QACtBruB,EAAME,SAASiB,OAAOktB,YAIlC,WAAM,UAVK,CAWbyH,2FC7DFU,EAAA,SAAAzX,GACI,SAAAyX,EAAYxX,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAKzH,OACDkZ,SACKzR,EAAKuX,MAAMxd,KACRiG,EAAKuX,MAAM4O,aACXnmB,EAAKuX,MAAM4O,aAAa1qB,OAAO,SAAC3B,GAAY,MAAa,gBAAZA,GAAyC,QAAZA,KAE7EoC,IAAI,SAAC4I,GAAa,OACfjP,MAAOiP,EACPyU,KAAMC,EAAA,OAAYwV,cAAclqB,MAChCjK,OAAOmF,EAAKuX,MAAM9c,eAAeyB,IAAI,SAAC0X,GAAuB,OAC7D/d,MAAO+d,EAAcze,KACrBokB,KAAM3F,EAAcze,UAIhC6K,EAAKivB,gBAAkBjvB,EAAKivB,gBAAgB74B,KAAK4J,KAkBzD,OArCiCjE,EAAA,EAAAgzB,EAAAzX,GAsBtByX,EAAAv4B,UAAAqiB,OAAP,SAAcC,GACV,OACIA,EAACoW,EAAA5V,GACGnjB,IAAI,kBACJsb,QAASpa,KAAKkB,MAAMkZ,QACpBtK,SAAU9P,KAAK43B,gBACfE,oBAAqB93B,KAAKkgB,MAAMhC,kBAKpCwZ,EAAAv4B,UAAAy4B,gBAAR,SAAwBn1B,GACpBzC,KAAKkgB,MAAM7B,oBAAoB5b,GAC/BzC,KAAKkgB,MAAM/d,QAAO,IAE1Bu1B,EArCA,CAAiChR,EAAA,WAsDlBnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACPwB,KAAMxB,EAAME,SAASC,MAAMsB,OAAOD,KAClCosB,aAAc5tB,EAAME,SAASiB,OAAOysB,aACpC1rB,eAAgBlC,EAAME,SAASiB,OAAOe,eACtC8a,eAAgBhd,EAAMK,WAAWkB,UAErC,SAACzB,GAAa,OACVqd,oBAAqB,SAAC5b,GAAsBzB,EAAS/C,OAAAmuB,EAAA,EAAAnuB,CAAoBwE,KACzEN,OAAQ,SAACC,GAA6BpB,EAAS/C,OAAA8vB,EAAA,EAAA9vB,CAAOmE,OAT/C,CAWbs1B,kBC5HFp6B,EAAAD,QAAA06B,yKCgFAC,EAAA,SAAA/X,GACI,SAAA+X,EAAY9X,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAKsvB,iBAAmBtvB,EAAKsvB,iBAAiBl5B,KAAK4J,GACnDA,EAAKuvB,yBAA2BvvB,EAAKuvB,yBAAyBn5B,KAAK4J,KA2F3E,OAhGmBjE,EAAA,EAAAszB,EAAA/X,GAQR+X,EAAA74B,UAAAqiB,OAAP,SAAcC,GAEV,IAAM0W,EAAkBn4B,KAAKkgB,MAAMkY,sBAC7BC,GACFC,mBAAmB,EACnBC,mBAAmB,EACnBC,2BAA4BL,EAC5BM,2BAA4BN,GAG1BO,EAAsC,YAA5B14B,KAAKkgB,MAAMyY,cACS,YAAhC34B,KAAKkgB,MAAM0Y,iBAETC,GACFC,mBAAmB,EACnBC,yBAA0BL,EAC1BM,+BAAgCN,GAAkD,IAAvC14B,KAAKkgB,MAAM+Y,iBAAiB74B,QAGrE84B,EAAWC,KAAKC,KAClBp5B,KAAKkgB,MAAMmZ,UAAY,IACvB,IAAQr5B,KAAKkgB,MAAMnG,gBACnB/Z,KAAKkgB,MAAMmZ,UACXr5B,KAAKkgB,MAAMnG,iBAGf,OACI0H,EAAA,QAAMsE,MAAM,gBACRtE,EAAC6X,EAAA,GAAWx6B,IAAI,wBAChB2iB,EAAA,OAAKsE,MAAM,eACPtE,EAAA,WAAS0U,QAASkC,EAAev5B,IAAI,sBACjC2iB,EAAC8X,EAAA,EAAU,OAEf9X,EAAA,OAAKsE,MAAM,2BACPtE,EAAC+X,EAAAvX,GACGnjB,IAAI,qBACJ26B,WAAW,EACXC,KAAM15B,KAAKkgB,MAAMkY,sBACjBuB,QAAS35B,KAAKk4B,yBACdpqB,MAAM,SACN8rB,OACInY,EAAA,UACIsE,MAAM,6BACN8T,QAAS75B,KAAKk4B,0BAEb/V,EAAA,cAITV,EAACqY,EAAA,GAAQh7B,IAAI,qBAGrB2iB,EAAA,WAASsE,MAAM,kCAAkCjnB,IAAI,mBACjD2iB,EAAA,OAAK0U,QAAS0C,GACVpX,EAACsY,EAAA,GAAUj7B,IAAI,2BACf2iB,EAACuY,EAAA,GAAYl7B,IAAI,6BAEbo6B,EAAW,EACXzX,EAACwY,EAAAhY,GACGnjB,IAAI,oBACJo7B,aAAcl6B,KAAKi4B,iBACnBiB,SAAUA,EACViB,YAAan6B,KAAKkgB,MAAMia,YACxBC,uBAAwBp6B,KAAKkgB,MAAMmZ,UAAY,MAEnD,MAIJX,EACIjX,EAAA,OAAKsE,MAAM,wBAAwBjnB,IAAI,yBACnC2iB,EAAC4Y,EAAApY,GAAWnjB,IAAI,qBAEpB,SAQpBk5B,EAAA74B,UAAA84B,iBAAR,SAAyBpe,GACrB7Z,KAAKkgB,MAAMzG,WAAWI,IAGlBme,EAAA74B,UAAA+4B,yBAAR,WACIl4B,KAAKkgB,MAAM3L,yBAEnByjB,EAhGA,CAAmBtR,EAAA,WAoHJnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACPk3B,sBAAuBl3B,EAAM8C,GAAGuwB,SAAS9nB,QACzCksB,aAAcz3B,EAAM8C,GAAGwwB,YAAYxsB,OACnC4wB,iBAAkB13B,EAAM8C,GAAGywB,WAAWzsB,OACtCixB,iBAAkB/3B,EAAM8C,GAAGywB,WAAWva,aACtCigB,YAAaj5B,EAAM8C,GAAGywB,WAAW5a,KACjCwf,UAAWn4B,EAAMK,WAAWC,UAAU8I,MACtCyP,gBAAiB7Y,EAAME,SAASiB,OAAO0X,kBAE3C,SAAC/Y,GAAa,OACVyY,WAAY,SAACI,GAAmB7Y,EAAS/C,OAAAq8B,EAAA,EAAAr8B,CAAW4b,KACpDtF,sBAAuB,WAAQvT,EAAS/C,OAAAs8B,EAAA,EAAAt8B,OAZjC,CAcb+5B,kBClNF16B,EAAAD,QAAAm9B,0HC6GMC,GAAkB,YAAa,QAAS,QAAS,UAAW,WAAY,YACxEC,GACFnK,WAAa,WAAY,SACzBC,aAAe,YAAa,WAAY,QAAS,WAAY,SAC7DC,UAAY,YAAa,WAAY,QAAS,WAAY,SAC1DC,gBAAkB,YAAa,WAAY,QAAS,WAAY,SAChEvU,aAAe,YAAa,WAAY,QAAS,WAAY,SAC7DwU,KAAO,YAAa,QAAS,QAAS,WAAY,aAMtDgK,EAAA,SAAA1a,GACI,SAAA0a,EAAYza,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAKiyB,oBAAsBjyB,EAAKiyB,oBAAoB77B,KAAK4J,GACzDA,EAAKkyB,mBAAqBlyB,EAAKkyB,mBAAmB97B,KAAK4J,GACvDA,EAAKmyB,oBAAsBnyB,EAAKmyB,oBAAoB/7B,KAAK4J,GACzDA,EAAKoyB,sBAAwBpyB,EAAKoyB,sBAAsBh8B,KAAK4J,GAC7DA,EAAKqyB,sBAAwBryB,EAAKqyB,sBAAsBj8B,KAAK4J,GAC7DA,EAAKsyB,gBAAkBtyB,EAAKsyB,gBAAgBl8B,KAAK4J,KA+FzD,OAxGgCjE,EAAA,EAAAi2B,EAAA1a,GAYrB0a,EAAAx7B,UAAAqiB,OAAP,SAAcC,GACV,IAAMyZ,EAAcl7B,KAAKkgB,MAAMib,sBAC3Bn7B,KAAKkgB,MAAMib,sBACXhZ,EAAA,mBAAwBiZ,QAEtB34B,EAAUzC,KAAKkgB,MAAMzd,QACvB44B,EACAX,EAAoBj4B,GACfi4B,EAAoBj4B,GAAQyC,QAC5Bu1B,EAAcv1B,QACvB,OACIuc,EAAA,OAAKsE,MAAM,gCACPtE,EAAA,OAAK6V,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAChC/V,EAAA,QACI5jB,EAAE,sQACFy9B,KAAK,UAASC,YACJ,aAGlB9Z,EAAA,SACI7X,GAAG,2BACHmc,MAAM,2BACNrkB,KAAK,SACL85B,QAASx7B,KAAK66B,mBACdY,UAAWz7B,KAAK86B,oBAChBt8B,MAAOwB,KAAKkgB,MAAMuI,aAClByS,YAAaA,EACbptB,MAAOqU,EAAA,OAAYhgB,OAAMu5B,aACbvZ,EAAA,OAAYhgB,SAE5Bsf,EAAA,OAAKsE,MAAM,kCACPtE,EAACka,EAAA1Z,GACG2Z,OAAQ57B,KAAKkgB,MAAM2b,WACnB/8B,IAAI,sBACJwc,MAAOtb,KAAKkgB,MAAM9V,UAClBqQ,MAAOza,KAAKkgB,MAAM7V,UAClByxB,gBAAiBT,EACjBU,cAAe/7B,KAAK+6B,sBACpBiB,cAAeh8B,KAAKg7B,sBACpBnV,QAAS7lB,KAAKi7B,kBAElBxZ,EAACwa,EAAAha,GACGnjB,IAAI,mBACJ88B,OAAQ57B,KAAKkgB,MAAMkY,sBACnBf,YAAar3B,KAAK46B,qBAElBnZ,EAAA,OAAKsE,MAAM,sBACPtE,EAAA,OAAK6V,MAAM,OAAOC,OAAO,OAAOC,QAAQ,aACpC/V,EAAA,KAAGya,OAAO,OAAMC,eAAc,KAC1B1a,EAAA,KAAG7X,GAAG,yBACF6X,EAAA,QAAM5jB,EAAE,qQAIpB4jB,EAAA,QAAMsE,MAAM,uBAAuB5D,EAAA,WAAgB/d,aAQnEu2B,EAAAx7B,UAAAy7B,oBAAR,WACI56B,KAAKkgB,MAAM3L,yBAGPomB,EAAAx7B,UAAA07B,mBAAR,SAA2BhN,GACvB7tB,KAAKkgB,MAAMsI,mBAAmBqF,EAAEC,OAAOtvB,OAChB,KAAnBqvB,EAAEC,OAAOtvB,OAAoD,KAApCwB,KAAKkgB,MAAMkc,sBACpCp8B,KAAKkgB,MAAM/d,QAAO,IAIlBw4B,EAAAx7B,UAAA27B,oBAAR,SAA4BjN,GACV,UAAVA,EAAE/uB,KACFkB,KAAKkgB,MAAM/d,QAAO,IAIlBw4B,EAAAx7B,UAAA47B,sBAAR,SAA8Bzf,GAC1Btb,KAAKkgB,MAAMnM,gBAAgBuH,GAC3Btb,KAAKkgB,MAAM/d,UAGPw4B,EAAAx7B,UAAA67B,sBAAR,SAA8BvgB,GAC1Bza,KAAKkgB,MAAMpM,gBAAgB2G,GAC3Bza,KAAKkgB,MAAM/d,UAGPw4B,EAAAx7B,UAAA87B,gBAAR,WACIj7B,KAAKkgB,MAAM1L,sBAEnBmmB,EAxGA,CAAgCjU,EAAA,WAiIjBnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACPi6B,sBAAuBj6B,EAAME,SAASiB,OAAO84B,sBAC7C14B,QAASvB,EAAMK,WAAWkB,QAC1BgmB,aAAcvnB,EAAMK,WAAWknB,aAAavd,QAC5CkxB,qBAAsBl7B,EAAMK,WAAWknB,aAAa0H,SACpD0L,WAAY36B,EAAM8C,GAAGuwB,SAAS/Z,KAC9BpQ,UAAWlJ,EAAMK,WAAWiZ,KAAKc,MACjCjR,UAAWnJ,EAAMK,WAAWiZ,KAAKC,MACjC2d,sBAAuBl3B,EAAM8C,GAAGuwB,SAAS9nB,UAE7C,SAACzL,GAAa,OACVuT,sBAAuB,WAAQvT,EAAS/C,OAAA8vB,EAAA,EAAA9vB,KACxCuW,mBAAoB,WAAQxT,EAAS/C,OAAA8vB,EAAA,EAAA9vB,KACrC8V,gBAAiB,SAACuH,GAAuBta,EAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAgBqd,KAClExH,gBAAiB,SAAC2G,GAAuBzZ,EAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAgBwc,KAClE+N,mBAAoB,SAAC6T,GAAwBr7B,EAAS/C,OAAAgoB,EAAA,EAAAhoB,CAAmBo+B,KACzEl6B,OAAQ,SAACC,GAA6BpB,EAAS/C,OAAAwoB,EAAA,EAAAxoB,CAAOmE,OAjB/C,CAmBbu4B,iCC7QF,IAAA2B,EAAAn/B,EAAA,IAKeoC,EAAA,WAACoC,EAAI8f,GAAW,OAAAA,EAAC6a,EAAA,GAAQx9B,IAAI,wCCN5CxB,EAAAD,QAAAk/B,iBCAAj/B,EAAAD,QAAAm/B,iBCAAl/B,EAAAD,QAAAo/B,iBCAAn/B,EAAAD,QAAAq/B,iBCAAp/B,EAAAD,QAAAs/B,iBCAAr/B,EAAAD,QAAAu/B,iBCAAt/B,EAAAD,QAAAw/B,iBCAAv/B,EAAAD,QAAAy/B,iBCAAx/B,EAAAD,QAAA0/B,gCCEO,SAASC,EAAW97B,GACvB,IAIIuL,EAJE/J,EAAOxB,EAAME,SAASC,MAAMsB,OAAOD,KACnCu6B,GAAav6B,EACbw6B,GAAcD,IAAcv6B,EAAKe,MAUvC,OANIgJ,GAHawwB,IAAcC,EAuBnC,SAA2Bh8B,GACvB,OAAQA,EAAMK,WAAWkB,SACrB,IAAK,YACD,OAAS,SAAU,gBAAiB,WAAY,WAAY,UAAW,OAAQ,SAAU,UAC7F,IAAK,cACD,OAAS,WAAY,WAAY,UAAW,OAAQ,SAAU,UAClE,IAAK,WACD,OAAS,kBAAmB,QAAS,WAAY,WAAY,UAAW,OAAQ,SAAU,UAC9F,IAAK,iBACD,OAAS,gBAAiB,WAAY,WAAY,UAAW,OAAQ,SAAU,UACnF,IAAK,cACD,OAAS,wBAAyB,oBAAqB,WAAY,OAAQ,UAC/E,IAAK,MACD,OAAS,WAAY,WAAY,SAAU,UAC/C,QACI,OAAO06B,EAAwBj8B,IAnCzBk8B,CAAkBl8B,GACrBg8B,EAsCf,SAA8Bh8B,GAC1B,OAAQA,EAAMK,WAAWkB,SACrB,IAAK,YACD,OAAS,SAAU,WAAY,WAAY,UAAW,OAAQ,UAClE,IAAK,cACD,OAAS,WAAY,WAAY,UAAW,OAAQ,UACxD,IAAK,WACD,OAAS,kBAAmB,QAAS,WAAY,WAAY,OAAQ,WACzE,IAAK,cACD,OAAS,wBAAyB,oBAAqB,WAAY,OAAQ,UAC/E,IAAK,MACD,OAAS,WAAY,WAAY,UACrC,QACI,OAAO06B,EAAwBj8B,IAlDzBm8B,CAAqBn8B,GAsDvC,SAAwBA,GACpB,OAAQA,EAAMK,WAAWkB,SACrB,IAAK,cACD,OAAS,wBAAyB,oBAAqB,WAAY,OAAQ,UAC/E,IAAK,MACD,OAAS,WAAY,WAAY,UACrC,QACI,OAAO06B,EAAwBj8B,IA3DzBo8B,CAAep8B,GAQjC,SAA8BkuB,EAAiC3iB,GAC3D,IAAM8wB,EAAgB9wB,EAAQwI,QAAQ,YAClCma,GAA0BmO,GAAiB,GAC3C9wB,EAAQ+wB,OAAOD,EAAe,GAElC,OAAO9wB,EAXAgxB,CACHv8B,EAAME,SAASiB,OAAO+sB,uBACtB3iB,GA2DR,SAAS0wB,EAAwBj8B,GAC7B,OAAOA,EAAME,SAASiB,OAAOe,eAAe4H,OAAO,SAACC,EAAeC,GAC/D,OAAIA,EAAQpN,OAASoD,EAAMK,WAAWkB,SAAayI,EAAQuB,QAChDvB,EAAQuB,QAEZxB,IACN,WAAY,WAAY,WAhFjC9N,EAAAU,EAAA0B,EAAA,sBAAAy9B,uFC4CAU,EAAA,SAAAzd,GACI,SAAAyd,EAAYxd,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAKg1B,YAAch1B,EAAKg1B,YAAY5+B,KAAK4J,GACzCA,EAAK0uB,YAAc1uB,EAAK0uB,YAAYt4B,KAAK4J,KAoDjD,OAzDmDjE,EAAA,EAAAg5B,EAAAzd,GAQxCyd,EAAAv+B,UAAAqiB,OAAP,SAAcC,GAAd,IAAA9Y,EAAA3I,KACUoE,EAASpE,KAAKkgB,MAAM9b,OAE1B,OACIqd,EAACmc,EAAA3b,GACGnjB,IAAQsF,EAAO4J,YAAW,oBAC1B6vB,WAAW,EACXjY,QAAS5lB,KAAK29B,YACd7vB,MAAO1J,EAAO4J,aAEdyT,EAAA,MAAAia,aACgBt3B,EAAO4J,YACnBpE,GAAOxF,EAAO4J,YAAW,yBACzB+X,MAAM,mBACN+X,KAAK,QAGD15B,EAAO+J,SACP/J,EAAO+J,SAAStJ,IAAI,SAACk5B,GAA6B,OAC9Ctc,EAACuc,EAAA/b,GACGnjB,IAAKi/B,EAAOv/B,MACZA,MAAOu/B,EAAOv/B,MACdV,KAAMigC,EAAO/vB,YACbiwB,cAAet1B,EAAK0uB,YACpB6G,eAAgBv1B,EAAKuX,MAAM4F,eAC3BqY,aAAcJ,EAAO5vB,aAExB,QAOjBuvB,EAAAv+B,UAAAw+B,YAAR,WACI39B,KAAKkgB,MAAM0F,QAAQ5lB,KAAKkgB,MAAMzY,QAG1Bi2B,EAAAv+B,UAAAk4B,YAAR,SAAoB74B,EAAe0jB,GAC3B1jB,IAAUwB,KAAKkgB,MAAM4F,eACrB9lB,KAAKkgB,MAAM2F,QAAQ7lB,KAAKkgB,MAAMzY,WAAOnC,GAErCtF,KAAKkgB,MAAM2F,QACP7lB,KAAKkgB,MAAMzY,MACXjJ,EACA0jB,IAIhBwb,EAzDA,CAAmD5G,EAAA,gCC9CnDx5B,EAAAD,QAAA+gC,kECkCAC,EAAA,SAAApe,GAAA,SAAAoe,mDAiBA,OAjB+B35B,EAAA,EAAA25B,EAAApe,GACpBoe,EAAAl/B,UAAAqiB,OAAP,SAAcC,GAKV,OACIA,EAAA,OAAKsE,MAAM,yBAAyBjnB,IAAI,6BACpC2iB,EAAA,QAAMsE,MAAM,kCALhB/lB,KAAKkgB,MAAMmZ,UAAUiF,iBAAgB,KAAIt+B,KAAKkgB,MAAMqe,SAAWv+B,KAAKkgB,MAAMqe,SAAWpc,EAAA,cAMjFV,EAAC+c,EAAA,GACGC,cAAez+B,KAAKkgB,MAAMue,cAC1B3/B,IAAI,wBACJ6uB,MAAM,WAK1B0Q,EAjBA,CAA+B3X,EAAA,WA4BhBnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACPq9B,SAAUr9B,EAAME,SAASiB,OAAOk8B,SAChClF,UAAWn4B,EAAMK,WAAWC,UAAU8I,MACtCm0B,cAAev9B,EAAME,SAASiB,OAAOo8B,gBAEzC,WAAM,UANK,CAObJ,kBCrEF/gC,EAAAD,QAAAqhC,kECuBAC,EAAA,SAAA1e,GAAA,SAAA0e,mDAqBA,OArBiCj6B,EAAA,EAAAi6B,EAAA1e,GACtB0e,EAAAx/B,UAAAqiB,OAAP,SAAcC,GACV,MACiC,YAA5BzhB,KAAKkgB,MAAMyY,cAA0D,YAA5B34B,KAAKkgB,MAAMyY,cAC1B,YAA1B34B,KAAKkgB,MAAM0e,YAAsD,YAA1B5+B,KAAKkgB,MAAM0e,WAKnDnd,EAAA,OACI3iB,IAAI,gBACJinB,MAAM,eAENtE,EAAA,OAAKsE,MAAM,iCACPtE,EAAA,QAAMsE,MAAM,uBACP5D,EAAA,QAAa0c,gBATnBpd,EAACqd,EAAA,GAAShgC,IAAI,qBAejC6/B,EArBA,CAAiCjY,EAAA,WA+BlBnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACPy3B,aAAcz3B,EAAM8C,GAAGwwB,YAAYxsB,OACnC42B,WAAY19B,EAAM8C,GAAGywB,WAAWzsB,SAEpC,WAAM,UALK,CAMb22B,oFCpCFI,EAAA,SAAA9e,GAAA,SAAA8e,mDAiDA,OAjDuBr6B,EAAA,EAAAq6B,EAAA9e,GACZ8e,EAAA5/B,UAAAqiB,OAAP,SAAcC,GAAd,IAAA9Y,EAAA3I,KACU2C,EAAS1E,OAAAswB,EAAA,EAAAtwB,CAAiB+B,KAAKkgB,MAAMwB,WAErC7P,EAAQ7R,KAAKkgB,MAAMwB,UAAU1d,GAAGywB,WAAWva,aAAarV,IAAI,SAACC,GAE/D,IAAMyO,EACqB,yBAAvBzO,EAAKuS,eACL1O,EAAKuX,MAAMwB,UAAU9c,QAAQwjB,iBAAiBtjB,EAAKrB,OACnDkF,EAAKuX,MAAMwB,UAAU9c,QAAQwjB,iBAAiBtjB,EAAKrB,YAAS6B,EAEhE,OACImc,EAACud,EAAA/c,GACGnjB,IAAKgG,EAAK8E,GACV9E,KAAMA,EACNyO,aAAcA,EACd5Q,OAAQA,EACRs8B,WAAYt2B,EAAKuX,MAAMwB,UAAUtgB,SAASiB,OAAOyN,SACjD4e,gBAAiB/lB,EAAKuX,MAAMwB,UAAUtgB,SAASiB,OAAOqsB,gBACtDpH,cAAe3e,EAAKuX,MAAMwB,UAAUtgB,SAASiB,OAAOilB,cACpDld,UAAWzB,EAAKuX,MAAMwB,UAAUngB,WAAWiZ,KAAKc,UAK5D,OAAIzJ,EAAMzR,OAAS,EAEXqhB,EAAA,OAAK3iB,IAAKkB,KAAKkgB,MAAMphB,IAAKinB,MAAM,4BAC3BlU,GAKT4P,EAAA,OAAK3iB,IAAKkB,KAAKkgB,MAAMphB,IAAKinB,MAAM,4BAC5BtE,EAAA,OAAKsE,MAAM,qCACPtE,EAAA,OAAKsE,MAAM,oCACPtE,EAAA,OAAK+V,QAAQ,cAAcF,MAAM,OAC7B7V,EAAA,QACI6Z,KAAK,OACLz9B,EAAE,4XAIV4jB,EAAA,KAAGsE,MAAM,gCAAgC5D,EAAA,QAAa+c,kBAM9EH,EAjDA,CAAuBrY,EAAA,WA0DRnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OAAGwgB,UAAWxgB,IACzB,WAAM,UAFK,CAGb69B,kBCrFFzhC,EAAAD,QAAA8hC,qGC8DAC,EAAA,SAAAnf,GACI,SAAAmf,EAAYlf,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAK02B,uBAAyB12B,EAAK02B,uBAAuBtgC,KAAK4J,KA2FvE,OA/FwBjE,EAAA,EAAA06B,EAAAnf,GAObmf,EAAAjgC,UAAAqiB,OAAP,SAAcC,GACV,IAuBI6d,EAvBEC,EAAcv/B,KAAKkgB,MAAM8O,gBACzBwQ,EAAWx/B,KAAKkgB,MAAMuf,cACtB/K,EAAU10B,KAAKkgB,MAAMwU,QAErB0B,GACFsJ,+BAAgChL,EAChCiL,+BAAgCjL,EAChCkL,6BAA8C,WAAhBL,EAC9BM,8BAA+C,YAAhBN,GAG7BO,GAEFC,2BAA4C,WAAhBR,EAC5BS,8BAA+BtL,GAA2B,WAAhB6K,EAC1CU,6BAA8BvL,GAA2B,WAAhB6K,EAGzCW,4BAA6C,YAAhBX,EAC7BY,6BAA8BzL,GAA2B,YAAhB6K,EACzCa,8BAA+B1L,GAA2B,YAAhB6K,GAI9C,GAAiB,SAAbC,EACAF,EAAU7d,EAAC4e,EAAA,GAASvhC,IAAI,mBACrB,GAAiB,WAAb0gC,EACPF,EAAU7d,EAAC6e,EAAA,GAAWxhC,IAAI,qBACvB,GAAiB,SAAb0gC,GAAuBx/B,KAAKkgB,MAAMqgB,cACzCjB,EACI7d,EAAC+e,EAAA,GACG1hC,IAAKkB,KAAKkgB,MAAMqgB,cAAc32B,GAC9B9E,KAAM9E,KAAKkgB,MAAMqgB,qBAGtB,GAAiB,WAAbf,EACP,OAGJ,OACI/d,EAACgf,EAAA,GACG3hC,IACiB,SAAb0gC,GAAuBx/B,KAAKkgB,MAAMqgB,cAClC,GAAGvgC,KAAKkgB,MAAMqgB,cAAc32B,GAC5B41B,EAEJpJ,iBAAkBA,EAClB0J,eAAgBA,EAChB5I,YAAal3B,KAAKq/B,uBAClBqB,KAAMve,EACNzgB,KAAM89B,GAELF,IAKNF,EAAAjgC,UAAAwhC,0BAAP,SAAiCC,GAAjC,IAAAj4B,EAAA3I,KACI,IAAKA,KAAKkgB,MAAMwU,SAAakM,EAAUlM,QAAS,CAC5C,GACiC,SAA7B10B,KAAKkgB,MAAMuf,eACXz/B,KAAKkgB,MAAMqgB,cACb,CACE,IAAMM,EAAYC,SAASC,eAAe,QAAQ/gC,KAAKkgB,MAAMqgB,cAAc32B,GAAE,eACzEi3B,GACAA,EAAUG,aAEX,GAAiC,WAA7BhhC,KAAKkgB,MAAMuf,cAA4B,CAC9C,IAAMwB,EAAYH,SAASC,eAAe,iBACtCE,GACAA,EAAUD,aAEX,GAAiC,SAA7BhhC,KAAKkgB,MAAMuf,cAA0B,CAC5C,IAAMyB,EAAUJ,SAASC,eAAe,eACpCG,GACAA,EAAQF,QAGhBxuB,WAAW,WACP7J,EAAKuX,MAAMihB,+BACZ,OAIH/B,EAAAjgC,UAAAkgC,uBAAR,WACIr/B,KAAKkgB,MAAMvB,oBAEnBygB,EA/FA,CAAwB1Y,EAAA,WA+GTnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACP8tB,gBAAiB9tB,EAAME,SAASiB,OAAO2sB,gBACvCyQ,cAAev+B,EAAM8C,GAAGswB,UAAU5yB,KAClC6+B,cAAer/B,EAAM8C,GAAGswB,UAAUxvB,OAEtC,SAAC9D,GAAa,OACV2d,iBAAkB,WAAQ3d,EAAS/C,OAAAmuB,EAAA,EAAAnuB,KACnCkjC,4BAA6B,WAAQngC,GAAWU,KAAM0qB,EAAA,OAR/C,CAUbgT,0FCxII3E,GAAkB,YAAa,QAAS,QAAS,UAAW,WAAY,YACxEC,GACFnK,WAAa,WAAY,SACzBC,aAAe,YAAa,WAAY,QAAS,WAAY,SAC7DC,UAAY,YAAa,WAAY,QAAS,WAAY,SAC1DC,gBAAkB,YAAa,WAAY,QAAS,WAAY,SAChEvU,aAAe,YAAa,WAAY,QAAS,WAAY,SAC7DwU,KAAO,YAAa,QAAS,QAAS,WAAY,aAMtDyQ,EAAA,SAAAnhB,GACI,SAAAmhB,EAAYlhB,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAK04B,sBAAwB14B,EAAK04B,sBAAsBtiC,KAAK4J,GAC7DA,EAAK24B,oBAAsB34B,EAAK24B,oBAAoBviC,KAAK4J,GACzDA,EAAK44B,qBAAuB54B,EAAK44B,qBAAqBxiC,KAAK4J,KA0FnE,OAhGuBjE,EAAA,EAAA08B,EAAAnhB,GASZmhB,EAAAjiC,UAAAqiB,OAAP,SAAcC,GAAd,IAAA9Y,EAAA3I,KACUyC,EAAUzC,KAAKkgB,MAAMzd,QAMrB++B,GAJF9G,EAAoBj4B,GACfi4B,EAAoBj4B,GAAQyC,QAC5Bu1B,EAAcv1B,SAEcL,IAAI,SAAC48B,GAAsB,OAC5DhgB,EAACigB,EAAAzf,GACGnjB,IAAK2iC,EACL3jC,KAAMqkB,EAAA,YAAiBsf,GACvBjjC,MAAOijC,EACPvD,eAAgBv1B,EAAKuX,MAAM9V,UAC3B6zB,cAAet1B,EAAK04B,0BAItB/lB,EAAQtb,KAAKkgB,MAAM9V,UACnBqQ,EAAQza,KAAKkgB,MAAM7V,UAEzB,OACIoX,EAAA,OAAK7X,GAAG,sBAAsB9K,IAAI,sBAAsBinB,MAAM,2BAC1DtE,EAAA,MAAIsE,MAAM,uBAAuB5D,EAAA,YAAiB3H,MAClDiH,EAAA,OAAKsE,MAAM,sBACPtE,EAAA,MAAI7X,GAAG,qBAAqBmc,MAAM,uBAAuB5D,EAAA,YAAiBwf,QAC1ElgB,EAAA,MACI3iB,IAAI,sBACJinB,MAAM,+BACN+X,KAAK,aAAY8D,kBACD,qBAAoBC,wBACV7hC,KAAKkgB,MAAM9V,UAAS,WAE7Co3B,GAEL/f,EAAA,MACI7X,GAAG,iBACHmc,MAAM,sBACN+b,MAAO,aAAsB,cAAVxmB,EAAwB,OAAS,SAEnD6G,EAAA,YAAiB4f,SAEtBtgB,EAAA,MACI3iB,IAAI,yBACJinB,MAAM,4BACN+X,KAAK,aAAY8D,kBACD,iBAAgBC,wBACNpnB,EAAK,UAC/BqnB,MAAO,aAAsB,cAAVxmB,EAAwB,OAAS,SAEpDmG,EAACigB,EAAAzf,GACGnjB,IAAI,kBACJhB,KAAMqkB,EAAA,YAAiB6f,UAAU1mB,GACjC9c,MAAM,MACNy/B,cAAej+B,KAAKshC,oBACpBpD,eAAgBzjB,IAEpBgH,EAACigB,EAAAzf,GACGnjB,IAAI,mBACJhB,KAAMqkB,EAAA,YAAiB8f,WAAW3mB,GAClC9c,MAAM,OACNy/B,cAAej+B,KAAKuhC,qBACpBrD,eAAgBzjB,QAQhC2mB,EAAAjiC,UAAAkiC,sBAAR,SAA8B7iC,GAC1BwB,KAAKkgB,MAAMnM,gBAAgBvV,GAC3BwB,KAAKkgB,MAAM/d,UAGPi/B,EAAAjiC,UAAAmiC,oBAAR,SAA4B9iC,GACK,SAAzBwB,KAAKkgB,MAAM7V,YACXrK,KAAKkgB,MAAMpM,gBAAgB,OAC3B9T,KAAKkgB,MAAM/d,WAIXi/B,EAAAjiC,UAAAoiC,qBAAR,SAA6B/iC,GACI,QAAzBwB,KAAKkgB,MAAM7V,YACXrK,KAAKkgB,MAAMpM,gBAAgB,QAC3B9T,KAAKkgB,MAAM/d,WAGvBi/B,EAhGA,CAAuB1a,EAAA,WAiHRnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACPuB,QAASvB,EAAMK,WAAWkB,QAC1B2H,UAAWlJ,EAAMK,WAAWiZ,KAAKc,MACjCjR,UAAWnJ,EAAMK,WAAWiZ,KAAKC,QAErC,SAACzZ,GAAa,OACV+S,gBAAiB,SAACuH,GAAuBta,EAAS/C,OAAAmuB,EAAA,EAAAnuB,CAAgBqd,KAClExH,gBAAiB,SAAC2G,GAAuBzZ,EAAS/C,OAAAmuB,EAAA,EAAAnuB,CAAgBwc,KAClEtY,OAAQ,SAACC,GAA6BpB,EAAS/C,OAAA8vB,EAAA,EAAA9vB,CAAOmE,OAT/C,CAWbg/B,kECxKFphB,EAAA,SAAAC,GAAA,SAAAD,mDASA,OATwCtb,EAAA,EAAAsb,EAAAC,GAC7BD,EAAA7gB,UAAAqiB,OAAP,SAAcC,GACV,OACIA,EAAA,OAAK7X,GAAG,wBAAwB9K,IAAI,wBAAwBinB,MAAM,6BAC9DtE,EAAA,MAAIsE,MAAM,yBAAyB5D,EAAA,WAAgB/d,QACnDqd,EAACygB,EAAA,GAAQpjC,IAAI,qBAI7BkhB,EATA,CAAwC0G,EAAA,2RC2CxCyb,EAAA,SAAAliB,GACI,SAAAkiB,EAAYjiB,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAKy5B,kBAAoBz5B,EAAKy5B,kBAAkBrjC,KAAK4J,GACrDA,EAAK05B,gBAAkB15B,EAAK05B,gBAAgBtjC,KAAK4J,KA8SzD,OAnT8BjE,EAAA,EAAAy9B,EAAAliB,GAQnBkiB,EAAAhjC,UAAAqiB,OAAP,SAAcC,GACV,KACMzhB,KAAKkgB,MAAMwB,UAAU9c,QAAQwtB,gBAAgBpyB,KAAKkgB,MAAMpb,KAAK8E,KAC9D5J,KAAKkgB,MAAMwB,UAAU9c,QAAQytB,MAAMryB,KAAKkgB,MAAMpb,KAAKgY,QACnD9c,KAAKkgB,MAAMwB,UAAU9c,QAAQutB,kBAAkBnyB,KAAKkgB,MAAMpb,KAAK8E,KAEhE,OAAO6X,EAAC6gB,EAAArgB,GAAWnjB,IAAK,yBACrB,GAAIkB,KAAKkgB,MAAMwB,UAAU9c,QAAQutB,kBAAkBnyB,KAAKkgB,MAAMpb,KAAK8E,IACtE,OACI6X,EAAA,OAAKsE,MAAM,mCACPtE,EAAA,QAAMsE,MAAM,uBACP5D,EAAA,QAAa0c,eAM9B,IAAM/5B,EAAO9E,KAAKkgB,MAAMwB,UAAU9c,QAAQwtB,gBAAgBpyB,KAAKkgB,MAAMpb,KAAK8E,IACpEkT,EAAQ9c,KAAKkgB,MAAMwB,UAAU9c,QAAQytB,MAAMvtB,EAAKgY,OAChDna,EAAS1E,OAAA8d,EAAA,EAAA9d,CAAiB+B,KAAKkgB,MAAMwB,WAErCgX,GADW5zB,GAAQ9E,KAAKkgB,MAAMwB,UAAU9c,QAAQstB,cAAcptB,EAAK8E,IACzD9E,GAAQ9E,KAAKkgB,MAAMwB,UAAU9c,QAAQqtB,aAAantB,EAAK8E,KAEjE24B,GACFC,uBAAuB,EACvBC,+BAAgC/J,GAG9BgK,EAAe,IAAIC,KAAK79B,EAAK8C,UAC7Bg7B,EAAc,IAAID,KAAK79B,EAAK+C,SAC5B0L,EAAevT,KAAKkgB,MAAMwB,UAAU9c,QAAQwjB,iBAAiBtjB,EAAKrB,OAClEo/B,EACqB,yBAAvB/9B,EAAKuS,eACLvS,EAAKrB,SACH8P,EAGN,OAEQkO,EAAA,OACIsE,MAAM,iCAENtE,EAAA,OACIqhB,IAAI,iFACJ/c,MAAM,0BACN+b,MAAO,2LAIqBh9B,EAAK+Q,SAAQ,sHAIzCktB,IAAI,KAERthB,EAACuhB,EAAA,GACGlxB,UAAW9R,KAAKkgB,MAAMwB,UAAU9c,QAAQlC,KAAKoP,UAC7ChN,KAAMA,EACNm+B,iBAAkBjjC,KAAKqiC,mBAI/B5gB,EAAA,OACI7X,GAAG,sBACHmc,MAAM,0BACNjnB,IAAQgG,EAAK8E,GAAE,cAEf6X,EAAA,OAAK0U,QAASoM,GACV9gB,EAAA,OAAK3iB,IAAI,gBACL2iB,EAAA,MACIsE,MAAM,uBAELjhB,EAAKgJ,UAEN2T,EAACyhB,EAAAjhB,GACGnjB,IAAI,yBACJgP,MAAOqU,EAAA,YAAiBghB,YACxB9L,YAAar3B,KAAKoiC,kBAClBhL,WAAW,GAEX3V,EAAA,OACI6V,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRsK,MAAM,kCAENrgB,EAAA,QAAM5jB,EAAE,0CACR4jB,EAAA,QAAM5jB,EAAE,0HAIpB4jB,EAAA,QAAM3iB,IAAI,aAAainB,MAAM,4BACzBtE,EAAA,OACIqhB,IAAKh+B,EAAK0R,QACVuP,MAAM,0BACNjY,MAAOhJ,EAAKkJ,cAEflJ,EAAKkJ,gBAAcmU,EAAA,YAAiBihB,OACrC3hB,EAAA,KACIsE,MAAM,2BACNjY,MAAO+0B,EAA6B1gB,EAAA,YAAiBkhB,QAAUlhB,EAAA,YAAiBmhB,SAChFxV,OAAO,SACPyV,KACIV,EACItvB,EAAa4X,OACVxoB,EAAOgR,QAAO,wBAAwB7O,EAAKgY,OAIlD+lB,EACItvB,EAAazV,KACbgH,EAAKgY,QAIrB2E,EAAA,QAAM3iB,IAAI,gBAAgBinB,MAAM,0BAC3B5D,EAAA,YAAiBqhB,aACjB,KAAKC,EAAA,OAAgBf,GAAgBgB,SAAU,OAAQC,aAAc,UAE1EliB,EAAA,OAAKsE,MAAM,wBACN/lB,KAAK4jC,aAAa9+B,EAAM2c,IAE7BA,EAAA,OACIsE,MAAM,qBACN+b,MAAO,+CAEXrgB,EAAA,QAAM3iB,IAAI,UAAUinB,MAAM,yBACrBjhB,EAAK++B,QAAU/+B,EAAK++B,QAAU1hB,EAAA,YAAiB2hB,WAEpDriB,EAAA,MAAIsE,MAAM,yBAAyB5D,EAAA,YAAiB4hB,SAEhDj/B,EAAKqR,mBACDsL,EAAA,QACI3iB,IAAI,mBACJklC,UAAWl/B,EAAKqR,mBAChB4P,MAAM,8BAEVtE,EAAA,QACI3iB,IAAI,sBACJinB,MAAM,6BAEL5D,EAAA,YAAiB8hB,eAG9BxiB,EAAA,MAAIsE,MAAM,8BAA8B5D,EAAA,YAAiB+hB,YAErDp/B,EAAKq/B,YACD1iB,EAAA,QACI3iB,IAAI,oBACJklC,UAAWl/B,EAAKq/B,YAChBpe,MAAM,+BAEVtE,EAAA,QACI3iB,IAAI,uBACJinB,MAAM,8BAEL5D,EAAA,YAAiBiiB,cAG9B3iB,EAAA,MAAIsE,MAAM,yBAAyB5D,EAAA,YAAiBkiB,aAEhDv/B,EAAKw/B,kBACD7iB,EAAA,QACI3iB,IAAI,0BACJklC,UAAWl/B,EAAKw/B,kBAChBve,MAAM,8BAEVtE,EAAA,QACI3iB,IAAI,6BACJinB,MAAM,6BAEL5D,EAAA,YAAiBoiB,eAI1B1B,EAEQphB,EAAA,SACIA,EAAA,MAAIsE,MAAM,0BAA0B5D,EAAA,YAAiBrF,OACrD2E,EAAA,OACIsE,MAAM,wBAENtE,EAAA,OACIqhB,IAAKvvB,EAAasC,SAClBktB,IAAKxvB,EAAazV,KAClBioB,MAAM,2GAETxS,EAAazV,MAElB2jB,EAAA,OAAKsE,MAAM,4BACPtE,EAAA,QAAMsE,MAAM,kCACP5D,EAAA,YAAiBqiB,WAEtB/iB,EAAA,OAAKsE,MAAM,4BAEHjJ,EAAMjH,SACF4L,EAAA,OACIqhB,IAAKhmB,EAAMjH,SACXkQ,MAAM,mCAEVtE,EAACgjB,EAAA,GAAY1e,MAAM,mCAE1BjhB,EAAKgY,SAKtB,KAER2E,EAAA,QAAM3iB,IAAI,YAAYinB,MAAM,2BACxBtE,EAAA,cAASU,EAAA,YAAiBuiB,OAAgB,KAAK5/B,EAAK6/B,UAExDljB,EAAA,QAAM3iB,IAAI,eAAeinB,MAAM,2BAC3BtE,EAAA,cACKU,EAAA,YAAiBta,SAErB,KAAK47B,EAAA,OAAgBb,GAAec,SAAU,OAAQC,aAAc,UAEzEliB,EAACmjB,EAAA,GACGjxB,QAAShR,EAAOgR,QAChB7O,KAAMA,MAIjB4zB,EAAUjX,EAAC6gB,EAAArgB,GAAWnjB,IAAK,sBAA0B,QAM9DqjC,EAAAhjC,UAAAykC,aAAR,SAAqB9+B,EAAY2c,GAAjC,IAAA9Y,EAAA3I,KACU0C,EAAO1C,KAAKkgB,MAAMwB,UAAUtgB,SAASC,MAAMsB,OAAOD,KAExD,OAAOoC,EAAKsS,OAAOvS,IAAI,SAACggC,GACpB,OAAQA,GACJ,IAAK,gBACD,OACIpjB,EAACqjB,EAAA7iB,GACG8iB,OAC2B,yBAAvBjgC,EAAKuS,eACD1O,EAAKuX,MAAMwB,UAAU9c,QAAQwjB,iBAAiBtjB,EAAKrB,OACnDkF,EAAKuX,MAAMwB,UAAU9c,QAAQwjB,iBAAiBtjB,EAAKrB,OAAO3F,UAC1DwH,IAIpB,IAAK,aACD,OAAOmc,EAACujB,EAAA/iB,EAAe,MAC3B,IAAK,cACD,OAAOR,EAACwjB,EAAAhjB,EAAgB,MAC5B,IAAK,cACD,OAAOR,EAACyjB,EAAAjjB,EAAgB,MAC5B,IAAK,WACD,OAAOR,EAAC0jB,EAAAljB,EAAa,MACzB,IAAK,UACD,OAAOR,EAAC2jB,EAAAnjB,GAAavf,KAAMA,IAC/B,IAAK,aACD,OAAO+e,EAAC4jB,EAAApjB,GAAgBvf,KAAMA,IAGtC,OAAO,QAIPy/B,EAAAhjC,UAAAijC,kBAAR,WACI,IAAMz/B,EAAS1E,OAAA8d,EAAA,EAAA9d,CAAiB+B,KAAKkgB,MAAMwB,WACrC5c,EAAO9E,KAAKkgB,MAAMwB,UAAU1d,GAAGswB,UAAUxvB,KAC3CA,GACA2xB,OAAOiD,KAAQ/2B,EAAOgR,QAAO,sBAAsB7O,EAAK8E,GAAM,WAI9Du4B,EAAAhjC,UAAAmmC,WAAR,SAAmBC,EAAa9jB,GAC5B,OAAK8jB,EAEMA,GAAO,MACN,KAAM9jB,EAAA,SAAO3iB,IAAI,YAAU,OAC5BymC,EAAM,SAENpM,KAAKqM,MAAMD,EAAM,MAAMjH,iBAAgB,IAC1C7c,EAAA,SAAO3iB,IAAI,YAAU,QAIlBq6B,KAAKqM,MAAMD,EAAM,SAASjH,iBAAgB,IAC7C7c,EAAA,SAAO3iB,IAAI,YAAU,QAXjB,KAAM2iB,EAAA,SAAO3iB,IAAI,YAAU,QAgBnCqjC,EAAAhjC,UAAAkjC,gBAAR,WACI,IAAMv9B,EAAO9E,KAAKkgB,MAAMwB,UAAU1d,GAAGswB,UAAUxvB,KACzCgN,EAAY9R,KAAKkgB,MAAMwB,UAAU9c,QAAQlC,KAAKoP,UAChDhN,GAAQgN,GAAaA,EAAUhN,EAAK8E,IACpC5J,KAAKkgB,MAAMlP,oBAAoBlM,GACxBA,GAAQgN,IAAcA,EAAUhN,EAAK8E,KAC5C5J,KAAKkgB,MAAMnP,eAAejM,IAGtCq9B,EAnTA,CAA8Bzb,EAAA,WAiUfnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACPwgB,UAAWxgB,IAEf,SAACF,GAAa,OACV+P,eAAgB,SAACjM,GAAiB9D,EAAS/C,OAAAmuB,EAAA,EAAAnuB,CAAe6G,KAC1DkM,oBAAqB,SAAClM,GAAiB9D,EAAS/C,OAAAmuB,EAAA,EAAAnuB,CAAoB6G,OAN7D,CAQbq9B,kBCpYF7kC,EAAAD,QAAAooC,iBCAAnoC,EAAAD,QAAAqoC,iBCAApoC,EAAAD,QAAAsoC,iBCAAroC,EAAAD,QAAAuoC,iBCAAtoC,EAAAD,QAAAwoC,iBCAAvoC,EAAAD,QAAAyoC,iBCAAxoC,EAAAD,QAAA0oC,gCCAA,IAAA3X,EAAAjxB,EAAA,GA0BeoC,EAAA,WAACoC,EAAuD8f,OAArD3P,EAAAnQ,EAAAmQ,UAAWmxB,EAAAthC,EAAAshC,iBAAkBn+B,EAAAnD,EAAAmD,KAC3C,IAAKgN,EACD,OAAO,KAEX,IAAMk0B,IAAal0B,EAAUhN,EAAK8E,IAKlC,OACI6X,EAAA,UAAQoY,QAASoJ,EAAkB9M,SAJnC8P,+BAA+B,EAC/BC,sCAAuCF,IAInCvkB,EAAA,OACI0kB,MAAM,6BACN7O,MAAM,KACNC,OAAO,KACPC,QAAQ,aAER/V,EAAA,QACI5jB,EAAE,0GAINmoC,EACI5X,EAAA,YAAiBpd,oBACjBod,EAAA,YAAiBrd,+CCrCtBxR,EAAA,WAAC2gB,EAAyBuB,GACrC,OACIA,EAAA,OAAKsE,MAAO7F,EAAM6F,OACdtE,EAAA,OACI0kB,MAAM,6BACN3O,QAAQ,cACRD,OAAO,OACPD,MAAM,QAEN7V,EAAA,QACI7X,GAAG,WACH/L,EAAE,kwGACFy9B,KAAK,0CCzBzB,IAAAlN,EAAAjxB,EAAA,GAiBeoC,EAAA,WAACoC,EAAoC8f,OAAlC3c,EAAAnD,EAAAmD,KAAM6O,EAAAhS,EAAAgS,QAChByyB,EAAehY,EAAA,YAAiBtmB,OAAOhD,EAAKmN,QAChD,GAAMnN,EAAKmY,gBAAkBnY,EAAKmY,eAAe7c,OAAS,EAAG,CACzD,IAAMimC,EAAavhC,EAAKmY,eACnBpY,IAAI,SAACO,GACF,OACIqc,EAAA,KACIsE,MAAM,2BACNwd,KAAS5vB,EAAO,0BAA0BvO,EAAM0X,MAAK,UAAU1X,EAAM0I,MACrEhP,IAAKsG,EAAMwE,GACXkkB,OAAO,UAEN1oB,EAAM0I,SAGjB9C,OAAO,SAACC,EAAeC,EAAc3N,GAKnC,OAJM0N,EAAO1N,EAAI,IACb0N,EAAOiK,KAAK,MAEhBjK,EAAOiK,KAAKhK,GACLD,OAGXm7B,EADgB,WAAhBthC,EAAKmN,QAAuC,QAAhBnN,EAAKmN,QACdm0B,EAAY,KAAMC,GAEtBA,OAEhB,GAAoB,WAAhBvhC,EAAKmN,UAAyBnN,EAAKmY,gBAAiD,IAA/BnY,EAAKmY,eAAe7c,QAChF,OAAO,KAEX,OACIqhB,EAAA,QAAM3iB,IAAI,cAAcinB,MAAM,wBAC1BtE,EAAA,cAAS2M,EAAA,YAAiBkY,iBAAuBF,kCC3C7D,IAAAG,EAAAppC,EAAA,IAAAqpC,EAAArpC,EAAA6B,EAAAunC,GAAAE,EAAAtpC,EAAA,KAkGA,SAASupC,EAAQ7Y,GACbA,EAAEmT,QA/DSzhC,EAAA,WACXoC,EASA8f,OARI3iB,EAAA6C,EAAA7C,IACAs3B,EAAAz0B,EAAAy0B,iBACA0J,EAAAn+B,EAAAm+B,eACA5I,EAAAv1B,EAAAu1B,YACAwJ,EAAA/+B,EAAA++B,KACAh/B,EAAAC,EAAAD,KACAyM,EAAAxM,EAAAwM,SAKAyrB,EAAS,KAKb,MAJa,SAATl4B,IACAk4B,EAASnY,EAACglB,EAAA,GAAkB3nC,IAAI,yBAIhC2iB,EAAA,OACI3iB,IAAI,eACJq3B,QAASC,EAAgBuQ,gBACX,QAEdllB,EAAA,OACI3iB,IAAI,oBACJq3B,QAAS2J,GAETre,EAAA,UAAQsE,MAAM,wBACVtE,EAAA,OAAKsE,MAAM,+BACPtE,EAAC+kB,EAAAvkB,GACG2kB,YAAaF,EACbtP,WAAW,EACXC,YAAaH,EACbp4B,IAAI,uBACJgP,MAAO4yB,EAAKmG,OAEZplB,EAAA,OACI6V,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRsK,MAAM,kCAENrgB,EAAA,QAAM5jB,EAAE,sEACR4jB,EAAA,QAAM5jB,EAAE,sEAMxB4jB,EAAA,WACI3iB,IAAKA,EACLinB,MAAM,yBAEL5X,GAEJyrB,qECvDjBkN,EAAA,SAAA7mB,GACI,SAAA6mB,EAAY5mB,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAKo+B,kBAAoBp+B,EAAKo+B,kBAAkBhoC,KAAK4J,GACrDA,EAAKq+B,wBAA0Br+B,EAAKq+B,wBAAwBjoC,KAAK4J,KAiEzE,OAtE4BjE,EAAA,EAAAoiC,EAAA7mB,GAQjB6mB,EAAA3nC,UAAAqiB,OAAP,SAAcC,GAAd,IAAA9Y,EAAA3I,KACU8E,EAAO9E,KAAKkgB,MAAMwB,UAAU1d,GAAGswB,UAAUxvB,KACzCmiC,EAAWniC,KAAU9E,KAAKkgB,MAAMwB,UAAU9c,QAAQstB,cAAcptB,EAAK8E,IAErEs9B,GAAeC,8BADLriC,KAAU9E,KAAKkgB,MAAMwB,UAAU9c,QAAQqtB,aAAantB,EAAK8E,KAEnEw9B,EAAgB1iC,EAAA,KAAKwiC,GAAYG,4BAA6BJ,IAE9DK,EAAmBtnC,KAAKkgB,MAAMwB,UAAUtgB,SAASiB,OAAOilB,cAAcljB,OAAO,SAACijB,GAChF,OAAOA,EAAOkgB,QAAQziC,SAG1B,OACI2c,EAAA,UAAQsE,MAAM,wBAEN/lB,KAAKkgB,MAAMwB,UAAUtgB,SAASiB,OAAOosB,kBACrC,KACAhN,EAAA,UACI3iB,IAAI,aACJinB,MAAM,2BACNoQ,QAASiR,EACTvN,QAAS75B,KAAK+mC,mBAGVE,EAAWjnC,KAAKkgB,MAAMwB,UAAUtgB,SAASiB,OAAOusB,uBAChD5uB,KAAKkgB,MAAMwB,UAAUtgB,SAASiB,OAAOqsB,iBAK7C4Y,EAAiBziC,IAAI,SAACwiB,GAAyB,OAC3C5F,EAAA,UACI3iB,IAAI,QACJinB,MAAM,oBACNoQ,QAAS+Q,EACT1oC,MAAO6oB,EAAOvpB,KACd+7B,QAASlxB,EAAKq+B,yBAEb3f,EAAOvpB,UAQxBgpC,EAAA3nC,UAAA4nC,kBAAR,WACI,IAAMjiC,EAAO9E,KAAKkgB,MAAMwB,UAAU1d,GAAGswB,UAAUxvB,KAC3CA,IACM9E,KAAKkgB,MAAMwB,UAAU9c,QAAQstB,cAAcptB,EAAK8E,IAClD5J,KAAKkgB,MAAMxQ,aAAa5K,GAExB9E,KAAKkgB,MAAMzQ,WAAW3K,KAK1BgiC,EAAA3nC,UAAA6nC,wBAAR,SAAgCnZ,GAC5B,IAAM/oB,EAAO9E,KAAKkgB,MAAMwB,UAAU1d,GAAGswB,UAAUxvB,KAC3CA,GACA9E,KAAKkgB,MAAMiH,aAAa0G,EAAEC,OAAOtvB,MAAOsG,IAGpDgiC,EAtEA,CAA4BhQ,EAAA,WAqFbv3B,EAAA,EAAAtB,OAAA64B,EAAA,QAAA74B,CACX,SAACiD,GAAU,OAAGwgB,UAAWxgB,IACzB,SAACF,GAAa,OACV0O,aAAc,SAAC5K,GAAiB9D,EAAS/C,OAAAiyB,EAAA,EAAAjyB,CAAa6G,KACtD2K,WAAY,SAAC3K,GAAiB9D,EAAS/C,OAAAiyB,EAAA,EAAAjyB,CAAW6G,KAClDqiB,aAAc,SAACC,EAAoBtiB,GAAiB9D,EAAS/C,OAAAmuB,EAAA,EAAAnuB,CAAampB,EAAYtiB,OAL/E,CAObgiC,oFC1GF9P,EAAA,SAAA/W,GAAA,SAAA+W,mDA4DA,OA5D4BtyB,EAAA,EAAAsyB,EAAA/W,GACjB+W,EAAA73B,UAAAqiB,OAAP,SAAcC,GACV,IAII+lB,EAAU/lB,EAAA,OAAKsE,MAAM,sBACrB/lB,KAAKkgB,MAAMoP,cACXkY,EACI/lB,EAACgmB,EAAAxlB,GACGoV,YAAar3B,KAAKkgB,MAAMqP,OACxBzwB,IAAI,gBACJgP,MAAOqU,EAAA,KACPiV,WAAW,GAEX3V,EAAA,OACI6V,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRsK,MAAM,kCAENrgB,EAAA,QACI5jB,EAAE,+FAOtB,IAAI6pC,EAAWjmB,EAAA,OAAKsE,MAAM,sBAqB1B,OApBI/lB,KAAKkgB,MAAMmP,eACXqY,EACIjmB,EAACgmB,EAAAxlB,GACGnjB,IAAI,iBACJgP,MAAOqU,EAAA,MACPiV,WAAW,EACXC,YAAar3B,KAAKkgB,MAAMqP,QAExB9N,EAAA,OACI6V,MAAM,KACNC,OAAO,KACPC,QAAQ,aAER/V,EAAA,QAAM5jB,EAAE,yFAQpB4jB,EAAA,OAAK0U,SAhDLwR,YAAc,GAgDqB7oC,IAAI,UACnC2iB,EAAA,OAAK3iB,IAAI,0BAA0BinB,MAAM,6BACpCyhB,EACD/lB,EAACmmB,EAAA,GAAgB9oC,IAAI,qBACpB4oC,KAKrB1Q,EA5DA,CAA4BtQ,EAAA,WAuEbnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACPouB,YAAapuB,EAAME,SAASiB,OAAOitB,YACnCD,aAAcnuB,EAAME,SAASiB,OAAOgtB,aACpCE,OAAQ,WAAQruB,EAAME,SAASiB,OAAOktB,YAE1C,WAAM,UANK,CAObyH,2GCpCF6Q,EAAA,SAAA5nB,GACI,SAAA4nB,EAAY3nB,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,KAENoa,GAAWzR,EAAKuX,MAAMvd,OAAOD,KAC3BiG,EAAKuX,MAAM4O,aACXnmB,EAAKuX,MAAM4O,aAAa1qB,OAAO,SAAC3B,GAAY,MAAa,gBAAZA,GAAyC,QAAZA,KAE7EoC,IAAI,SAAC4I,GAAa,OACfjP,MAAOiP,EACPyU,KAAMC,EAAA,OAAYwV,cAAclqB,aAExC9E,EAAKuX,MAAM9c,eAAekK,QAAQ,SAACiP,GAC/B,IAAM9Z,GACFjE,MAAO+d,EAAcze,KACrBokB,KAAM3F,EAAcze,MAEpBye,EAAcurB,WACd1tB,EAAQojB,OAAO,EAAG,EAAG/6B,GAErB2X,EAAQlF,KAAKzS,KAGrBkG,EAAKzH,OACDkZ,QAAOA,GAGXzR,EAAKo/B,mBAAqBp/B,EAAKo/B,mBAAmBhpC,KAAK4J,KAiD/D,OA5E8BjE,EAAA,EAAAmjC,EAAA5nB,GA8BnB4nB,EAAA1oC,UAAAqiB,OAAP,SAAcC,GACV,IAAMhf,EAAUzC,KAAKkgB,MAAMzd,QACrBulC,EAAe7lB,EAAA,OAAYwV,cAAcl1B,GAE/C,OAAIzC,KAAKkB,MAAMkZ,QAAQha,OAAS,GAAKJ,KAAKkgB,MAAMuP,gCAExChO,EAAA,MAAI7X,GAAG,kBAAkBmc,MAAM,2BAC1B/lB,KAAKkgB,MAAMsO,aAKpB/M,EAACwmB,EAAAhmB,GACGnjB,IAAI,wBACJsb,QAASpa,KAAKkB,MAAMkZ,QACpBtK,SAAU9P,KAAK+nC,mBACfjQ,oBAAqB93B,KAAKkgB,MAAMzd,SAEhCgf,EAAA,MACI3iB,IAAK,UAAU2D,EAAO,YACtBmH,GAAG,0BACHmc,MAAM,+BAELiiB,GAA8BvlC,MAC/Bgf,EAACymB,EAAAjmB,GACGnjB,IAAI,2BAEJ2iB,EAAA,OACI6V,MAAM,KACNC,OAAO,KACPC,QAAQ,aAER/V,EAAA,QACI5jB,EAAE,wDAStBgqC,EAAA1oC,UAAA4oC,mBAAR,SAA2BtlC,GACvBzC,KAAKkgB,MAAM7B,oBAAoB5b,GAC/BzC,KAAKkgB,MAAM/d,QAAO,IAE1B0lC,EA5EA,CAA8BnhB,EAAA,WA+FfnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACP4tB,aAAc5tB,EAAME,SAASiB,OAAOysB,aACpC1rB,eAAgBlC,EAAME,SAASiB,OAAOe,eACtCT,OAAQzB,EAAME,SAASC,MAAMsB,OAC7B8sB,gCAAiCvuB,EAAME,SAASiB,OAAOotB,gCACvDjB,YAAattB,EAAME,SAASiB,OAAOmsB,YACnC/rB,QAASvB,EAAMK,WAAWkB,UAE9B,SAACzB,GAAa,OACVqd,oBAAqB,SAAC5b,GAAsBzB,EAAS/C,OAAAmuB,EAAA,EAAAnuB,CAAoBwE,KACzEN,OAAQ,SAACC,GAA4BpB,EAAS/C,OAAA8vB,EAAA,EAAA9vB,CAAOmE,OAX9C,CAabylC,qICzEFxJ,EAAA,SAAApe,GACI,SAAAoe,EAAYne,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAKkyB,mBAAqBlyB,EAAKkyB,mBAAmB97B,KAAK4J,GACvDA,EAAKmyB,oBAAsBnyB,EAAKmyB,oBAAoB/7B,KAAK4J,GACzDA,EAAKw/B,gBAAkBx/B,EAAKw/B,gBAAgBppC,KAAK4J,GACjDA,EAAKy/B,iBAAmBz/B,EAAKy/B,iBAAiBrpC,KAAK4J,GACnDA,EAAKsyB,gBAAkBtyB,EAAKsyB,gBAAgBl8B,KAAK4J,GACjDA,EAAK0/B,kBAAoB1/B,EAAK0/B,kBAAkBtpC,KAAK4J,KAsJ7D,OA/J+BjE,EAAA,EAAA25B,EAAApe,GAYpBoe,EAAAl/B,UAAAqiB,OAAP,SAAcC,GACV,IAAM6mB,EAAiBtoC,KAAKkgB,MAAMqoB,UAAUjK,iBAAgB,KACxDt+B,KAAKkgB,MAAMsoB,oBACPxoC,KAAKkgB,MAAMsoB,oBACXrmB,EAAA,aAGF+Y,EAAcl7B,KAAKkgB,MAAMuoB,gBAC3BzoC,KAAKkgB,MAAMuoB,gBACXtmB,EAAA,mBAAwBiZ,QAE5B,OACI3Z,EAAA,WACIA,EAAA,OACI3iB,IAAI,oBACJinB,MAAM,kBAENtE,EAAA,OAAK3iB,IAAI,uBAAuBinB,MAAM,6BAClCtE,EAAA,SACI7X,GAAG,4BACHmc,MAAM,8BACNrkB,KAAK,SACL85B,QAASx7B,KAAK66B,mBACdY,UAAWz7B,KAAK86B,oBAChBI,YAAaA,EAAWQ,aACZR,EACZ18B,MAAOwB,KAAKkgB,MAAMuI,gBAG1BhH,EAAA,OAAKsE,MAAM,uCACPtE,EAAA,QAAMsE,MAAM,+BAA+BuiB,GAC3C7mB,EAAA,OAAKsE,MAAM,wCACPtE,EAACwa,EAAAha,GACG2Z,OAAuC,UAA/B57B,KAAKkgB,MAAMwoB,gBACnB5pC,IAAI,eACJu4B,YAAar3B,KAAKooC,iBAClBt6B,MAAOqU,EAAA,aAEPV,EAAA,OAAK6V,MAAM,OAAOC,OAAO,OAAOC,QAAQ,aACpC/V,EAAA,KAAGya,OAAO,OAAMC,eAAc,KAC1B1a,EAAA,SACIA,EAAA,QACI5jB,EAAE,2HAMtB4jB,EAACwa,EAAAha,GACG2Z,OAAuC,SAA/B57B,KAAKkgB,MAAMwoB,gBACnBrR,YAAar3B,KAAKmoC,gBAClBrpC,IAAI,cACJgP,MAAOqU,EAAA,UAEPV,EAAA,OAAK6V,MAAM,OAAOC,OAAO,OAAOC,QAAQ,aACpC/V,EAAA,KAAGya,OAAO,OAAMC,eAAc,KAC1B1a,EAAA,SACIA,EAAA,QACI5jB,EAAE,6EAMtB4jB,EAAA,OAAKsE,MAAM,0BACXtE,EAACwa,EAAAha,GACG2Z,OAAqC,WAA7B57B,KAAKkgB,MAAMuf,cACnBpI,YAAar3B,KAAKqoC,kBAClBvpC,IAAI,gBACJgP,MAAoC,WAA7B9N,KAAKkgB,MAAMuf,cAA6Btd,EAAA,MAAaA,EAAA,WAAgB/d,QAE5Eqd,EAAA,OAAK6V,MAAM,OAAOC,OAAO,OAAOC,QAAQ,aACpC/V,EAAA,KAAIya,OAAO,OAAMC,eAAc,KAC3B1a,EAAA,KAAG7X,GAAG,yBACF6X,EAAA,QAAM5jB,EAAE,sQAKxB4jB,EAACwa,EAAAha,GACG2Z,OAAqC,SAA7B57B,KAAKkgB,MAAMuf,cACnBpI,YAAar3B,KAAKi7B,gBAClBn8B,IAAI,cACJgP,MAAoC,SAA7B9N,KAAKkgB,MAAMuf,cAA2Btd,EAAA,MAAaA,EAAA,YAAiB3H,MAE3EiH,EAAA,OAAK6V,MAAM,OAAOC,OAAO,OAAOC,QAAQ,aACpC/V,EAAA,KAAIya,OAAO,OAAMC,eAAc,KAC3B1a,EAAA,KAAG7X,GAAG,eACF6X,EAAA,QACI5jB,EAAE,yIASlC4jB,EAACknB,EAAA,GAAc7pC,IAAI,iBAAiB6uB,MAAM,YAK9C0Q,EAAAl/B,UAAA07B,mBAAR,SAA2BhN,GACvB7tB,KAAKkgB,MAAMsI,mBAAmBqF,EAAEC,OAAOtvB,OAChB,KAAnBqvB,EAAEC,OAAOtvB,OAAoD,KAApCwB,KAAKkgB,MAAMkc,sBACpCp8B,KAAKkgB,MAAM/d,QAAO,IAIlBk8B,EAAAl/B,UAAA27B,oBAAR,SAA4BjN,GACV,UAAVA,EAAE/uB,KACFkB,KAAKkgB,MAAM/d,QAAO,IAIlBk8B,EAAAl/B,UAAAipC,iBAAR,SAAyBva,GACrBA,EAAE+a,iBACiC,SAA/B5oC,KAAKkgB,MAAMwoB,iBACX1oC,KAAKkgB,MAAM2oB,uBAIXxK,EAAAl/B,UAAAgpC,gBAAR,SAAwBta,GACpBA,EAAE+a,iBACiC,UAA/B5oC,KAAKkgB,MAAMwoB,iBACX1oC,KAAKkgB,MAAM2oB,uBAIXxK,EAAAl/B,UAAAkpC,kBAAR,SAA0Bxa,GACtBA,EAAE+a,iBAC+B,WAA7B5oC,KAAKkgB,MAAMuf,cACXz/B,KAAKkgB,MAAMvB,mBAEX3e,KAAKkgB,MAAM8L,eAIXqS,EAAAl/B,UAAA87B,gBAAR,SAAwBpN,GACpBA,EAAE+a,iBAC+B,SAA7B5oC,KAAKkgB,MAAMuf,cACXz/B,KAAKkgB,MAAMvB,mBAEX3e,KAAKkgB,MAAMgM,YAGvBmS,EA/JA,CAA+B3X,EAAA,WAuLhBnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACPqnC,UAAWrnC,EAAMK,WAAWC,UAAU8I,MACtCm+B,gBAAiBvnC,EAAME,SAASiB,OAAO84B,sBACvCiB,qBAAsBl7B,EAAMK,WAAWknB,aAAa0H,SACpDqY,oBAAqBtnC,EAAME,SAASiB,OAAOk8B,SAC3CmK,gBAAiBxnC,EAAM8C,GAAGwwB,YAAYQ,QACtCvM,aAAcvnB,EAAMK,WAAWknB,aAAavd,QAC5Cu0B,cAAev+B,EAAM8C,GAAGswB,UAAU5yB,OAEtC,SAACV,GAAa,OACVmB,OAAQ,SAACC,GAA4BpB,EAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAOmE,KACrDymC,oBAAqB,WAAQ7nC,GAAWU,KAAMukB,EAAA,KAC9CuC,mBAAoB,SAAC6T,GAAwBr7B,EAAS/C,OAAAwoB,EAAA,EAAAxoB,CAAmBo+B,KACzE1d,iBAAkB,WAAQ3d,EAAS/C,OAAA6qC,EAAA,EAAA7qC,KACnC+tB,YAAa,WAAQhrB,EAAS/C,OAAA8qC,EAAA,EAAA9qC,KAC9BiuB,SAAU,WAAQlrB,EAAS/C,OAAA+qC,EAAA,EAAA/qC,OAhBpB,CAkBbogC,oGC1PFM,EAAA,SAAA1e,GACI,SAAA0e,EAAYze,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAKsgC,aAAetgC,EAAKsgC,aAAalqC,KAAK4J,GAC3CA,EAAKugC,aAAevgC,EAAKugC,aAAanqC,KAAK4J,KA6EnD,OAlFiCjE,EAAA,EAAAi6B,EAAA1e,GAQtB0e,EAAAx/B,UAAAqiB,OAAP,SAAcC,GACV,IAAMzZ,EAAShI,KAAKkgB,MAAMipB,kBAE1B,MAAe,YAAXnhC,GAAmC,gBAAXA,EAEpByZ,EAAC2nB,EAAA,GACGtqC,IAAK,aAAakB,KAAKkgB,MAAMmpB,uBAC7B3I,KAAMve,EACN+M,iBAAkBlvB,KAAKkgB,MAAMgP,iBAC7BtqB,QAAS5E,KAAKkgB,MAAMhG,aACpBovB,YAA8C,gBAAjCtpC,KAAKkgB,MAAMipB,kBACxBF,aAAcjpC,KAAKipC,aACnBC,aAAclpC,KAAKkpC,cAEnBznB,EAAC8nB,EAAA,GAAYzqC,IAAI,kBAGP,YAAXkJ,EAEHyZ,EAAA,OAAK3iB,IAAI,gBAAgBinB,MAAM,eAC3BtE,EAAC+nB,EAAAvnB,GAAWnjB,IAAI,cAAcojB,KAAMC,EAAA,QAAa8P,gBAGvC,UAAXjqB,EAEHyZ,EAAA,OACI3iB,IAAI,cACJinB,MAAM,eAENtE,EAAA,OAAKsE,MAAM,iCACPtE,EAAA,QAAMsE,MAAM,uBACP5D,EAAA,QAAasnB,SAO9BhoB,EAAA,OACI3iB,IAAI,gBACJinB,MAAM,eAENtE,EAAA,OAAKsE,MAAM,iCACPtE,EAAA,QAAMsE,MAAM,uBACP5D,EAAA,QAAa0c,iBAO1BF,EAAAx/B,UAAA8pC,aAAR,SAAqBpb,IACQA,EAAEC,OAAO4b,UAAY7b,EAAEC,OAAO6b,cAAgB9b,EAAEC,OAAO8b,cAG1D,KACe,gBAAjC5pC,KAAKkgB,MAAMipB,oBACe,IAA1BnpC,KAAKkgB,MAAMze,WAEXzB,KAAKkgB,MAAMpf,mBAIX69B,EAAAx/B,UAAA+pC,aAAR,SAAqBrb,GAArB,IAAAllB,EAAA3I,KACIwS,WAAW,WAEHqb,EAAE+b,cAAgB/b,EAAEgc,cACa,gBAAjClhC,EAAKuX,MAAMipB,oBACe,IAA1BxgC,EAAKuX,MAAMze,WAEXkH,EAAKuX,MAAMpf,gBAAgB,KAEhC,KAEX69B,EAlFA,CAAiCjY,EAAA,WAmGlBnnB,EAAA,EAAAtB,OAAAyoB,EAAA,QAAAzoB,CACX,SAACiD,GAAU,OACPgZ,aAAchZ,EAAM0D,QAAQsV,aAC5BzY,UAAWP,EAAMK,WAAWC,UAAUC,UACtCytB,iBAAkBhuB,EAAME,SAASiB,OAAO6sB,iBACxCma,uBAAwBnoC,EAAM8C,GAAGwwB,YAAYQ,QAC7CmU,kBAAmBjoC,EAAM8C,GAAGwwB,YAAYxsB,SAE5C,SAAChH,GAAa,OACVF,gBAAiB,SAACC,GAAmBC,EAAS/C,OAAAmuB,EAAA,EAAAnuB,CAAgB8C,OATvD,CAWb49B,iCCvKF,IAAAmL,EAAA3sC,EAAA,IAAA4sC,EAAA5sC,EAAA6B,EAAA8qC,GAkDevqC,EAAA,WACXoC,EASA8f,OARI3iB,EAAA6C,EAAA7C,IACA4hC,EAAA/+B,EAAA++B,KACA97B,EAAAjD,EAAAiD,QACA0kC,EAAA3nC,EAAA2nC,YACAL,EAAAtnC,EAAAsnC,aACAC,EAAAvnC,EAAAunC,aACA/6B,EAAAxM,EAAAwM,SAIJ,OAAIvJ,EAAQxE,OAAS,EAEbqhB,EAAA,OACI3iB,IAAKA,EACLinB,MAAM,wBACNikB,SAAUf,EACVrC,YAAasC,GAEZ/6B,EAEGm7B,EAEI7nB,EAAA,OAAKsE,MAAM,8BACPtE,EAACsoB,EAAA9nB,GAAWnjB,IAAI,uBAGxB,MAMZ2iB,EAAA,OACI3iB,IAAI,iBACJinB,MAAM,qDAENtE,EAAA,QAAMqgB,MAAM,yBACPpB,EAAK97B,QAAQs6B,4IC7B9B+K,EAAA,SAAAhqB,GACI,SAAAgqB,EAAY/pB,GAAZ,IAAAvX,EACIsX,EAAAviB,KAAAsC,KAAMkgB,IAAMlgB,YAEZ2I,EAAKuhC,sBAAwBvhC,EAAKuhC,sBAAsBnrC,KAAK4J,GAC7DA,EAAKwhC,qBAAuBxhC,EAAKwhC,qBAAqBprC,KAAK4J,GAC3DA,EAAKq+B,wBAA0Br+B,EAAKq+B,wBAAwBjoC,KAAK4J,GACjEA,EAAKyhC,gBAAkBzhC,EAAKyhC,gBAAgBrrC,KAAK4J,GACjDA,EAAK0hC,WAAa1hC,EAAK0hC,WAAWtrC,KAAK4J,KA6G/C,OArH0BjE,EAAA,EAAAulC,EAAAhqB,GAWfgqB,EAAA9qC,UAAAqiB,OAAP,SAAcC,GACV,IAAM7c,EAAU5E,KAAKkgB,MAAMwB,UAAU9c,QAErC,GAAIA,EAAQsV,aAAa9Z,OAAS,EAC9B,OACIqhB,EAAA,OAAK3iB,IAAI,eAAe8K,GAAG,kBAAkBg9B,YAAa5mC,KAAKoqC,iBAC1DpqC,KAAKsqC,mBAAmB1lC,EAAQsV,aAAcuH,KAOvDwoB,EAAA9qC,UAAAmrC,mBAAR,SAA2B1lC,EAAiB6c,GAA5C,IAAA9Y,EAAA3I,KACI,OAAO4E,EAAQC,IACX,SAACC,GACG,IAAMnC,EAAS1E,OAAAkT,EAAA,EAAAlT,CAAiB0K,EAAKuX,MAAMwB,WAC3C,GAAoD,SAAhD/Y,EAAKuX,MAAMwB,UAAU1d,GAAGwwB,YAAYQ,QAAoB,CAExD,IAAMzhB,EACqB,yBAAvBzO,EAAKuS,eACL1O,EAAKuX,MAAMwB,UAAU9c,QAAQwjB,iBAAiBtjB,EAAKrB,OACnDkF,EAAKuX,MAAMwB,UAAU9c,QAAQwjB,iBAAiBtjB,EAAKrB,YAAS6B,EAGhE,OACImc,EAAC8oB,EAAAtoB,GACGuoB,YAAa7hC,EAAKzH,MAAMspC,YACxB1rC,IAAQgG,EAAK8E,GAAE,QACf9E,KAAMA,EACNmtB,aAActpB,EAAKuX,MAAMwB,UAAU9c,QAAQqtB,aAC3CC,cAAevpB,EAAKuX,MAAMwB,UAAU9c,QAAQstB,cAC5CuY,WAAY9hC,EAAKuX,MAAMwB,UAAU1d,GAAGswB,UAAUxvB,KAC9CnC,OAAQA,EACR+nC,kBAAmB/hC,EAAKuhC,sBACxBS,iBAAkBhiC,EAAKwhC,qBACvB7iB,cAAe3e,EAAKuX,MAAMwB,UAAUtgB,SAASiB,OAAOilB,cACpDsjB,oBAAqBjiC,EAAKq+B,wBAC1BvY,kBAAmB9lB,EAAKuX,MAAMwB,UAAUtgB,SAASiB,OAAOosB,kBACxDrkB,UAAWzB,EAAKuX,MAAMwB,UAAUngB,WAAWiZ,KAAKc,MAChDkU,aAAc7mB,EAAKuX,MAAMwB,UAAUtgB,SAASiB,OAAOmtB,aACnDjc,aAAcA,IAItB,OACIkO,EAACopB,EAAA5oB,GACGnjB,IAAQgG,EAAK8E,GAAE,WACf9E,KAAMA,EACNmtB,aAActpB,EAAKuX,MAAMwB,UAAU9c,QAAQqtB,aAC3CC,cAAevpB,EAAKuX,MAAMwB,UAAU9c,QAAQstB,cAC5CuY,WAAY9hC,EAAKuX,MAAMwB,UAAU1d,GAAGswB,UAAUxvB,KAC9CnC,OAAQA,EACR+nC,kBAAmB/hC,EAAKuhC,sBACxBS,iBAAkBhiC,EAAKwhC,qBACvB7iB,cAAe3e,EAAKuX,MAAMwB,UAAUtgB,SAASiB,OAAOilB,cACpDsjB,oBAAqBjiC,EAAKq+B,wBAC1BvY,kBAAmB9lB,EAAKuX,MAAMwB,UAAUtgB,SAASiB,OAAOosB,kBACxDrkB,UAAWzB,EAAKuX,MAAMwB,UAAUngB,WAAWiZ,KAAKc,MAChDkU,aAAc7mB,EAAKuX,MAAMwB,UAAUtgB,SAASiB,OAAOmtB,kBAQnEya,EAAA9qC,UAAA+qC,sBAAR,SAA8BplC,GAC1B,IAAMgmC,EAAiB9qC,KAAKkgB,MAAMwB,UAAU1d,GAAGswB,UAC3CwW,EAAehmC,MAAQgmC,EAAehmC,KAAK8E,KAAO9E,EAAK8E,GACvD5J,KAAKkgB,MAAMvB,mBAEX3e,KAAKkgB,MAAMyI,gBAAgB7jB,IAI3BmlC,EAAA9qC,UAAAgrC,qBAAR,SAA6BrlC,GACH9E,KAAKkgB,MAAMwB,UAAU9c,QAAQstB,cACjCptB,EAAK8E,IACnB5J,KAAKkgB,MAAMxQ,aAAa5K,GAExB9E,KAAKkgB,MAAMzQ,WAAW3K,IAItBmlC,EAAA9qC,UAAA6nC,wBAAR,SAAgC5f,EAAoBtiB,GAChD9E,KAAKkgB,MAAMiH,aAAaC,EAAYtiB,IAGhCmlC,EAAA9qC,UAAAirC,gBAAR,SAAwBvc,GACpB7tB,KAAKqqC,WAAWxc,IAGZoc,EAAA9qC,UAAAkrC,WAAR,SAAmBxc,GAAnB,IAAAllB,EAAA3I,KACQ6tB,GAAKA,EAAEkd,YAAc,IACjBld,EAAEkd,YAAc,MAAQ/qC,KAAKkB,MAAMspC,YACnCxqC,KAAKgrC,UAAWR,aAAa,IACtB3c,EAAEkd,YAAc,KAAO/qC,KAAKkB,MAAMspC,aACzCxqC,KAAKgrC,UAAWR,aAAa,IAGjCh4B,WAAW,WACP7J,EAAK0hC,WAAWxc,IACjB,OAGfoc,EArHA,CAA0BnT,EAAA,WAsIXv3B,EAAA,EAAAtB,OAAA64B,EAAA,QAAA74B,CACX,SAACiD,GAAU,OAAGwgB,UAAWxgB,IACzB,SAACF,GAAa,OACV2d,iBAAkB,WAAQ3d,EAAS/C,OAAAmuB,EAAA,EAAAnuB,KACnC0qB,gBAAiB,SAAC7jB,GAAiB9D,EAAS/C,OAAA8vB,EAAA,EAAA9vB,CAAgB6G,KAC5D4K,aAAc,SAAC5K,GAAiB9D,EAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAa6G,KACtD2K,WAAY,SAAC3K,GAAiB9D,EAAS/C,OAAA+nB,EAAA,EAAA/nB,CAAW6G,KAClDqiB,aAAc,SAACC,EAAoBtiB,GAAiB9D,EAAS/C,OAAAgoB,EAAA,EAAAhoB,CAAampB,EAAYtiB,OAP/E,CASbmlC,kBC3MF3sC,EAAAD,QAAA4tC,iBCAA3tC,EAAAD,QAAA6tC,wCCAA/tC,EAAAU,EAAA0B,EAAA,sBAAA4rC,IAAA,IAAAx4B,EAAAxV,EAAA,IAAA6tB,EAAA7tB,EAAA,IAAAiuC,EAAAjuC,EAAA,IAAAkuC,EAAAluC,EAAA,KASaguC,EAAeltC,OAAA0U,EAAA,EAAA1U,CACxBmtC,EAAA,EACAC,EAAA,EACArgB,EAAA,iCCZJ7tB,EAAAU,EAAA0B,EAAA,sBAAA+rC,IAAAnuC,EAAAU,EAAA0B,EAAA,sBAAAgsC,IAAA,IAAA54B,EAAAxV,EAAA,GAEMquC,EAAmBvtC,OAAA0U,EAAA,EAAA1U,CAAM,SAC3ByD,EACA+pC,EACAjiC,GAEA,OAAIiiC,EACWjiC,EAAChG,QAAE,IAAI9B,EAAI,IAuB9B,SAAyB+pC,GACrB,MAAO,UAAUA,EAAMnqC,MAAK,aAAamqC,EAAMC,IAAG,IAxBpBC,CAAgBF,GAAM,MAE7CjiC,IAQE8hC,EAAsBE,EAAiB,YAOvCD,EAAqBC,EAAiB,0CCzBnDruC,EAAAU,EAAA0B,EAAA,sBAAAqsC,IAAAzuC,EAAAU,EAAA0B,EAAA,sBAAAssC,IAAA,IAAAl5B,EAAAxV,EAAA,GAOayuC,EAAc3tC,OAAA0U,EAAA,EAAA1U,CAAM,SAACkK,EAAkDqB,GAChF,GAAIrB,EAAM,CACN,IAAM2jC,EAAU7tC,OAAOqQ,KAAKnG,GAC5B,GAAI2jC,EAAQ1rC,OAAS,EACjB,OAAYoJ,EAAChG,QAAE,SAASsoC,EAAQjxB,KAAK,SAAQ,MAGrD,OAAOrR,IAQEqiC,EAAa5tC,OAAA0U,EAAA,EAAA1U,CAAM,SAACi3B,EAAa1rB,GAC1C,OAAI0rB,EAAI90B,OAAS,EACDoJ,EAAChG,QAAE,SAAS0xB,EAAG,QAAQA,EAAG,MAEnC1rB,kCCnBJ,SAASuiC,EAAetpC,GAC3B,MAAuB,iBAAZA,GAED,YAAa,cAAe,WAAY,iBAAkB,eACvDwS,QAAQxS,IAAY,IAErBA,EAAQgK,SAGbhK,EAAQgK,QAAQwI,QAAQ,SAAW,EAd9C9X,EAAAU,EAAA0B,EAAA,sBAAAwsC,2tBCiDAC,EAAA,SAAA/rB,GAAA,SAAA+rB,mDAsBA,OAtB0BtnC,EAAA,EAAAsnC,EAAA/rB,GACf+rB,EAAA7sC,UAAAqiB,OAAP,SAAcC,GACV,IAAMsN,EAAa/uB,KAAKkgB,MAAM6O,WAExBqH,GACF6V,eAAiB,EACjBC,0BAA2BlsC,KAAKkgB,MAAMqU,UAA2B,eAAfxF,GAC/B,eAAfA,GAGR,MAAmB,eAAfA,EACOtN,EAAC0qB,EAAA,GAASrtC,IAAI,cAAcs3B,iBAAkBA,IAGrD3U,EAAA,OAAK7X,GAAG,yBAAyBusB,QAASC,GACtC3U,EAAC2qB,EAAA,GAAUttC,IAAI,aAAa41B,QAAS10B,KAAKkgB,MAAMmsB,mBAChD5qB,EAAC6qB,EAAA,GAAOxtC,IAAI,WACZ2iB,EAAC8qB,EAAA,GAAUztC,IAAI,eACf2iB,EAAC+qB,EAAA,GAAY1tC,IAAI,mBAIjCktC,EAtBA,CAA0BlV,EAAA,WAiCXv3B,EAAA,QAAAtB,OAAA64B,EAAA,QAAA74B,CACX,SAACiD,GAAU,OACP6tB,WAAY7tB,EAAME,SAASiB,OAAO0sB,WAClCwF,SAAUrzB,EAAM8C,GAAGuwB,SAASO,UAC5BuX,iBAAkBnrC,EAAM8C,GAAGswB,UAAUI,UAEzC,WAAM,UANK,CAObsX,+CC3FF7uC,EAAAU,EAAA0B,EAAA,sBAAAktC,IAAA,IAAA95B,EAAAxV,EAAA,GAOasvC,EAAexuC,OAAA0U,EAAA,EAAA1U,CAAM,SAACmH,EAAmCoE,GAClE,OAAMpE,EACUoE,EAAChG,QAAE,UAAU4B,EAAMwE,GAAE,MAE9BJ,kCCXXrM,EAAAU,EAAA0B,EAAA,sBAAAmtC,IAAA,IAAA/5B,EAAAxV,EAAA,GAQauvC,EAAgBzuC,OAAA0U,EAAA,EAAA1U,CAAM,SAC/B+J,EACAtF,EACA8G,GAEA,GAAMxB,EACF,OAAQA,EAAOxJ,OACX,IAAK,gBACD,OAAIkE,GAAQA,EAAKe,MAEN+F,EAAChG,QACJ,2CAA2Cd,EAAKe,MAAK,6CAGjD+F,EAAChG,QAAE,yCACnB,IAAK,aACD,OAAYgG,EAAChG,QAAE,+BACnB,QACI,OAAOgG,EAGnB,OAAOA,kCC7BXrM,EAAAU,EAAA0B,EAAA,sBAAAotC,IAAA,IAAAh6B,EAAAxV,EAAA,GAOawvC,EAAgB1uC,OAAA0U,EAAA,EAAA1U,CAAM,SAAC6J,EAAuC0B,GACvE,OAAM1B,EACU0B,EAAChG,QAAE,WAAWsE,EAAOtJ,MAAK,MAEnCgL,kCCXXrM,EAAAU,EAAA0B,EAAA,sBAAAqtC,IAAA,IAAA7kB,EAAA5qB,EAAA,IAAA0vC,EAAA1vC,EAAA,IAiBa2vC,EAA+B,SACxC3rC,EACAwB,EACA+G,EACAqjC,GAEA,OAAA9uC,OAAA4uC,EAAA,EAAA5uC,CACIkD,EACGwB,EAAOuG,QAAO,mBAAmBQ,EAAO,WACzCF,EAAG,iBAAiBujC,KASjBC,EAAqB,SAAC7rC,EAAkBwB,EAAcqG,GAC/D,OAAA/K,OAAA4uC,EAAA,EAAA5uC,CAAYkD,EAAYwB,EAAOuG,QAAO,oBAAsBF,QAAOA,KAS1D4jC,EAA0B,SACnCzrC,EACAwB,EACAsqC,EACAC,QAAA,IAAAA,MAAA,MAEA,IAEIC,EACAC,EACAC,EACAC,EALE1vB,EAAM,IAAImK,EAUhB,OAHA9pB,OAAA4uC,EAAA,EAAA5uC,CAAkBkD,EAASwB,EAAQsqC,EAAYM,uBAC1C1rC,KAIL,SAA8BI,GACtBA,EAAS2C,QAAQ,IAAM3C,EAAS2C,QAAQ,GAAGgF,IAC3CujC,EAAqBlrC,EAAS2C,QAAQ,GAAGgF,GAEzC3L,OAAA4uC,EAAA,EAAA5uC,CAAyBkD,EAASwB,EAAQwqC,GACrCtrC,KAAK2rC,EAAuBC,IAEjCA,EAAuB,+CAXCA,GAEzB7vB,EAaP,SAAS4vB,EAAsBvrC,GAC3BmrC,EAAkCnrC,EAAS2L,eAAe,GAAG8/B,OAAOlgC,MAAM,KAAK,GAC/EvP,OAAA4uC,EAAA,EAAA5uC,CAAkBkD,EAASwB,EAAQsqC,EAAYU,+BAC1C9rC,KAAK+rC,EAAgCH,GAE1CT,EAAmB7rC,EAASwB,EAAQuqC,GAC/BrrC,KAAKgsC,EAA2BJ,GAGzC,SAASG,EAA+B3rC,GAChCA,EAAS2C,QAAQ,GACjBkoC,EAA6B3rC,EAASwB,EAAQV,EAAS2C,QAAQ,GAAGgF,GAAIwjC,GACjEvrC,KAAKisC,EAA6BL,GAEvCA,EAAuB,uDAI/B,SAASK,EAA4B7rC,GACD,IAA5BA,EAAS2C,QAAQxE,QAAgB6B,EAAS2C,QAAQ,GAClD3G,OAAA4uC,EAAA,EAAA5uC,CAAckD,EAASwB,EAAQV,EAAS2C,QAAQ,GAAGgF,IAC9C/H,KAAKksC,EAAyBN,GAEnCA,EAAuB,4EAI/B,SAASM,EAAwB9rC,GAC7BorC,EAA4BprC,EAAS2L,eAAe,GAEhDq/B,EAAYe,UAAcV,EAC1BW,GAAwCZ,IAC/BC,GACTW,GAAwCZ,EAA2BC,IAI3E,SAASO,EAA0B5rC,GAC/B,IAAMisC,EAAUjsC,EAAS4C,IAAI,SAACwoB,GAAgB,OAC1Crf,YAAaqf,EAAO8gB,cACpBrgC,MAAOuf,EAAOA,UACd7S,KAAK,SAASyH,EAA2CtiB,GACzD,MAA8B,OAA1BsiB,EAAEnU,MAAMC,eACA,EAELkU,EAAEjU,YAAY0f,cAAc/tB,EAAEqO,eAGzCs/B,GACI3lC,WAAYumC,EACZhgC,YAAa,MACbF,YAAa,UACbF,MAAO,UAGPm/B,EAAYe,UAAcX,EAC1BY,GAAwCZ,IAC/BA,GACTY,GAAwCZ,EAA2BC,IAI3E,SAASW,EAAuClhC,GAC5C6Q,EAAInM,SAAU1E,OAAMA,EAAEnD,GAAIujC,IAG9B,SAASM,EAAuB1rC,GAC5B6b,EAAIlM,OAAO3P,mCC7InB5E,EAAAU,EAAA0B,EAAA,sBAAA6uC,IAAA,IAAAz7B,EAAAxV,EAAA,IAAAkxC,EAAAlxC,EAAA,KAMaixC,EAAgB,SAACzrC,EAAcD,GAAe,OAAAzE,OAAA0U,EAAA,EAAA1U,CACvDA,OAAAowC,EAAA,EAAApwC,CAAmB0E,GADoC1E,CAEzDyE","file":"ItemBrowser/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 289);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import { ItemBrowserState } from \"../../_reducers/index\";\r\nimport { DESELECT_ALL } from \"./index\";\r\nimport { getCountsRequest, getSearchRequest, getTagsRequest } from \"./_utils/requestHelpers\";\r\nimport { mixinOrganizationInfo } from \"./allOrganizations\";\r\nimport * as all from \"dojo/promise/all\";\r\nimport { mixinItemInfo } from \"../../../_utils/index\";\r\nimport {\r\n    initialize,\r\n    fetchCustomSectionInfo,\r\n    fetchLivingAtlasInfo,\r\n    fetchOrgInfo,\r\n    fetchUserInfo\r\n} from \"../index\";\r\nimport { getCurrentPortal, isCustomSection, getCustomSection, allowTagsQuery } from \"../../_utils/index\";\r\nimport { CustomSection } from \"../../_reducers/settings/config\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\nexport const SEARCH = \"SEARCH\";\r\nexport const LOADING_CONTENT = \"LOADING_CONTENT\";\r\nexport const LOADING_CONTENT_SUCCESS = \"LOADING_CONTENT_SUCCESS\";\r\nexport const LOADING_CONTENT_FAILED = \"LOADING_CONTENT_FAILED\";\r\nexport const LOADING_NEXT = \"LOADING_NEXT\";\r\nexport const LOADING_NEXT_SUCCESS = \"LOADING_NEXT_SUCCESS\";\r\nexport const LOADING_NEXT_FAILED = \"LOADING_NEXT_FAILED\";\r\n\r\n/**\r\n * Action creator for loading of more results based on the current state\r\n * @param num - number of results to return from the search (max 100)\r\n */\r\nexport const loadMoreContent = (num?: number) => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    const state = getState();\r\n    const request = state.settings.utils.request;\r\n    const start = state.parameters.nextQuery.nextStart;\r\n\r\n    dispatch({ type: LOADING_NEXT });\r\n\r\n    const [url, parameters] = getSearchRequest({ num, start }, state);\r\n    request(url, parameters)\r\n        .then(mixinOrganizationInfo(state), (err: any) => dispatch(handleNextError(err)))\r\n        .then(\r\n            (response: any) => dispatch(handleNextResponse(state, response)),\r\n            (err: any) => dispatch(handleNextError(err))\r\n        );\r\n};\r\n\r\n/**\r\n * Action creator for starting a new search based on the current state\r\n * @param updateCounts - indicates whether or not to also fetch count aggregations alongside this query\r\n */\r\nexport const search = (updateCounts?: boolean) => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    const state = getState();\r\n\r\n    dispatch({ type: LOADING_CONTENT });\r\n    if (state.settings.config.clearSelectionBetweenSearches) {\r\n        dispatch({ type: DESELECT_ALL });\r\n    }\r\n\r\n    dispatch(attemptSearch(updateCounts));\r\n};\r\n\r\n/**\r\n * Action creator for attempting a query against a portal\r\n * @param updateCounts - indicates whether or not to also fetch count aggregations alongside this query\r\n */\r\nconst attemptSearch = (updateCounts?: boolean) => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    let state = getState();\r\n    const section = state.parameters.section;\r\n    const user = state.settings.utils.portal.user;\r\n    const loggedIn = !!user;\r\n\r\n    dispatch(initialize()).then((self: Pojo) => {\r\n        if (section === \"livingAtlas\") {\r\n            dispatch(fetchLivingAtlasInfo(self))\r\n                .then(\r\n                    () => executeSearch(dispatch, getState(), updateCounts),\r\n                    () => dispatch({ type: LOADING_CONTENT_FAILED, payload: \"Couldn't load the living atlas info.\" })\r\n                );\r\n        } else if (\r\n            (\r\n                section === \"myContent\" ||\r\n                section === \"myGroups\" ||\r\n                section === \"myFavorites\" ||\r\n                section === \"subscription\"\r\n            ) && loggedIn\r\n        ) {\r\n            all(\r\n                [dispatch(fetchUserInfo())].concat(\r\n                    loggedIn && user.orgId ?\r\n                        [dispatch(fetchOrgInfo())] : []\r\n                )\r\n            )\r\n                .then(\r\n                    () => executeSearch(dispatch, getState(), updateCounts),\r\n                    () => dispatch({ type: LOADING_CONTENT_FAILED, payload: \"Couldn't load the user info.\" })\r\n                );\r\n        } else if (section === \"myOrganization\" && loggedIn) {\r\n            dispatch(fetchOrgInfo())\r\n                .then(\r\n                    () => executeSearch(dispatch, getState(), updateCounts),\r\n                    () => dispatch({ type: LOADING_CONTENT_FAILED, payload: \"Couldn't load the organization info.\" })\r\n                );\r\n        } else if (isCustomSection(state.settings.config.customSections, section)) {\r\n            dispatch(fetchCustomSectionInfo())\r\n                .then(\r\n                    () => executeSearch(dispatch, getState(), updateCounts),\r\n                    () => dispatch({ type: LOADING_CONTENT_FAILED, payload: \"Couldn't load the custom section info.\" })\r\n                );\r\n        } else {\r\n            executeSearch(dispatch, state, updateCounts);\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * Performs the search requests once all required state is available\r\n * @param dispatch - dispatch function for the store\r\n * @param state - current state of the item browser\r\n * @param updateCounts - boolean indicating whether or not to update the counts\r\n */\r\nfunction executeSearch(dispatch: any, state: ItemBrowserState, updateCounts?: boolean) {\r\n    const request = state.settings.utils.request;\r\n    const [url, parameters] = getSearchRequest({}, state);\r\n\r\n    const searchRequest = request(url, parameters) // Primary request\r\n        .then(\r\n            mixinOrganizationInfo(state),\r\n            (err: any) => dispatch({ type: LOADING_CONTENT_FAILED, payload: err })\r\n        );\r\n\r\n    let countsRequest1; // Need 2 requests for counts because of server-side 3 field limit\r\n    let countsRequest2;\r\n    if (!!updateCounts) {\r\n        const [countUrl1, countParameters1] = getCountsRequest(state, [\"access\", \"contentstatus\", \"categories\"]);\r\n        countsRequest1 = request(countUrl1, countParameters1);\r\n\r\n        const customSections = state.settings.config.customSections;\r\n        const section = state.parameters.section;\r\n        if (\r\n            allowTagsQuery(section) ||\r\n            (\r\n                isCustomSection(customSections, section) &&\r\n                allowTagsQuery(getCustomSection(customSections, section) as CustomSection)\r\n            )\r\n        ) {\r\n            const [countUrl2, countParameters2] = getTagsRequest(state, state.ui.tagsFilter.filterString);\r\n            countsRequest2 = request(countUrl2, countParameters2);\r\n        }\r\n    }\r\n\r\n    const requests = [searchRequest, countsRequest1, countsRequest2]\r\n        .filter((req: any) => !!req); // Remove inapplicable requests\r\n\r\n    all(requests as any)\r\n        .then(\r\n            (responses: any) => dispatch(handleSearchResponse(state, responses)),\r\n            (err: any) => dispatch({ type: LOADING_CONTENT_FAILED, payload: err })\r\n        );\r\n}\r\n\r\n/**\r\n * Action creator for handling a successful search response\r\n * @param state - current state of the item browser\r\n * @param responses - array of search and counts responses\r\n */\r\nfunction handleSearchResponse(state: ItemBrowserState, responses: any[]) {\r\n    const imgDir = state.settings.utils.iconDir;\r\n    const portal = getCurrentPortal(state);\r\n    return {\r\n        type: LOADING_CONTENT_SUCCESS,\r\n        payload: {\r\n            search: {\r\n                ...responses[0].data,\r\n                results: responses[0].data.results.map((item: Pojo) => mixinItemInfo(portal, imgDir, item))\r\n            }, // Add the search results to payload\r\n            aggregations: (\r\n                responses[1] && responses[1].data && responses[1].data.aggregations\r\n            ) ? { // If counts were retrieved, add them to the payload as well\r\n                    counts: [...responses[1].data.aggregations.counts]\r\n                        .concat( // If counts for tags were received, add those to the payload as well\r\n                            responses[2] && responses[2].data && responses[2].data.aggregations ?\r\n                                [...responses[2].data.aggregations.counts] : []\r\n                        ),\r\n                    countInfo: { // Add additional information needed to populate counts\r\n                        section: state.parameters.section,\r\n                        group: state.parameters.filter.group,\r\n                        custom: state.settings.config.customSections.filter(\r\n                            (section: any) => section.name === state.parameters.section\r\n                        )[0]\r\n                    }\r\n                } : undefined\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Action creator for handling response from loading the next results\r\n * @param state - current state of the item browser\r\n * @param response - search response for next result set\r\n */\r\nconst handleNextResponse = (state: ItemBrowserState, response: any) => {\r\n    const imgDir = state.settings.utils.iconDir;\r\n    const portal = getCurrentPortal(state);\r\n    return {\r\n        type: LOADING_NEXT_SUCCESS,\r\n        payload: {\r\n            ...response.data,\r\n            results: response.data.results.map((item: Pojo) => mixinItemInfo(portal, imgDir, item))\r\n        }\r\n    };\r\n};\r\n\r\n/**\r\n * Action creator for handling an error from loading the next results\r\n * @param err - error returned from request\r\n */\r\nconst handleNextError = (err: any) => (\r\n    { type: LOADING_NEXT_FAILED, payload: err }\r\n);\r\n","import { ItemBrowserState } from \"../../_reducers/index\";\r\n\r\nexport const UPDATE_CUSTOM_FILTER = \"UPDATE_CUSTOM_FILTER\";\r\nexport const UPDATE_ORG_GROUP_FILTER = \"UPDATE_ORG_GROUP_FILTER\";\r\nexport const UPDATE_LIVING_ATLAS_CATEGORIES_FILTER = \"UPDATE_LIVING_ATLAS_CATEGORIES_FILTER\";\r\nexport const UPDATE_LIVING_ATLAS_REGION_FILTER = \"UPDATE_LIVING_ATLAS_REGION_FILTER\";\r\nexport const UPDATE_ORG_CATEGORIES_FILTER = \"UPDATE_ORG_CATEGORIES_FILTER\";\r\nexport const UPDATE_GROUP_CATEGORIES_FILTER = \"UPDATE_GROUP_CATEGORIES_FILTER\";\r\nexport const UPDATE_ITEM_TYPE_FILTER = \"UPDATE_ITEM_TYPE_FILTER\";\r\nexport const UPDATE_MODIFIED_FILTER = \"UPDATE_MODIFIED_FILTER\";\r\nexport const UPDATE_CREATED_FILTER = \"UPDATE_CREATED_FILTER\";\r\nexport const UPDATE_SHARED_FILTER = \"UPDATE_SHARED_FILTER\";\r\nexport const UPDATE_GROUP_FILTER = \"UPDATE_GROUP_FILTER\";\r\nexport const UPDATE_FOLDER_FILTER = \"UPDATE_FOLDER_FILTER\";\r\nexport const UPDATE_STATUS_FILTER = \"UPDATE_STATUS_FILTER\";\r\nexport const UPDATE_MAP_AREA_FILTER = \"UPDATE_MAP_AREA_FILTER\";\r\nexport const UPDATE_SEARCH_ORG_FILTER = \"UPDATE_SEARCH_ORG_FILTER\";\r\nexport const UPDATE_TAGS_FILTER = \"UPDATE_TAGS_FILTER\";\r\nexport const CLEAR_ALL_FILTERS = \"CLEAR_ALL_FILTERS\";\r\n\r\nexport const updateCustomFilter = (index: number, filter?: { value: string, text?: string }) => ({\r\n    type: UPDATE_CUSTOM_FILTER,\r\n    payload: { index, filter }\r\n});\r\n\r\nexport const updateOrgGroupFilter = (group?: ItemBrowserState[\"parameters\"][\"filter\"][\"orgGroup\"]) => {\r\n    return {\r\n        type: UPDATE_ORG_GROUP_FILTER,\r\n        payload: group\r\n    };\r\n};\r\n\r\nexport const updateItemTypeFilter = (itemType?: ItemBrowserState[\"parameters\"][\"filter\"][\"itemType\"]) => {\r\n    return {\r\n        type: UPDATE_ITEM_TYPE_FILTER,\r\n        payload: itemType\r\n    };\r\n};\r\n\r\nexport const updateOrgCategoriesFilter = (categories?: ItemBrowserState[\"parameters\"][\"filter\"][\"orgCategories\"]) => {\r\n    return {\r\n        type: UPDATE_ORG_CATEGORIES_FILTER,\r\n        payload: categories\r\n    };\r\n};\r\n\r\nexport const updateLivingAtlasCategoriesFilter = (categories?: ItemBrowserState[\"parameters\"][\"filter\"][\"livingAtlasCategories\"]) => {\r\n    return {\r\n        type: UPDATE_LIVING_ATLAS_CATEGORIES_FILTER,\r\n        payload: categories\r\n    };\r\n};\r\n\r\nexport const updateLivingAtlasRegionFilter = (categories?: ItemBrowserState[\"parameters\"][\"filter\"][\"livingAtlasCategories\"]) => {\r\n    return {\r\n        type: UPDATE_LIVING_ATLAS_REGION_FILTER,\r\n        payload: categories\r\n    };\r\n};\r\n\r\nexport const updateGroupCategoriesFilter = (\r\n    categories?: ItemBrowserState[\"parameters\"][\"filter\"][\"groupCategories\"]\r\n) => {\r\n    return {\r\n        type: UPDATE_GROUP_CATEGORIES_FILTER,\r\n        payload: categories\r\n    };\r\n};\r\n\r\nexport const updateModifiedFilter = (\r\n        section?: ItemBrowserState[\"ui\"][\"filters\"][\"modifiedSection\"],\r\n        modified?: ItemBrowserState[\"parameters\"][\"filter\"][\"dateModified\"]\r\n) => {\r\n    return {\r\n        type: UPDATE_MODIFIED_FILTER,\r\n        payload: { section, modified }\r\n    };\r\n};\r\n\r\nexport const updateCreatedFilter = (\r\n    section?: ItemBrowserState[\"ui\"][\"filters\"][\"createdSection\"],\r\n    created?: ItemBrowserState[\"parameters\"][\"filter\"][\"dateModified\"]\r\n) => {\r\n    return {\r\n        type: UPDATE_CREATED_FILTER,\r\n        payload: { section, created }\r\n    };\r\n};\r\n\r\nexport const updateSharedFilter = (shared?: ItemBrowserState[\"parameters\"][\"filter\"][\"shared\"]) => {\r\n    return {\r\n        type: UPDATE_SHARED_FILTER,\r\n        payload: shared\r\n    };\r\n};\r\n\r\nexport const updateFolderFilter = (folder?: ItemBrowserState[\"parameters\"][\"filter\"][\"folder\"]) => {\r\n    return {\r\n        type: UPDATE_FOLDER_FILTER,\r\n        payload: folder\r\n    };\r\n};\r\n\r\nexport const updateGroupFilter = (group?: ItemBrowserState[\"parameters\"][\"filter\"][\"group\"]) => {\r\n    return {\r\n        type: UPDATE_GROUP_FILTER,\r\n        payload: group\r\n    };\r\n};\r\n\r\nexport const updateStatusFilter = (status?: ItemBrowserState[\"parameters\"][\"filter\"][\"status\"]) => {\r\n    return {\r\n        type: UPDATE_STATUS_FILTER,\r\n        payload: status\r\n    };\r\n};\r\n\r\nexport const updateMapAreaFilter = (searchMapArea: boolean) => {\r\n    return {\r\n        type: UPDATE_MAP_AREA_FILTER,\r\n        payload: searchMapArea\r\n    };\r\n};\r\n\r\nexport const updateSearchOrgFilter = (searchOrg: boolean) => {\r\n    return {\r\n        type: UPDATE_SEARCH_ORG_FILTER,\r\n        payload: searchOrg\r\n    };\r\n};\r\n\r\nexport const updateTagsFilter = (tags?: { [tagName: string]: boolean }) => {\r\n    return {\r\n        type: UPDATE_TAGS_FILTER,\r\n        payload: tags\r\n    };\r\n};\r\n","export * from \"./parameters/index\";\r\nexport * from \"./results/index\";\r\nexport * from \"./ui/index\";\r\n\r\nexport const CLEAR_SELECTION_STATE = \"CLEAR_SELECTION_STATE\";\r\n","/**\r\n * Yields a new function which is the curried form of the input function.\r\n * Curried functions can be partially applied with any number of arguments less than their arity to yield\r\n * a new curried function accepting the remaining arguments.\r\n */\r\nexport interface CurriedTypeGuard2<T1, T2, R extends T2> {\r\n    (t1: T1): (t2: T2) => t2 is R;\r\n    (t1: T1, t2: T2): t2 is R;\r\n}\r\nexport interface CurriedTypeGuard3<T1, T2, T3, R extends T3> {\r\n    (t1: T1): CurriedTypeGuard2<T2, T3, R>;\r\n    (t1: T1, t2: T2): (t3: T3) => t3 is R;\r\n    (t1: T1, t2: T2, t3: T3): t3 is R;\r\n}\r\nexport interface CurriedTypeGuard4<T1, T2, T3, T4, R extends T4> {\r\n    (t1: T1): CurriedTypeGuard3<T2, T3, T4, R>;\r\n    (t1: T1, t2: T2): CurriedTypeGuard2<T3, T4, R>;\r\n    (t1: T1, t2: T2, t3: T3): (t4: T4) => t4 is R;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4): t4 is R;\r\n}\r\nexport interface CurriedTypeGuard5<T1, T2, T3, T4, T5, R extends T5> {\r\n    (t1: T1): CurriedTypeGuard4<T2, T3, T4, T5, R>;\r\n    (t1: T1, t2: T2): CurriedTypeGuard3<T3, T4, T5, R>;\r\n    (t1: T1, t2: T2, t3: T3): CurriedTypeGuard2<T4, T5, R>;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4): (t5: T5) => t5 is R;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4, t5: T5): t5 is R;\r\n}\r\nexport interface CurriedTypeGuard6<T1, T2, T3, T4, T5, T6, R extends T6> {\r\n    (t1: T1): CurriedTypeGuard5<T2, T3, T4, T5, T6, R>;\r\n    (t1: T1, t2: T2): CurriedTypeGuard4<T3, T4, T5, T6, R>;\r\n    (t1: T1, t2: T2, t3: T3): CurriedTypeGuard3<T4, T5, T6, R>;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4): CurriedTypeGuard2<T5, T6, R>;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4, t5: T5): (t6: T6) => t6 is R;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4, t5: T5, t6: T6): t6 is R;\r\n}\r\nexport interface CurriedFunction2<T1, T2, R> {\r\n    (t1: T1): (t2: T2) => R;\r\n    (t1: T1, t2: T2): R;\r\n}\r\nexport interface CurriedFunction3<T1, T2, T3, R> {\r\n    (t1: T1): CurriedFunction2<T2, T3, R>;\r\n    (t1: T1, t2: T2): (t3: T3) => R;\r\n    (t1: T1, t2: T2, t3: T3): R;\r\n}\r\nexport interface CurriedFunction4<T1, T2, T3, T4, R> {\r\n    (t1: T1): CurriedFunction3<T2, T3, T4, R>;\r\n    (t1: T1, t2: T2): CurriedFunction2<T3, T4, R>;\r\n    (t1: T1, t2: T2, t3: T3): (t4: T4) => R;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4): R;\r\n}\r\nexport interface CurriedFunction5<T1, T2, T3, T4, T5, R> {\r\n    (t1: T1): CurriedFunction4<T2, T3, T4, T5, R>;\r\n    (t1: T1, t2: T2): CurriedFunction3<T3, T4, T5, R>;\r\n    (t1: T1, t2: T2, t3: T3): CurriedFunction2<T4, T5, R>;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4): (t5: T5) => R;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4, t5: T5): R;\r\n}\r\nexport interface CurriedFunction6<T1, T2, T3, T4, T5, T6, R> {\r\n    (t1: T1): CurriedFunction5<T2, T3, T4, T5, T6, R>;\r\n    (t1: T1, t2: T2): CurriedFunction4<T3, T4, T5, T6, R>;\r\n    (t1: T1, t2: T2, t3: T3): CurriedFunction3<T4, T5, T6, R>;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4): CurriedFunction2<T5, T6, R>;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4, t5: T5): (t6: T6) => R;\r\n    (t1: T1, t2: T2, t3: T3, t4: T4, t5: T5, t6: T6): R;\r\n}\r\nexport function curry<T1, T2, TResult extends T2>(\r\n    fn: (a: T1, b: T2) => b is TResult\r\n): CurriedTypeGuard2<T1, T2, TResult>;\r\nexport function curry<T1, T2, T3, TResult extends T3>(\r\n    fn: (a: T1, b: T2, c: T3) => c is TResult\r\n): CurriedTypeGuard3<T1, T2, T3, TResult>;\r\nexport function curry<T1, T2, T3, T4, TResult extends T4>(\r\n    fn: (a: T1, b: T2, c: T3, d: T4) => d is TResult\r\n): CurriedTypeGuard4<T1, T2, T3, T4, TResult>;\r\nexport function curry<T1, T2, T3, T4, T5, TResult extends T5>(\r\n    fn: (a: T1, b: T2, c: T3, d: T4, e: T5) => e is TResult\r\n): CurriedTypeGuard5<T1, T2, T3, T4, T5, TResult>;\r\nexport function curry<T1, T2, T3, T4, T5, T6, TResult extends T6>(\r\n    fn: (a: T1, b: T2, c: T3, d: T4, e: T5, f: T6) => f is TResult\r\n): CurriedTypeGuard6<T1, T2, T3, T4, T5, T6, TResult>;\r\nexport function curry<T1, T2, TResult>(\r\n    fn: (a: T1, b: T2) => TResult\r\n): CurriedFunction2<T1, T2, TResult>;\r\nexport function curry<T1, T2, T3, TResult>(\r\n    fn: (a: T1, b: T2, c: T3) => TResult\r\n): CurriedFunction3<T1, T2, T3, TResult>;\r\nexport function curry<T1, T2, T3, T4, TResult>(\r\n    fn: (a: T1, b: T2, c: T3, d: T4) => TResult\r\n): CurriedFunction4<T1, T2, T3, T4, TResult>;\r\nexport function curry<T1, T2, T3, T4, T5, TResult>(\r\n    fn: (a: T1, b: T2, c: T3, d: T4, e: T5) => TResult\r\n): CurriedFunction5<T1, T2, T3, T4, T5, TResult>;\r\nexport function curry<T1, T2, T3, T4, T5, T6, TResult>(\r\n    fn: (a: T1, b: T2, c: T3, d: T4, e: T5, f: T6) => TResult\r\n): CurriedFunction6<T1, T2, T3, T4, T5, T6, TResult>;\r\nexport function curry(\r\n    fn: (...args: any[]) => any\r\n) {\r\n    return function curried(this: any, ...args: any[]) {\r\n        return args.length >= fn.length ?\r\n            fn.call(this, ...args) :\r\n            (...rest: any[]) => {\r\n                return curried.call(this, ...args, ...rest);\r\n            };\r\n    };\r\n}\r\n","import * as all from \"dojo/promise/all\";\r\nimport { Pojo } from \"../../../Component\";\r\nexport type Request = (url: string, options?: Pojo) => dojo.Deferred<any>;\r\n\r\n/**\r\n * Fetch self for the current portal\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param culture - optional string representing the culture\r\n */\r\nexport const fetchSelf = (request: Request, portal: Pojo, culture?: string) =>\r\n    requestJSON(request, `${portal.restUrl}/portals/self`, { culture, default: true });\r\n\r\n/**\r\n * Fetch an item's data using its id\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param itemId - id of the item to get data for\r\n */\r\nexport const fetchItemData = (request: Request, portal: Pojo, itemId: string) => \r\n    requestJSON(request, `${portal.restUrl}/content/items/${itemId}/data`);\r\n\r\n/**\r\n * Fetch a group using a query string (groups are often provided in this format by the self response)\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param searchQuery - query string\r\n */\r\nexport const fetchGroupByQuery = (request: Request, portal: Pojo, searchQuery: string) => \r\n    requestJSON(request, `${portal.restUrl}/community/groups`, { q: searchQuery });\r\n\r\n/**\r\n * Fetch category schema for a specified group\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param groupId - id of the group to fetch category schema for\r\n */\r\nexport const fetchGroupCategorySchema = (request: Request, portal: Pojo, groupId: string) => \r\n    requestJSON(request, `${portal.restUrl}/community/groups/${groupId}/categorySchema`);\r\n\r\n/**\r\n * Fetch category schema for the specified organization\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param id - optional id of portal to query\r\n */\r\nexport const fetchOrgCategorySchema = (request: Request, portal: Pojo, id?: string) =>\r\n    requestJSON(request, `${portal.restUrl}/portals/${id ? id : portal.id}/categorySchema`);\r\n\r\n/**\r\n * Fetch info for the specified portal\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param id - optional id of portal to query\r\n */\r\nexport const fetchOrgInfo = (request: Request, portal: Pojo, id?: string) =>\r\n    requestJSON(\r\n        request,\r\n        `${location.protocol}//${portal.portalHostname}/sharing/rest/portals/${id ? id : portal.id}`\r\n    );\r\n\r\n/**\r\n * Fetch all groups associated with the current organization (series)\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param orgid - optional id if querying a different org than is associated with the portal\r\n * @param start - optional startnum for paging\r\n */\r\nexport const fetchAllOrgGroups = (request: Request, portal: Pojo, start?: number): any => (\r\n    request(\r\n        `${portal.restUrl}/community/groups`,\r\n        {\r\n            query: {\r\n                f: \"json\",\r\n                q: `orgid:${portal.id} AND access:public`,\r\n                num: 100,\r\n                start: start ? start : 1,\r\n                sortField: \"title\",\r\n                sortOrder: \"asc\"\r\n            }\r\n        }\r\n    ).then((response: any) => {\r\n        if (response.data.total > response.data.start + response.data.num) {\r\n            return fetchAllOrgGroups(request, portal, response.data.start + response.data.num)\r\n                .then((response2: any) => {\r\n                    return {\r\n                        ...response2,\r\n                        data: {\r\n                            ...response2.data,\r\n                            results: response.data.results.concat(response2.data.results)\r\n                        }\r\n                    };\r\n                });\r\n        }\r\n        return response;\r\n    })\r\n);\r\n\r\n/**\r\n * Fetch all provisioned listings for a specified user\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param username - username to fetch provisioned listings for\r\n * @param start - optional startnum for paging\r\n */\r\nexport const fetchAllProvisionedContent = (\r\n    request: Request,\r\n    portal: Pojo,\r\n    username: string,\r\n    start?: number\r\n): any => (\r\n    request(\r\n        `${portal.restUrl}/community/users/${username}/provisionedListings`,\r\n        {\r\n            query: {\r\n                f: \"json\",\r\n                num: 100,\r\n                start: start ? start : 1\r\n            }\r\n        }\r\n    ).then((response: any) => {\r\n        const relatedItemRequests = response.data.provisionedListings.map((listing: any) => (\r\n            requestJSON(\r\n                request,\r\n                `${portal.restUrl}/content/items/${listing.id || listing.itemId}/relatedItems?relationshipType=Listed2ImplicitlyListed&direction=forward`\r\n            ).then(\r\n                (related: any) => related,\r\n                (err) => undefined\r\n            )\r\n        ));\r\n        if (response.data.total > response.data.start + response.data.num) {\r\n            return fetchAllProvisionedContent(request, portal, username, response.data.start + response.data.num)\r\n                .then((response2: any) => {\r\n                    return all(\r\n                        relatedItemRequests\r\n                    ).then(\r\n                        (responses: any[]) => {\r\n                            return response2.concat(\r\n                                response.data.provisionedListings\r\n                                    .filter((listing: any) => !!listing.itemId)\r\n                                    .map((listing: any) => listing.itemId)\r\n                                    .concat(concatenateRelatedItems(responses))\r\n                            );\r\n                        }\r\n                    );\r\n                });\r\n        }\r\n        return all(\r\n            relatedItemRequests\r\n        ).then(\r\n            (responses: any[]) => {\r\n                return response.data.provisionedListings\r\n                    .filter((listing: any) => !!listing.itemId)\r\n                    .map((listing: any) => listing.itemId)\r\n                    .concat(concatenateRelatedItems(responses));\r\n            }\r\n        );\r\n    })\r\n);\r\n\r\nfunction concatenateRelatedItems(responses: ({ relatedItems: { id: string }[] } | undefined)[]) {\r\n    return responses.reduce((result: string[], current: any) => {\r\n        if (current && current.relatedItems) {\r\n            return result.concat(current.relatedItems.map((item: any) => item.id));\r\n        }\r\n        return result;\r\n    }, []);\r\n}\r\n\r\n/**\r\n * Fetch a user's data base on username\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param username - username to get data for\r\n */\r\nexport const fetchUser = (request: Request, portal: Pojo, username?: string) => \r\n    requestJSON(request, `${portal.restUrl}/community/users/${username ? username : portal.user.username}`);\r\n\r\n/**\r\n * Fetch a user's content based on username\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param username - username to get content for\r\n */\r\nexport const fetchUserContent = (request: Request, portal: Pojo, username?: string) =>\r\n    requestJSON(request, `${portal.restUrl}/content/users/${username ? username : portal.user.username}`);\r\n\r\n/**\r\n * Fetch a user's favorites using the favorites group id\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param favGroupId - id of the group containing the favorites\r\n */\r\nexport const fetchUserFavorites = (request: Request, portal: Pojo, favGroupId: string) =>\r\n    requestJSON(request, `${portal.restUrl}/content/groups/${favGroupId}`);\r\n\r\n/**\r\n * Query for groups using the specified query parameters\r\n * @param request \r\n * @param portal \r\n * @param queryParams \r\n */\r\nexport const fetchGroups = (request: Request, portal: Pojo, queryParams: Pojo) =>\r\n    requestJSON(request, `${portal.restUrl}/community/groups`, queryParams);\r\n\r\n/**\r\n * Query a portal for JSON\r\n * @param request - 4x or shimmed request\r\n * @param url - url to query \r\n * @param queryParams - optional object with query parameters\r\n */\r\nexport function requestJSON(request: Request, url: string, queryParams?: Pojo) {\r\n    return request(\r\n        url,\r\n        {\r\n            query: {\r\n                f: \"json\",\r\n                ...queryParams\r\n            }\r\n        }\r\n    ).then((response: any) => response.data);\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__13__;","/**\r\n * Yields a new function which is the composition of input functions\r\n * @param fn0 - function in the pipeline\r\n */\r\nexport function compose<V0, T1>(\r\n    fn0: (x0: V0) => T1\r\n): (x0: V0) => T1;\r\nexport function compose<V0, V1, T1>(\r\n    fn0: (x0: V0, x1: V1) => T1\r\n): (x0: V0, x1: V1) => T1;\r\nexport function compose<V0, V1, V2, T1>(\r\n    fn0: (x0: V0, x1: V1, x2: V2) => T1\r\n): (x0: V0, x1: V1, x2: V2) => T1;\r\nexport function compose<V0, T1, T2>(\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x0: V0) => T1\r\n): (x0: V0) => T2;\r\nexport function compose<V0, V1, T1, T2>(\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x0: V0, x1: V1) => T1\r\n): (x0: V0, x1: V1) => T2;\r\nexport function compose<V0, V1, V2, T1, T2>(\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x0: V0, x1: V1, x2: V2) => T1\r\n): (x0: V0, x1: V1, x2: V2) => T2;\r\nexport function compose<V0, T1, T2, T3>(\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x: V0) => T1\r\n): (x: V0) => T3;\r\nexport function compose<V0, V1, T1, T2, T3>(\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x0: V0, x1: V1) => T1\r\n): (x0: V0, x1: V1) => T3;\r\nexport function compose<V0, V1, V2, T1, T2, T3>(\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x0: V0, x1: V1, x2: V2) => T1\r\n): (x0: V0, x1: V1, x2: V2) => T3;\r\nexport function compose<V0, T1, T2, T3, T4>(\r\n    fn3: (x: T3) => T4,\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x: V0) => T1\r\n): (x: V0) => T4;\r\nexport function compose<V0, V1, T1, T2, T3, T4>(\r\n    fn3: (x: T3) => T4,\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x0: V0, x1: V1) => T1\r\n): (x0: V0, x1: V1) => T4;\r\nexport function compose<V0, V1, V2, T1, T2, T3, T4>(\r\n    fn3: (x: T3) => T4,\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x0: V0, x1: V1, x2: V2) => T1\r\n): (x0: V0, x1: V1, x2: V2) => T4;\r\nexport function compose<V0, T1, T2, T3, T4, T5>(\r\n    fn4: (x: T4) => T5,\r\n    fn3: (x: T3) => T4,\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x: V0) => T1\r\n): (x: V0) => T5;\r\nexport function compose<V0, V1, T1, T2, T3, T4, T5>(\r\n    fn4: (x: T4) => T5,\r\n    fn3: (x: T3) => T4,\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x0: V0, x1: V1) => T1\r\n): (x0: V0, x1: V1) => T5;\r\nexport function compose<V0, V1, V2, T1, T2, T3, T4, T5>(\r\n    fn4: (x: T4) => T5,\r\n    fn3: (x: T3) => T4,\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x0: V0, x1: V1, x2: V2) => T1\r\n): (x0: V0, x1: V1, x2: V2) => T5;\r\nexport function compose<V0, T1, T2, T3, T4, T5, T6>(\r\n    fn5: (x: T5) => T6,\r\n    fn4: (x: T4) => T5,\r\n    fn3: (x: T3) => T4,\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x: V0) => T1\r\n): (x: V0) => T6;\r\nexport function compose<V0, V1, T1, T2, T3, T4, T5, T6>(\r\n    fn5: (x: T5) => T6,\r\n    fn4: (x: T4) => T5,\r\n    fn3: (x: T3) => T4,\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x0: V0, x1: V1) => T1\r\n): (x0: V0, x1: V1) => T6;\r\nexport function compose<V0, V1, V2, T1, T2, T3, T4, T5, T6>(\r\n    fn5: (x: T5) => T6,\r\n    fn4: (x: T4) => T5,\r\n    fn3: (x: T3) => T4,\r\n    fn2: (x: T2) => T3,\r\n    fn1: (x: T1) => T2,\r\n    fn0: (x0: V0, x1: V1, x2: V2) => T1\r\n): (x0: V0, x1: V1, x2: V2) => T6;\r\nexport function compose(...funcs: ((...args: any[]) => any)[]) {\r\n    return (arg: any) => funcs.reduceRight((composed, f) => f(composed), arg);\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__15__;","import { curry } from \"../../_utils/index\";\r\nimport { CustomSection, CategoryFilter } from \"../_reducers/settings/config\";\r\n\r\nexport const getCustomCategoryFilters = (section: CustomSection) => section.filters ?\r\n    section.filters.filter(\r\n        (filter: CategoryFilter) => typeof filter === \"object\" &&\r\n        (filter.type === \"group\" || filter.type === \"org\")\r\n    ) : [];\r\n\r\nexport const getSectionCategoryFilter = curry((type: string, section: CustomSection): CategoryFilter | undefined => {\r\n    if (!section.filters) {\r\n        return undefined;\r\n    }\r\n    return section.filters.reduce((result: CategoryFilter | undefined, current: any) => {\r\n        if (typeof current === \"object\" && current.type === type) {\r\n            return current;\r\n        }\r\n        return result;\r\n    }, undefined);\r\n});\r\nexport const getSectionGroupCategoryFilter = getSectionCategoryFilter(\"group\");\r\nexport const getSectionOrgCategoryFilter = getSectionCategoryFilter(\"org\");\r\n\r\nexport function sectionHasCategoryFilter(section: CustomSection): boolean {\r\n    return (!!getSectionGroupCategoryFilter(section) || !!getSectionOrgCategoryFilter(section));\r\n}\r\n\r\nexport function sectionsHaveCategoryFilters(customSections: CustomSection[]): boolean {\r\n    return customSections.reduce((result: boolean, current: any) => {\r\n        if (!!result) {\r\n            return result;\r\n        }\r\n        return sectionHasCategoryFilter(current);\r\n    }, false);\r\n}\r\n\r\nexport function getCustomSection(customSections: CustomSection[], sectionName: string): CustomSection | undefined {\r\n    return customSections.filter((section) => section.name === sectionName)[0];\r\n}\r\n\r\nexport function isCustomSection(customSections: CustomSection[], sectionName: string): boolean {\r\n    return !!getCustomSection(customSections, sectionName);\r\n}","module.exports = __WEBPACK_EXTERNAL_MODULE__20__;","module.exports = __WEBPACK_EXTERNAL_MODULE__22__;","import { standardizeTree, subtreeFromPath, Tree, treeMap } from \"../../../../_utils/index\";\r\nimport { ToggleOption } from \"../../../../Buttons/Toggle\";\r\n\r\nexport interface CategoryTree {\r\n    count?: number;\r\n    categories: CategorySchema;\r\n    description?: string;\r\n    displayName?: string;\r\n    title: string;\r\n}\r\nexport type CategorySchema = CategoryTree[];\r\n\r\nexport function clearCountsRecursive(schema: ToggleOption): ToggleOption {\r\n    return treeMap<ToggleOption>(schema, (node: ToggleOption) => {\r\n        if (node.count) {\r\n            delete node.count;\r\n        }\r\n        return node;\r\n    });\r\n}\r\n\r\nexport function getCategoryFromPath(schema: ToggleOption, path: string[]): ToggleOption | undefined {\r\n    return subtreeFromPath(schema, path) as any;\r\n}\r\n\r\nexport function mapCountsToSchema(\r\n    aggregations: any,\r\n    schema: ToggleOption | undefined,\r\n    type: \"categories\" | \"groupCategories\"\r\n): ToggleOption | undefined {\r\n    if (!schema) {\r\n        return;\r\n    }\r\n    const field = aggregations.counts.filter((f: any) => f.fieldName === type)[0];\r\n    const categories = field.fieldValues;\r\n    categories.forEach(({ value, count }: any) => {\r\n        const path = value.split(\"/\").slice(1);\r\n        const category = getCategoryFromPath(schema, path);\r\n        if (category) {\r\n            category.count = count;\r\n        }\r\n    });\r\n    return schema;\r\n}\r\n\r\nexport function formatRecursive(categorySchema: CategorySchema): ToggleOption[] {\r\n    const standardized = standardizeTree<CategoryTree, \"title\">(\r\n        \"categories\",\r\n        \"title\",\r\n        { title: \"root\", categories: categorySchema }\r\n    );\r\n\r\n    return treeMap<ToggleOption>(standardized, (node: Tree) => {\r\n        return {\r\n            ...node,\r\n            value: node.value.toLowerCase(),\r\n            displayName: node.displayName ? node.displayName : node.value,\r\n            tooltip: node.description ? node.description : undefined\r\n        } as ToggleOption;\r\n    }).children as ToggleOption[];\r\n}","import { curry } from \"../higherOrderFunctions/index\";\r\n\r\n/**\r\n * Returns true if the object in question is empty\r\n * @param input - object to determine if empty\r\n */\r\nexport function isEmpty(input: object) {\r\n    return Object.keys(input).length === 0 && input.constructor === Object;\r\n}\r\n\r\n/**\r\n * (Curried, arity 2) Returns a shallow clone of an object with a property deleted\r\n * 1. name of the property to scrub\r\n * 2. object to scrub the property from\r\n */\r\nexport const scrubObjectProperty = curry((propertyName: string, obj: { [propName: string]: any }) => {\r\n    const newObj = { ...obj };\r\n    delete newObj[propertyName];\r\n    return newObj;\r\n});\r\n\r\n/**\r\n * CURRIED: Takes a predicate function and an object, and returns the result of\r\n * applying the predicate to each of the object's properties as an object of the same shape.\r\n * @param fn - Predicate function to apply to each property\r\n * @param obj - Object to map\r\n */\r\nexport function mapObjIndexed<T, TResult>(\r\n    fn: (value: T, key: string, obj?: { [key: string]: T }) => TResult,\r\n    obj: { [key: string]: T }\r\n): { [key: string]: TResult };\r\nexport function mapObjIndexed<T, TResult>(\r\n    fn: (value: T, key: string, obj?: { [key: string]: T }) => TResult\r\n): (obj: { [key: string]: T }) => { [key: string]: TResult };\r\nexport function mapObjIndexed(fn: any, obj?: any) {\r\n    return curriedMapObjIndexed.apply(null, arguments);\r\n}\r\nconst curriedMapObjIndexed = curry(<T, TResult>(\r\n    fn: (value: T, key: string, obj?: { [key: string]: T }) => TResult,\r\n    obj: { [key: string]: T }\r\n): { [key: string]: TResult } => (\r\n    Object.keys(obj).reduce(\r\n        (acc: T, key: string) => {\r\n            acc[key] = fn(obj[key], key, obj);\r\n            return acc;\r\n        },\r\n        {}\r\n    )\r\n));\r\n\r\n/**\r\n * CURRIED: Takes a predicate function and an object, and returns a partial copy of that object\r\n * containing only the properties which satisfy the provided predicate.\r\n * @param fn - Predicate function to test each property of the object\r\n * @param obj - Object to pick properties from\r\n */\r\nexport function pickBy<T, U>(fn: (value: any, key: string, obj?: T) => boolean): (obj: T) => U;\r\nexport function pickBy<T, U>(fn: (value: any, key: string, obj?: T) => boolean, obj?: T): U;\r\nexport function pickBy(fn: any, obj?: any): any {\r\n    return curriedPickBy.apply(null, arguments);\r\n}\r\nconst curriedPickBy = curry(<T, U>(fn: (value: any, key: string, obj?: T) => boolean, obj: T): U => (\r\n    Object.keys(obj).reduce(\r\n        (acc: U, key: string) => {\r\n            if (fn(obj[key], key, obj)) {\r\n                acc[key] = obj[key];\r\n            }\r\n            return acc;\r\n        },\r\n        {} as U\r\n    )\r\n));\r\n","import { ItemBrowserState } from \"../../_reducers/index\";\r\nimport { scrubItemInfo } from \"../../../_utils/index\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\nexport const SELECT_ITEM = \"SELECT_ITEM\";\r\nexport const SELECT_ITEM_SINGLE = \"SELECT_ITEM_SINGLE\";\r\nexport const SELECT_ITEM_ASYNC = \"SELECT_ITEM_ASYNC\";\r\nexport const SELECT_ITEM_ASYNC_FAILED = \"SELECT_ITEM_ASYNC_FAILED\";\r\nexport const DESELECT_ITEM = \"DESELECT_ITEM\";\r\nexport const SELECT_ALL = \"SELECT_ALL\";\r\nexport const DESELECT_ALL = \"DESELECT_ALL\";\r\nexport const SELECTING_ALL_FROM_QUERY = \"SELECTING_ALL_FROM_QUERY\";\r\nexport const SELECT_ALL_FROM_QUERY_FAIL = \"SELECT_ALL_FROM_QUERY_FAIL\";\r\nexport const SELECT_ALL_FROM_QUERY_SUCCESS = \"SELECT_ALL_FROM_QUERY_SUCCESS\";\r\n\r\nconst selectItemStandard = (item: Pojo) => ({\r\n    type: SELECT_ITEM,\r\n    payload: item\r\n});\r\n\r\nexport const selectItem = (item: Pojo) => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    const state = getState();\r\n\r\n    if (state.settings.config.asynchronousItemSelect) {\r\n        dispatch(selectItemAsync(item));\r\n        const onSelect = state.settings.config.onSelect([scrubItemInfo(item)]);\r\n        if (!!onSelect && onSelect.then) {\r\n            onSelect.then(\r\n                () => {\r\n                    if (state.settings.config.singleItemSelect) {\r\n                        dispatch(selectItemSingle(item));\r\n                    } else {\r\n                        dispatch(selectItemStandard(item));\r\n                    }\r\n                },\r\n                () => {\r\n                    dispatch({\r\n                        type: SELECT_ITEM_ASYNC_FAILED,\r\n                        payload: item\r\n                    });\r\n                });\r\n        } else {\r\n            console.error(\"If asynchronous item selection is enabled, the onSelect function in the item browser config must return a dojo deferred.\");\r\n        }\r\n    } else if (state.settings.config.singleItemSelect) {\r\n        dispatch(selectItemSingle(item));\r\n        state.settings.config.onSelect([scrubItemInfo(item)]);\r\n    } else {\r\n        dispatch(selectItemStandard(item));\r\n        state.settings.config.onSelect([scrubItemInfo(item)]);\r\n    }\r\n};\r\n\r\nexport const selectItemSingle = (item: Pojo) => ({\r\n    type: SELECT_ITEM_SINGLE,\r\n    payload: item\r\n});\r\n\r\nexport const deselectItem = (item: Pojo) => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    const state = getState();\r\n    dispatch({\r\n        type: DESELECT_ITEM,\r\n        payload: item\r\n    });\r\n    state.settings.config.onDeselect([scrubItemInfo(item)]);\r\n};\r\n\r\nexport const selectItemAsync = (item: Pojo) => ({\r\n    type: SELECT_ITEM_ASYNC,\r\n    payload: item\r\n});\r\n\r\nexport const selectAll = () => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    const state = getState();\r\n\r\n    dispatch({\r\n        type: SELECT_ALL,\r\n        payload: state.results.displayItems\r\n    });\r\n};","import * as all from \"dojo/promise/all\";\r\nimport * as Deferred from \"dojo/Deferred\";\r\nimport { ItemBrowserState } from \"../../index\";\r\nimport { fetchGroupCategorySchema, fetchUser, fetchUserContent, fetchUserFavorites, fetchAllProvisionedContent } from \"../../../_utils/index\";\r\nimport { search } from \"./query\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\nexport const ADD_TO_FAVORITES = \"ADD_TO_FAVORITES\";\r\nexport const ADD_TO_FAVORITES_SUCCESS = \"ADD_TO_FAVORITES_SUCCESS\";\r\nexport const ADD_TO_FAVORITES_FAIL = \"ADD_TO_FAVORITES_FAIL\";\r\nexport const LOADING_USER_INFO = \"LOADING_USER_INFO\";\r\nexport const UPDATE_GROUP_CATEGORIES = \"UPDATE_GROUP_CATEGORIES\";\r\nexport const UPDATE_USER_INFO = \"UPDATE_USER_INFO\";\r\nexport const UPDATE_USER_INFO_FAILED = \"UPDATE_USER_INFO_FAILED\";\r\nexport const REMOVE_FROM_FAVORITES = \"REMOVE_FROM_FAVORITES\";\r\nexport const REMOVE_FROM_FAVORITES_SUCCESS = \"REMOVE_FROM_FAVORITES_SUCCESS\";\r\nexport const REMOVE_FROM_FAVORITES_FAIL = \"REMOVE_FROM_FAVORITES_FAIL\";\r\n\r\nexport const fetchUserInfo = () => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    const state = getState();\r\n    const groupFilter = state.parameters.filter.group;\r\n    const loadedGroupCategories = state.results.user.groupCategories;\r\n\r\n    if (state.results.user.status === \"loaded\") {\r\n        if (groupFilter && !loadedGroupCategories[groupFilter.id]) {\r\n            return dispatch(fetchUserGroupCategorySchema(groupFilter.id));\r\n        }\r\n        return (new Deferred).resolve();\r\n    } else if (state.results.user.status === \"failed\") {\r\n        return (new Deferred).reject();\r\n    }\r\n\r\n    dispatch({ type: LOADING_USER_INFO });\r\n\r\n    const { request, portal } = state.settings.utils;\r\n\r\n    return all([\r\n        fetchUser(request, portal).then((response: any) => {\r\n            return response.groups.map((group: Pojo) => ({\r\n                id: group.id,\r\n                title: group.title\r\n            }));\r\n        }),\r\n        fetchUserContent(request, portal).then((response: any) => {\r\n            return response.folders.map((folder: Pojo) => ({\r\n                id: folder.id,\r\n                title: folder.title\r\n            }));\r\n        }),\r\n        fetchUserFavorites(request, portal, portal.user.favGroupId).then((response: any) => {\r\n            return response.items.reduce((result: Pojo, current: Pojo) => {\r\n                result[current.id] = true;\r\n                return result;\r\n            }, {});\r\n        }),\r\n        fetchAllProvisionedContent(request, portal, portal.user.username).then(\r\n            (response: any) => response,\r\n            (err: any) => []\r\n        )\r\n    ].concat(groupFilter ? [ dispatch(fetchUserGroupCategorySchema(groupFilter.id)) ] : []) as any).then(\r\n        (responses) => {\r\n            dispatch({\r\n                type: UPDATE_USER_INFO,\r\n                payload: {\r\n                    groups: responses[0],\r\n                    folders: responses[1],\r\n                    favorites: responses[2],\r\n                    provisionedContent: responses[3]\r\n                }\r\n            });\r\n        },\r\n        handleUserInfoError\r\n    );\r\n\r\n    function handleUserInfoError(err: Error) {\r\n        console.error(err);\r\n        dispatch({ type: UPDATE_USER_INFO_FAILED });\r\n    }\r\n};\r\n\r\nexport const fetchUserGroupCategorySchema = (id: string) => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    const { request, portal } = getState().settings.utils;\r\n    return fetchGroupCategorySchema(request, portal, id).then(({ categorySchema }: any) => {\r\n        dispatch({\r\n            type: UPDATE_GROUP_CATEGORIES,\r\n            payload: { id, categorySchema }\r\n        });\r\n    });\r\n};\r\n\r\nexport const addToFavorites = (item: Pojo) => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    let state = getState();\r\n    const portal = state.settings.utils.portal as any;\r\n    const favGroupId = portal.user.favGroupId;\r\n    const url = `${portal.restUrl}/content/items/${item.id}/share`;\r\n    const everyone = (item.access && item.access === \"public\") ||\r\n        (item.sharing && item.sharing.access && item.sharing.access === \"public\");\r\n    const org = (item.access && item.access === \"org\") ||\r\n        (item.sharing && item.sharing.access && item.sharing.access === \"org\") || false;\r\n    const query = {\r\n        f: \"json\",\r\n        everyone,\r\n        org,\r\n        groups: [favGroupId],\r\n        items: [item.id]\r\n    };\r\n\r\n    dispatch({\r\n        type: ADD_TO_FAVORITES,\r\n        payload: item\r\n    });\r\n\r\n    state.settings.utils.request(\r\n        url, { method: \"post\", query }\r\n    ).then((response: any) => {\r\n        dispatch({\r\n            type: ADD_TO_FAVORITES_SUCCESS,\r\n            payload: item\r\n        });\r\n    }, (err: Error) => {\r\n        console.error(err);\r\n        dispatch({\r\n            type: ADD_TO_FAVORITES_FAIL,\r\n            payload: item\r\n        });\r\n    });\r\n};\r\n\r\nexport const removeFromFavorites = (item: Pojo) => (dispatch: any, getState:() => ItemBrowserState) => {\r\n    let state = getState();\r\n    const portal = state.settings.utils.portal as any;\r\n    const favGroupId = portal.user.favGroupId;\r\n    const url = `${portal.restUrl}/content/items/${item.id}/unshare`;\r\n    const query = {\r\n        f: \"json\",\r\n        everyone: false,\r\n        org: false,\r\n        groups: [favGroupId],\r\n        items: [item.id]\r\n    };\r\n\r\n    dispatch({\r\n        type: REMOVE_FROM_FAVORITES,\r\n        payload: item\r\n    });\r\n\r\n    state.settings.utils.request(\r\n        url, { method: \"post\", query }\r\n    ).then((response: any) => {\r\n        state = getState();\r\n\r\n        if (state.parameters.section === \"myFavorites\") {\r\n            checkForFav();\r\n        } else {\r\n            success();\r\n        }\r\n\r\n        function checkForFav() {\r\n            state.settings.utils.request(\r\n                `${portal.restUrl}/search`, \r\n                {\r\n                    query: {\r\n                        f: \"json\",\r\n                        q: `(id:${item.id}) (group:${favGroupId})`\r\n                    },\r\n                    method: \"get\"\r\n                }\r\n            ).then((checkResponse: any) => {\r\n                if (checkResponse.data.total > 0) {\r\n                    setTimeout(() => {\r\n                        checkForFav();\r\n                    }, 250);\r\n                } else {\r\n                    success();\r\n                    dispatch(search());\r\n                }\r\n            }, (err: Error) => {\r\n                console.error(err);\r\n                success();\r\n            });\r\n        }\r\n\r\n        function success() {\r\n            dispatch({\r\n                type: REMOVE_FROM_FAVORITES_SUCCESS,\r\n                payload: item\r\n            });\r\n        }\r\n    }, (err: Error) => {\r\n        dispatch({\r\n            type: REMOVE_FROM_FAVORITES_FAIL,\r\n            payload: item\r\n        });\r\n    });\r\n};\r\n","import { compose, scrubObjectProperty } from \"../../functional/index\";\r\nimport { mixinItemBadges } from \"./badge\";\r\nimport { mixinItemDisplayName } from \"./displayName\";\r\nimport { mixinItemIcon } from \"./icon\";\r\nimport { mixinPatchedItemDescription } from \"./patchedDescription\";\r\nimport { mixinItemThumbnail } from \"./thumbnail\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\nexport * from \"./badge\";\r\nexport * from \"./displayName\";\r\nexport * from \"./icon\";\r\nexport * from \"./patchedDescription\";\r\nexport * from \"./thumbnail\";\r\nexport * from \"./typeMap\";\r\n\r\nexport const mixinItemInfo = (portal: Pojo, imgDir: string, item: Pojo) => compose(\r\n    mixinItemThumbnail(portal),\r\n    mixinPatchedItemDescription(portal),\r\n    mixinItemIcon(imgDir),\r\n    mixinItemDisplayName,\r\n    mixinItemBadges\r\n)(item);\r\n\r\n/**\r\n * Scrubs item of any added information\r\n * 1. item - the item to scrub\r\n */\r\nexport const scrubItemInfo = compose(\r\n    scrubObjectProperty(\"patchedDescription\"),\r\n    scrubObjectProperty(\"thumbURI\"),\r\n    scrubObjectProperty(\"iconURI\"),\r\n    scrubObjectProperty(\"displayName\"),\r\n    scrubObjectProperty(\"badges\")\r\n);\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__30__;","import { ItemBrowserState } from \"../index\";\r\nimport { getCustomSection } from \"./customSections\";\r\nimport { mixinOrgBaseUrl } from \"../../_utils/index\";\r\nimport { Pojo } from \"../../Component\";\r\n\r\n/**\r\n * Returns the current portal being queried by the item browser\r\n * @param state the current state of the item browser\r\n */\r\nexport function getCurrentPortal(state: ItemBrowserState): Pojo {\r\n    const matchingSection = getCustomSection(state.settings.config.customSections, state.parameters.section);\r\n    if (!!matchingSection && !!matchingSection.portal) {\r\n        return mixinOrgBaseUrl(matchingSection.portal);\r\n    }\r\n    return state.settings.utils.portal;\r\n}\r\n","import { Pojo } from \"../../../Component\";\r\n\r\n/**\r\n * Returns the baseUrl for an org based on its raw, unadulturated JSON\r\n * @param organization - raw self JSON for an org, fresh from the sharing API\r\n */\r\nexport const getOrgBaseUrl = (organization: Pojo) =>\r\n    organization.urlKey ?\r\n        `${location.protocol}//${organization.urlKey}.${organization.customBaseUrl}` :\r\n        `${location.protocol}//${organization.portalHostname}`;\r\n\r\n/**\r\n * Returns new organization JSON containing the baseUrl which applies to the org\r\n * @param organization - the org JSON to mix baseUrl into\r\n */\r\nexport const mixinOrgBaseUrl = (organization: Pojo) => ({\r\n    ...organization,\r\n    baseUrl: getOrgBaseUrl(organization)\r\n});\r\n","import { ItemBrowserState } from \"../../_reducers/index\";\r\n\r\nexport const CHANGE_SORT_ORDER = \"CHANGE_SORT_ORDER\";\r\nexport const CHANGE_SORT_FIELD = \"CHANGE_SORT_FIELD\";\r\n\r\nexport const changeSortOrder = (newOrder: ItemBrowserState[\"parameters\"][\"sort\"][\"order\"]) => ({\r\n    type: CHANGE_SORT_ORDER,\r\n    payload: newOrder\r\n});\r\n\r\nexport const changeSortField = (newField: ItemBrowserState[\"parameters\"][\"sort\"][\"field\"]) => ({\r\n    type: CHANGE_SORT_FIELD,\r\n    payload: newField\r\n});","import { Action } from \"../../../Component\";\r\n\r\nexport const MAXIMIZE_DLG = \"MAXIMIZE_DLG\";\r\nexport const MINIMIZE_DLG = \"MINIMIZE_DLG\";\r\nexport const TOGGLE_EXPANDED_FILTERS = \"TOGGLE_EXPANDED_FILTERS\";\r\nexport const CLOSE_FULLSCREEN_BROWSER = \"CLOSE_FULLSCREEN_BROWSER\";\r\nexport const TOGGLE_EXPANDED_SORT = \"TOGGLE_EXPANDED_SORT\";\r\n\r\nexport const maximizeDlg = (): Action => ({\r\n    type: MAXIMIZE_DLG\r\n});\r\n\r\nexport const minimizeDlg = (): Action => ({\r\n    type: MINIMIZE_DLG\r\n});\r\n\r\nexport const toggleExpandedFilters = (): Action => ({\r\n    type: TOGGLE_EXPANDED_FILTERS\r\n});\r\n\r\nexport const toggleExpandedSort = (): Action => ({\r\n    type: TOGGLE_EXPANDED_SORT\r\n});\r\n\r\nexport const closeFullscreenBrowser = (): Action => ({\r\n    type: CLOSE_FULLSCREEN_BROWSER\r\n});\r\n","/**\r\n * A simple, general purpose tree interface\r\n */\r\nexport interface Tree {\r\n    value: string;\r\n    children?: Tree[];\r\n    [propName: string]: any;\r\n}\r\n\r\n/**\r\n * Performs a depth-first search against a simple tree for a node having a specified value\r\n * @param tree - Tree to perform the depth-first search against\r\n * @param value - Matching value for the search\r\n */\r\nexport function treeDfs(tree: Tree, value: string) {\r\n    return genericDfs<Tree, \"value\">(\"children\", \"value\", tree, value);\r\n}\r\n\r\n/**\r\n * Performs a breadth-first search against a simple tree for a node having a specified value\r\n * @param tree - Tree to perform the breadth-first search against\r\n * @param value - Matching value for the search\r\n */\r\nexport function treeBfs(tree: Tree, value: string) {\r\n    return genericBfs<Tree, \"value\">(\"children\", \"value\", tree, value);\r\n}\r\n\r\n/**\r\n * Returns a node from a simple tree matching a provided path from the root\r\n * @param tree - Tree to return the node from\r\n * @param path - Path to the target node\r\n */\r\nexport function subtreeFromPath(tree: Tree, path: string[]) {\r\n    return genericSubtreeFromPath<Tree, \"value\">(\"children\", \"value\", tree, path);\r\n}\r\n\r\n/**\r\n * Returns a new simple tree with only nodes matching the included values\r\n * @param tree - Tree to prune\r\n * @param include - Included values\r\n */\r\nexport function treePrune(tree: Tree, include: string[]) {\r\n    return genericPrune<Tree, \"value\">(\"children\", \"value\", tree, include);\r\n}\r\n\r\n/**\r\n * Returns a new compressed a tree, with any nodes that had both children and no siblings replaced with their children\r\n * @param tree \r\n */\r\nexport function treeCompress(tree: Tree) {\r\n    return genericCompress<Tree>(\"children\", tree);\r\n}\r\n\r\n/**\r\n * Returns a new tree resulting from mapping the current tree to a new type (depth-first)\r\n * @param tree - The tree to iterate over\r\n * @param fn - Function returning nodes of new type\r\n */\r\nexport function treeMap<T>(tree: Tree, fn: (node?: Tree) => T) {\r\n    return genericTreeMap<Tree, T>(\"children\", tree, fn);\r\n}\r\n\r\n/**\r\n * Performs an operation for each node in the provided tree (depth-first)\r\n * @param tree - The tree to iterate over\r\n * @param fn - Operation to perform for each node\r\n */\r\nexport function treeForEach(tree: Tree, fn: (node?: Tree) => any) {\r\n    return genericTreeForEach<Tree>(\"children\", tree, fn);\r\n}\r\n\r\n/**\r\n * Performs a depth-first-search against a tree, returning the matching subtree if identified\r\n * @param childProp - Property on the tree containing potential child nodes\r\n * @param valueProp - Property on the tree to compare for match\r\n * @param tree - Tree to perform a depth first search against\r\n * @param value - Matching value to search for\r\n */\r\nexport function genericDfs<T, K extends keyof T>(childProp: keyof T, valueProp: K, tree: T, value: T[K]): T | undefined {\r\n    const children = tree[childProp] as any as T[];\r\n    if (tree[valueProp] === value) {\r\n        return tree;\r\n    } else if (!children) {\r\n        return;\r\n    }\r\n    return children.reduce((result: T | undefined, current: T) => {\r\n        if (!!result) {\r\n            return result;\r\n        }\r\n        return genericDfs(childProp, valueProp, current, value);\r\n    }, undefined);\r\n}\r\n\r\n/**\r\n * Performs a breadth-first-search against a tree, returning the matching subtree if identified\r\n * @param childProp - Property on the tree containing potential child nodes\r\n * @param valueProp - Property on the tree to compare for match\r\n * @param tree - Tree to perform a depth first search against\r\n * @param value - Matching value to search for\r\n */\r\nexport function genericBfs<T, K extends keyof T>(childProp: keyof T, valueProp: K, tree: T, value: T[K]): T | undefined {\r\n    let queue: T[] = [tree];\r\n    return visitNodes();\r\n    \r\n    function visitNodes(): T | undefined {\r\n        const next = queue.shift();\r\n        if (!next) {\r\n            return;\r\n        } else if (next[valueProp] === value) {\r\n            return next;\r\n        }\r\n        enqueueChildNodes(next);\r\n        return visitNodes();\r\n    }\r\n    \r\n    function enqueueChildNodes(node: T) {\r\n        const children = node[childProp] as any as T[];\r\n        if (!!children) {\r\n            queue = queue.concat(children);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Returns a subtree matching a specified path (array of values) if available\r\n * @param childProp - Property on the tree containing potential child nodes\r\n * @param valueProp - Property on the tree containing the node's identifying value\r\n * @param tree - Tree to return subtree from\r\n * @param path - Path to the desired subtree expressed as an array of child values from the root node\r\n */\r\nexport function genericSubtreeFromPath<T, K extends keyof T>(childProp: keyof T, valueProp: K, tree: T, path: T[K][]): T | undefined {\r\n    const children = tree[childProp] as any as T[];\r\n    if (!children) {\r\n        return undefined;\r\n    }\r\n    return children.reduce((result: T | undefined, current: T) => {\r\n        if (current[valueProp] === path[0]) {\r\n            if (path.length === 1) {\r\n                return current;\r\n            }\r\n            return genericSubtreeFromPath(childProp, valueProp, current, path.slice(1));\r\n        }\r\n        return result;\r\n    }, undefined);\r\n}\r\n\r\n/**\r\n * Returns a pruned copy of the provided tree based on an array of included values.\r\n * The resulting tree will only contain nodes with values matching those provided.\r\n * @param childProp - Property on the tree containing potential child nodes\r\n * @param valueProp - Property on the tree containing the node's identifying value\r\n * @param tree - Tree to return subtree from\r\n * @param include - Array of values to include in the pruned tree\r\n */\r\nexport function genericPrune<T, K extends keyof T>(childProp: keyof T, valueProp: K, tree: T, include: T[K][]): T {\r\n    const t = tree as any;\r\n    const children = tree[childProp] as any as T[];\r\n    if (!children || children.length === 0) {\r\n        return {\r\n            ...t\r\n        };\r\n    }\r\n    return {\r\n        ...t,\r\n        [childProp]: children.reduce((result: T[], current: T) => {\r\n            if (include.indexOf(current[valueProp]) !== -1) {\r\n                result.push(genericPrune(childProp, valueProp, current, include));\r\n            }\r\n            return result;\r\n        }, [])\r\n    };\r\n}\r\n\r\n/**\r\n * Returns a new tree, replacing any nodes that had both children and no siblings with their children.\r\n * @param childProp - Property on the tree containing potential child nodes\r\n * @param tree - The tree to compress\r\n */\r\nexport function genericCompress<T>(childProp: keyof T, tree: T): T {\r\n    const t = tree as any;\r\n    const children = tree[childProp] as any as T[];\r\n    if (!children) {\r\n        return tree;\r\n    }\r\n    return {\r\n        ...t,\r\n        [childProp]: omitSingle(children)\r\n    };\r\n\r\n    function omitSingle(ch: T[]): T[] {\r\n        if (ch.length === 0) {\r\n            return [];\r\n        } else if (ch.length === 1 && !ch[0][childProp]) {\r\n            return ch;\r\n        } else if (ch.length > 1) {\r\n            return ch.reduce((result: T[], current: T): T[] => {\r\n                if (!current[childProp]) {\r\n                    result.push(current);\r\n                    return result;\r\n                }\r\n                const curr = current as any;\r\n                result.push({\r\n                    ...curr,\r\n                    [childProp]: omitSingle(curr[childProp])\r\n                });\r\n                return result;\r\n            }, []);\r\n        }\r\n        return omitSingle(ch[0][childProp] as any as T[]);\r\n    }\r\n}\r\n\r\n/**\r\n * Iterates over a tree (depth-first), performing a specified operation for each node\r\n * @param childProp - Property on the tree containing potential child nodes\r\n * @param tree - The tree to iterate over\r\n * @param fn - Function to execute for each node\r\n */\r\nexport function genericTreeForEach<T>(\r\n    childProp: keyof T,\r\n    tree: T,\r\n    fn: (currentNode?: T) => any\r\n) {\r\n    const children = tree[childProp] as any;\r\n    if (children) {\r\n        children.forEach((node: T) => genericTreeForEach(childProp, node, fn));\r\n    }\r\n    fn(tree);\r\n}\r\n\r\n/**\r\n * Iterates over a tree (depth-first), performing a specified operation on each node to yield a new node in its place\r\n * @param childProp - Property on the tree containing potential child nodes\r\n * @param tree - The tree to iterate over\r\n * @param fn - Function returning the new node\r\n */\r\nexport function genericTreeMap<T, K>(\r\n    childProp: keyof T,\r\n    tree: T,\r\n    fn: (currentNode?: T) => K\r\n): K {\r\n    const t = tree as any;\r\n    return fn({\r\n        ...t,\r\n        [childProp]: t[childProp] ?\r\n            t[childProp].map((node: T) => genericTreeMap(childProp, node, fn)) :\r\n            undefined\r\n    });\r\n}\r\n\r\n/**\r\n * Returns a new simple Tree based on an input tree of different interface\r\n * @param childProp - Property on the input tree containing an array of subtrees\r\n * @param valueProp - Identifier property on the input tree\r\n * @param tree - The input tree to standardize\r\n */\r\nexport function standardizeTree<T, K extends keyof T>(childProp: keyof T, valueProp: K, tree: T): Tree {\r\n    return genericTreeMap<T, Tree>(\r\n        childProp,\r\n        tree,\r\n        (node: T) => {\r\n            const t = node as any;\r\n            const value = node[valueProp];\r\n            delete node[valueProp];\r\n            if (node[childProp]) {\r\n                const children = node[childProp];\r\n                delete node[childProp];\r\n                return {\r\n                    ...t,\r\n                    value,\r\n                    children\r\n                };\r\n            }\r\n            return {\r\n                ...t,\r\n                value\r\n            };\r\n        }\r\n    );\r\n}\r\n","import { curry } from \"../../functional/index\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\n/**\r\n * Returns the URI for an item's thumbnail based on the associated portal and the item data\r\n * @param portal - 4x or shimmed portal that the item is associated with\r\n * @param item - the item to determine the thumbnail URI for\r\n */\r\nexport const getItemThumbnail = (portal: Pojo, item: Pojo) => {\r\n    let thumbURI = `${portal.baseUrl}/home/js/arcgisonline/css/images/default_thumb.png`;\r\n    if (item.thumbnail) {\r\n        thumbURI = `${portal.restUrl}/content/items/${item.id}/info/${item.thumbnail}${\r\n            portal.credential ?\r\n                `?token=${portal.credential.token}` :\r\n                \"\"\r\n        }`;\r\n    }\r\n    return thumbURI;\r\n};\r\n\r\n/**\r\n * (Curried, arity 2) Returns new item JSON containing the thumbURI for the item\r\n * 1. 4x or shimmed portal that the item is associated with\r\n * 2. the item JSON to mix thumbURI into\r\n */\r\nexport const mixinItemThumbnail = curry((portal: Pojo, item: Pojo) => ({\r\n    ...item,\r\n    thumbURI: getItemThumbnail(portal, item)\r\n}));\r\n","import { curry } from \"../../functional/index\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\n/**\r\n * Returns the patched description for an item based on the jsapi location relative to the current portal\r\n * @param portal - 4x or shimmed portal that the item is associated with\r\n * @param item - the item to get the patched description for\r\n */\r\nexport const getPatchedItemDescription = (portal: Pojo, item: Pojo) => {\r\n    return item.description ?\r\n        item.description.replace(\r\n            /src=('|\")js\\/jsapi\\/esri\\//g,\r\n            (match: string) => `src=${match[4] === `\"` ? `\"` : `'`}${portal.baseUrl}/home/js/jsapi/esri/`\r\n        ) : undefined;\r\n};\r\n\r\n/**\r\n * (Curried, arity 2) Returns new item JSON containing the patched description\r\n * 1. 4x or shimmed portal that the item is associated with\r\n * 2. the item JSON to patch\r\n */\r\nexport const mixinPatchedItemDescription = curry((portal: Pojo, item: Pojo) => ({\r\n    ...item,\r\n    patchedDescription: getPatchedItemDescription(portal, item)\r\n}));\r\n","import { curry } from \"../../functional/index\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\n/**\r\n * Returns the url for an item's icon based on its type and typeKeywords\r\n * @param imgDir - the JSAPI image directory to use for the icon\r\n * @param type - the item's type\r\n * @param typeKeywords - the item's typeKeywords \r\n */\r\nexport const getItemIcon = (imgDir: string, type: string, typeKeywords: string[]): string => {\r\n    const itemType = type && type.toLowerCase();\r\n    const size = \"16\";\r\n    let isHosted = false;\r\n    let isRouteLayer = false;\r\n    let isMarkupLayer = false;\r\n    let isSpatiotemporal = false;\r\n    let isTable = false;\r\n    let imgName;\r\n\r\n    if (itemType.indexOf(\"service\") > 0 || itemType === \"feature collection\" || itemType === \"kml\" || itemType === \"wms\" || itemType === \"wmts\" || itemType === \"wfs\") {\r\n      let isHosted = typeKeywords.indexOf(\"Hosted Service\") > -1;\r\n      if (itemType === \"feature service\" || itemType === \"feature collection\" || itemType === \"kml\" || itemType === \"wfs\") {\r\n        isTable = typeKeywords.indexOf(\"Table\") > -1;\r\n        isRouteLayer = typeKeywords.indexOf(\"Route Layer\") > -1;\r\n        isMarkupLayer = typeKeywords.indexOf(\"Markup\") > -1;\r\n        isSpatiotemporal = typeKeywords.indexOf(\"Spatiotemporal\") !== -1;\r\n        imgName =\r\n          isSpatiotemporal && isTable\r\n            ? \"spatiotemporaltable\"\r\n            : isTable\r\n              ? \"table\"\r\n              : isRouteLayer\r\n                ? \"routelayer\"\r\n                : isMarkupLayer\r\n                  ? \"markup\"\r\n                  : isSpatiotemporal\r\n                    ? \"spatiotemporal\"\r\n                    : isHosted\r\n                      ? \"featureshosted\"\r\n                      : \"features\";\r\n      } else if (itemType === \"map service\" || itemType === \"wms\" || itemType === \"wmts\") {\r\n        imgName = (isHosted || typeKeywords.indexOf(\"Tiled\") > -1 || itemType === \"wmts\") ? \"maptiles\" : \"mapimages\";\r\n      } else if (itemType === \"scene service\") {\r\n        if (typeKeywords.indexOf(\"Line\") > -1) {\r\n          imgName = \"sceneweblayerline\";\r\n        } else if (typeKeywords.indexOf(\"3DObject\") > -1) {\r\n          imgName = \"sceneweblayermultipatch\";\r\n        } else if (typeKeywords.indexOf(\"Point\") > -1) {\r\n          imgName = \"sceneweblayerpoint\";\r\n        } else if (typeKeywords.indexOf(\"IntegratedMesh\") > -1) {\r\n          imgName = \"sceneweblayermesh\";\r\n        } else if (typeKeywords.indexOf(\"PointCloud\") > -1) {\r\n          imgName = \"sceneweblayerpointcloud\";\r\n        } else if (typeKeywords.indexOf(\"Polygon\") > -1) {\r\n          imgName = \"sceneweblayerpolygon\";\r\n        } else {\r\n          imgName = \"sceneweblayer\";\r\n        }\r\n      } else if (itemType === \"image service\") {\r\n        imgName = typeKeywords.indexOf(\"Elevation 3D Layer\") > -1 ? \"elevationlayer\" : \"imagery\";\r\n      } else if (itemType === \"stream service\") {\r\n        imgName = \"streamlayer\";\r\n      } else if (itemType === \"vector tile service\") {\r\n        imgName = \"vectortile\";\r\n      } else if (itemType === \"datastore catalog service\") {\r\n        imgName = \"datastorecollection\";\r\n      } else if (itemType === \"geocoding service\") {\r\n        imgName = \"geocodeservice\";\r\n      } else if (itemType === \"geoprocessing service\") {\r\n        imgName = (typeKeywords.indexOf(\"Web Tool\") > -1) ? \"tool\" : \"layers\";\r\n      } else {\r\n        imgName = \"layers\";\r\n      }\r\n    } else if (itemType === \"web map\" || itemType === \"cityengine web scene\") {\r\n      imgName = \"maps\";\r\n    } else if (itemType === \"web scene\") {\r\n      imgName = typeKeywords.indexOf(\"ViewingMode-Local\") > -1 ? \"webscenelocal\": \"websceneglobal\";\r\n    } else if (itemType === \"web mapping application\" || itemType === \"mobile application\" || itemType === \"application\" ||\r\n      itemType === \"operation view\" || itemType === \"desktop application\") {\r\n      imgName = \"apps\";\r\n    } else if (itemType === \"map document\" || itemType === \"map package\" || itemType === \"published map\" || itemType === \"scene document\" ||\r\n      itemType === \"globe document\" || itemType === \"basemap package\" || itemType === \"mobile basemap package\" || itemType === \"mobile map package\" ||\r\n      itemType === \"project package\" || itemType === \"project template\" || itemType === \"pro map\" || itemType === \"layout\" ||\r\n      (itemType === \"layer\" && typeKeywords.indexOf(\"ArcGIS Pro\") > -1) || (itemType === \"explorer map\" && typeKeywords.indexOf(\"Explorer Document\") > -1)) {\r\n      imgName = \"mapsgray\";\r\n    } else if (itemType === \"service definition\" || itemType === \"csv\" || itemType === \"shapefile\" || itemType === \"cad drawing\" || itemType === \"geojson\" || itemType === \"360 vr experience\" || itemType === \"netcdf\") {\r\n      imgName = \"datafiles\";\r\n    } else if (itemType === \"explorer add in\" || itemType === \"desktop add in\" || itemType === \"windows viewer add in\" || itemType === \"windows viewer configuration\") {\r\n      imgName = \"appsgray\";\r\n    } else if (itemType === \"arcgis pro add in\" || itemType === \"arcgis pro configuration\") {\r\n      imgName = \"addindesktop\";\r\n    } else if (itemType === \"rule package\" || itemType === \"file geodatabase\" || itemType === \"csv collection\" || itemType === \"kml collection\" ||\r\n      itemType === \"windows mobile package\" || itemType === \"map template\" || itemType === \"desktop application template\" ||\r\n      itemType === \"arcpad package\" || itemType === \"code sample\" || itemType === \"form\" || itemType === \"document link\" || itemType === \"vector tile package\" ||\r\n      itemType === \"operations dashboard add in\" || itemType === \"rules package\" || itemType === \"image\" || itemType === \"workflow manager package\" ||\r\n      (itemType === \"explorer map\" && typeKeywords.indexOf(\"Explorer Mapping Application\") > -1 || typeKeywords.indexOf(\"Document\") > -1)) {\r\n      imgName = \"datafilesgray\";\r\n    } else if (itemType === \"network analysis service\" || itemType === \"geoprocessing service\" ||\r\n      itemType === \"geodata service\" || itemType === \"geometry service\" || itemType === \"geoprocessing package\" ||\r\n      itemType === \"locator package\" || itemType === \"geoprocessing sample\" || itemType === \"workflow manager service\" || itemType === \"raster function template\") {\r\n      imgName = \"toolsgray\";\r\n    } else if (itemType === \"layer\" || itemType === \"layer package\" || itemType === \"explorer layer\") {\r\n      imgName = \"layersgray\";\r\n    } else if (itemType === \"scene package\") {\r\n      imgName = \"scenepackage\";\r\n    } else if (itemType === \"tile package\") {\r\n      imgName = \"tilepackage\";\r\n    } else if (itemType === \"task file\") {\r\n      imgName = \"taskfile\";\r\n    } else if (itemType === \"report template\") {\r\n      imgName = \"report-template\";\r\n    } else if (itemType === \"statistical data collection\") {\r\n      imgName = \"statisticaldatacollection\";\r\n    } else if (itemType === \"insights workbook\") {\r\n      imgName = \"workbook\";\r\n    } else if (itemType === \"insights model\") {\r\n      imgName = \"insightsmodel\";\r\n    } else if (itemType === \"insights page\") {\r\n      imgName = \"insightspage\";\r\n    } else if (itemType === \"hub initiative\") {\r\n      imgName = \"hubinitiative\";\r\n    } else if (itemType === \"hub page\") {\r\n      imgName = \"hubpage\";\r\n    } else if (itemType === \"hub site application\") {\r\n      imgName = \"hubsite\";\r\n    } else if (itemType === \"relational database connection\") {\r\n      imgName = \"relationaldatabaseconnection\";\r\n    } else if (itemType === \"big data file share\") {\r\n      imgName = \"datastorecollection\";\r\n    } else if (itemType === \"image collection\") {\r\n      imgName = \"imagecollection\";\r\n    } else if (itemType === \"desktop style\") {\r\n      imgName = \"desktopstyle\";\r\n    } else if (itemType === \"style\") {\r\n      imgName = \"style\";\r\n    } else if (itemType === \"dashboard\") {\r\n      imgName = \"dashboard\";\r\n    } else {\r\n      imgName = \"maps\";\r\n    }\r\n\r\n    return `${imgDir}/${imgName}${size}.png`;\r\n};\r\n\r\n/**\r\n * (Curried, arity 2) Returns new item JSON containing the iconURI for the item\r\n * 1. the JSAPI image directory to use for the icon\r\n * 2. the item JSON to mix iconURI into\r\n */\r\nexport const mixinItemIcon = curry((imgDir: string, item: Pojo) => ({\r\n    ...item,\r\n    iconURI: getItemIcon(imgDir, item.type, item.typeKeywords ? item.typeKeywords : [])\r\n}));\r\n","import { Pojo } from \"../../../Component\";\r\n\r\n/**\r\n * Returns the display name for an item based on its raw, unadulturated JSON\r\n * @param item - raw JSON for an item, fresh from the sharing api\r\n */\r\nexport const getItemDisplayName = (item: Pojo) => {\r\n    const itemType = item.type;\r\n    const typeKeywords = item.typeKeywords || [];\r\n    let displayName = itemType;\r\n\r\n    if (itemType === \"Feature Service\" || itemType === \"Feature Collection\") {\r\n        displayName = typeKeywords.indexOf(\"Table\") > -1 ? \"Table\" : (typeKeywords.indexOf(\"Route Layer\") > -1 ? \"Route Layer\" : (typeKeywords.indexOf(\"Markup\") > -1 ? \"Markup\" : \"Feature Layer\"));\r\n    } else if (itemType === \"Image Service\") {\r\n        displayName = typeKeywords.indexOf(\"Elevation 3D Layer\") > -1 ? \"Elevation Layer\" : \"Imagery Layer\";\r\n    } else if (itemType === \"Scene Service\") {\r\n        displayName = \"Scene Layer\";\r\n    } else if (itemType === \"Scene Package\") {\r\n        displayName = \"Scene Layer Package\";\r\n    } else if (itemType === \"Stream Service\") {\r\n        displayName = \"Feature Layer\";\r\n    } else if (itemType === \"Geocoding Service\") {\r\n        displayName = \"Locator\";\r\n    } else if (itemType === \"Microsoft Powerpoint\") {\r\n        // Unfortunately this was named incorrectly on server side, changing it there would result\r\n        // in some issues\r\n        displayName = \"Microsoft PowerPoint\";\r\n    } else if (itemType === \"GeoJson\") {\r\n        // Unfortunately this was named incorrectly on server side, changing it there would result\r\n        // in some issues\r\n        displayName = \"GeoJSON\";\r\n    } else if (itemType === \"Globe Service\") {\r\n        displayName = \"Globe Layer\";\r\n    } else if (itemType === \"Vector Tile Service\") {\r\n        displayName = \"Tile Layer\";\r\n    } else if (itemType === \"netCDF\") {\r\n        displayName = \"NetCDF\";\r\n    } else if (itemType === \"Map Service\") {\r\n        if (typeKeywords.indexOf(\"Spatiotemporal\") === -1 && (typeKeywords.indexOf(\"Hosted Service\") > -1 || typeKeywords.indexOf(\"Tiled\") > -1)) {\r\n            displayName = \"Tile Layer\";\r\n        } else {\r\n            displayName = \"Map Image Layer\";\r\n        }\r\n    } else if (itemType && itemType.toLowerCase().indexOf(\"add in\") > -1) {\r\n        displayName = itemType.replace(/(add in)/ig, \"Add-In\");\r\n    } else if (itemType === \"datastore catalog service\") {\r\n        displayName = \"Big Data File Share\";\r\n    }\r\n\r\n    return displayName;\r\n};\r\n\r\n/**\r\n * Returns new item JSON containing the displayName which applies to the item\r\n * @param item - the item JSON to mix displayName into\r\n */\r\nexport const mixinItemDisplayName = (item: Pojo) => ({ ...item, displayName: getItemDisplayName(item) });\r\n","import { Pojo } from \"../../../Component\";\r\n\r\nexport type BadgeType = (\r\n    \"authoritative\" |\r\n    \"deprecated\" |\r\n    \"livingAtlas\" |\r\n    \"marketplace\" |\r\n    \"openData\" |\r\n    \"premium\" |\r\n    \"subscriber\"\r\n);\r\n\r\n/**\r\n * Returns an array of badge types which apply to an item\r\n * @param item - raw JSON for the item to determine badges\r\n */\r\nexport const getItemBadges = (item: Pojo): BadgeType[] => {\r\n    let badges: BadgeType[] = [];\r\n    let typeKeywords = item.typeKeywords ? item.typeKeywords : [];\r\n\r\n    if (item.contentStatus) {\r\n        if (item.contentStatus === \"org_authoritative\" || item.contentStatus === \"public_authoritative\") {\r\n            badges.push(\"authoritative\");\r\n        } else if (item.contentStatus === \"deprecated\") {\r\n            badges.push(\"deprecated\");\r\n        }\r\n    }\r\n\r\n    if (item.groupDesignations && item.groupDesignations.indexOf(\"livingatlas\") > -1) {\r\n        badges.push(\"livingAtlas\");\r\n    }\r\n\r\n    if (typeKeywords.indexOf(\"Requires Credits\") > -1) {\r\n        badges.push(\"premium\");\r\n    } else if (typeKeywords.indexOf(\"Requires Subscription\") > -1) {\r\n        badges.push(\"subscriber\");\r\n    }\r\n\r\n    return badges;\r\n};\r\n\r\n/**\r\n * Returns new item JSON containing the badge types which apply to the item\r\n * @param item - the item JSON to mixin badges for\r\n */\r\nexport const mixinItemBadges = (item: Pojo) => ({ ...item, badges: getItemBadges(item) });\r\n","\r\nexport type ItemTypeFilter = keyof ItemTypeMap;\r\nexport interface ItemTypeMap {\r\n    maps: string;\r\n    webMaps: string;\r\n    mapFiles: string;\r\n    layers: string;\r\n    featureLayers: string;\r\n    tileLayers: string;\r\n    mapImageLayers: string;\r\n    imageryLayers: string;\r\n    sceneLayers: string;\r\n    tables: string;\r\n    layerFiles: string;\r\n    scenes: string;\r\n    apps: string;\r\n    webApps: string;\r\n    mobileApps: string;\r\n    desktopApps: string;\r\n    tools: string;\r\n    locators: string;\r\n    geodatabaseAccess: string;\r\n    geometricOperations: string;\r\n    geoprocessingTasks: string;\r\n    networkAnalysis: string;\r\n    files: string;\r\n    documents: string;\r\n    images: string;\r\n    pdfs: string;\r\n    webTools: string;\r\n    notebooks: string;\r\n}\r\n\r\n/**\r\n * Mapping of item display types used in most client apps to their corresponding Q\r\n */\r\nexport const itemTypeMap: ItemTypeMap = {\r\n    maps: `(type:(\"Project Package\" OR \"Windows Mobile Package\" OR \"Map Package\" OR \"Basemap Package\" OR \"Mobile Basemap Package\" OR \"Mobile Map Package\" OR \"Pro Map\" OR \"Project Package\" OR \"Web Map\" OR \"CityEngine Web Scene\" OR \"Map Document\" OR \"Globe Document\" OR \"Scene Document\" OR \"Published Map\" OR \"Explorer Map\" OR \"ArcPad Package\" OR \"Map Template\") -type:(\"Web Mapping Application\" OR \"Layer Package\"))`,\r\n    webMaps: `(type:(\"Web Map\" OR \"CityEngine Web Scene\") -type:(\"Web Mapping Application\"))`,\r\n    mapFiles: `(type:(\"Map Document\" OR \"Windows Mobile Package\" OR \"Globe Document\" OR \"Scene Document\" OR \"Published Map\" OR \"Explorer Map\" OR \"ArcPad Package\" OR \"Map Package\" OR \"Basemap Package\" OR \"Mobile Basemap Package\" OR \"Mobile Map Package\" OR \"Pro Map\" OR \"Project Package\" OR \"Map Template\"))`,\r\n    layers: `(type:(\"Scene Service\" OR \"Feature Collection\" OR \"Route Layer\" OR \"Layer\" OR \"Explorer Layer\" OR \"Tile Package\" OR \"Vector Tile Package\" OR \"Scene Package\" OR \"Layer Package\" OR \"Feature Service\" OR \"Stream Service\" OR \"Map Service\" OR \"Vector Tile Service\" OR \"Image Service\" OR \"WMS\" OR \"WFS\" OR \"WMTS\" OR \"KML\" OR typekeywords:\"OGC\" OR typekeywords:\"Geodata Service\" OR \"Globe Service\" OR \"CSV\" OR \"Shapefile\" OR \"GeoJson\" OR \"Service Definition\" OR \"File Geodatabase\" OR \"CAD Drawing\" OR \"Relational Database Connection\") -type:(\"Web Mapping Application\" OR \"Geodata Service\"))`,\r\n    featureLayers: `(type:(\"Feature Collection\" OR \"Feature Service\" OR \"Stream Service\" OR \"WFS\") -typekeywords:\"Table\")`,\r\n    tileLayers: `(type:(\"WMTS\" OR \"Map Service\" OR \"Vector Tile Service\") typekeywords:(\"Hosted\" OR \"Tiled\"))`,\r\n    mapImageLayers: `(type:(\"Map Service\" OR \"WMS\") -typekeywords:(\"Tiled\") -type:(\"Web Map\" OR \"Web Mapping Application\" OR \"Shapefile\"))`,\r\n    imageryLayers: `(type:\"Image Service\")`,\r\n    sceneLayers: `(type:\"Scene Service\")`,\r\n    tables: `(typekeywords:Table)`,\r\n    layerFiles: `(type:(\"Layer\" OR \"Explorer Layer\" OR \"Tile Package\" OR \"Vector Tile Package\" OR \"Scene Package\" OR \"Layer Package\" OR \"CSV\" OR \"Shapefile\" OR \"GeoJson\" OR \"Service Definition\" OR \"File Geodatabase\" OR \"CAD Drawing\" OR \"Microsoft Excel\") -type:(\"Explorer Maps\" OR \"Map Documents\"))`,\r\n    scenes: `(-type:\"CityEngine Web Scene\" type:\"Web Scene\")`,\r\n    apps: `(type:(\"Code Sample\" OR \"Web Mapping Application\" OR \"Mobile Application\" OR \"Application\" OR \"Desktop Application Template\" OR \"Desktop Application\" OR \"Operation View\" OR \"Dashboard\" OR \"Operations Dashboard Extension\" OR \"Workforce Project\" OR \"Insights Workbook\" OR \"Insights Page\" OR \"Insights Model\" OR \"Hub Page\" OR \"Hub Initiative\" OR \"Hub Site Application\"))`,\r\n    webApps: `(type:(\"Web Mapping Application\" OR \"Dashboard\"))`,\r\n    mobileApps: `(type:\"Mobile Application\")`,\r\n    desktopApps: `(type:\"Desktop Application\" -type:\"Desktop Application Template\")`,\r\n    tools: `((typekeywords:\"tool\" OR type:\"Raster function template\" OR type:\"Geodata Service\" OR type:\"Workflow Manager Package\" OR type:\"Rule Package\" OR type:\"Operations Dashboard Add In\" OR type:\"Workflow Manager Service\" OR type:\"ArcGIS Pro Configuration\") -type:\"KML\")`,\r\n    locators: `(type:(\"Geocoding Service\" OR \"Locator Package\"))`,\r\n    geodatabaseAccess: `(type:\"Geodata Service\")`,\r\n    geometricOperations: `(type:\"Geometry Service\")`,\r\n    geoprocessingTasks: `(type:(\"Geoprocessing Service\" OR \"Geoprocessing Package\" OR \"Geoprocessing Sample\"))`,\r\n    networkAnalysis: `(type:\"Network Analysis Service\")`,\r\n    files: `((typekeywords:\"Document\" OR type:\"Image\" OR type:\"Layout\" OR type:\"Desktop Style\" OR type:\"Project Template\" OR type:\"Report Template\" OR type:\"Statistical Data Collection\" OR type:\"360 VR Experience\" OR type:\"netCDF\") -type:(\"Map Document\" OR \"Image Service\" OR \"Explorer Document\" OR \"Explorer Map\" OR \"Globe Document\" OR \"Scene Document\" OR \"Microsoft Excel\"))`,\r\n    documents: `(typekeywords:\"Document\" -type:\"PDF\")`,\r\n    images: `(type:(\"Image\" OR \"360 VR Experience\") -type:\"Image Service\")`,\r\n    pdfs: `(type:\"PDF\")`,\r\n    webTools: '(type:\"Geoprocessing Service\" AND typekeywords: \"Web Tool\")',\r\n    notebooks: 'type:(\"Notebook\") OR typekeywords:(\"Notebook\" OR \"Jupyter Notebook\")'\r\n};\r\n\r\n/**\r\n * Item type as listed in the sharing API documentation:\r\n * https://developers.arcgis.com/rest/users-groups-and-items/items-and-item-types.htm\r\n */\r\nexport type ItemType = \r\n    \"WMS\" | \"Web Map\" | \"CityEngine Web Scene\" | \"Web Scene\" | \"360 VR Experience\" | \"Pro Map\" | \"Feature Service\" |\r\n    \"Map Service\" | \"Image Service\" | \"KML\" | \"KML Collection\" | \"WFS\" | \"WMTS\" | \"Feature Collection\" |\r\n    \"Feature Collection Template\" | \"Vector Tile Service\" | \"Scene Service\" | \"Relational Database Connection\" |\r\n    \"Web Mapping Application\" | \"Mobile Application\" | \"Code Attachment\" | \"Operations Dashboard Add In\" |\r\n    \"Native Application\" |\"Native Application Template\" | \"Native Application Installer\" | \"Workforce Project\" |\r\n    \"Form\" | \"Insights Workbook\" | \"Insights Model\" | \"Insights Page\" | \"Dashboard\" | \"Hub Initiative\" |\r\n    \"Hub Site Application\" | \"Hub Page\" | \"AppBuilder Widget Package\" | \"Symbol Set\" | \"Color Set\" | \"Shapefile\" |\r\n    \"File Geodatabase\" | \"CSV\" | \"CAD Drawing\" | \"Service Definition\" | \"Microsoft Word\" | \"Microsoft Powerpoint\" |\r\n    \"Microsoft Excel\" | \"PDF\" | \"Image\" | \"Visio Document\" | \"iWork Keynote\" | \"iWork Pages\" | \"iWork Numbers\" |\r\n    \"Report Template\" | \"Statistical Data Collection\" | \"Map Document\" | \"Map Package\" | \"Mobile Basemap Package\" |\r\n    \"Mobile Map Package\" | \"Tile Package\" | \"Vector Tile Package\" | \"Project Package\" | \"Task File\" | \"ArcPad Package\" |\r\n    \"Explorer Map\" | \"Globe Document\" | \"Scene Document\" | \"Published Map\" | \"Map Template\" | \"Windows Mobile Package\" |\r\n    \"Pro Map\" | \"Layout\" | \"Project Template\" | \"Layer\" | \"Layer\" | \"Layer Package\" | \"Explorer Layer\" |\r\n    \"Scene Package\" | \"Image Collection\" | \"Desktop Style\" | \"Geoprocessing Package\" |\r\n    \"Geoprocessing Package (Pro version)\" | \"Geoprocessing Sample\" | \"Locator Package\" | \"Rule Package\" |\r\n    \"Raster function template\" | \"ArcGIS Pro Configuration\" | \"Workflow Manager Package\" | \"Desktop Application\" |\r\n    \"Desktop Application Template\" | \"Code Sample\" | \"Desktop Add In\" | \"Explorer Add In\" | \"ArcGIS Pro Add In\" |\r\n    \"Geometry Service\" | \"Geocoding Service\" | \"Network Analysis Service\" | \"Geoprocessing Service\" |\r\n    \"Workflow Manager Service\" | \"Stream Service\";\r\n\r\n/**\r\n * Array of all supported item types\r\n */\r\nexport const allItemTypes: ItemType[] = [\r\n    \"Web Map\",\r\n    \"CityEngine Web Scene\",\r\n    \"Web Scene\",\r\n    \"360 VR Experience\",\r\n    \"Pro Map\",\r\n    \"Feature Service\",\r\n    \"Map Service\",\r\n    \"Image Service\",\r\n    \"KML\",\r\n    \"KML Collection\",\r\n    \"WFS\",\r\n    \"WMTS\",\r\n    \"Feature Collection\",\r\n    \"Feature Collection Template\",\r\n    \"Vector Tile Service\",\r\n    \"Scene Service\",\r\n    \"Relational Database Connection\",\r\n    \"Web Mapping Application\",\r\n    \"Mobile Application\",\r\n    \"Code Attachment\",\r\n    \"Operations Dashboard Add In\",\r\n    \"Native Application\",\r\n    \"Native Application Template\",\r\n    \"Native Application Installer\",\r\n    \"Workforce Project\",\r\n    \"Form\",\r\n    \"Insights Workbook\",\r\n    \"Insights Model\",\r\n    \"Insights Page\",\r\n    \"Dashboard\",\r\n    \"Hub Initiative\",\r\n    \"Hub Site Application\",\r\n    \"Hub Page\",\r\n    \"AppBuilder Widget Package\",\r\n    \"Symbol Set\",\r\n    \"Color Set\",\r\n    \"Shapefile\",\r\n    \"File Geodatabase\",\r\n    \"CSV\",\r\n    \"CAD Drawing\",\r\n    \"Service Definition\",\r\n    \"Microsoft Word\",\r\n    \"Microsoft Powerpoint\",\r\n    \"Microsoft Excel\",\r\n    \"PDF\",\r\n    \"Image\",\r\n    \"Visio Document\",\r\n    \"iWork Keynote\",\r\n    \"iWork Pages\",\r\n    \"iWork Numbers\",\r\n    \"Report Template\",\r\n    \"Statistical Data Collection\",\r\n    \"Map Document\",\r\n    \"Map Package\",\r\n    \"Mobile Basemap Package\",\r\n    \"Mobile Map Package\",\r\n    \"Tile Package\",\r\n    \"Vector Tile Package\",\r\n    \"Project Package\",\r\n    \"Task File\",\r\n    \"ArcPad Package\",\r\n    \"Explorer Map\",\r\n    \"Globe Document\",\r\n    \"Scene Document\",\r\n    \"Published Map\",\r\n    \"Map Template\",\r\n    \"Windows Mobile Package\",\r\n    \"Pro Map\",\r\n    \"Layout\",\r\n    \"Project Template\",\r\n    \"Layer\",\r\n    \"Layer Package\",\r\n    \"Explorer Layer\",\r\n    \"Scene Package\",\r\n    \"Image Collection\",\r\n    \"Desktop Style\",\r\n    \"Geoprocessing Package\",\r\n    \"Geoprocessing Package (Pro version)\",\r\n    \"Geoprocessing Sample\",\r\n    \"Locator Package\",\r\n    \"Rule Package\",\r\n    \"Raster function template\",\r\n    \"ArcGIS Pro Configuration\",\r\n    \"Workflow Manager Package\",\r\n    \"Desktop Application\",\r\n    \"Desktop Application Template\",\r\n    \"Code Sample\",\r\n    \"Desktop Add In\",\r\n    \"Explorer Add In\",\r\n    \"ArcGIS Pro Add In\",\r\n    \"Geometry Service\",\r\n    \"Geocoding Service\",\r\n    \"Network Analysis Service\",\r\n    \"Geoprocessing Service\",\r\n    \"Workflow Manager Service\"\r\n];\r\n","import { getSearchRequest } from \"../results/_utils/requestHelpers\";\r\nimport { ItemBrowserState } from \"../../_reducers\";\r\nimport { mixinItemInfo } from \"../../../_utils\";\r\nimport { mixinOrganizationInfo } from \"../results/allOrganizations\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\nexport const CHANGE_PAGE_SUCCESS = \"CHANGE_PAGE_SUCCESS\";\r\nexport const CHANGE_PAGE_FAIL = \"CHANGE_PAGE_FAIL\";\r\nexport const CHANGING_PAGE = \"CHANGING_PAGE\";\r\n\r\nexport const changePage = (page: number) => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    const state = getState();\r\n\r\n    dispatch({\r\n        type: CHANGING_PAGE,\r\n        payload: page\r\n    });\r\n    const { portal, iconDir } = state.settings.utils;\r\n    const request = state.settings.utils.request;\r\n    const perPage = state.settings.config.resultsPerQuery;\r\n    const neededItems = perPage * page - perPage;\r\n    const [ url, parameters ] = getSearchRequest({ num: perPage, start: neededItems }, state);\r\n    request(url, parameters).then(\r\n        mixinOrganizationInfo(state),\r\n        (err: any) => dispatch({ type: CHANGE_PAGE_FAIL, payload: { err } })\r\n    ).then(\r\n        (response: any) => {\r\n            dispatch({\r\n                type: CHANGE_PAGE_SUCCESS,\r\n                payload: {\r\n                    organizations: response.data.organizations,\r\n                    displayItems: response.data.results\r\n                        .map((item: Pojo) => mixinItemInfo(portal, iconDir, item)),\r\n                    page\r\n                }\r\n            });\r\n        },\r\n        (err: any) => dispatch({ type: CHANGE_PAGE_FAIL, payload: { err } })\r\n    );\r\n};\r\n","import { curry, compose } from \"../../../../_utils/index\";\r\nimport { ItemBrowserState } from \"../../../index\";\r\nimport { getQ, getCountsQ, getTagsQ } from \"./qHelpers\";\r\nimport {\r\n    getCurrentPortal,\r\n    getCustomSection,\r\n    getSectionGroupCategoryFilter,\r\n    getSectionOrgCategoryFilter\r\n} from \"../../../_utils/index\";\r\n\r\nexport type RequestArgs = [string, {\r\n    method: string;\r\n    query: {\r\n        bbox?: string,\r\n        countFields?: string,\r\n        countSize?: number,\r\n        f?: string,\r\n        num?: number,\r\n        q?: string,\r\n        sortField?: string,\r\n        sortOrder?: string\r\n        start?: number,\r\n    }\r\n}];\r\n\r\n/**\r\n * Forms a request for the search based on the current state of the item browser\r\n * @param options options object containing 'start' and/or 'num' parameter to pass into request\r\n * @param state current state of the item browser\r\n */\r\nexport function getSearchRequest(options: { start?: number, num?: number }, state: ItemBrowserState): RequestArgs {\r\n    const requestBase: RequestArgs = [\r\n        \"\",\r\n        {\r\n            method: \"get\",\r\n            query: state.settings.config.addRequestParameters ? {\r\n                f: \"json\",\r\n                q: getQ(state),\r\n                num: options.num ? options.num : state.settings.config.resultsPerQuery,\r\n                sortOrder: state.parameters.sort.order,\r\n                start: options.start ? options.start : 1,\r\n                ...state.settings.config.addRequestParameters()\r\n            } : {\r\n                f: \"json\",\r\n                q: getQ(state),\r\n                num: options.num ? options.num : state.settings.config.resultsPerQuery,\r\n                sortOrder: state.parameters.sort.order,\r\n                start: options.start ? options.start : 1\r\n            }\r\n        }\r\n    ];\r\n\r\n    return mixinSearchParams(state)(requestBase);\r\n}\r\n\r\n/**\r\n * Forms a request for counts aggregations based on the current state of the item browser\r\n * @param state current state of the item browser\r\n */\r\nexport function getCountsRequest(state: ItemBrowserState, countFields: string[]): RequestArgs {\r\n    const requestBase: RequestArgs = [\r\n        \"\",\r\n        {\r\n            method: \"get\",\r\n            query: {\r\n                f: \"json\",\r\n                q: getCountsQ(state),\r\n                num: 0,\r\n                countFields: countFields.join(\", \"),\r\n                countSize: 200\r\n            }\r\n        }\r\n    ];\r\n\r\n    return mixinCountParams(state)(requestBase);\r\n}\r\n\r\n/**\r\n * Forms a request for counts aggregations based on the current state of the item browser and a particular tag\r\n * @param state current state of the item browser\r\n * @param tagName tag to search for in the results\r\n */\r\nexport function getTagsRequest(state: ItemBrowserState, tagName: string): RequestArgs {\r\n    const requestBase: RequestArgs = [\r\n        \"\",\r\n        {\r\n            method: \"get\",\r\n            query: {\r\n                f: \"json\",\r\n                q: getTagsQ(state, tagName),\r\n                num: 0,\r\n                countFields: \"tags\",\r\n                countSize: 200\r\n            }\r\n        }\r\n    ];\r\n\r\n    return mixinCountParams(state)(requestBase);\r\n}\r\n\r\n/**\r\n * Mixes the appropriate search parameters into the arguments for request\r\n * based on the current state of the item browser\r\n * @param state current state of the item browser\r\n */\r\nconst mixinSearchParams = (state: ItemBrowserState) => compose(\r\n    mixinRequestSort(state),\r\n    mixinRequestBbox(state),\r\n    mixinRequestUrl(state)\r\n);\r\n\r\n\r\n/**\r\n * Mixes the appropriate counts parameters into the arguments for request\r\n * based on the current state of the item browser\r\n * @param state current state of the item browser\r\n */\r\nconst mixinCountParams = (state: ItemBrowserState) => compose(\r\n    mixinRequestUrl(state),\r\n    mixinRequestCountFields(state)\r\n);\r\n\r\n/**\r\n * Returns new request arguments with sortField set based on the state of the item browser\r\n * @param state the current state of the item browser\r\n * @param requestArgs the existing arguments for request\r\n */\r\nconst mixinRequestSort = curry((state: ItemBrowserState, [ url, parameters ]: RequestArgs): RequestArgs => {\r\n    const sortField = state.parameters.sort.field;\r\n    if (sortField !== \"relevance\") { // relevance is the same as no sort field\r\n        return [\r\n            url,\r\n            {\r\n                ...parameters,\r\n                query: {\r\n                    ...parameters.query,\r\n                    sortField\r\n                }\r\n            }\r\n        ];\r\n    }\r\n    return [url, parameters];\r\n});\r\n\r\n/**\r\n * Returns new request arguments with bbox set based on the state of the item browser\r\n * @param state the current state of the item browser\r\n * @param requestArgs the existing arguments for request\r\n */\r\nconst mixinRequestBbox = curry((state: ItemBrowserState, [ url, parameters ]: RequestArgs): RequestArgs => {\r\n    if (state.parameters.filter.searchMapArea) {\r\n        const mapArea = state.parameters.extent.area;\r\n        const bbox = `${mapArea.minx},${mapArea.miny},${mapArea.maxx},${mapArea.maxy}`;\r\n        return [\r\n            url,\r\n            {\r\n                ...parameters,\r\n                query: {\r\n                    ...parameters.query,\r\n                    bbox\r\n                }\r\n            }\r\n        ];\r\n    }\r\n    return [ url, parameters ];\r\n});\r\n\r\n/**\r\n * Returns new request arguments with url set based on the state of the item browser\r\n * @param state the current state of the item browser\r\n * @param requestArgs the existing arguments for request\r\n */\r\nconst mixinRequestUrl = curry((state: ItemBrowserState, [ foo, parameters ]: RequestArgs): RequestArgs => {\r\n    const { section, filter } = state.parameters;\r\n    const portal = getCurrentPortal(state);\r\n\r\n    let url = `${portal.restUrl}/search`;\r\n    if (section === \"myGroups\" && !!filter.group) {\r\n        url = `${portal.restUrl}/content/groups/${filter.group.id}/search`;\r\n\r\n        if (!!filter.groupCategories) {\r\n            url = url + `?categories=${encodeURIComponent(JSON.stringify([filter.groupCategories.value]))}`;\r\n        }\r\n    } else if (section === \"livingAtlas\" && !!state.results.livingAtlas.groupId) {\r\n        url = `${portal.restUrl}/content/groups/${state.results.livingAtlas.groupId}/search`;\r\n\r\n        if (!!filter.livingAtlasCategories) {\r\n            url = url +\r\n                `?categories=${encodeURIComponent(JSON.stringify([filter.livingAtlasCategories.value]))}`;\r\n            if (!!filter.livingAtlasRegion) {\r\n                url = url + `&categories=${encodeURIComponent(JSON.stringify([filter.livingAtlasRegion.value]))}`;\r\n            }\r\n        } else if (!!filter.livingAtlasRegion) {\r\n            url = url + `?categories=${encodeURIComponent(JSON.stringify([filter.livingAtlasRegion.value]))}`;\r\n        }\r\n    } else if (filter.orgCategories && (section === \"myOrganization\" || section === \"myContent\")) {\r\n        url = url + `?categories=${encodeURIComponent(JSON.stringify([filter.orgCategories.value]))}`;\r\n    } else {\r\n        const customSection = getCustomSection(state.settings.config.customSections, section);\r\n        if (customSection) {\r\n            if (getSectionOrgCategoryFilter(customSection) && filter.orgCategories) {\r\n                url = url + `?categories=${encodeURIComponent(JSON.stringify([filter.orgCategories.value]))}`;\r\n            }\r\n\r\n            const groupCategoryFilter = getSectionGroupCategoryFilter(customSection);\r\n            if (groupCategoryFilter) {\r\n                url = `${portal.restUrl}/content/groups/${groupCategoryFilter.id}/search`;\r\n                if (!!filter.groupCategories) {\r\n                    url = url + `?categories=${encodeURIComponent(JSON.stringify([filter.groupCategories.value]))}`;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return [ url, parameters ];\r\n});\r\n\r\n/**\r\n * Returns new request arguments with countFields set based on the state of the item browser\r\n * @param state the current state of the item browser\r\n * @param requestArgs the existing arguments for request\r\n */\r\nconst mixinRequestCountFields = curry((state: ItemBrowserState, [ url, parameters ]: RequestArgs): RequestArgs => {\r\n    const section = state.parameters.section;\r\n    const customSection = getCustomSection(state.settings.config.customSections, section);\r\n    if (\r\n        (section === \"myGroups\" && !!state.parameters.filter.group) ||\r\n        (section === \"livingAtlas\" && !!state.results.livingAtlas.groupId) ||\r\n        (customSection && getSectionGroupCategoryFilter(customSection))\r\n    ) {\r\n        return [\r\n            url,\r\n            {\r\n                ...parameters,\r\n                query: {\r\n                    ...parameters.query,\r\n                    countFields: parameters.query.countFields ?\r\n                        parameters.query.countFields.replace(\"categories\", \"groupcategories\") :\r\n                        undefined\r\n                }\r\n            }\r\n        ];\r\n    }\r\n    return [ url, parameters ];\r\n});\r\n","import * as all from \"dojo/promise/all\";\r\nimport * as Deferred from \"dojo/Deferred\";\r\nimport { ItemBrowserState } from \"../../index\";\r\nimport { fetchUser, mixinItemInfo, mixinUserInfo, requestJSON } from \"../../../_utils/index\";\r\nimport { getCurrentPortal } from \"../../_utils/index\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\nexport const UPDATE_FULL_ITEM_DETAILS = \"UPDATE_FULL_ITEM_DETAILS\";\r\nexport const FETCHING_FULL_ITEM_DETAILS = \"FETCHING_FULL_ITEM_DETAILS\";\r\nexport const FETCH_FULL_ITEM_DETAILS_FAILED = \"FETCH_FULL_ITEM_DETAILS_FAILED\";\r\n\r\nexport const updateFullItemDetails = (item: Pojo, owner: Pojo) => ({\r\n    type: UPDATE_FULL_ITEM_DETAILS,\r\n    payload: {\r\n        item,\r\n        owner\r\n    }\r\n});\r\n\r\nexport const fetchFullItemDetailsFailed = (id: string) => ({\r\n    type: FETCH_FULL_ITEM_DETAILS_FAILED,\r\n    payload: id\r\n});\r\n\r\nexport const fetchFullItemDetails = (item: Pojo) => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    const state = getState();\r\n    const portal = getCurrentPortal(state);\r\n    const { request } = state.settings.utils;\r\n\r\n    const requests = [];\r\n\r\n    requests.push(\r\n        fetchUser(request, portal, item.owner)\r\n            .then(\r\n                (user: Pojo) => mixinUserInfo(portal, user),\r\n                (err: any) => { throw (err); }\r\n            )\r\n    );\r\n\r\n    let url = `${portal.restUrl}/content/items/${item.id}`;\r\n    if (portal.user && item.owner === portal.user.username) {\r\n        const username = portal.user.username;\r\n        url = `${portal.restUrl}/content/users/${username}/items/${item.id}`;\r\n    }\r\n\r\n    requests.push(\r\n        requestJSON(request, url)\r\n            .then(\r\n                (response: any) => {\r\n                    if (!!response.item && !!response.sharing) {\r\n                        const dfd = new Deferred();\r\n                        requestJSON(\r\n                            request,\r\n                            `${portal.restUrl}/community/groups`,\r\n                            {\r\n                                q: `id: ${response.sharing.groups.map((group: string) => `\"${group}\"`).join(\" OR \")}`\r\n                            }\r\n                        ).then(\r\n                            (response2: any) => {\r\n                                return dfd.resolve({\r\n                                    ...mixinItemInfo(portal, state.settings.utils.iconDir, response.item),\r\n                                    sharing: response.sharing,\r\n                                    sharedToGroups: response2.results\r\n                                });\r\n                            },\r\n                            (err: any) => dfd.reject(err)\r\n                        );\r\n                        return dfd;\r\n                    } else {\r\n                        return mixinItemInfo(portal, state.settings.utils.iconDir, response);\r\n                    }\r\n                },\r\n                (err: any) => {\r\n                    throw item.id;\r\n                }\r\n            )\r\n    );\r\n\r\n    all(requests as any)\r\n        .then(\r\n            (results) => { dispatch(updateFullItemDetails(results[1], results[0])); },\r\n            (id) => { dispatch({ type: FETCH_FULL_ITEM_DETAILS_FAILED, payload: id }); }\r\n        );\r\n};\r\n","import * as all from \"dojo/promise/all\";\r\nimport * as Deferred from \"dojo/Deferred\";\r\nimport { ItemBrowserState } from \"../../index\";\r\nimport { CategoryFilter } from \"../../_reducers/settings/config\";\r\nimport { curry, fetchGroupCategorySchema, fetchOrgCategorySchema, removeDupsOnKey, fetchGroupByQuery } from \"../../../_utils/index\";\r\nimport { sectionHasCategoryFilter, getCustomCategoryFilters } from \"../../_utils/index\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\nexport const LOADING_CUSTOM_SECTION_INFO = \"LOADING_CUSTOM_SECTION_INFO\";\r\nexport const UPDATE_CUSTOM_SECTION_INFO = \"UPDATE_CUSTOM_SECTION_SCHEMAS\";\r\nexport const UPDATE_CUSTOM_SECTION_INFO_FAILED = \"UPDATE_CUSTOM_SECTION_INFO_FAILED\";\r\nexport const UPDATE_CUSTOM_SECTION_GROUPS = \"UPDATE_CUSTOM_SECTION_GROUPS\";\r\n\r\nexport const fetchCustomSectionInfo = () => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    let state = getState();\r\n\r\n    if (state.results.customSections.status === \"loaded\") {\r\n        return (new Deferred).resolve();\r\n    } else if (state.results.customSections.status === \"failed\") {\r\n        return (new Deferred).reject();\r\n    }\r\n\r\n    dispatch({ type: LOADING_CUSTOM_SECTION_INFO });\r\n\r\n    const categoryFilters = removeDupsOnKey(\r\n        \"id\",\r\n        state.settings.config.customSections\r\n            .filter(sectionHasCategoryFilter) // Only look at custom sections with category filters\r\n            .map(getCustomCategoryFilters) // Get array of category filters for each section\r\n            .reduce((result: CategoryFilter[], current: CategoryFilter[]) => [ ...result, ...current ], []) // Concat\r\n    );\r\n    const filterRequests = fetchCustomSectionGroups(dispatch, getState, categoryFilters).then(\r\n        () => {\r\n            state = getState();\r\n            return all(\r\n                categoryFilters\r\n                    .map((filter) => // Map to requests\r\n                        requestSchema(state, filter).then((response) => ({ id: filter.id, type: filter.type, response }))\r\n                    )\r\n            );       \r\n        },\r\n        handleCustomSectionInfoError\r\n    );\r\n\r\n    return filterRequests.then(\r\n        (responses) => dispatch({\r\n            type: UPDATE_CUSTOM_SECTION_INFO,\r\n            payload: responses\r\n        }),\r\n        handleCustomSectionInfoError\r\n    );\r\n\r\n    function handleCustomSectionInfoError(err: Error) {\r\n        console.error(err);\r\n        dispatch({ type: UPDATE_CUSTOM_SECTION_INFO_FAILED });\r\n    }\r\n};\r\n\r\nconst fetchCustomSectionGroups = (dispatch: any, getState: () => ItemBrowserState, categoryFilters: CategoryFilter[]): Deferred<{}> => {\r\n    const state = getState();\r\n    const dfd = new Deferred();\r\n    if (categoryFilters.length > 0) {\r\n        const { request, portal } = state.settings.utils;\r\n        const groupQueries = categoryFilters\r\n            .filter((f: CategoryFilter) => f.type === \"group\") // Only send group queries for group sections\r\n            .map(({ id, fetchGroupIdByQuery }) => {\r\n                return fetchGroupByQuery(\r\n                    request,\r\n                    portal,\r\n                    fetchGroupIdByQuery ? fetchGroupIdByQuery : `id:${id}`\r\n                ).then((response: any) => response.results[0]);\r\n            });\r\n        all(groupQueries).then((groups: Pojo[]) => {\r\n            const newState = getState();\r\n            dispatch({\r\n                type: UPDATE_CUSTOM_SECTION_GROUPS,\r\n                payload: {\r\n                    currentSection: newState.parameters.section,\r\n                    customSections: newState.settings.config.customSections,\r\n                    groups\r\n                }\r\n            });\r\n            dfd.resolve();\r\n        });\r\n    } else {\r\n        dfd.resolve();\r\n    }\r\n    return dfd;\r\n};\r\n\r\nconst requestSchema = curry((state: ItemBrowserState, filter: CategoryFilter) => {\r\n    const { request, portal } = state.settings.utils;\r\n    if (filter.staticSchema) {\r\n        const dfd = new Deferred();\r\n        dfd.resolve({ categorySchema: filter.staticSchema });\r\n        return dfd.then(response => response);\r\n    }\r\n    if (filter.type === \"group\") {\r\n        return fetchGroupCategorySchema(request, portal, filter.id);\r\n    }\r\n    return fetchOrgCategorySchema(request, portal, filter.id);\r\n});\r\n","import { ItemBrowserState } from \"../../_reducers/index\";\r\n\r\nexport const CHANGE_SEARCH_SECTION = \"CHANGE_SEARCH_SECTION\";\r\n\r\nexport const changeSearchSection = (newSection: ItemBrowserState[\"parameters\"][\"section\"]) =>\r\n    (dispatch: any, getState: () => ItemBrowserState) => {\r\n        const state = getState();\r\n        dispatch({\r\n            type: CHANGE_SEARCH_SECTION,\r\n            payload: {\r\n                newSection,\r\n                customSections: state.settings.config.customSections,\r\n                customSectionGroupSort: state.results.customSections.groupSort\r\n            }\r\n        });\r\n    };\r\n","export const CLOSING_DETAILS_PANE = \"CLOSING_DETAILS_PANE\";\r\nexport const CLOSE_DETAILS_PANE = \"CLOSE_DETAILS_PANE\";\r\n\r\nexport const closeDetailsPane = () => ({ type: CLOSING_DETAILS_PANE });\r\n","import { curry } from \"../higherOrderFunctions/index\";\r\n\r\n/**\r\n * removeDups function to use with filter (quadratic, use only in short arrays!)\r\n * @param el element\r\n * @param index index\r\n * @param arr array\r\n */\r\nexport const removeDups = (el: any, index: number, arr: any[]) => arr.indexOf(el) === index;\r\n\r\n/**\r\n * (Curried, arity 2) Removes duplicates from an array of objects on a specified key\r\n * 1. key - index signature for key on which to remove dups\r\n * 2. input - array of items to remove dups from\r\n */\r\nexport const removeDupsOnKey = curry((key: string, input: any[]): any[] => {\r\n    let seen = {};\r\n    return input.filter((el: any) => {\r\n        if (!seen[el[key]]) {\r\n            seen[el[key]] = true;\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n});\r\n\r\n/**\r\n * Filter empty strings out of an array\r\n * @param input - array of strings to filter\r\n */\r\nexport function filterEmptyStrings(input: string[]): string[] {\r\n    return input.filter((item: string) => item.length > 0);\r\n}\r\n","import * as all from \"dojo/promise/all\";\r\nimport * as Deferred from \"dojo/Deferred\";\r\nimport { ItemBrowserState } from \"../../index\";\r\nimport { fetchOrgCategorySchema, fetchAllOrgGroups } from \"../../../_utils/index\";\r\n\r\nexport const LOADING_ORG_INFO = \"LOADING_ORG_INFO\";\r\nexport const UPDATE_ORG_INFO = \"UPDATE_ORG_INFO\";\r\nexport const UPDATE_ORG_INFO_FAILED = \"UPDATE_ORG_INFO_FAILED\";\r\n\r\nexport const fetchOrgInfo = () => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    const state = getState();\r\n\r\n    if (state.results.organization.status === \"loaded\") {\r\n        return (new Deferred).resolve();\r\n    } else if (state.results.organization.status === \"failed\") {\r\n        return (new Deferred).reject();\r\n    }\r\n\r\n    dispatch({ type: LOADING_ORG_INFO });\r\n\r\n    const { request, portal } = state.settings.utils;\r\n\r\n    return all([\r\n        fetchOrgCategorySchema(request, portal).then((response: any) => response.categorySchema),\r\n        fetchAllOrgGroups(request, portal).then((response: any) => response.data.results)\r\n    ]).then(\r\n        (responses: any[]) => {\r\n            dispatch({\r\n                type: UPDATE_ORG_INFO,\r\n                payload: {\r\n                    schema: responses[0],\r\n                    groups: responses[1]\r\n                }\r\n            });\r\n        },\r\n        handleOrgInfoError\r\n    );\r\n\r\n    function handleOrgInfoError(err: Error) {\r\n        console.error(err);\r\n        dispatch({ type: UPDATE_ORG_INFO_FAILED });\r\n    }\r\n};\r\n","import * as debounce from \"dojo/debounce\";\r\nimport { ItemBrowserState } from \"../../_reducers/index\";\r\nimport { getTagsRequest } from \"./_utils/requestHelpers\";\r\nexport const LOADING_TAGS = \"LOADING_TAGS\";\r\nexport const LOADING_TAGS_SUCCESS = \"LOADING_TAGS_SUCCESS\";\r\nexport const LOADING_TAGS_FAILED = \"LOADING_TAGS_FAILED\";\r\nexport const UPDATE_TAGS_FILTER_STRING = \"UPDATE_TAGS_FILTER_STRING\";\r\n\r\nexport const updateTagsFilterString = (tagName: string) => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    dispatch({\r\n        type: UPDATE_TAGS_FILTER_STRING,\r\n        payload: tagName\r\n    });\r\n\r\n    if (tagName.length > 2) {\r\n        loadTags(dispatch, getState(), tagName);\r\n    }\r\n};\r\n\r\nexport const loadTags = debounce((dispatch: any, state: ItemBrowserState, tagName: string) => {\r\n    dispatch({ type: LOADING_TAGS });\r\n\r\n    const request = state.settings.utils.request;\r\n    const [ tagsUrl, tagsParameters ] = getTagsRequest(state, tagName);\r\n\r\n    request(tagsUrl, tagsParameters)\r\n        .then(\r\n            (response: any) => { dispatch({ type: LOADING_TAGS_SUCCESS, payload: response.data })},\r\n            (err: any) => dispatch({ type: LOADING_TAGS_FAILED, payload: err })\r\n        );\r\n}, 400);\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__59__;","module.exports = __WEBPACK_EXTERNAL_MODULE__61__;","import * as i18n from \"dojo/i18n!../../nls/resources\";\r\nimport { Component, H, connect, ComponentProps } from \"../../../Component\";\r\nimport { genericSubtreeFromPath } from \"../../../_utils/index\";\r\nimport { ItemBrowserState } from \"../../index\";\r\nimport { getFilters } from \"./_utils/getFilters\";\r\nimport {\r\n    search,\r\n    updateOrgGroupFilter,\r\n    updateCreatedFilter,\r\n    updateItemTypeFilter,\r\n    updateModifiedFilter,\r\n    updateSharedFilter,\r\n    updateStatusFilter,\r\n    updateMapAreaFilter,\r\n    updateSearchOrgFilter,\r\n    updateFolderFilter,\r\n    updateGroupFilter,\r\n    updateLivingAtlasCategoriesFilter,\r\n    updateLivingAtlasRegionFilter,\r\n    updateOrgCategoriesFilter,\r\n    updateGroupCategoriesFilter,\r\n    updateTagsFilter,\r\n    updateTagsFilterString,\r\n    updateCustomFilter\r\n} from \"../../_actions/index\";\r\n\r\nimport Toggle, { ToggleOption } from \"../../../Buttons/Toggle\";\r\nimport MapAreaFilter from \"../../../Filters/MapAreaFilter\";\r\nimport CreatedFilter from \"../../../Filters/CreatedFilter/index\";\r\nimport ItemTypeFilter from \"../../../Filters/ItemTypeFilter/index\";\r\nimport ModifiedFilter from \"../../../Filters/ModifiedFilter/index\";\r\nimport SharedFilter from \"../../../Filters/SharedFilter/index\";\r\nimport StatusFilter from \"../../../Filters/StatusFilter/index\";\r\nimport FolderFilter from \"../../../Filters/FolderFilter/index\";\r\nimport GroupFilter from \"../../../Filters/GroupFilter/index\";\r\nimport TagsFilter from \"../../../Filters/TagsFilter/index\";\r\nimport CategoriesFilter, { CategoriesOption } from \"../../../Filters/CategoriesFilter/index\";\r\nimport CustomFilterAccordion from \"./CustomFilterAccordion\";\r\nimport { ItemBrowserStore } from \"../../../wrappers/ItemBrowser\";\r\n\r\nexport interface FilterPaneProps extends ComponentProps {\r\n    /**\r\n     * The current state tree of the `ItemBrowser`.\r\n     * @type {object}\r\n     */\r\n    stateTree: ItemBrowserState;\r\n\r\n    /**\r\n     * The dispatch function of the `ItemBrowserStore`.\r\n     * @type {function}\r\n     */\r\n    dispatch: ItemBrowserStore[\"dispatch\"];\r\n}\r\n\r\n/**\r\n * The `ItemBrowser` filter pane.\r\n */\r\nexport class FilterPane extends Component<FilterPaneProps> {\r\n    constructor(props: FilterPaneProps) {\r\n        super(props);\r\n\r\n        this.handleCustomFilterToggle = this.handleCustomFilterToggle.bind(this);\r\n        this.handleMapAreaToggle = this.handleMapAreaToggle.bind(this);\r\n        this.handleSearchOrgToggle = this.handleSearchOrgToggle.bind(this);\r\n        this.handleCreatedFilterChange = this.handleCreatedFilterChange.bind(this);\r\n        this.handleItemTypeFilterChange = this.handleItemTypeFilterChange.bind(this);\r\n        this.handleModifiedFilterChange = this.handleModifiedFilterChange.bind(this);\r\n        this.handleSharedFilterChange = this.handleSharedFilterChange.bind(this);\r\n        this.handleStatusFilterChange = this.handleStatusFilterChange.bind(this);\r\n        this.handleFolderFilterChange = this.handleFolderFilterChange.bind(this);\r\n        this.handleGroupFilterChange = this.handleGroupFilterChange.bind(this);\r\n        this.handleOrgGroupFilterChange = this.handleOrgGroupFilterChange.bind(this);\r\n        this.handleTagsFilterChange = this.handleTagsFilterChange.bind(this);\r\n        this.handleOrgCategorySelect = this.handleOrgCategorySelect.bind(this);\r\n        this.handleClearOrgCategories = this.handleClearOrgCategories.bind(this);\r\n        this.handleGroupCategorySelect = this.handleGroupCategorySelect.bind(this);\r\n        this.handleClearGroupCategories = this.handleClearGroupCategories.bind(this);\r\n        this.handleLACategorySelect = this.handleLACategorySelect.bind(this);\r\n        this.handleClearLACategories = this.handleClearLACategories.bind(this);\r\n        this.handleLARegionSelect = this.handleLARegionSelect.bind(this);\r\n        this.handleClearLARegion = this.handleClearLARegion.bind(this);\r\n        this.handleTagsFilterStringChange = this.handleTagsFilterStringChange.bind(this);\r\n    }\r\n\r\n    public render(tsx: H) {\r\n        const config = this.props.stateTree.settings.config;\r\n        const filterParams = this.props.stateTree.parameters.filter;\r\n        const user = this.props.stateTree.settings.utils.portal.user;\r\n\r\n        const availableFilters = getFilters(this.props.stateTree);\r\n\r\n        const mapAreaFilter = config.enableMapAreaFilter ?\r\n            (\r\n                <MapAreaFilter\r\n                    key=\"map-area-filter\"\r\n                    handleMapAreaToggle={this.handleMapAreaToggle}\r\n                    searchMapArea={this.props.stateTree.parameters.filter.searchMapArea}\r\n                    text={i18n.filterPane.mapArea}\r\n                />\r\n            ) : null;\r\n\r\n        const sectionFilters = availableFilters.map((filter: string, index: number) => {\r\n            switch (filter) {\r\n                case \"group\":\r\n                    return (\r\n                        <GroupFilter\r\n                            key=\"group-filter\"\r\n                            onGroupSelect={this.handleGroupFilterChange}\r\n                            availableGroups={this.props.stateTree.results.user.groups}\r\n                            groupFilter={this.props.stateTree.parameters.filter.group}\r\n                        />\r\n                    );\r\n                case \"folder\":\r\n                    const folders = this.props.stateTree.results.user.folders;\r\n                    const rootFolder = {\r\n                        title: this.props.stateTree.settings.utils.portal.user.username,\r\n                        id: \"root\"\r\n                    };\r\n                    return (\r\n                        <FolderFilter\r\n                            key=\"folder-filter\"\r\n                            onFolderSelect={this.handleFolderFilterChange}\r\n                            availableFolders={folders ? [ rootFolder, ...folders ] : [ rootFolder ]}\r\n                            folderFilter={this.props.stateTree.parameters.filter.folder}\r\n                        />\r\n                    );\r\n                case \"itemType\":\r\n                    return (\r\n                        <ItemTypeFilter\r\n                            key=\"item-type-filter\"\r\n                            onItemTypeSelect={this.handleItemTypeFilterChange}\r\n                            availableItemTypes={config.availableItemTypeFilters}\r\n                            itemTypeFilter={this.props.stateTree.parameters.filter.itemType}\r\n                        />\r\n                    );\r\n                case \"orgCategories\": {\r\n                    const schema = this.props.stateTree.results.organization.categorySchema;\r\n                    if (!!schema && !!schema.children && !!schema.children[0] && schema.children[0].children) {\r\n                        return (\r\n                            <CategoriesFilter\r\n                                key=\"org-categories-filter\"\r\n                                onCategorySelect={this.handleOrgCategorySelect}\r\n                                onClearCategories={this.handleClearOrgCategories}\r\n                                availableCategories={schema.children[0].children as ToggleOption[]}\r\n                                categoriesFilter={this.props.stateTree.parameters.filter.orgCategories}\r\n                                title={i18n.filterPane.categories}\r\n                                prependValue={`/${schema.children[0].value}/`}\r\n                            />\r\n                        );\r\n                    }\r\n                    break;\r\n                }\r\n                case \"livingAtlasCategories\": {\r\n                    const schema = this.props.stateTree.results.livingAtlas.categorySchema;\r\n                    if (!!schema && !!schema.children && !!schema.children[0] && !!schema.children[0].children) {\r\n                        return (\r\n                            <CategoriesFilter\r\n                                key=\"la-categories-filter\"\r\n                                onCategorySelect={this.handleLACategorySelect}\r\n                                onClearCategories={this.handleClearLACategories}\r\n                                availableCategories={schema.children[0].children as ToggleOption[]}\r\n                                categoriesFilter={this.props.stateTree.parameters.filter.livingAtlasCategories}\r\n                                title={schema.children[0].displayName}\r\n                                prependValue=\"/categories/\"\r\n                                showTooltips={true}\r\n                                startActive={true}\r\n                            />\r\n                        );\r\n                    }\r\n                    break;\r\n                }\r\n                case \"livingAtlasRegion\": {\r\n                    const schema = this.props.stateTree.results.livingAtlas.categorySchema;\r\n                    if (!!schema && !!schema.children && !!schema.children[1] && !!schema.children[1].children) {\r\n                        return (\r\n                            <CategoriesFilter\r\n                                key=\"la-region-filter\"\r\n                                onCategorySelect={this.handleLARegionSelect}\r\n                                onClearCategories={this.handleClearLARegion}\r\n                                availableCategories={schema.children[1].children as ToggleOption[]}\r\n                                categoriesFilter={this.props.stateTree.parameters.filter.livingAtlasRegion}\r\n                                title={schema.children[1].displayName}\r\n                                prependValue=\"/region/\"\r\n                                startActive={true}\r\n                            />\r\n                        );\r\n                    }\r\n                    break;\r\n                }\r\n                case \"groupCategories\":\r\n                    if (!!filterParams.group) {\r\n                        const schema = this.props.stateTree.results.user.groupCategories[filterParams.group.id];\r\n                        if (!!schema && !!schema.children && !!schema.children[0] && !!schema.children[0].children) {\r\n                            return (\r\n                                <CategoriesFilter\r\n                                    key=\"group-categories-filter\"\r\n                                    onCategorySelect={this.handleGroupCategorySelect}\r\n                                    onClearCategories={this.handleClearGroupCategories}\r\n                                    availableCategories={schema.children[0].children as ToggleOption[]}\r\n                                    categoriesFilter={this.props.stateTree.parameters.filter.groupCategories}\r\n                                    title={i18n.filterPane.groupCategories}\r\n                                    prependValue={`/${schema.children[0].value}/`}\r\n                                />\r\n                            );\r\n                        }\r\n                    }\r\n                    break;\r\n                case \"orgGroups\":\r\n                    // if (this.props.stateTree.results.organization.groups) {\r\n                    //     return (\r\n                    //         <GroupFilter\r\n                    //             key=\"org-group-filter\"\r\n                    //             onGroupSelect={this.handleOrgGroupFilterChange}\r\n                    //             availableGroups={this.props.stateTree.results.organization.groups}\r\n                    //             groupFilter={this.props.stateTree.parameters.filter.orgGroup}\r\n                    //             title={i18n.filterPane.orgGroups}\r\n                    //         /> \r\n                    //     );\r\n                    // }\r\n                    break;\r\n                case \"modified\":\r\n                    return (\r\n                        <ModifiedFilter\r\n                            key=\"modified-filters\"\r\n                            onDateModifiedSelect={this.handleModifiedFilterChange}\r\n                            dateModifiedFilter={this.props.stateTree.parameters.filter.dateModified}\r\n                            dateModifiedSection={this.props.stateTree.ui.filters.modifiedSection}\r\n                        />\r\n                    );\r\n                case \"created\":\r\n                    return (\r\n                        <CreatedFilter\r\n                            key=\"created-filters\"\r\n                            onDateCreatedSelect={this.handleCreatedFilterChange}\r\n                            dateCreatedFilter={this.props.stateTree.parameters.filter.dateCreated}\r\n                            dateCreatedSection={this.props.stateTree.ui.filters.createdSection}\r\n                        />\r\n                    );\r\n                case \"shared\":\r\n                    return (\r\n                        <SharedFilter\r\n                            counts={this.props.stateTree.results.counts.access}\r\n                            key=\"shared-filters\"\r\n                            onSharedSelect={this.handleSharedFilterChange}\r\n                            sharedFilter={this.props.stateTree.parameters.filter.shared}\r\n                            hideOrgGroupFilters={!!user && !user.orgId}\r\n                        />\r\n                    );\r\n                case \"status\":\r\n                    const {\r\n                        deprecated,\r\n                        orgAuthoritative,\r\n                        publicAuthoritative\r\n                    } = this.props.stateTree.results.counts.contentStatus;\r\n                    return (\r\n                        <StatusFilter\r\n                            counts={{\r\n                                authoritative:\r\n                                    (user && user.orgId) ?\r\n                                        orgAuthoritative + publicAuthoritative :\r\n                                        publicAuthoritative,\r\n                                deprecated: deprecated\r\n                            }}\r\n                            key=\"status-filters\"\r\n                            onStatusSelect={this.handleStatusFilterChange}\r\n                            statusFilter={this.props.stateTree.parameters.filter.status}\r\n                        />\r\n                    );\r\n                case \"tags\":\r\n                    return (\r\n                        <TagsFilter\r\n                            availableTags={this.props.stateTree.ui.tagsFilter.visibleTags}\r\n                            filterString={this.props.stateTree.ui.tagsFilter.filterString}\r\n                            key=\"ib-tags-filter\"\r\n                            onFilterStringChange={this.handleTagsFilterStringChange}\r\n                            onTagSelect={this.handleTagsFilterChange}\r\n                            tagsFilter={this.props.stateTree.parameters.filter.tags}\r\n                        />\r\n                    );\r\n                default:\r\n                    if (typeof filter === \"object\") {\r\n                        if (filter[\"type\"] === \"group\") {\r\n                            const schema = this.props.stateTree.results.customSections.groupSchemas[filter[\"id\"]];\r\n                            if (!!schema && !!schema.children && !!schema.children[0] && !!schema.children[0].children) {\r\n                                let pathCategories;\r\n                                if (filter[\"path\"]) {\r\n                                    const subTree = genericSubtreeFromPath<ToggleOption, \"value\">(\r\n                                        \"children\",\r\n                                        \"value\",\r\n                                        schema,\r\n                                        filter[\"path\"]\r\n                                    );\r\n                                    pathCategories = subTree ? subTree.children : undefined;\r\n                                }\r\n                                return (\r\n                                    <CategoriesFilter\r\n                                        key=\"custom-group-categories-filter\"\r\n                                        onCategorySelect={this.handleGroupCategorySelect}\r\n                                        onClearCategories={this.handleClearGroupCategories}\r\n                                        availableCategories={\r\n                                            filter[\"path\"] && pathCategories ? pathCategories : schema.children\r\n                                        }\r\n                                        categoriesFilter={this.props.stateTree.parameters.filter.groupCategories}\r\n                                        title={filter[\"name\"]}\r\n                                        prependValue={`/${filter[\"path\"] ? filter[\"path\"].join(\"/\") + \"/\" : \"\"}`}\r\n                                    />\r\n                                );\r\n                            }\r\n                        } else if (filter[\"type\"] === \"org\") {\r\n                            const schema = this.props.stateTree.results.customSections.orgSchemas[filter[\"id\"]];\r\n                            if (!!schema && !!schema.children && !!schema.children[0] && !!schema.children[0].children) {\r\n                                let pathCategories;\r\n                                if (filter[\"path\"]) {\r\n                                    const subTree = genericSubtreeFromPath<ToggleOption, \"value\">(\r\n                                        \"children\",\r\n                                        \"value\",\r\n                                        schema,\r\n                                        filter[\"path\"]\r\n                                    );\r\n                                    pathCategories = subTree ? subTree.children : undefined;\r\n                                }\r\n                                return (\r\n                                    <CategoriesFilter\r\n                                        key=\"custom-org-categories-filter\"\r\n                                        onCategorySelect={this.handleOrgCategorySelect}\r\n                                        onClearCategories={this.handleClearOrgCategories}\r\n                                        availableCategories={\r\n                                            filter[\"path\"] && pathCategories ? pathCategories : schema.children\r\n                                        }\r\n                                        categoriesFilter={this.props.stateTree.parameters.filter.orgCategories}\r\n                                        title={filter[\"name\"]}\r\n                                        prependValue={`/${filter[\"path\"] ? filter[\"path\"].join(\"/\") + \"/\" : \"\"}`}\r\n                                    />\r\n                                );\r\n                            }\r\n                        } else if (filter[\"children\"]) {\r\n                            const customFilter = this.props.stateTree.parameters.filter.customFilter[index];\r\n                            return (\r\n                                <CustomFilterAccordion\r\n                                    key={`${filter[\"displayName\"]}-filter-accordion`}\r\n                                    filter={filter}\r\n                                    index={index}\r\n                                    onClear={this.handleCustomFilterToggle}\r\n                                    onClick={this.handleCustomFilterToggle}\r\n                                    selectedOption={customFilter ? customFilter.value : undefined}\r\n                                />\r\n                            );\r\n                        }\r\n                    }\r\n                    return null;\r\n            }\r\n            return null;\r\n        });\r\n\r\n        if (mapAreaFilter) {\r\n            return [\r\n                mapAreaFilter,\r\n                (\r\n                    <div key=\"filter-accordion\" class=\"ib-filter-pane__accordion\">\r\n                        {sectionFilters}\r\n                    </div>\r\n                )\r\n            ];\r\n        }\r\n        return (\r\n            <div key=\"filter-accordion\" class=\"ib-filter-pane__accordion\">\r\n                {sectionFilters}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private handleCustomFilterToggle(index: number, value?: string, text?: string) {\r\n        this.props.dispatch(updateCustomFilter(index, value ? { value, text } : undefined));\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleMapAreaToggle() {\r\n        this.props.dispatch(updateMapAreaFilter(!this.props.stateTree.parameters.filter.searchMapArea));\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleSearchOrgToggle() {\r\n        const searchOrg = this.props.stateTree.parameters.filter.searchOrg;\r\n        this.props.dispatch(updateSearchOrgFilter(!searchOrg));\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleItemTypeFilterChange(itemTypeOption: ItemBrowserState[\"parameters\"][\"filter\"][\"itemType\"]) {\r\n        this.props.dispatch(updateItemTypeFilter(itemTypeOption));\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleModifiedFilterChange(\r\n        section?: ItemBrowserState[\"ui\"][\"filters\"][\"modifiedSection\"],\r\n        modifiedOption?: ItemBrowserState[\"parameters\"][\"filter\"][\"dateModified\"]\r\n    ) {\r\n        this.props.dispatch(updateModifiedFilter(section, modifiedOption));\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleCreatedFilterChange(\r\n        section?: ItemBrowserState[\"ui\"][\"filters\"][\"createdSection\"],\r\n        createdOption?: ItemBrowserState[\"parameters\"][\"filter\"][\"dateCreated\"]\r\n    ) {\r\n        this.props.dispatch(updateCreatedFilter(section, createdOption));\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleSharedFilterChange(sharedOption: ItemBrowserState[\"parameters\"][\"filter\"][\"shared\"]) {\r\n        this.props.dispatch(updateSharedFilter(sharedOption));\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleStatusFilterChange(statusOption: ItemBrowserState[\"parameters\"][\"filter\"][\"status\"]) {\r\n        this.props.dispatch(updateStatusFilter(statusOption));\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleFolderFilterChange(folderOption: ItemBrowserState[\"parameters\"][\"filter\"][\"folder\"]) {\r\n        this.props.dispatch(updateFolderFilter(folderOption));\r\n        this.props.dispatch(search(true));\r\n    }\r\n\r\n    private handleGroupFilterChange(groupOption: ItemBrowserState[\"parameters\"][\"filter\"][\"group\"]) {\r\n        this.props.dispatch(updateGroupFilter(groupOption));\r\n        this.props.dispatch(search(true));\r\n    }\r\n    \r\n    private handleOrgGroupFilterChange(groupOption: ItemBrowserState[\"parameters\"][\"filter\"][\"orgGroup\"]) {\r\n        this.props.dispatch(updateOrgGroupFilter(groupOption));\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleTagsFilterChange(tags: ItemBrowserState[\"parameters\"][\"filter\"][\"tags\"]) {\r\n        this.props.dispatch(updateTagsFilter(tags));\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleOrgCategorySelect(category: CategoriesOption) {\r\n        const filter = this.props.stateTree.parameters.filter.orgCategories;\r\n        if (filter && filter.value === category.value) {\r\n            this.props.dispatch(updateOrgCategoriesFilter());\r\n        } else {\r\n            this.props.dispatch(updateOrgCategoriesFilter(category));\r\n        }\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleClearOrgCategories() {\r\n        this.props.dispatch(updateOrgCategoriesFilter());\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleLACategorySelect(category: CategoriesOption) {\r\n        const filter = this.props.stateTree.parameters.filter.livingAtlasCategories;\r\n        if (filter && filter.value === category.value) {\r\n            this.props.dispatch(updateLivingAtlasCategoriesFilter());\r\n        } else {\r\n            this.props.dispatch(updateLivingAtlasCategoriesFilter(category));\r\n        }\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleClearLACategories() {\r\n        this.props.dispatch(updateLivingAtlasCategoriesFilter());\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleLARegionSelect(category: CategoriesOption) {\r\n        const filter = this.props.stateTree.parameters.filter.livingAtlasRegion;\r\n        if (filter && filter.value === category.value) {\r\n            this.props.dispatch(updateLivingAtlasRegionFilter());\r\n        } else {\r\n            this.props.dispatch(updateLivingAtlasRegionFilter(category));\r\n        }\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleClearLARegion() {\r\n        this.props.dispatch(updateLivingAtlasRegionFilter());\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleGroupCategorySelect(category: CategoriesOption) {\r\n        const filter = this.props.stateTree.parameters.filter.groupCategories;\r\n        if (filter && filter.value === category.value) {\r\n            this.props.dispatch(updateGroupCategoriesFilter());\r\n        } else {\r\n            this.props.dispatch(updateGroupCategoriesFilter(category));\r\n        }\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleClearGroupCategories() {\r\n        this.props.dispatch(updateGroupCategoriesFilter());\r\n        this.props.dispatch(search());\r\n    }\r\n\r\n    private handleTagsFilterStringChange(tagName: string) {\r\n        this.props.dispatch(updateTagsFilterString(tagName));\r\n    }\r\n}\r\n\r\ninterface StateProps {\r\n    stateTree: ItemBrowserState;\r\n}\r\n\r\ninterface DispatchProps {\r\n    dispatch: ItemBrowserStore[\"dispatch\"]\r\n}\r\n\r\n/**\r\n * `Filters` component connected to an `ItemBrowserStore`.\r\n */\r\nexport default connect<FilterPaneProps, ItemBrowserStore, StateProps, DispatchProps>(\r\n    (state) => ({ stateTree: state }),\r\n    (dispatch) => ({ dispatch })\r\n)(FilterPane);\r\n","import * as i18n from \"dojo/i18n!../../nls/resources\";\r\nimport * as Deferred from \"dojo/Deferred\";\r\nimport { ItemBrowserState } from \"../../index\";\r\nimport * as kernel from \"dojo/_base/kernel\";\r\n\r\nimport { fetchAllLivingAtlasInfo } from \"../../../_utils/index\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\nexport const LOADING_LIVING_ATLAS_INFO = \"LOADING_LIVING_ATLAS_INFO\";\r\nexport const UPDATE_LIVING_ATLAS_INFO = \"UPDATE_LIVING_ATLAS_INFO\";\r\nexport const UPDATE_LIVING_ATLAS_INFO_FAILED = \"FETCH_LIVING_ATLAS_INFO_FAILED\";\r\n\r\nexport const fetchLivingAtlasInfo = (self: Pojo) => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    let state = getState();\r\n\r\n    if (state.results.livingAtlas.status === \"loaded\") {\r\n        return (new Deferred).resolve();\r\n    } else if (state.results.livingAtlas.status === \"failed\") {\r\n        return (new Deferred).reject();\r\n    }\r\n\r\n    dispatch({ type: LOADING_LIVING_ATLAS_INFO });\r\n    \r\n    const { portal, request } = state.settings.utils;\r\n    const culture = portal.user && portal.user.culture ? portal.user.culture : kernel.locale;\r\n\r\n    return fetchAllLivingAtlasInfo(request, portal, self, culture).then(\r\n        (response: any) => {\r\n            dispatch({\r\n                type: UPDATE_LIVING_ATLAS_INFO,\r\n                payload: {\r\n                    ...response,\r\n                    schema: response.schema.map((set: any) => // Name of LA \"regions\" filter comes from i18n\r\n                        set.title === \"region\" ?\r\n                            { ...set, displayName: i18n.regions } :\r\n                            set\r\n                    )\r\n                }\r\n            });\r\n        },\r\n        handleLivingAtlasInfoError\r\n    );\r\n\r\n    function handleLivingAtlasInfoError(err: Error) {\r\n        console.error(err);\r\n        dispatch({ type: UPDATE_LIVING_ATLAS_INFO_FAILED });\r\n    }\r\n};\r\n","import { ItemBrowserState } from \"../../index\";\nimport { scrubItemInfo } from \"../../../_utils/index\";\nimport { Pojo } from \"../../../Component\";\n\nexport const START_CUSTOM_ACTION = \"START_CUSTOM_ACTION\";\nexport const END_CUSTOM_ACTION = \"END_CUSTOM_ACTION\";\n\ntype CustomAction = ItemBrowserState[\"settings\"][\"config\"][\"customActions\"][number];\n\nexport const customAction = (actionName: string, item: Pojo) => (dispatch: any, getState: () => ItemBrowserState) => {\n    const state = getState();\n    const action = state.settings.config.customActions.filter((customAction: CustomAction) => {\n        return customAction.name === actionName;\n    })[0];\n    if (action) {\n        if (action.asynchronous) {\n            dispatch({ type: START_CUSTOM_ACTION, payload: item });\n            action.onAction(scrubItemInfo(item)).then(() => {\n                dispatch({ type: END_CUSTOM_ACTION, payload: item });\n            }, () => {\n                dispatch({ type: END_CUSTOM_ACTION, payload: item });\n            });\n        } else {\n            action.onAction(scrubItemInfo(item));\n        }\n    }\n}","module.exports = __WEBPACK_EXTERNAL_MODULE__66__;","module.exports = __WEBPACK_EXTERNAL_MODULE__75__;","module.exports = __WEBPACK_EXTERNAL_MODULE__76__;","module.exports = __WEBPACK_EXTERNAL_MODULE__77__;","import * as Deferred from \"dojo/Deferred\";\r\nimport { ItemBrowserState } from \"../../index\";\r\nimport { fetchSelf, mixinOrgInfo } from \"../../../_utils/index\";\r\nimport * as kernel from \"dojo/_base/kernel\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\nexport const UPDATE_PORTAL_SELF = \"UPDATE_PORTAL_SELF\";\r\n\r\nexport const initialize = () => (dispatch: any, getState: () => ItemBrowserState) => {\r\n    const state = getState();\r\n    const { portal, request } = state.settings.utils;\r\n    const culture = portal.user && portal.user.culture ? portal.user.culture : kernel.locale;\r\n    \r\n    if (state.settings.utils.self) {\r\n        return (new Deferred).resolve(state.settings.utils.self);\r\n    }\r\n\r\n    return fetchSelf(request, portal, culture).then((self: Pojo) => {\r\n        const mixSelf = mixinOrgInfo(self);\r\n        dispatch({ type: UPDATE_PORTAL_SELF, payload: {\r\n            self: mixSelf,\r\n            config: state.settings.config\r\n        } });\r\n        return mixSelf;\r\n    });\r\n};\r\n","import * as Deferred from \"dojo/Deferred\";\r\nimport * as all from \"dojo/promise/all\";\r\nimport { curry, fetchOrgInfo, mixinOrgInfo, removeDups } from \"../../../_utils/index\";\r\nimport { getCurrentPortal } from \"../../_utils/getCurrentPortal\";\r\nimport { ItemBrowserState } from \"../../index\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\nexport const UPDATE_ORGANIZATIONS = \"UPDATE_ORGANIZATIONS\";\r\n\r\nexport const mixinOrganizationInfo = curry((state: ItemBrowserState, response: any) => {\r\n    const request = state.settings.utils.request;\r\n    const portal = getCurrentPortal(state);\r\n    const dfd = new Deferred();\r\n    \r\n    const orgRequests = response.data.results\r\n        .filter((item: Pojo) => !!item.orgId && !state.results.allOrganizations[item.orgId])\r\n        .map((item: Pojo) => item.orgId)\r\n        .filter(removeDups)\r\n        .map((orgId: string) => fetchOrgInfo(request, portal, orgId));\r\n    \r\n    all(orgRequests).then((orgResponses: any) => {\r\n        dfd.resolve({\r\n            ...response,\r\n            data: {\r\n                ...response.data,\r\n                organizations: orgResponses.reduce((result: Pojo, current: Pojo) => {\r\n                    return {\r\n                        ...result,\r\n                        [current.id]: mixinOrgInfo(current)\r\n                    };\r\n                }, {})\r\n            }\r\n        });\r\n    }, (err) => { dfd.reject(err) });\r\n\r\n    return dfd;\r\n});\r\n","export const CHANGE_SEARCH_STRING = \"CHANGE_SEARCH_STRING\";\r\n\r\nexport const changeSearchString = (searchString: string) => ({\r\n    type: CHANGE_SEARCH_STRING,\r\n    payload: searchString\r\n});\r\n","import { fetchFullItemDetails } from \"../../results/fetchFullItemDetails\";\r\nimport { Pojo } from \"../../../../Component\";\r\n\r\nexport const VIEW_ITEM_DETAILS = \"VIEW_ITEM_DETAILS\";\r\n\r\nexport const viewItemDetails = (item: Pojo) => (dispatch: any) => {\r\n    dispatch({\r\n        type: VIEW_ITEM_DETAILS,\r\n        payload: item\r\n    });\r\n    \r\n    dispatch(fetchFullItemDetails(item));\r\n};\r\n","export const SHOW_EMPTY_RESULTS = \"SHOW_EMPTY_RESULTS\";\r\nexport const CHANGE_RESULT_DISPLAY = \"CHANGE_RESULT_DISPLAY\";\r\n\r\nexport const showEmptyResults = () => ({ type: SHOW_EMPTY_RESULTS });","import {\r\n    appendAccessQ,\r\n    appendDateModifiedQ,\r\n    appendDateCreatedQ,\r\n    appendGroupQ,\r\n    appendItemTypeQ,\r\n    appendStatusQ,\r\n    appendTagQ,\r\n    appendTagsQ,\r\n    curry,\r\n    compose,\r\n    filterEmptyStrings,\r\n    isEmpty,\r\n    treeDfs,\r\n    genericDfs\r\n} from \"../../../../_utils/index\";\r\nimport { itemTypeMap } from \"../../../../_utils/index\";\r\nimport { ItemBrowserState } from \"../../../index\";\r\nimport { getCurrentPortal, isCustomSection, getCustomSection } from \"../../../_utils/index\";\r\nimport { CustomFilterTree } from \"../../../_reducers/settings/config\";\r\n\r\n/**\r\n * Generates q for search query based on the current state of the item browser\r\n * @param state current state of the item browser\r\n */\r\nexport function getQ(state: ItemBrowserState) {\r\n    return appendQs(state)([state.parameters.searchString.current]).join(\" \");\r\n}\r\n\r\n/**\r\n * Generates q for counts query based on current state of the item browser\r\n * @param state current state of the item browser\r\n */\r\nexport function getCountsQ(state: ItemBrowserState) {\r\n    return appendCountsQs(state)([state.parameters.searchString.current]).join(\" \");\r\n}\r\n\r\n/**\r\n * Generates q for tags query based on tagName and current state of the item browser\r\n * @param state current state of the item browser\r\n */\r\nexport function getTagsQ(state: ItemBrowserState, tagName: string) {\r\n    return appendTagsQs(state, tagName)([state.parameters.searchString.current]).join(\" \");\r\n}\r\n\r\n/**\r\n * Appends search qs based on the state of the item browser\r\n * @param state current state of the item browser\r\n */\r\nconst appendQs = (state: ItemBrowserState) => compose(\r\n    // Nested compose to preserve type safety across a big pipeline\r\n    compose(\r\n        filterEmptyStrings,\r\n        appendAdditionalQ(state),\r\n        appendCustomFilterQ(state),\r\n        appendGroupQ(state.parameters.filter.orgGroup),\r\n        appendStatusQ(state.parameters.filter.status, state.settings.utils.portal.user),\r\n        appendSectionQ(state)\r\n    ),\r\n    compose(\r\n        appendAccessQ(state.parameters.filter.shared),\r\n        appendDateCreatedQ(state.parameters.filter.dateCreated),\r\n        appendDateModifiedQ(state.parameters.filter.dateModified),\r\n        appendItemTypeQ(itemTypeMap, {\r\n            allowedItemTypes: state.settings.config.allowedItemTypes,\r\n            itemTypeFilter: state.parameters.filter.itemType,\r\n            specialItemQ: state.settings.config.specialItemQ\r\n        }),\r\n        appendTagsQ(state.parameters.filter.tags)\r\n    )\r\n);\r\n\r\n/**\r\n * Appends counts qs based on the state of the item browser\r\n * @param state current state of the item browser\r\n */\r\nconst appendCountsQs = (state: ItemBrowserState) => compose(\r\n    filterEmptyStrings,\r\n    appendAdditionalQ(state),\r\n    appendSectionQ(state),\r\n    appendItemTypeQ(itemTypeMap, {\r\n        allowedItemTypes: state.settings.config.allowedItemTypes,\r\n        specialItemQ: state.settings.config.specialItemQ\r\n    }),\r\n);\r\n\r\n/**\r\n * Appends Tags qs based on tag name and the current state of item browser\r\n * @param state current state of the item browser\r\n * @param tagName string for the tag to filter by \r\n */\r\nconst appendTagsQs = (state: ItemBrowserState, tagName: string) => compose(\r\n    filterEmptyStrings,\r\n    appendAdditionalQ(state),\r\n    appendSectionQ(state),\r\n    appendItemTypeQ(itemTypeMap, {\r\n        allowedItemTypes: state.settings.config.allowedItemTypes,\r\n        specialItemQ: state.settings.config.specialItemQ\r\n    }),\r\n    appendTagQ(tagName)\r\n);\r\n\r\n/**\r\n * Returns new q including the section query based on the state of the item browser\r\n * @param state current state of the item browser\r\n * @param q previous q\r\n */\r\nconst appendSectionQ = curry((state: ItemBrowserState, q: string[]): string[] => {\r\n    const section = state.parameters.section;\r\n    const filter = state.parameters.filter;\r\n    const config = state.settings.config;\r\n    const portal = getCurrentPortal(state);\r\n\r\n    switch (state.parameters.section) {\r\n        case \"myContent\":\r\n            if (portal.user) {\r\n                if (portal.user && filter.folder) {\r\n                    return [ ...q, `(owner:${portal.user.username}) (ownerfolder:${filter.folder.id})` ];\r\n                }\r\n                return [ ...q, `(owner:${portal.user.username})` ];\r\n            }\r\n            return q;\r\n        case \"myFavorites\":\r\n            if (portal.user) {\r\n                return [ ...q, `(group:${portal.user[\"favGroupId\"]})` ];\r\n            }\r\n            return q;\r\n        case \"myGroups\":\r\n            if (state.results.user.groups) {\r\n                if (state.parameters.filter.group) {\r\n                    return [ ...q, `(group:${state.parameters.filter.group.id})` ];\r\n                }\r\n                const groupIds = state.results.user.groups.map((group) => group.id);\r\n                return [ ...q, `(group:${groupIds.join(\" OR group:\")})` ];\r\n            }\r\n            return q;\r\n        case \"myOrganization\":\r\n            return [ ...q, `(orgid:${portal.id})` ];\r\n        case \"subscription\":\r\n            return [ ...q, `(${\r\n                state.results.user.provisionedContent\r\n                    .map((id) => `id:${id}`)\r\n                    .join(\" OR \")\r\n            })` ];\r\n        case \"all\":\r\n            return q;\r\n        default:\r\n            const matchingSection = config.customSections.filter(\r\n                (customSection: { name: string }) => state.parameters.section === customSection.name\r\n            )[0];\r\n            if (matchingSection) {\r\n                return [ ...q, matchingSection.baseQuery];\r\n            }\r\n            return q;\r\n    }\r\n});\r\n\r\n/**\r\n * Returns new q based on query parameters injected by the consuming application\r\n * @param state current state of the item browser\r\n * @param q previous q\r\n */\r\nconst appendAdditionalQ = curry((state: ItemBrowserState, q: string[]): string[] => {\r\n    const addQueryParameters = state.settings.config.addQueryParameters;\r\n    if (!!addQueryParameters && typeof addQueryParameters === \"function\") {\r\n        return [ ...q, addQueryParameters(state)];\r\n    }\r\n    return q;\r\n});\r\n\r\n/**\r\n * Append custom filter q\r\n */\r\nconst appendCustomFilterQ = curry((state: ItemBrowserState, q: string[]): string[] => {\r\n    const customSection = getCustomSection(state.settings.config.customSections, state.parameters.section);\r\n    if (!!customSection) {\r\n        if (!isEmpty(state.parameters.filter.customFilter)) {\r\n            const customFilterQ = Object.keys(state.parameters.filter.customFilter)\r\n                // Remove undefined\r\n                .filter((key: string) => !!state.parameters.filter.customFilter[key])\r\n                // Determine Q for selected set of custom filters\r\n                .reduce(\r\n                    (result: string[], current: string) => {\r\n                        const index = parseInt(current, 10);\r\n                        const { value } = state.parameters.filter.customFilter[index];\r\n                        if (customSection.filters && customSection.filters[index]) {\r\n                            const filter = customSection.filters[index] as CustomFilterTree;\r\n                            const params = genericDfs<CustomFilterTree, \"value\">(\r\n                                \"children\",\r\n                                \"value\",\r\n                                filter,\r\n                                value\r\n                            );\r\n                            if (params) {\r\n                                return [ ...result, `(${params.q})` ];\r\n                            }\r\n                        }\r\n                        return result;\r\n                    },\r\n                    []\r\n                // Filters are always AND\r\n                ).join(\" AND \");\r\n            return [ ...q, `${customFilterQ}` ];\r\n        }\r\n    }\r\n    return q;\r\n});\r\n","import { combineReducers } from \"../../Component\";\r\n\r\nimport settings, { SettingsState, initialState as settingsInitial } from \"./settings/index\";\r\nimport parameters, { ParametersState, initialState as parametersInitial } from \"./parameters/index\";\r\nimport results, { ResultsState, initialState as resultsInitial } from \"./results/index\";\r\nimport ui, { UIState, initialState as uiInitial } from \"./ui/index\";\r\nexport const defaultConfig: SettingsState[\"config\"] = settingsInitial.config;\r\n\r\nexport interface ItemBrowserState {\r\n    settings: SettingsState;\r\n    parameters: ParametersState;\r\n    results: ResultsState;\r\n    ui: UIState;\r\n}\r\n\r\nexport const initialState: ItemBrowserState = {\r\n    parameters: parametersInitial,\r\n    settings: settingsInitial,\r\n    results: resultsInitial,\r\n    ui: uiInitial\r\n};\r\n\r\nexport const reducers = combineReducers<ItemBrowserState>({\r\n    settings,\r\n    parameters,\r\n    results,\r\n    ui\r\n});\r\n","export * from \"./selectedItems\";\r\nexport * from \"./query\";\r\nexport * from \"./livingAtlas\";\r\nexport * from \"./user\";\r\nexport * from \"./organization\";\r\nexport * from \"./customAction\";\r\nexport * from \"./fetchFullItemDetails\";\r\nexport * from \"./initial\";\r\nexport * from \"./customSections\";\r\nexport * from \"./tagsFilter\";\r\n","import { getOrgBaseUrl } from \"./baseUrl\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\n/**\r\n * Returns the thumbURI for an org based on its raw, unadulturated JSON\r\n * @param organization - raw self JSON for an org, fresh from the sharing API\r\n */\r\nexport const getOrgThumbnail = (organization: Pojo) => {\r\n    const baseUrl = getOrgBaseUrl(organization);\r\n    if (!!organization.thumbnail) {\r\n        return `${baseUrl}/sharing/rest/portals/${organization.id}/resources/${organization.thumbnail}`;\r\n    }\r\n    return `${baseUrl}/home/images/group-no-image.png`;\r\n};\r\n\r\n/**\r\n * Returns new organization JSON containing the thumbURI which applies to the org\r\n * @param organization - the org JSON to mix thumbURI into\r\n */\r\nexport const mixinOrgThumbnail = (organization: Pojo) => ({\r\n    ...organization,\r\n    thumbURI: getOrgThumbnail(organization)\r\n});\r\n","import { getOrgBaseUrl } from \"./baseUrl\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\n/**\r\n * Returns the url for an org based on its raw, unadulturated JSON\r\n * @param organization - raw self JSON for an org, fresh from the sharing API\r\n */\r\nexport const getOrgUrl = (organization: Pojo) =>\r\n    `${getOrgBaseUrl(organization)}/home/index.html`;\r\n\r\n/**\r\n * Returns new organization JSON containing the orgUrl which applies to the org\r\n * @param organization - the org JSON to mix orgUrl into\r\n */\r\nexport const mixinOrgUrl = (organization: Pojo) => ({\r\n    ...organization,\r\n    orgUrl: getOrgUrl(organization)\r\n});\r\n","import { curry } from \"../../functional/index\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\n/**\r\n * Returns the URI for a user's thumbnail based on the associated portal and the item data\r\n * @param portal - 4x or shimmed portal that the item is associated with\r\n * @param user - the user to determine the thumbnail URI for\r\n */\r\nexport const getUserThumbnail = (portal: Pojo, user: Pojo) => {\r\n    if (user.thumbnail) {\r\n        return `${portal.restUrl}/community/users/${user.username}/info/${user.thumbnail}${portal.credential ? `?token=${portal.credential.token}` : \"\"}`;\r\n    }\r\n    return undefined;\r\n};\r\n\r\n/**\r\n * (Curried, arity 2) Returns new user JSON containing the thumbURI for the user\r\n * 1. 4x or shimmed portal that the user is associated with\r\n * 2. the user JSON to mix thumbURI into\r\n */\r\nexport const mixinUserThumbnail = curry((portal: Pojo, user: Pojo) => ({\r\n    ...user,\r\n    thumbURI: getUserThumbnail(portal, user)\r\n}));\r\n    ","module.exports = __WEBPACK_EXTERNAL_MODULE__102__;","import { ItemBrowserState } from \"../../_reducers/index\";\r\nimport { search } from \"../results/index\";\r\n\r\nexport const UPDATE_EXTENT = \"UPDATE_EXTENT\";\r\nexport const UNTHROTTLE_EXTENT_UPDATE = \"UNTHROTTLE_EXTENT\";\r\n\r\nexport const updateExtent = (newExtent: ItemBrowserState[\"parameters\"][\"extent\"][\"area\"]) =>\r\n    (dispatch: any, getState: () => ItemBrowserState) => {\r\n        const state = getState();\r\n        if (!state.parameters.extent.throttling) {\r\n            dispatch({\r\n                type: UPDATE_EXTENT,\r\n                payload: newExtent\r\n            });\r\n    \r\n            if (state.parameters.filter.searchMapArea) {\r\n                dispatch(search());\r\n            }\r\n\r\n            setTimeout(() => {\r\n                dispatch({ type: UNTHROTTLE_EXTENT_UPDATE });\r\n            }, state.settings.config.mapAreaThrottleTime);\r\n        }\r\n    };","import { Action } from \"../../../../Component\";\r\n\r\nexport const VIEW_FILTERS = \"VIEW_FILTERS\";\r\n\r\nexport const viewFilters = (): Action => ({\r\n    type: VIEW_FILTERS\r\n});\r\n","import { Action } from \"../../../../Component\";\r\n\r\nexport const VIEW_SORT = \"VIEW_SORT\";\r\n\r\nexport const viewSort = (): Action => ({\r\n    type: VIEW_SORT\r\n});\r\n","import * as i18n from \"dojo/i18n!../nls/resources\";\nimport { Component, H, connect, ComponentProps } from \"../../Component\";\nimport { ItemBrowserState } from \"../index\";\nimport {\n    CLEAR_ALL_FILTERS,\n    updateItemTypeFilter,\n    updateModifiedFilter,\n    updateCreatedFilter,\n    updateSharedFilter,\n    updateFolderFilter,\n    updateGroupFilter,\n    updateStatusFilter,\n    updateMapAreaFilter,\n    updateSearchOrgFilter,\n    updateOrgCategoriesFilter,\n    updateLivingAtlasCategoriesFilter,\n    updateLivingAtlasRegionFilter,\n    updateGroupCategoriesFilter,\n    updateOrgGroupFilter,\n    updateTagsFilter,\n    search,\n    updateCustomFilter\n} from \"../_actions/index\";\n\nimport FilterController, { FilterControllerProps } from \"../../Dropdowns/FilterController/index\";\nimport { getCustomSection } from \"../_utils\";\nimport { isEmpty } from \"../../_utils\";\nimport { CustomFilterTree } from \"../_reducers/settings/config\";\nimport { ItemBrowserStore } from \"../../wrappers/ItemBrowser\";\n\nconst generalUpdateActions = {\n    itemType: updateItemTypeFilter(),\n    modified: updateModifiedFilter(),\n    created: updateCreatedFilter(),\n    shared: updateSharedFilter(),\n    folder: updateFolderFilter(),\n    group: updateGroupFilter(),\n    status: updateStatusFilter(),\n    orgGroup: updateOrgGroupFilter()\n};\n\nexport interface ActiveFilterProps extends ComponentProps {\n    /**\n     * Array of informational static filters to show in the UI.\n     * @type {array}\n     */\n    staticFilters?: string[];\n\n    /**\n     * Display mode of the filters. Options are `\"light\"` or `\"dark\"`.\n     * @type {string}\n     */\n    theme: \"light\" | \"dark\";\n\n    /**\n     * Current state tree of the `ItemBrowser`.\n     * @type {object}\n     */\n    stateTree: ItemBrowserState; // bad\n\n    /**\n     * Dispatch function from the `ItemBrowser` store.\n     * @type {function}\n     */\n    dispatch: ItemBrowserStore[\"dispatch\"]; // bad\n}\n\n/**\n * The active filters section of the `ItemBrowser`.\n */\nexport class ActiveFilters extends Component<ActiveFilterProps> {\n    constructor(props: ActiveFilterProps) {\n        super(props);\n\n        this.handleRemoveMapAreaFilter = this.handleRemoveMapAreaFilter.bind(this);\n        this.handleRemoveSearchOrgFilter = this.handleRemoveSearchOrgFilter.bind(this);\n        this.handleRemoveGeneralFilter = this.handleRemoveGeneralFilter.bind(this);\n        this.handleRemoveOrgCategoriesFilter = this.handleRemoveOrgCategoriesFilter.bind(this);\n        this.handleRemoveLACategoriesFilter = this.handleRemoveLACategoriesFilter.bind(this);\n        this.handleRemoveLARegionFilter = this.handleRemoveLARegionFilter.bind(this);\n        this.handleRemoveGroupCategoriesFilter = this.handleRemoveGroupCategoriesFilter.bind(this);\n        this.handleClearAll = this.handleClearAll.bind(this);\n        this.handleRemoveTagsFilter = this.handleRemoveTagsFilter.bind(this);\n        this.handleRemoveCustomFilter = this.handleRemoveCustomFilter.bind(this);\n    }\n\n    public render(tsx: H) {\n        const filter = this.props.stateTree.parameters.filter;\n        const activeFilters: FilterControllerProps[\"filters\"] = [];\n\n        if (\n            !!filter.searchOrg &&\n            this.props.stateTree.parameters.section === \"all\" &&\n            this.props.stateTree.settings.utils.portal.user &&\n            this.props.stateTree.settings.utils.portal.user[\"credential\"] &&\n            this.props.stateTree.settings.utils.portal.name\n        ) {\n            activeFilters.push({\n                filterId: \"searchOrg\",\n                onRemove: this.handleRemoveSearchOrgFilter,\n                text: `Organization: ${this.props.stateTree.settings.utils.portal.name}`\n            });\n        }\n\n        if (!!filter.searchMapArea) {\n            activeFilters.push({\n                filterId: \"searchMapArea\",\n                onRemove: this.handleRemoveMapAreaFilter,\n                text: i18n.filterChips.mapArea\n            });\n        }\n\n        if (!!filter.itemType) {\n            activeFilters.push({\n                filterId: \"itemType\",\n                onRemove: this.handleRemoveGeneralFilter,\n                text: `${i18n.filterChips.type}: ${filter.itemType.text}`\n            });\n        }\n\n        if (!!filter.dateModified) {\n            activeFilters.push({\n                filterId: \"modified\",\n                onRemove: this.handleRemoveGeneralFilter,\n                text: `${i18n.filterChips.dateModified}: ${filter.dateModified.label}`\n            });\n        }\n\n        if (!!filter.dateCreated) {\n            activeFilters.push({\n                filterId: \"created\",\n                onRemove: this.handleRemoveGeneralFilter,\n                text: `${i18n.filterChips.dateCreated}: ${filter.dateCreated.label}`\n            });\n        }\n\n        if (!!filter.shared) {\n            activeFilters.push({\n                filterId: \"shared\",\n                onRemove: this.handleRemoveGeneralFilter,\n                text: `${i18n.filterChips.access}: ${filter.shared.text}`\n            });\n        }\n\n        if (!!filter.group && this.props.stateTree.parameters.section === \"myGroups\") {\n            activeFilters.push({\n                filterId: \"group\",\n                onRemove: this.handleRemoveGeneralFilter,\n                text: `${i18n.filterChips.group}: ${filter.group.title}`\n            });\n        } else if (!!filter.orgGroup && this.props.stateTree.parameters.section === \"myOrganization\") {\n            activeFilters.push({\n                filterId: \"orgGroup\",\n                onRemove: this.handleRemoveGeneralFilter,\n                text: `${i18n.filterChips.group}: ${filter.orgGroup.title}`\n            });\n        }\n\n        if (!!filter.folder && this.props.stateTree.parameters.section === \"myContent\") {\n            activeFilters.push({\n                filterId: \"folder\",\n                onRemove: this.handleRemoveGeneralFilter,\n                text: `${i18n.filterChips.folder}: ${filter.folder.title}`\n            });\n        }\n\n        if (!!filter.status) {\n            activeFilters.push({\n                filterId: \"status\",\n                onRemove: this.handleRemoveGeneralFilter,\n                text: `${i18n.filterChips.status}: ${filter.status.text}`\n            });\n        }\n\n        if (!!filter.orgCategories) {\n            const catFilter = filter.orgCategories;\n            activeFilters.push({\n                filterId: catFilter.value,\n                onRemove: this.handleRemoveOrgCategoriesFilter,\n                text: `${i18n.filterChips.category}: ${catFilter.text}`\n            });\n        }\n\n        if (!!filter.livingAtlasCategories) {\n            const catFilter = filter.livingAtlasCategories;\n            activeFilters.push({\n                filterId: catFilter.value,\n                onRemove: this.handleRemoveLACategoriesFilter,\n                text: `${i18n.filterChips.category}: ${catFilter.text}`\n            });\n        }\n\n        if (!!filter.groupCategories) {\n            const catFilter = filter.groupCategories;\n            activeFilters.push({\n                filterId: catFilter.value,\n                onRemove: this.handleRemoveGroupCategoriesFilter,\n                text: `${i18n.filterChips.category}: ${catFilter.text}`\n            });\n        }\n\n        if (!!filter.livingAtlasRegion) {\n            const catFilter = filter.livingAtlasRegion;\n            activeFilters.push({\n                filterId: catFilter.value,\n                onRemove: this.handleRemoveLARegionFilter,\n                text: `${i18n.filterChips.region}: ${catFilter.text}`\n            });\n        }\n\n        if (!!filter.tags) {\n            const tagsFilter = filter.tags;\n            Object.keys(tagsFilter).forEach((key: string) => {\n                activeFilters.push({\n                    filterId: key,\n                    onRemove: this.handleRemoveTagsFilter,\n                    text: `${i18n.filterChips.tagged}: ${key}`\n                });\n            });\n        }\n\n        const customSection = getCustomSection(\n            this.props.stateTree.settings.config.customSections,\n            this.props.stateTree.parameters.section\n        );\n        if (!!customSection && !isEmpty(filter.customFilter)) {\n            Object.keys(filter.customFilter)\n                .filter((key) => !!filter.customFilter[key])\n                .forEach((key) => {\n                    const index = parseInt(key, 10);\n                    if (customSection.filters && customSection.filters[index]) {\n                        const customFilter = customSection.filters[index] as CustomFilterTree;\n                        activeFilters.push({\n                            filterId: `${index}`,\n                            onRemove: this.handleRemoveCustomFilter,\n                            text: `${customFilter.displayName}: ${filter.customFilter[key].text}`\n                        });\n                    }\n                });\n        }\n\n        if (activeFilters.length > 0) {\n            return (\n                <div key=\"active-filter-area\" class=\"ib__active-filters\">\n                    <FilterController\n                        key=\"item-browser-filter-controller\"\n                        filters={activeFilters.sort((a: any, b: any) => a.text.localeCompare(b.text))}\n                        onClear={this.handleClearAll}\n                        mode={this.props.theme === \"light\" ? \"full-width\" : \"expanding\"}\n                        startOpen={this.props.theme !== \"light\"}\n                        theme={this.props.theme}\n                    />\n                </div>\n            );\n        }\n\n        return;\n    }\n\n    private handleRemoveCustomFilter(e: any) {\n        this.props.dispatch(updateCustomFilter(parseInt(e.target.value, 10)));\n        this.props.dispatch(search());\n    }\n\n    private handleRemoveGeneralFilter(e: any) {\n        this.props.dispatch(generalUpdateActions[e.target.value]);\n        this.props.dispatch(search(e.target.value === \"folder\"));\n    }\n\n    private handleRemoveMapAreaFilter(e: any) {\n        this.props.dispatch(updateMapAreaFilter(false));\n        this.props.dispatch(search());\n    }\n\n    private handleRemoveSearchOrgFilter(e: any) {\n        this.props.dispatch(updateSearchOrgFilter(false));\n        this.props.dispatch(search());\n    }\n\n    private handleClearAll() {\n        const hasFolderFilter = !!this.props.stateTree.parameters.filter.folder;\n        this.props.dispatch({ type: CLEAR_ALL_FILTERS });\n        this.props.dispatch(search(hasFolderFilter));\n    }\n\n    private handleRemoveOrgCategoriesFilter(e: any) {\n        this.props.dispatch(updateOrgCategoriesFilter());\n        this.props.dispatch(search());\n    }\n\n    private handleRemoveLACategoriesFilter(e: any) {\n        this.props.dispatch(updateLivingAtlasCategoriesFilter());\n        this.props.dispatch(search());\n    }\n\n    private handleRemoveGroupCategoriesFilter(e: any) {\n        this.props.dispatch(updateGroupCategoriesFilter());\n        this.props.dispatch(search());\n    }\n\n    private handleRemoveLARegionFilter(e: any) {\n        this.props.dispatch(updateLivingAtlasRegionFilter());\n        this.props.dispatch(search());\n    }\n\n    private handleRemoveTagsFilter(e: any) {\n        const tags = this.props.stateTree.parameters.filter.tags;\n        if (tags && !!tags[e.target.value]) {\n            const newTags = { ...tags };\n            delete newTags[e.target.value];\n            if (Object.keys(newTags).length > 0) {\n                this.props.dispatch(updateTagsFilter(newTags));\n            } else {\n                this.props.dispatch(updateTagsFilter());\n            }\n            this.props.dispatch(search());\n        }\n    }\n}\n\ninterface StateProps {\n    stateTree: ItemBrowserState;\n}\n\ninterface DispatchProps {\n    dispatch: ItemBrowserStore[\"dispatch\"];\n}\n\n/**\n * The `ActiveFilters` component connected to an `ItemBrowserStore`.\n */\nexport default connect<ActiveFilterProps, ItemBrowserStore, StateProps, DispatchProps>(\n    (state) => ({ stateTree: state }),\n    (dispatch) => ({ dispatch })\n)(ActiveFilters);\n","import { combineReducers } from \"../../../Component\";\r\n\r\nimport config, { ConfigState, initialState as configInitial } from \"./config\";\r\nimport utils, { UtilsState, initialState as utilsInitial } from \"./utils\";\r\n\r\nexport interface SettingsState {\r\n    config: ConfigState;\r\n    utils: UtilsState;\r\n}\r\nexport const initialState = {\r\n    config: configInitial,\r\n    utils: utilsInitial\r\n};\r\n\r\nexport default combineReducers<SettingsState>({\r\n    config,\r\n    utils\r\n});\r\n","import * as i18n from \"dojo/i18n!../../nls/resources\";\r\nimport { ItemBrowserState } from \"../index\";\r\nimport { UPDATE_CUSTOM_SECTION_GROUPS } from \"../../_actions\";\r\nimport { removeDupsOnKey, Tree, allItemTypes, ItemType, ItemTypeFilter } from \"../../../_utils\";\r\nimport { sectionHasCategoryFilter, getCustomCategoryFilters } from \"../../_utils\";\r\nimport { Pojo, Action } from \"../../../Component\";\r\n\r\nexport type BaseSection = \"all\" | \"myContent\" | \"myFavorites\" | \"myGroups\" | \"myOrganization\" | \"livingAtlas\" | \"subscription\";\r\nexport type BaseFilters = \"itemType\" | \"modified\" | \"created\" | \"shared\" | \"status\" | \"tags\";\r\n\r\n/**\r\n * A tree of options to be used in a custom filter\r\n */\r\nexport interface CustomFilterTree extends Tree {\r\n    /**\r\n     * Display name for the option to be used in the UI.\r\n     * @type {string}\r\n     */\r\n    displayName: string;\r\n    /**\r\n     * Query string appended to the search query when this option is selected.\r\n     * - When an option is selected, the `q` of its parent options is not automatically mixed in.\r\n     * If a child option should also apply `q` from its parents, that needs to be done here.\r\n     * @type {string}\r\n     */\r\n    q: string;\r\n    /**\r\n     * A unique value for the option. This value should be unique from any other node in the tree.\r\n     * @type {string}\r\n     */\r\n    value: string;\r\n    /**\r\n     * Optional child options to display under this option.\r\n     * @type {array}\r\n     * @default undefined\r\n     */\r\n    children?: CustomFilterTree[];\r\n}\r\n\r\n/**\r\n * A category schema tree as returned from the REST API\r\n */\r\nexport interface CategorySchema {\r\n    /**\r\n     * The title of this category. Used as the display name in the UI if `displayName` is not defined.\r\n     * @type {string}\r\n     */\r\n    title: string;\r\n\r\n    /**\r\n     * Child categories of this category.\r\n     * @type {array}\r\n     */\r\n    categories: CategorySchema[];\r\n\r\n    /**\r\n     * Optional display name for this category.\r\n     * @type {string}\r\n     * @default undefined\r\n     */\r\n    displayName?: string;\r\n}\r\n\r\n/**\r\n * A filter matching the shape of the defined content categories from a specified org or group\r\n */\r\nexport interface CategoryFilter {\r\n    /**\r\n     * The id of the group or org containing the category schema.\r\n     * @type {string}\r\n     */\r\n    id: string;\r\n\r\n    /**\r\n     * The name of the filter to display in the UI.\r\n     * @type {string}\r\n     */\r\n    name: string;\r\n\r\n    /**\r\n     * The type of category schema, which can be `org` or `group`.\r\n     * If this type is set to `group`, the item browser will retrieve the category\r\n     * schema for the specified group, and use its group-specific search endpoint instead of the standard search\r\n     * endpoint for the portal. This means that content not contained within the specified group will *never* be\r\n     * returned in the results.\r\n     * @type {string}\r\n     */\r\n    type: \"org\" | \"group\";\r\n\r\n    /**\r\n     * If set to a group search query, the item browser will determine the id for the group based on the first\r\n     * result matching the query.\r\n     * - This option is only functional if `type` is set to `group`.\r\n     * - The `id` option specified is irrelevant if this options is enabled.\r\n     * @type {string}\r\n     * @default undefined\r\n     */\r\n    fetchGroupIdByQuery?: string;\r\n\r\n    /**\r\n     * Optional path to navigate to from the root of the category schema.\r\n     * - Category schemas are stored as trees on the backend. Category schemas set through the home app UI are\r\n     * stored in the first child node of the root, and are named `categories`. For this type of schema you would set\r\n     * this option equal to `[\"categories\"]`. If you wish to use a different node, set it's path from the root here. For\r\n     * example `[\"foo\", \"bar\", \"baz\"]` would show categories from a great-grandchild node named `baz` with\r\n     * parent `bar` having a parent `foo` immediately below the root node.\r\n     * @type {array}\r\n     * @default undefined\r\n     */\r\n    path?: string[];\r\n\r\n    /**\r\n     * Specify a static schema using the same format as schemas returned from the REST API.\r\n     * If a static schema is specified, the user-defined schema for the group/org WILL NOT be retrieved.\r\n     * - Titles in this schema must match the user-defined schema stored server-side\r\n     * in order for filter to function properly.\r\n     * - The input format for this option is:\r\n     * `type Schemae: Array<{ title: string; categories: schemae; displayName?: string }>`\r\n     * @type {array}\r\n     * @default undefined\r\n     */\r\n    staticSchema?: CategorySchema[];\r\n}\r\n\r\n/**\r\n * A custom section to display items from\r\n */\r\nexport interface CustomSection {\r\n        /**\r\n         * Unique name for the custom section.\r\n         * This is the displayed name, and must distinguish the section from any other sections.\r\n         * @type {string}\r\n         */\r\n        name: string;\r\n\r\n        /**\r\n         * Base query for the custom section. Use this to narrow the query to a particular scope.\r\n         * @type {string}\r\n         */\r\n        baseQuery: string;\r\n\r\n        /**\r\n         * Filters for the custom section.\r\n         * Custom filters can be of type\r\n         * [CategoryFilter](https://devtopia.esri.com/WebGIS/arcgis-components/wiki/ItemBrowser-Documentation),\r\n         * [CustomFilterTree](https://devtopia.esri.com/WebGIS/arcgis-components/wiki/ItemBrowser-Documentation),\r\n         * or one of the following base filters:\r\n         * - `itemType`, `modified`, `created`, `shared`, `status`, `tags`\r\n         * @type {array}\r\n         * @default [\"itemType\",\"modified\",\"shared\"]\r\n         */\r\n        filters?: (CategoryFilter | CustomFilterTree | BaseFilters)[];\r\n\r\n        /**\r\n         * If set to true, attempts to put the custom section before the default sections.\r\n         * @type {boolean}\r\n         * @default false\r\n         */\r\n        addToFront?: boolean;\r\n\r\n        /**\r\n         * Set to jsapi portal instance if this section is intended to query a separate portal.\r\n         * @type {object}\r\n         * @default undefined\r\n         */\r\n        portal?: any;\r\n}\r\n\r\n/**\r\n * A custom action to perform from applicable items\r\n */\r\nexport interface CustomAction {\r\n        /**\r\n         * Predicate function determining whether or not this action is allowed (will be shown) for the item.\r\n         * - e.g. `(item) => item.type === \"Map Package\"`\r\n         * @type {function}\r\n         */\r\n        allowed: (item: Pojo) => boolean;\r\n        /**\r\n         * If set to true, item will be in a loading state until a promise returned to callback is resolved or rejected.\r\n         * - If this option is set to true, `onAction` must return a dojo deferred.\r\n         * @type {boolean}\r\n         */\r\n        asynchronous: boolean;\r\n        /**\r\n         * Callback executed when this action is performed on an item.\r\n         * - If `asynchronous` is set to true, this must return a dojo deferred.\r\n         * @type {function}\r\n         * @default no-op\r\n         */\r\n        onAction: (item: Pojo) => any;\r\n        /**\r\n         * Unique name for the custom action.\r\n         * @type {string}\r\n         */\r\n        name: string;\r\n        /**\r\n         * Inline SVG to use as icon for this action.\r\n         * - Note: Markup supplied here is injected directly into the DOM. Exposing control of this option to\r\n         * the end user is an XSS vulnerability, so don't do it :)\r\n         * @type {string}\r\n         * @default undefined\r\n         */\r\n        icon?: string;\r\n}\r\n\r\nexport interface ConfigState {\r\n    /**\r\n     * String used as the title of the dialog\r\n     * Note: This is not visible in the default side panel view of the item browser unless the\r\n     * `replaceSectionDropdownWithTitle` option is enabled. It is visible if `layoutMode` is set to `fullscreen`\r\n     * @type {string}\r\n     * @default \"Item Browser\"\r\n     */\r\n    dialogTitle: string;\r\n\r\n    /**\r\n     * Disables/hides the main selection action.\r\n     * Note: Not functional in fullscreen mode.\r\n     * @type {boolean}\r\n     * @default false\r\n     */\r\n    disableMainAction: boolean;\r\n\r\n    /**\r\n     * String used as the title of the main select action.\r\n     * @type {string}\r\n     * @default \"Add to Map\"\r\n     */\r\n    mainActionTitle: string;\r\n\r\n    /**\r\n     * String used as the title of the inverse of the main select action.\r\n     * This is used when the item is already in the selected state.\r\n     * @type {string}\r\n     * @default \"Remove from Map\"\r\n     */\r\n    mainInverseActionTitle: string;\r\n\r\n    /**\r\n     * Function called when an item or set of items is selected in the item browser.\r\n     * Note: If `asynchronousItemSelect` is enabled, this must return a dojo deferred.\r\n     * @type {function}\r\n     * @default no-op\r\n     */\r\n    onSelect: (selectedItems: Pojo[]) => any;\r\n\r\n    /**\r\n     * Function called when an item or set of items is deselected in the item browser.\r\n     * @type {function}\r\n     * @default no-op\r\n     */\r\n    onDeselect: (deselectedItems: Pojo[]) => any;\r\n\r\n    /** \r\n     * Array of strings dictating what sections are available in the item browser.\r\n     * Options are:\r\n     * - `all`: All content on the provided portal\r\n     * - `myContent`: The current user's content\r\n     * - `myFavorites`: Content in the current user's favorites group\r\n     * - `myGroups`: Content in the current user's groups\r\n     * - `myOrganization`: Content in the current user's organization\r\n     * - `livingAtlas`: Content in the Living Atlas group\r\n     * - `subscription`: Subscription content available to the current user\r\n     * @type {array}\r\n     * @default [\"all\",\"myContent\",\"myFavorited\",\"myGroups\",\"myOrganization\",\"livingAtlas\"]\r\n     */\r\n    baseSections: BaseSection[];\r\n\r\n    /**\r\n     * Controls the layout mode.\r\n     * - `fullscreen`: the dialog will be shown in fullscreen\r\n     * - `confined`: the dialog will be confined to a container\r\n     * - `adjustable`: this dialog will be confined to a container,\r\n     * but can be expanded to fullscreen by the user (`adjustable` setting is currently non-functional\r\n     * as it has no use-case)\r\n     * @type {string}\r\n     * @default \"confined\"\r\n     */\r\n    layoutMode: \"fullscreen\" | \"confined\" | \"adjustable\";\r\n\r\n    /**\r\n     * Controls the display of the details pane (item details, sort, filters) in `confined` mode.\r\n     * - `flyout`: the details pane will be shown to the right side of the dialog (left side in Arabic, Hebrew, etc)\r\n     * - `flyover`: the details pane will be shown on top of the dialog\r\n     * @type {string}\r\n     * @default \"flyout\"\r\n     */\r\n    detailsPaneType: \"flyout\" | \"flyover\";\r\n\r\n    /**\r\n     * Boolean value controlling the mode of item selection.\r\n     * If set to true, user will only be able to select/submit 1 item. This means that at most 1 item\r\n     * can be in the selected state at any time.\r\n     * @type {boolean}\r\n     * @default false\r\n     */\r\n    singleItemSelect: boolean;\r\n\r\n    /**\r\n     * Boolean value controlling whether or not the option to \"show content within map area\" should be available.\r\n     * If disabled, the map area filter will never be shown.\r\n     * @type {boolean}\r\n     * @default {true}\r\n     */\r\n    enableMapAreaFilter: boolean;\r\n\r\n    /**\r\n     * Time in milliseconds to throttle updates to the map area filter.\r\n     * @type {number}\r\n     * @default 2500\r\n     */\r\n    mapAreaThrottleTime: number;\r\n\r\n    /**\r\n     * Controls whether the user can select all items from a particular query. This setting is currently non-functional\r\n     * as it has no use-case.\r\n     * @type {boolean}\r\n     * @default false\r\n     */\r\n    enableSelectAllItemsFromQuery: boolean;\r\n\r\n    /**\r\n     * Boolean value controlling whether a submission button should be displayed under the item list. This setting is\r\n     * currently non-functional as there is no defined UI spec and it has no use-case.\r\n     * @type {boolean}\r\n     * @default true\r\n     */\r\n    showSubmitButton: boolean;\r\n\r\n    /**\r\n     * Text content of the submit button. This settings is currently non-functional as there is no defined UI spec\r\n     * and it has no use-case\r\n     * @type {string}\r\n     * @default \"Submit Selection\"\r\n     */\r\n    submitButtonText: string;\r\n\r\n    /**\r\n     * Boolean value controlling whether the selection should be cleared between searches. If enabled,\r\n     * performing a new search will clear any items from the selected state.\r\n     * @type {boolean}\r\n     * @default false\r\n     */\r\n    clearSelectionBetweenSearches: boolean;\r\n\r\n    /**\r\n     * Batch size for each search query.\r\n     * @type {number}\r\n     * @default 10\r\n     */\r\n    resultsPerQuery: number;\r\n\r\n    /**\r\n     * Array of strings representing permitted item types for the search.\r\n     * - Note: Filters will always operate within the constraints defined by this option.\r\n     * You must set the `allowedItemTypes` option in a way that makes sense for your application.\r\n     * For item types see http://resources.arcgis.com/en/help/arcgis-rest-api/index.html#//02r3000000ms000000\r\n     * @type {array}\r\n     * @default all\r\n     */\r\n    allowedItemTypes: ItemType[];\r\n\r\n    /**\r\n     * Array of strings representing the item type filters that should be available in the UI.\r\n     * - Options: `maps`, `webMaps`, `mapFiles`, `layers`, `featureLayers`, `tileLayers`, `mapImageLayers`,\r\n     * `imageryLayers`, `sceneLayers`, `tables`, `layerFiles`, `scenes`, `apps`, `webApps`, `mobileApps`, `desktopApps`,\r\n     * `tools`, `locators`, `geodatabaseAccess`, `geometricOperations`, `geoprocessingTasks`, `networkAnalysis`,\r\n     * `files`, `documents`, `images`, `pdfs`, `notebooks`.\r\n     * @type {array}\r\n     * @default all\r\n     */\r\n    availableItemTypeFilters: ItemTypeFilter[];\r\n\r\n    /**\r\n     * If set to true, will not show item type filters.\r\n     * @type {boolean}\r\n     * @default false\r\n     */\r\n    disableItemTypeFilters: boolean;\r\n\r\n    /**\r\n     * If set to true, item selection is deferred until a promise returned to onSelect is resolved or rejected.\r\n     * @type {boolean}\r\n     * @default false\r\n     */\r\n    asynchronousItemSelect: boolean;\r\n\r\n    /**\r\n     * Array of custom actions that will appear in the item details pane and on item cards.\r\n     * @type {array}\r\n     * @default []\r\n     */\r\n    customActions: CustomAction[];\r\n\r\n    /**\r\n     * Array of custom sections that will appear in the section dropdown.\r\n     * @type {array}\r\n     * @default []\r\n     */\r\n    customSections: CustomSection[];\r\n\r\n    /**\r\n     * Controls the display of a close button at the top right of the item browser.\r\n     * - Note: this option only applies in the `confined` mode. The `fullscreen` mode always shows a close button\r\n     * in the top right corner. \r\n     * @type {boolean}\r\n     * @default false\r\n     */\r\n    showCloseBtn: boolean;\r\n\r\n    /**\r\n     * Controls the display of a back button at the top left of the item browser.\r\n     * - Note: this option only applies in the `confined` mode. The `fullscreen` mode always shows a close button\r\n     * in the top right corner, but never a back button.\r\n     * @type {boolean}\r\n     * @default true\r\n     */\r\n    showBackBtn: boolean;\r\n\r\n    /**\r\n     * Callback fired when the user clicks the close or back buttons.\r\n     * @type {function}\r\n     * @default no-op\r\n     */\r\n    onBack: () => any;\r\n\r\n    /**\r\n     * If true, hides miscellaneous actions from item cards.\r\n     * - This hides any `customActions` which do not have an icon set.\r\n     * - This only applies to the `confined` mode of the item browser.\r\n     * @type {boolean}\r\n     * @default false\r\n     */\r\n    hideEllipses: boolean;\r\n\r\n    /**\r\n     * Optional function used to add additional query parameters (q) based on the state of the\r\n     * item browser, the state consuming application, or some combination of the two.\r\n     * - The provided function must synchronously return a valid search API query string.\r\n     * - These are query parameters, not request parameters. For request parameters use `addRequestParameters`.\r\n     * @type {function}\r\n     * @default undefined\r\n     */\r\n    addQueryParameters?: (state?: ItemBrowserState) => string;\r\n\r\n    /**\r\n     * Optional text to be used as the search placeholder.\r\n     * @type {string}\r\n     * @default undefined\r\n     */\r\n    searchPlaceholderText?: string;\r\n\r\n    /**\r\n     * Optional name to replace \"items\" in search results.\r\n     * - This is used to change the name of whatever it is you are searching for.\r\n     * e.g. we set this to `layers` in the map viewer. It is purely informational\r\n     * and has no bearing on the item types included in the search.\r\n     * @type {string}\r\n     * @default undefined\r\n     */\r\n    itemName?: string;\r\n\r\n    /**\r\n     * If true, replaces the section dropdown with the browser's title.\r\n     * - Generally this option is set to true if there will only be one section,\r\n     * so having a title for the item browser is more informational.\r\n     * @type {boolean}\r\n     * @default undefined\r\n     */\r\n    replaceSectionDropdownWithTitle?: boolean;\r\n\r\n    /**\r\n     * Optional Q representing special \"item types\" defined by the UI.\r\n     * - This is mixed into the query at the same level as `allowedItemTypes`, so the item browser will\r\n     * only show results that match ((`specialItemQ` OR `allowedItemTypes`) AND `filters`).\r\n     * - Example usage: `(typekeywords: \"extra-special\" AND tags: \"special-item\")`\r\n     * @type {string}\r\n     * @default undefined\r\n     */\r\n    specialItemQ?: string;\r\n\r\n    /**\r\n     * Optional function used to add parameters to the request based on the state of the consuming application.\r\n     * - The provided function must synchronously return a valid request parameter object.\r\n     * - These are request parameters, not query parameters. For query parameters use `addQueryParameters`.\r\n     * @type {function}\r\n     * @default undefined\r\n     */\r\n    addRequestParameters?: (state?: ItemBrowserState) => { [propName: string]: string; };\r\n\r\n    /**\r\n     * Optional array of static filters to show as chips under the title.\r\n     * These are purely informational and have no impact on the functionality of the `ItemBrowser`.\r\n     * - Currently non-functional as there is no use-case. May be implemented at AGOL 6.4.\r\n     * @type {array}\r\n     * @default undefined\r\n     */\r\n    staticFilters?: string[];\r\n}\r\n\r\nexport const initialState: ConfigState = {\r\n    asynchronousItemSelect: false,\r\n    dialogTitle: \"Item Browser\",\r\n    disableMainAction: false,\r\n    mainActionTitle: i18n.itemDetails.addToMap,\r\n    mainInverseActionTitle: i18n.itemDetails.removeFromMap,\r\n    onSelect: () => undefined,\r\n    onDeselect: () => undefined,\r\n    baseSections: [\"all\", \"myContent\", \"myFavorites\", \"myGroups\", \"myOrganization\", \"livingAtlas\"],\r\n    layoutMode: \"adjustable\",\r\n    detailsPaneType: \"flyout\",\r\n    singleItemSelect: false,\r\n    enableMapAreaFilter: true,\r\n    mapAreaThrottleTime: 2500,\r\n    enableSelectAllItemsFromQuery: false,\r\n    showSubmitButton: true,\r\n    submitButtonText: \"Submit Selection\",\r\n    clearSelectionBetweenSearches: false,\r\n    resultsPerQuery: 10,\r\n    allowedItemTypes: allItemTypes,\r\n    availableItemTypeFilters: [\r\n        \"maps\",\r\n        \"webMaps\",\r\n        \"mapFiles\",\r\n        \"layers\",\r\n        \"featureLayers\",\r\n        \"tileLayers\",\r\n        \"mapImageLayers\",\r\n        \"imageryLayers\",\r\n        \"sceneLayers\",\r\n        \"tables\",\r\n        \"layerFiles\",\r\n        \"scenes\",\r\n        \"apps\",\r\n        \"webApps\",\r\n        \"mobileApps\",\r\n        \"desktopApps\",\r\n        \"tools\",\r\n        \"locators\",\r\n        \"geodatabaseAccess\",\r\n        \"geometricOperations\",\r\n        \"geoprocessingTasks\",\r\n        \"networkAnalysis\",\r\n        \"files\",\r\n        \"documents\",\r\n        \"images\",\r\n        \"pdfs\",\r\n        \"notebooks\"\r\n    ],\r\n    disableItemTypeFilters: false,\r\n    customActions: [],\r\n    customSections: [],\r\n    showCloseBtn: false,\r\n    showBackBtn: true,\r\n    onBack: () => {},\r\n    hideEllipses: false,\r\n    replaceSectionDropdownWithTitle: false\r\n};\r\n\r\nexport default (state: ConfigState = initialState, action: Action) => {\r\n    switch (action.type) {\r\n        case UPDATE_CUSTOM_SECTION_GROUPS:\r\n            removeDupsOnKey(\r\n                \"id\",\r\n                state.customSections\r\n                    .filter(sectionHasCategoryFilter) // Only look at custom sections with category filters\r\n                    .map(getCustomCategoryFilters) // Get array of category filters for each section\r\n                    .reduce(\r\n                        (result: CategoryFilter[], current: CategoryFilter[]) => [ ...result, ...current ],\r\n                        []\r\n                    ) // Concat\r\n                    .filter(\r\n                        (categoryFilter: CategoryFilter) =>\r\n                            typeof categoryFilter === \"object\" && categoryFilter.type === \"group\"\r\n                    ) // Only custom section group category filters\r\n            ).forEach((filter: CategoryFilter, index) => {\r\n                filter.id = action.payload.groups[index].id;\r\n                delete filter.fetchGroupIdByQuery;\r\n            });\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { UPDATE_PORTAL_SELF } from \"../../_actions/index\";\r\nimport { getOrgBaseUrl } from \"../../../_utils/index\";\r\nimport { Pojo, Action } from \"../../../Component\";\r\n\r\nexport interface UtilsState {\r\n    iconDir: string;\r\n    portal: Pojo;\r\n    request: (url: string, options?: Pojo) => dojo.Deferred<any>;\r\n    self?: Pojo;\r\n}\r\nexport const initialState: UtilsState = {\r\n    iconDir: \"\",\r\n    portal: {},\r\n    request: (url: string) => null as any\r\n};\r\n\r\n// No way to update these props dynamically for now, must be supplied via initialState\r\nexport default (state: UtilsState = initialState, action: Action): UtilsState => {\r\n    switch (action.type) {\r\n        case UPDATE_PORTAL_SELF:\r\n            return {\r\n                ...state,\r\n                self: action.payload.self\r\n            };\r\n        default:\r\n            if (!!state.portal.portalHostname && !state.portal.baseUrl) {\r\n                state.portal.baseUrl = getOrgBaseUrl(state.portal);\r\n            }\r\n            return state;\r\n    }\r\n};","import { combineReducers } from \"../../../Component\";\r\n\r\nimport extent, { ExtentState, initialState as extentInitial } from \"./extent\";\r\nimport filter, { FilterState, initialState as filterInitial } from \"./filter\";\r\nimport nextQuery, { NextQueryState, initialState as nextQueryInitial } from \"./nextQuery\";\r\nimport sort, { SortState, initialState as sortInitial } from \"./sort\";\r\nimport searchString, { SearchStringState, initialState as searchStringInitial } from \"./searchString\";\r\nimport section, { SectionState, initialState as sectionInitial } from \"./section\";\r\n\r\nexport interface ParametersState {\r\n    extent: ExtentState;\r\n    filter: FilterState;\r\n    sort: SortState;\r\n    searchString: SearchStringState;\r\n    section: SectionState;\r\n    nextQuery: NextQueryState;\r\n}\r\nexport const initialState = {\r\n    extent: extentInitial,\r\n    filter: filterInitial,\r\n    nextQuery: nextQueryInitial,\r\n    searchString: searchStringInitial,\r\n    section: sectionInitial,\r\n    sort: sortInitial\r\n};\r\n\r\nexport default combineReducers<ParametersState>({\r\n    extent,\r\n    filter,\r\n    nextQuery,\r\n    searchString,\r\n    section,\r\n    sort\r\n});\r\n","import { UNTHROTTLE_EXTENT_UPDATE, UPDATE_EXTENT } from \"../../_actions/index\";\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport interface ExtentState {\r\n    area: {\r\n        minx: number;\r\n        miny: number;\r\n        maxx: number;\r\n        maxy: number;\r\n    };\r\n    throttling: boolean;\r\n}\r\nexport const initialState: ExtentState = {\r\n    area: {\r\n        minx: -180,\r\n        miny: -90,\r\n        maxx: 180,\r\n        maxy: 90\r\n    },\r\n    throttling: false\r\n};\r\n\r\nexport default (state: ExtentState = initialState, action: Action): ExtentState => {\r\n    switch (action.type) {\r\n        case UNTHROTTLE_EXTENT_UPDATE:\r\n            return {\r\n                ...state,\r\n                throttling: false\r\n            };\r\n        case UPDATE_EXTENT:\r\n            return {\r\n                area: action.payload,\r\n                throttling: true\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {\r\n    CLEAR_ALL_FILTERS,\r\n    UPDATE_ORG_GROUP_FILTER,\r\n    UPDATE_ORG_CATEGORIES_FILTER,\r\n    UPDATE_LIVING_ATLAS_CATEGORIES_FILTER,\r\n    UPDATE_LIVING_ATLAS_REGION_FILTER,\r\n    UPDATE_GROUP_CATEGORIES_FILTER,\r\n    UPDATE_ITEM_TYPE_FILTER,\r\n    UPDATE_MODIFIED_FILTER,\r\n    UPDATE_CREATED_FILTER,\r\n    UPDATE_SHARED_FILTER,\r\n    UPDATE_FOLDER_FILTER,\r\n    UPDATE_GROUP_FILTER,\r\n    UPDATE_STATUS_FILTER,\r\n    UPDATE_MAP_AREA_FILTER,\r\n    UPDATE_SEARCH_ORG_FILTER,\r\n    UPDATE_TAGS_FILTER,\r\n    CHANGE_SEARCH_SECTION,\r\n    UPDATE_CUSTOM_FILTER\r\n} from \"../../_actions/index\";\r\n\r\nimport { CategoriesOption } from \"../../../Filters/CategoriesFilter/index\";\r\nimport { ItemTypeOption } from \"../../../Filters/ItemTypeFilter/index\";\r\nimport { SharedOption } from \"../../../Filters/SharedFilter/index\";\r\nimport { StatusOption } from \"../../../Filters/StatusFilter/index\";\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport interface FilterState {\r\n    customFilter: { [index: number]: { value: string, text: string } };\r\n    livingAtlasRegion?: CategoriesOption;\r\n    livingAtlasCategories?: CategoriesOption;\r\n    orgCategories?: CategoriesOption;\r\n    groupCategories?: CategoriesOption;\r\n    itemType?: ItemTypeOption;\r\n    dateModified?: {\r\n        start: number;\r\n        end: number;\r\n        label: string;\r\n    };\r\n    dateCreated?: {\r\n        start: number;\r\n        end: number;\r\n        label: string;\r\n    };\r\n    shared?: SharedOption;\r\n    folder?: {\r\n        title: string;\r\n        id: string;\r\n    };\r\n    group?: {\r\n        title: string;\r\n        id: string;\r\n    };\r\n    orgGroup?: {\r\n        title: string;\r\n        id: string;\r\n    };\r\n    status?: StatusOption;\r\n    searchOrg?: boolean;\r\n    tags?: { [tagName: string]: boolean };\r\n    searchMapArea: boolean;\r\n}\r\nexport const initialState = {\r\n    customFilter: {},\r\n    searchMapArea: false\r\n};\r\n\r\nexport default (state: FilterState = initialState, action: Action): FilterState => {\r\n    switch (action.type) {\r\n        case CLEAR_ALL_FILTERS:\r\n            return {\r\n                customFilter: {},\r\n                searchMapArea: false\r\n            };\r\n        case UPDATE_ORG_GROUP_FILTER:\r\n            return {\r\n                ...state,\r\n                orgGroup: action.payload\r\n            };\r\n        case UPDATE_LIVING_ATLAS_REGION_FILTER:\r\n            return {\r\n                ...state,\r\n                livingAtlasRegion: action.payload\r\n            };\r\n        case UPDATE_LIVING_ATLAS_CATEGORIES_FILTER:\r\n            return {\r\n                ...state,\r\n                livingAtlasCategories: action.payload\r\n            };\r\n        case UPDATE_ORG_CATEGORIES_FILTER:\r\n            return {\r\n                ...state,\r\n                orgCategories: action.payload\r\n            };\r\n        case UPDATE_GROUP_CATEGORIES_FILTER:\r\n            return {\r\n                ...state,\r\n                groupCategories: action.payload\r\n            };\r\n        case UPDATE_ITEM_TYPE_FILTER:\r\n            return {\r\n                ...state,\r\n                itemType: action.payload\r\n            };\r\n        case UPDATE_MODIFIED_FILTER:\r\n            return {\r\n                ...state,\r\n                dateModified: action.payload.modified\r\n            };\r\n        case UPDATE_CREATED_FILTER:\r\n            return {\r\n                ...state,\r\n                dateCreated: action.payload.created\r\n            };\r\n        case UPDATE_SHARED_FILTER:\r\n            return {\r\n                ...state,\r\n                shared: action.payload\r\n            };\r\n        case UPDATE_FOLDER_FILTER:\r\n            return {\r\n                ...state,\r\n                folder: action.payload\r\n            };\r\n        case UPDATE_GROUP_FILTER:\r\n            return {\r\n                ...state,\r\n                groupCategories: undefined,\r\n                group: action.payload\r\n            };\r\n        case UPDATE_STATUS_FILTER:\r\n            return {\r\n                ...state,\r\n                status: action.payload\r\n            };\r\n        case UPDATE_MAP_AREA_FILTER:\r\n            return {\r\n                ...state,\r\n                searchMapArea: action.payload\r\n            };\r\n        case UPDATE_SEARCH_ORG_FILTER:\r\n            return {\r\n                ...state,\r\n                searchOrg: action.payload,\r\n                orgCategories: undefined\r\n            };\r\n        case UPDATE_TAGS_FILTER:\r\n            return {\r\n                ...state,\r\n                tags: action.payload\r\n            };\r\n        case UPDATE_CUSTOM_FILTER:\r\n            return {\r\n                ...state,\r\n                customFilter: {\r\n                    ...state.customFilter,\r\n                    [action.payload.index]: action.payload.filter\r\n                }\r\n            };\r\n        case CHANGE_SEARCH_SECTION:\r\n            return {\r\n                customFilter: {},\r\n                searchMapArea: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { LOADING_CONTENT, LOADING_CONTENT_SUCCESS, LOADING_NEXT_SUCCESS } from \"../../_actions/index\";\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport interface NextQueryState {\r\n    nextStart: number;\r\n    total: number;\r\n}\r\nexport const initialState: NextQueryState = {\r\n    nextStart: -1,\r\n    total: 0\r\n};\r\n\r\nexport default (state: NextQueryState = initialState, action: Action): NextQueryState => {\r\n    switch (action.type) {\r\n        case LOADING_CONTENT:\r\n            return {\r\n                ...state,\r\n                total: 0\r\n            };\r\n        case LOADING_CONTENT_SUCCESS:\r\n            return {\r\n                nextStart: action.payload.search.nextStart,\r\n                total: action.payload.search.total\r\n            };\r\n        case LOADING_NEXT_SUCCESS:\r\n            return {\r\n                nextStart: action.payload.nextStart,\r\n                total: action.payload.total\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { CHANGE_SEARCH_STRING, LOADING_CONTENT } from \"../../_actions/index\";\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport interface SearchStringState {\r\n    current: string;\r\n    previous: string;\r\n}\r\nexport const initialState = {\r\n    current: \"\",\r\n    previous: \"\"\r\n};\r\n\r\nexport default (\r\n    state: SearchStringState = initialState,\r\n    action: Action\r\n): SearchStringState => {\r\n    switch (action.type) {\r\n        case LOADING_CONTENT:\r\n            return {\r\n                ...state,\r\n                previous: state.current\r\n            };\r\n        case CHANGE_SEARCH_STRING:\r\n            return {\r\n                ...state,\r\n                current: action.payload\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { CHANGE_SEARCH_SECTION, UPDATE_PORTAL_SELF } from \"../../_actions/index\";\r\nimport { CustomSection } from \"../settings/config\";\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport type SectionState = \"myContent\" | \"myFavorites\" | \"myGroups\" | \"myOrganization\" | \"livingAtlas\" | \"all\" | string;\r\nexport const initialState: SectionState = \"all\";\r\n\r\nexport default (state: SectionState = initialState, action: Action): SectionState => {\r\n    switch (action.type) {\r\n        case CHANGE_SEARCH_SECTION:\r\n            return action.payload.newSection;\r\n        case UPDATE_PORTAL_SELF:\r\n            const baseSections = action.payload.config.baseSections;\r\n            const customSectionNames = action.payload.config.customSections\r\n                .map((section: CustomSection) => section.name);\r\n            if (baseSections.indexOf(state) > -1 || customSectionNames.indexOf(state) > -1) {\r\n                return state;\r\n            }\r\n            return (\r\n                baseSections.length > 0 ?\r\n                    baseSections[0] : customSectionNames.length > 0 ?\r\n                        customSectionNames[0] :\r\n                        \"all\"\r\n                );\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { CHANGE_SORT_ORDER, CHANGE_SORT_FIELD, CHANGE_SEARCH_SECTION, UPDATE_CUSTOM_SECTION_GROUPS } from \"../../_actions/index\";\r\nimport { getCustomSection, sectionHasCategoryFilter, getCustomCategoryFilters } from \"../../_utils\";\r\nimport { removeDupsOnKey } from \"../../../_utils\";\r\nimport { CategoryFilter } from \"../settings/config\";\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport interface SortState {\r\n    field: \"relevance\" | \"title\" | \"created\" | \"type\" | \"owner\" | \"modified\" | \"avgrating\" | \"numcomments\" | \"numviews\";\r\n    order: \"asc\" | \"desc\";\r\n}\r\nexport const initialState: SortState = {\r\n    field: \"relevance\",\r\n    order: \"desc\"\r\n};\r\n\r\nexport const defaultSortField = {\r\n    myContent: \"modified\",\r\n    myFavorites: \"relevance\",\r\n    myGroups: \"relevance\",\r\n    myOrganization: \"relevance\",\r\n    livingAtlas: \"relevance\",\r\n    all: \"relevance\"\r\n};\r\n\r\nexport const defaultSortDirection = {\r\n    relevance: \"desc\",\r\n    title: \"asc\",\r\n    created: \"desc\",\r\n    owner: \"asc\",\r\n    modified: \"desc\",\r\n    numviews: \"desc\",\r\n    avgrating: \"desc\"\r\n};\r\n\r\nexport default (state: SortState = initialState, action: Action): SortState => {\r\n    switch (action.type) {\r\n        case CHANGE_SORT_ORDER:\r\n            return {\r\n                ...state,\r\n                order: action.payload\r\n            };\r\n        case CHANGE_SORT_FIELD:\r\n            const field = action.payload;\r\n            return {\r\n                field,\r\n                order: defaultSortDirection[field] ? defaultSortDirection[field] : state.order\r\n            };\r\n        case CHANGE_SEARCH_SECTION:\r\n\r\n            // If this is a custom section pointing to a group, need to use the user defined group sort params\r\n            const cSection = getCustomSection(action.payload.customSections, action.payload.newSection);\r\n            if (cSection && cSection.filters) {\r\n                const groupFilter = cSection.filters.filter(\r\n                    (filter: CategoryFilter) => typeof filter === \"object\" && filter.type === \"group\"\r\n                )[0] as CategoryFilter;\r\n                if (groupFilter && groupFilter.id) {\r\n                    const sortParams = action.payload.customSectionGroupSort[groupFilter.id];\r\n                    if (sortParams) {\r\n                        return sortParams;\r\n                    }\r\n                }\r\n            }\r\n            \r\n            const fieldName = defaultSortField[action.payload.newSection];\r\n            return {\r\n                field: !!fieldName ? fieldName : \"relevance\",\r\n                order: \"desc\"\r\n            };\r\n        case UPDATE_CUSTOM_SECTION_GROUPS:\r\n            // If looking at a custom section pointing to a group, update the sort field/order according to the response\r\n            const { customSections, currentSection } = action.payload;\r\n            const customSection = getCustomSection(customSections, currentSection);\r\n            if (customSection && !!customSection.filters) {\r\n                const groupCategoryFilters = removeDupsOnKey(\r\n                    \"id\",\r\n                    customSections\r\n                        .filter(sectionHasCategoryFilter) // Only look at custom sections with category filters\r\n                        .map(getCustomCategoryFilters) // Get array of category filters for each section\r\n                        .reduce(\r\n                            (result: CategoryFilter[], current: CategoryFilter[]) => [ ...result, ...current ],\r\n                            []\r\n                        ) // Concat\r\n                        .filter(\r\n                            (categoryFilter: CategoryFilter) =>\r\n                                typeof categoryFilter === \"object\" && categoryFilter.type === \"group\"\r\n                        ) // Only custom section group category filters\r\n                );\r\n                const sectionGroupFilter = customSection.filters.filter(\r\n                    (filter: CategoryFilter) => typeof filter === \"object\" && filter.type === \"group\"\r\n                )[0];\r\n                const group = action.payload.groups[groupCategoryFilters.indexOf(sectionGroupFilter)];\r\n                if (group) {\r\n                    return {\r\n                        field: group.sortField ? group.sortField : \"relevance\",\r\n                        order: group.sortOrder ? group.sortOrder : \"desc\"\r\n                    };\r\n                }\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { combineReducers } from \"../../../Component\";\r\n\r\nimport counts, { CountsState, initialState as countsInitial } from \"./counts/index\";\r\nimport displayItems, { DisplayItemsState, initialState as displayItemsInitial } from \"./displayItems\";\r\nimport livingAtlas, { LivingAtlasState, initialState as livingAtlasInitial } from \"./livingAtlas\";\r\nimport loadingItems, { LoadingItemsState, initialState as loadingItemsInitial } from \"./loadingItems\";\r\nimport selectedItems, { SelectedItemsState, initialState as selectedItemsInitial } from \"./selectedItems\";\r\nimport fullItemDetails, { FullItemDetailsState, initialState as fullItemDetailsInitial } from \"./fullItemDetails\";\r\nimport failedItemDetails, { FailedItemDetailsState, initialState as failedItemDetailsInitial } from \"./failedItemDetails\";\r\nimport organization, { OrganizationState, initialState as organizationInitial } from \"./organization\";\r\nimport user, { UserState, initialState as userInitial } from \"./user\";\r\nimport customSections, { CustomSectionsState, initialState as customInitial } from \"./customSections\";\r\nimport allOrganizations, { AllOrganizationsState, initialState as allOrgsInitial } from \"./allOrganizations\";\r\nimport users, { UsersState, initialState as usersInitial } from \"./users\";\r\n\r\nexport interface ResultsState {\r\n    counts: CountsState;\r\n    displayItems: DisplayItemsState;\r\n    loadingItems: LoadingItemsState;\r\n    selectedItems: SelectedItemsState;\r\n    failedItemDetails: FailedItemDetailsState;\r\n    fullItemDetails: FullItemDetailsState;\r\n    livingAtlas: LivingAtlasState;\r\n    organization: OrganizationState;\r\n    user: UserState;\r\n    customSections: CustomSectionsState;\r\n    allOrganizations: AllOrganizationsState;\r\n    users: UsersState;\r\n}\r\nexport const initialState = {\r\n    counts: countsInitial,\r\n    displayItems: displayItemsInitial,\r\n    livingAtlas: livingAtlasInitial,\r\n    loadingItems: loadingItemsInitial,\r\n    selectedItems: selectedItemsInitial,\r\n    failedItemDetails: failedItemDetailsInitial,\r\n    fullItemDetails: fullItemDetailsInitial,\r\n    organization: organizationInitial,\r\n    user: userInitial,\r\n    customSections: customInitial,\r\n    allOrganizations: allOrgsInitial,\r\n    users: usersInitial\r\n};\r\n\r\nexport default combineReducers<ResultsState>({\r\n    counts,\r\n    displayItems,\r\n    loadingItems,\r\n    selectedItems,\r\n    failedItemDetails,\r\n    fullItemDetails,\r\n    livingAtlas,\r\n    organization,\r\n    user,\r\n    customSections,\r\n    allOrganizations,\r\n    users\r\n});\r\n","import { combineReducers } from \"../../../../Component\";\r\nimport access, { AccessState, initialState as accessInitial } from \"./access\";\r\nimport contentStatus, { ContentStatusState, initialState as contentStatusInitial } from \"./status\";\r\n\r\nexport interface CountsState {\r\n    access: AccessState;\r\n    contentStatus: ContentStatusState;\r\n}\r\nexport const initialState: CountsState = {\r\n    access: accessInitial,\r\n    contentStatus: contentStatusInitial\r\n};\r\n\r\nexport default combineReducers<CountsState>({\r\n    access,\r\n    contentStatus\r\n});","import { LOADING_CONTENT_SUCCESS } from \"../../../_actions/index\";\r\nimport { Action } from \"../../../../Component\";\r\n\r\nexport interface AccessState {\r\n    org: number | undefined;\r\n    private: number | undefined;\r\n    public: number | undefined;\r\n    shared: number | undefined;\r\n}\r\nexport const initialState: AccessState = {\r\n    org: undefined,\r\n    private: undefined,\r\n    public: undefined,\r\n    shared: undefined\r\n};\r\n\r\nexport default (state: AccessState = initialState, action: Action): AccessState => {\r\n    switch (action.type) {\r\n        case LOADING_CONTENT_SUCCESS:\r\n            if (\r\n                action.payload.aggregations &&\r\n                action.payload.aggregations.counts\r\n            ) {\r\n                const statusCounts = action.payload.aggregations.counts.filter(\r\n                    (field: any) => field.fieldName === \"access\"\r\n                )[0];\r\n                if (statusCounts) {\r\n                    const acctCounts = statusCounts.fieldValues.filter(\r\n                        (value: any) => value.value === \"account\"\r\n                    )[0];\r\n                    const privateCounts = statusCounts.fieldValues.filter(\r\n                        (value: any) => value.value === \"private\"\r\n                    )[0];\r\n                    const publicCounts = statusCounts.fieldValues.filter(\r\n                        (value: any) => value.value === \"public\"\r\n                    )[0];\r\n                    const sharedCounts = statusCounts.fieldValues.filter(\r\n                        (value: any) => value.value === \"shared\"\r\n                    )[0];\r\n                    return {\r\n                        org: acctCounts ? acctCounts.count : undefined,\r\n                        private: privateCounts ? privateCounts.count : undefined,\r\n                        public: publicCounts ? publicCounts.count : undefined,\r\n                        shared: sharedCounts ? sharedCounts.count : undefined,\r\n                    };\r\n                }\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { LOADING_CONTENT_SUCCESS } from \"../../../_actions/index\";\r\nimport { Action } from \"../../../../Component\";\r\n\r\nexport interface ContentStatusState {\r\n    publicAuthoritative: number;\r\n    orgAuthoritative: number;\r\n    deprecated: number;\r\n}\r\nexport const initialState: ContentStatusState = {\r\n    publicAuthoritative: 0,\r\n    orgAuthoritative: 0,\r\n    deprecated: 0\r\n};\r\n\r\nexport default (state: ContentStatusState = initialState, action: Action): ContentStatusState => {\r\n    switch (action.type) {\r\n        case LOADING_CONTENT_SUCCESS:\r\n            if (\r\n                action.payload.aggregations &&\r\n                action.payload.aggregations.counts\r\n            ) {\r\n                const statusCounts = action.payload.aggregations.counts.filter(\r\n                    (field: any) => field.fieldName === \"contentstatus\"\r\n                )[0];\r\n                if (statusCounts) {\r\n                    const orgAuthCounts = statusCounts.fieldValues.filter(\r\n                        (value: any) => value.value === \"org_authoritative\"\r\n                    )[0];\r\n                    const publicAuthCounts = statusCounts.fieldValues.filter(\r\n                        (value: any) => value.value === \"public_authoritative\"\r\n                    )[0];\r\n                    const depCounts = statusCounts.fieldValues.filter(\r\n                        (value: any) => value.value === \"deprecated\"\r\n                    )[0];\r\n\r\n                    return {\r\n                        publicAuthoritative: publicAuthCounts ? publicAuthCounts.count : 0,\r\n                        orgAuthoritative: orgAuthCounts ? orgAuthCounts.count : 0,\r\n                        deprecated: depCounts ? depCounts.count : 0\r\n                    };\r\n                }\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { LOADING_CONTENT_SUCCESS, LOADING_NEXT_SUCCESS } from \"../../_actions/index\";\r\nimport { Pojo, Action } from \"../../../Component\";\r\n\r\nexport type DisplayItemsState = Pojo[];\r\nexport const initialState: DisplayItemsState = [];\r\n\r\nexport default (state: DisplayItemsState = [], action: Action): DisplayItemsState => {\r\n    switch (action.type) {\r\n        case LOADING_CONTENT_SUCCESS:\r\n            return action.payload.search.results;\r\n        case LOADING_NEXT_SUCCESS:\r\n            return [ ...state, ...action.payload.results ];\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {\r\n    LOADING_CONTENT_SUCCESS,\r\n    LOADING_LIVING_ATLAS_INFO,\r\n    UPDATE_LIVING_ATLAS_INFO,\r\n    UPDATE_LIVING_ATLAS_INFO_FAILED\r\n} from \"../../_actions/index\";\r\n\r\nimport { clearCountsRecursive, formatRecursive, mapCountsToSchema } from \"./_utils/categories\";\r\nimport { ToggleOption } from \"../../../Buttons/Toggle\";\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport interface LivingAtlasState {\r\n    categorySchema: ToggleOption | undefined;\r\n    groupId: string | undefined;\r\n    status: \"initial\" | \"loading\" | \"loaded\" | \"failed\";\r\n}\r\nexport const initialState: LivingAtlasState = {\r\n    categorySchema: undefined,\r\n    groupId: undefined,\r\n    status: \"initial\"\r\n};\r\n\r\nexport default (state: LivingAtlasState = initialState, action: Action): LivingAtlasState => {\r\n    switch (action.type) {\r\n        case LOADING_LIVING_ATLAS_INFO:\r\n            return {\r\n                ...state,\r\n                status: \"loading\"\r\n            };\r\n        case UPDATE_LIVING_ATLAS_INFO:\r\n            return {\r\n                ...state,\r\n                categorySchema: {\r\n                    displayName: action.payload.id,\r\n                    value: action.payload.id,\r\n                    children: formatRecursive(action.payload.schema)\r\n                },\r\n                groupId: action.payload.id,\r\n                status: \"loaded\"\r\n            };\r\n        case LOADING_CONTENT_SUCCESS:\r\n            if (\r\n                !!state.categorySchema &&\r\n                !!action.payload.aggregations &&\r\n                !!action.payload.aggregations.countInfo &&\r\n                action.payload.aggregations.countInfo.section === \"livingAtlas\"\r\n            ) {\r\n                return {\r\n                    ...state,\r\n                    categorySchema: mapCountsToSchema(\r\n                        action.payload.aggregations,\r\n                        clearCountsRecursive(state.categorySchema),\r\n                        \"groupCategories\"\r\n                    )\r\n                };\r\n            }\r\n            return state;\r\n        case UPDATE_LIVING_ATLAS_INFO_FAILED:\r\n            return {\r\n                ...state,\r\n                status: \"failed\"\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {\r\n    CLEAR_SELECTION_STATE,\r\n    SELECT_ITEM_ASYNC,\r\n    SELECT_ITEM,\r\n    SELECT_ITEM_SINGLE,\r\n    SELECT_ITEM_ASYNC_FAILED,\r\n    START_CUSTOM_ACTION,\r\n    END_CUSTOM_ACTION,\r\n    ADD_TO_FAVORITES,\r\n    ADD_TO_FAVORITES_SUCCESS,\r\n    ADD_TO_FAVORITES_FAIL,\r\n    REMOVE_FROM_FAVORITES,\r\n    REMOVE_FROM_FAVORITES_SUCCESS,\r\n    REMOVE_FROM_FAVORITES_FAIL\r\n} from \"../../_actions/index\";\r\nimport { Pojo, Action } from \"../../../Component\";\r\n\r\nexport interface LoadingItemsState {\r\n    [itemId: string]: Pojo;\r\n}\r\nexport const initialState: LoadingItemsState = {};\r\n\r\nexport default (state: LoadingItemsState = {}, action: Action) => {\r\n    switch (action.type) {\r\n        case SELECT_ITEM_ASYNC:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: action.payload\r\n            };\r\n        case SELECT_ITEM:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: undefined\r\n            };\r\n        case SELECT_ITEM_SINGLE:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: undefined\r\n            };\r\n        case SELECT_ITEM_ASYNC_FAILED:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: undefined\r\n            };\r\n        case START_CUSTOM_ACTION:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: action.payload\r\n            };\r\n        case END_CUSTOM_ACTION:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: undefined\r\n            };\r\n        case CLEAR_SELECTION_STATE:\r\n            return {};\r\n        case ADD_TO_FAVORITES:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: action.payload\r\n            };\r\n        case ADD_TO_FAVORITES_SUCCESS:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: undefined\r\n            };\r\n        case ADD_TO_FAVORITES_FAIL:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: undefined\r\n            };\r\n        case REMOVE_FROM_FAVORITES:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: action.payload\r\n            };\r\n        case REMOVE_FROM_FAVORITES_SUCCESS:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: undefined\r\n            };\r\n        case REMOVE_FROM_FAVORITES_FAIL:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: undefined\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {\r\n    CLEAR_SELECTION_STATE,\r\n    SELECT_ITEM,\r\n    DESELECT_ITEM,\r\n    SELECT_ALL,\r\n    DESELECT_ALL,\r\n    SELECT_ITEM_SINGLE,\r\n    SELECT_ALL_FROM_QUERY_SUCCESS\r\n} from \"../../_actions/index\";\r\nimport { Pojo, Action } from \"../../../Component\";\r\n\r\nexport interface SelectedItemsState {\r\n    [itemId: string]: Pojo;\r\n}\r\nexport const initialState: SelectedItemsState = {};\r\n\r\nexport default (state: SelectedItemsState = {}, action: Action): SelectedItemsState => {\r\n    switch (action.type) {\r\n        case DESELECT_ALL:\r\n            return {};\r\n        case SELECT_ALL:\r\n            return {\r\n                ...state,\r\n                ...action.payload.reduce((result: Pojo, item: Pojo) => {\r\n                    return {\r\n                        ...result,\r\n                        [item.id]: item\r\n                    };\r\n                }, {})\r\n            };\r\n        case DESELECT_ITEM:\r\n            const newState = { ...state };\r\n            delete newState[action.payload.id];\r\n            return newState;\r\n        case SELECT_ITEM:\r\n            return {\r\n                ...state,\r\n                [action.payload.id]: action.payload\r\n            };\r\n        case SELECT_ITEM_SINGLE:\r\n            return { [action.payload.id]: action.payload };\r\n        case SELECT_ALL_FROM_QUERY_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n        case CLEAR_SELECTION_STATE:\r\n            return {};\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { UPDATE_FULL_ITEM_DETAILS, FETCH_FULL_ITEM_DETAILS_FAILED, VIEW_ITEM_DETAILS } from \"../../_actions/index\";\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport interface FailedItemDetailsState {\r\n    [itemId: string]: boolean;\r\n}\r\nexport const initialState: FailedItemDetailsState = {};\r\n\r\nexport default (state: FailedItemDetailsState = initialState, action: Action) => {\r\n    switch (action.type) {\r\n        case UPDATE_FULL_ITEM_DETAILS:\r\n            if (state[action.payload.item.id]) {\r\n                const newState = { ...state };\r\n                delete newState[action.payload.item.id];\r\n                return newState;\r\n            }\r\n            return state;\r\n        case VIEW_ITEM_DETAILS:\r\n            if (state[action.payload.id]) {\r\n                const newState = { ...state };\r\n                delete newState[action.payload.id];\r\n                return newState;\r\n            }\r\n            return state;\r\n        case FETCH_FULL_ITEM_DETAILS_FAILED:\r\n            return {\r\n                ...state,\r\n                [action.payload]: true\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { UPDATE_FULL_ITEM_DETAILS, FETCH_FULL_ITEM_DETAILS_FAILED } from \"../../_actions/index\";\r\nimport { Pojo, Action } from \"../../../Component\";\r\n\r\nexport interface FullItemDetailsState {\r\n    [itemId: string]: Pojo;\r\n}\r\nexport const initialState: FullItemDetailsState = {};\r\n\r\nexport default (state: FullItemDetailsState = initialState, action: Action) => {\r\n    switch (action.type) {\r\n        case UPDATE_FULL_ITEM_DETAILS:\r\n            return {\r\n                ...state,\r\n                [action.payload.item.id]: action.payload.item\r\n            };\r\n        case FETCH_FULL_ITEM_DETAILS_FAILED:\r\n            if (state[action.payload]) {\r\n                const newState = { ...state };\r\n                delete newState[action.payload];\r\n                return newState;\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {\r\n    LOADING_CONTENT_SUCCESS,\r\n    LOADING_ORG_INFO,\r\n    UPDATE_ORG_INFO,\r\n    UPDATE_ORG_INFO_FAILED\r\n} from \"../../_actions/index\";\r\n\r\nimport { clearCountsRecursive, formatRecursive, mapCountsToSchema } from \"./_utils/categories\";\r\nimport { ToggleOption } from '../../../Buttons/Toggle';\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport interface OrganizationState {\r\n    categorySchema: ToggleOption | undefined;\r\n    groups: {\r\n        id: string;\r\n        title: string;\r\n    }[] | undefined;\r\n    status: \"initial\" | \"loading\" | \"loaded\" | \"failed\";\r\n}\r\nexport const initialState: OrganizationState = {\r\n    categorySchema: undefined,\r\n    groups: undefined,\r\n    status: \"initial\"\r\n};\r\n\r\n/**\r\n * State concerning the current user's organization including category schema and groups\r\n */\r\nexport default (state: OrganizationState = initialState, action: Action): OrganizationState => {\r\n    switch (action.type) {\r\n        case LOADING_ORG_INFO:\r\n            return {\r\n                ...state,\r\n                status: \"loading\"\r\n            };\r\n        case UPDATE_ORG_INFO:\r\n            return {\r\n                ...state,\r\n                groups: action.payload.groups,\r\n                categorySchema: {\r\n                    displayName: \"##orgCatRoot--1337!\",\r\n                    value: \"##orgCatRoot--1337!\", // Create a unique node to serve as the root of the tree\r\n                    children: formatRecursive(action.payload.schema)\r\n                },\r\n                status: \"loaded\"\r\n            };\r\n        case LOADING_CONTENT_SUCCESS:\r\n            if (\r\n                !!state.categorySchema &&\r\n                !!action.payload.aggregations &&\r\n                !!action.payload.aggregations.countInfo &&\r\n                (\r\n                    action.payload.aggregations.countInfo.section === \"myOrganization\" ||\r\n                    action.payload.aggregations.countInfo.section === \"myContent\" ||\r\n                    action.payload.aggregations.countInfo.section === \"all\"\r\n                )\r\n            ) {\r\n                return {\r\n                    ...state,\r\n                    categorySchema: mapCountsToSchema(\r\n                        action.payload.aggregations,\r\n                        clearCountsRecursive(state.categorySchema),\r\n                        \"categories\"\r\n                    )\r\n                };\r\n            }\r\n            return state;\r\n        case UPDATE_ORG_INFO_FAILED:\r\n            return {\r\n                ...state,\r\n                status: \"failed\"\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {\r\n    ADD_TO_FAVORITES_SUCCESS,\r\n    LOADING_CONTENT_SUCCESS,\r\n    LOADING_USER_INFO,\r\n    REMOVE_FROM_FAVORITES_SUCCESS,\r\n    UPDATE_GROUP_CATEGORIES,\r\n    UPDATE_USER_INFO,\r\n    UPDATE_USER_INFO_FAILED\r\n} from \"../../_actions/index\";\r\n\r\nimport { clearCountsRecursive, formatRecursive, mapCountsToSchema } from \"./_utils/categories\";\r\nimport { ToggleOption } from \"../../../Buttons/Toggle\";\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport interface UserState {\r\n    favorites: {\r\n        [itemId: string]: boolean;\r\n    } | undefined;\r\n    folders: {\r\n        id: string;\r\n        title: string;\r\n    }[] | undefined;\r\n    groups: {\r\n        id: string;\r\n        title: string;\r\n    }[] | undefined;\r\n    groupCategories: {\r\n        [groupId: string]: ToggleOption;\r\n    };\r\n    provisionedContent: string[];\r\n    status: \"initial\" | \"loading\" | \"loaded\" | \"failed\";\r\n}\r\nexport const initialState: UserState = {\r\n    favorites: undefined,\r\n    folders: undefined,\r\n    groups: undefined,\r\n    groupCategories: {},\r\n    provisionedContent: [],\r\n    status: \"initial\"\r\n};\r\n\r\nexport default (state: UserState = initialState, action: Action): UserState => {\r\n    switch (action.type) {\r\n        case LOADING_USER_INFO:\r\n            return {\r\n                ...state,\r\n                status: \"loading\"\r\n            };\r\n        case UPDATE_USER_INFO:\r\n            return {\r\n                ...state,\r\n                favorites: action.payload.favorites,\r\n                folders: action.payload.folders,\r\n                groups: action.payload.groups,\r\n                provisionedContent: action.payload.provisionedContent,\r\n                status: \"loaded\"\r\n            };\r\n        case UPDATE_GROUP_CATEGORIES:\r\n            return {\r\n                ...state,\r\n                groupCategories: {\r\n                    ...state.groupCategories,\r\n                    [action.payload.id]: {\r\n                        value: action.payload.id,\r\n                        children: formatRecursive(action.payload.categorySchema)\r\n                    }\r\n                }\r\n            };\r\n        case LOADING_CONTENT_SUCCESS:\r\n            if (\r\n                !!action.payload.aggregations &&\r\n                !!action.payload.aggregations.countInfo &&\r\n                action.payload.aggregations.countInfo.section === \"myGroups\" &&\r\n                !!action.payload.aggregations.countInfo.group\r\n            ) {\r\n                const id = action.payload.aggregations.countInfo.group.id;\r\n                if (state.groupCategories[id]) {\r\n                    return {\r\n                        ...state,\r\n                        groupCategories: {\r\n                            ...state.groupCategories,\r\n                            [id]: mapCountsToSchema(\r\n                                action.payload.aggregations,\r\n                                clearCountsRecursive(state.groupCategories[id]),\r\n                                \"groupCategories\"\r\n                            )\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            return state;\r\n        case UPDATE_USER_INFO_FAILED:\r\n            return {\r\n                ...state,\r\n                status: \"failed\"\r\n            };\r\n        case ADD_TO_FAVORITES_SUCCESS:\r\n            return {\r\n                ...state,\r\n                favorites: state.favorites ? \r\n                    { ...state.favorites, [action.payload.id]: true } :\r\n                    { [action.payload.id]: true }\r\n            };\r\n        case REMOVE_FROM_FAVORITES_SUCCESS:\r\n            return {\r\n                ...state,\r\n                favorites: state.favorites ?\r\n                    { ...state.favorites, [action.payload.id]: false } :\r\n                    {}\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { CategoryFilter, CustomSection } from \"../../_reducers/settings/config\";\r\n\r\nimport {\r\n    LOADING_CONTENT_SUCCESS,\r\n    LOADING_CUSTOM_SECTION_INFO,\r\n    UPDATE_CUSTOM_SECTION_INFO,\r\n    UPDATE_CUSTOM_SECTION_INFO_FAILED,\r\n    UPDATE_CUSTOM_SECTION_GROUPS\r\n} from \"../../_actions\";\r\n\r\nimport { clearCountsRecursive, formatRecursive, mapCountsToSchema } from \"./_utils/categories\";\r\nimport { ToggleOption } from \"../../../Buttons/Toggle\";\r\nimport { Action, Pojo } from \"../../../Component\";\r\n\r\nexport interface CustomSectionsState {\r\n    groupSchemas: {\r\n        [groupId: string]: ToggleOption;\r\n    };\r\n    groupSort: {\r\n        [groupId: string]: {\r\n            field: string;\r\n            order: string;\r\n        }\r\n    };\r\n    orgSchemas: {\r\n        [orgId: string]: ToggleOption;\r\n    };\r\n    status: \"initial\" | \"loading\" | \"loaded\" | \"failed\";\r\n}\r\n\r\nexport const initialState: CustomSectionsState = {\r\n    groupSchemas: {},\r\n    groupSort: {},\r\n    orgSchemas: {},\r\n    status: \"initial\"\r\n};\r\n\r\nexport default (state: CustomSectionsState = initialState, action: Action) => {\r\n    switch (action.type) {\r\n        case LOADING_CUSTOM_SECTION_INFO:\r\n            return {\r\n                ...state,\r\n                status: \"loading\"\r\n            };\r\n        case UPDATE_CUSTOM_SECTION_GROUPS:\r\n            return {\r\n                ...state,\r\n                groupSort: action.payload.groups.reduce(\r\n                    (acc: CustomSectionsState[\"groupSort\"], current: Pojo) => {\r\n                        acc[current.id] = {\r\n                            field: current.sortField,\r\n                            order: current.sortOrder\r\n                        };\r\n                        return acc;\r\n                    },\r\n                    state.groupSort\r\n                )\r\n            };\r\n        case UPDATE_CUSTOM_SECTION_INFO:\r\n            return {\r\n                ...state,\r\n                orgSchemas: setSchemasByType(\"org\", action.payload, state.orgSchemas),\r\n                groupSchemas: setSchemasByType(\"group\", action.payload, state.groupSchemas),\r\n                status: \"loaded\"\r\n            };\r\n        case UPDATE_CUSTOM_SECTION_INFO_FAILED:\r\n            return {\r\n                ...state,\r\n                status: \"failed\"\r\n            };\r\n        case LOADING_CONTENT_SUCCESS:\r\n            if (action.payload.aggregations) {\r\n                const countInfo = action.payload.aggregations.countInfo;\r\n                if (countInfo.custom && countInfo.custom.filters) {\r\n                    return countInfo.custom.filters\r\n                        .filter((f: string | CategoryFilter) => typeof f === \"object\")\r\n                        .reduce((result: CustomSectionsState, current: CategoryFilter) => {\r\n                            if (current.type === \"group\") {\r\n                                return {\r\n                                    ...state,\r\n                                    groupSchemas: {\r\n                                        ...state.groupSchemas,\r\n                                        [current.id]: mapCountsToSchema(\r\n                                            action.payload.aggregations,\r\n                                            clearCountsRecursive(state.groupSchemas[current.id]),\r\n                                            \"groupCategories\"\r\n                                        )\r\n                                    }\r\n                                };\r\n                            } else if (current.type === \"org\") {\r\n                                return {\r\n                                    ...state,\r\n                                    orgSchemas: {\r\n                                        ...state.orgSchemas,\r\n                                        [current.id]: mapCountsToSchema(\r\n                                            action.payload.aggregations,\r\n                                            clearCountsRecursive(state.orgSchemas[current.id]),\r\n                                            \"categories\"\r\n                                        )\r\n                                    }\r\n                                };\r\n                            }\r\n                            return result;\r\n                        }, state);\r\n                }\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nfunction setSchemasByType(type: string, filterSets: any[], schemas: { [groupId: string]: ToggleOption; }) {\r\n    return filterSets\r\n        .filter((set) => set.type === type)\r\n        .reduce(\r\n            (result, current) => {\r\n                if (!result[current.id]) {\r\n                    result[current.id] = {\r\n                        value: current.id,\r\n                        children: formatRecursive(current.response.categorySchema)\r\n                    };\r\n                }\r\n                return result;\r\n            },\r\n            { ...schemas }\r\n        );\r\n}\r\n","import {\r\n    CHANGE_PAGE_SUCCESS,\r\n    LOADING_CONTENT_SUCCESS,\r\n    LOADING_NEXT_SUCCESS\r\n} from \"../../_actions/index\";\r\nimport { Pojo, Action } from \"../../../Component\";\r\n\r\nexport interface AllOrganizationsState {\r\n    [propName: string]: Pojo;\r\n}\r\n\r\nexport const initialState = {};\r\n\r\nexport default (state: AllOrganizationsState = initialState, action: Action) => {\r\n    switch (action.type) {\r\n        case LOADING_CONTENT_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ...action.payload.search.organizations\r\n            };\r\n        case LOADING_NEXT_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ...action.payload.organizations\r\n            };\r\n        case CHANGE_PAGE_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ...action.payload.organizations\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { UPDATE_FULL_ITEM_DETAILS } from \"../../_actions/index\";\r\nimport { Pojo, Action } from \"../../../Component\";\r\n\r\nexport interface UsersState {\r\n    [username: string]: Pojo;\r\n}\r\n\r\nexport const initialState: UsersState = {};\r\n\r\nexport default (state: UsersState = initialState, action: Action) => {\r\n    switch (action.type) {\r\n        case UPDATE_FULL_ITEM_DETAILS:\r\n            return {\r\n                ...state,\r\n                [action.payload.owner.username]: action.payload.owner\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { combineReducers } from \"../../../Component\";\r\n\r\nimport sidePanel, { SidePanelState, initialState as sidePanelInitial } from \"./sidePanel\";\r\nimport expanded, { ExpandedState, initialState as expandedInitial } from \"./expanded/index\";\r\nimport resultPanel, { ResultPanelState, initialState as resultPanelInitial } from \"./resultPanel\";\r\nimport filters, { FiltersState, initialState as filtersInitial } from \"./filters\";\r\nimport tagsFilter, { TagsFilterState, initialState as tagsFilterInitial } from \"./tagsFilter\";\r\nimport pagination, { PaginationState, initialState as paginationInitialState } from \"./pagination\";\r\n\r\nexport interface UIState {\r\n    sidePanel: SidePanelState;\r\n    expanded: ExpandedState;\r\n    resultPanel: ResultPanelState;\r\n    filters: FiltersState;\r\n    tagsFilter: TagsFilterState;\r\n    pagination: PaginationState;\r\n}\r\nexport const initialState: UIState = {\r\n    sidePanel: sidePanelInitial,\r\n    expanded: expandedInitial,\r\n    resultPanel: resultPanelInitial,\r\n    filters: filtersInitial,\r\n    tagsFilter: tagsFilterInitial,\r\n    pagination: paginationInitialState\r\n};\r\n\r\nexport default combineReducers<UIState>({\r\n    sidePanel,\r\n    expanded,\r\n    resultPanel,\r\n    filters,\r\n    tagsFilter,\r\n    pagination\r\n});\r\n","import {\r\n    VIEW_ITEM_DETAILS,\r\n    CLOSE_DETAILS_PANE,\r\n    CLOSING_DETAILS_PANE,\r\n    VIEW_FILTERS,\r\n    VIEW_SORT,\r\n    LOADING_CONTENT_SUCCESS\r\n} from \"../../_actions/index\";\r\nimport { Action, Pojo } from \"../../../Component\";\r\n\r\nexport interface SidePanelState {\r\n    closing: boolean;\r\n    type: \"sort\" | \"filter\" | \"item\" | \"hidden\";\r\n    item?: Pojo;\r\n}\r\nexport const initialState: SidePanelState = {\r\n    closing: false,\r\n    type: \"hidden\"\r\n};\r\n\r\nexport default (state: SidePanelState = initialState, action: Action): SidePanelState => {\r\n    switch (action.type) {\r\n        case CLOSING_DETAILS_PANE:\r\n            return {\r\n                ...state,\r\n                closing: true\r\n            };\r\n        case CLOSE_DETAILS_PANE:\r\n            return {\r\n                ...state,\r\n                closing: false,\r\n                type: \"hidden\",\r\n                item: undefined\r\n            };\r\n        case VIEW_ITEM_DETAILS:\r\n            return {\r\n                ...state,\r\n                type: \"item\",\r\n                item: action.payload\r\n            };\r\n        case VIEW_FILTERS:\r\n            return {\r\n                ...state,\r\n                type: \"filter\",\r\n                item: undefined\r\n            };\r\n        case VIEW_SORT:\r\n            return {\r\n                ...state,\r\n                type: \"sort\",\r\n                item: undefined\r\n            };\r\n        case LOADING_CONTENT_SUCCESS:\r\n            if (\r\n                state.type === \"item\" &&\r\n                !!state.item &&\r\n                !action.payload.search.results.filter((item: any) => state.item && item.id === state.item.id)[0]\r\n            ) {\r\n                return {\r\n                    ...state,\r\n                    closing: true\r\n                };\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import filters, { ExpandedFiltersState, initialState as initialFiltersState } from \"./filters\";\r\nimport sort, { ExpandedSortState, initialState as initialSortState } from \"./sort\";\r\nimport { combineReducers, Action } from \"../../../../Component\";\r\nimport { MAXIMIZE_DLG, MINIMIZE_DLG, CLOSE_FULLSCREEN_BROWSER } from \"../../../_actions\";\r\n\r\nexport interface ExpandedState {\r\n    filters: ExpandedFiltersState;\r\n    sort: ExpandedSortState;\r\n    maximized: boolean;\r\n    closing: boolean;\r\n}\r\n\r\nexport const initialState: ExpandedState = {\r\n    filters: initialFiltersState,\r\n    sort: initialSortState,\r\n    maximized: false,\r\n    closing: false\r\n};\r\n\r\nexport default combineReducers<ExpandedState>({\r\n    filters,\r\n    sort,\r\n    maximized: (state: boolean, action: Action) => {\r\n        switch (action.type) {\r\n            case MAXIMIZE_DLG:\r\n                return true;\r\n            case MINIMIZE_DLG:\r\n                return false;\r\n            default:\r\n                return state;\r\n        }\r\n    },\r\n    closing: (state: boolean, action: Action) => {\r\n        switch (action.type) {\r\n            case CLOSE_FULLSCREEN_BROWSER:\r\n                return true;\r\n            default:\r\n                return state;\r\n        }\r\n    }\r\n});","import { TOGGLE_EXPANDED_FILTERS } from \"../../../_actions\";\r\nimport { Action } from \"../../../../Component\";\r\n\r\nexport type ExpandedFiltersState = boolean;\r\nexport const initialState: ExpandedFiltersState = false;\r\n\r\nexport default (state: ExpandedFiltersState, action: Action) => {\r\n    switch (action.type) {\r\n        case TOGGLE_EXPANDED_FILTERS:\r\n            return !state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { TOGGLE_EXPANDED_SORT, CHANGE_SORT_FIELD, CHANGE_SORT_ORDER } from \"../../../_actions\";\r\nimport { Action } from \"../../../../Component\";\r\n\r\nexport type ExpandedSortState = boolean;\r\nexport const initialState: ExpandedSortState = false;\r\n\r\nexport default (state: ExpandedSortState, action: Action) => {\r\n    switch (action.type) {\r\n        case TOGGLE_EXPANDED_SORT:\r\n            return !state;\r\n        case CHANGE_SORT_FIELD:\r\n            return !state;\r\n        case CHANGE_SORT_ORDER:\r\n            return !state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {\r\n    LOADING_CONTENT,\r\n    LOADING_CONTENT_FAILED,\r\n    LOADING_CONTENT_SUCCESS,\r\n    LOADING_NEXT_FAILED,\r\n    LOADING_NEXT_SUCCESS,\r\n    LOADING_NEXT,\r\n    CHANGE_RESULT_DISPLAY,\r\n    SHOW_EMPTY_RESULTS\r\n} from \"../../_actions/index\";\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport interface ResultPanelState {\r\n    display: \"list\" | \"table\";\r\n    status: \"loading\" | \"loadingNext\" | \"failed\" | \"success\" | \"empty\";\r\n}\r\nexport const initialState: ResultPanelState = {\r\n    display: \"list\",\r\n    status: \"empty\"\r\n};\r\n\r\nexport default (state: ResultPanelState = initialState, action: Action): ResultPanelState => {\r\n    switch (action.type) {\r\n        case LOADING_CONTENT_FAILED:\r\n            return {\r\n                ...state,\r\n                status: \"failed\"\r\n            };\r\n        case LOADING_CONTENT_SUCCESS:\r\n            return {\r\n                ...state,\r\n                status: \"success\"\r\n            }\r\n        case LOADING_NEXT_FAILED:\r\n            return {\r\n                ...state,\r\n                status: \"failed\"\r\n            };\r\n        case LOADING_NEXT_SUCCESS:\r\n            return {\r\n                ...state,\r\n                status: \"success\"\r\n            };\r\n        case LOADING_CONTENT:\r\n            return {\r\n                ...state,\r\n                status: \"loading\"\r\n            };\r\n        case LOADING_NEXT:\r\n            return {\r\n                ...state,\r\n                status: \"loadingNext\"\r\n            };\r\n        case CHANGE_RESULT_DISPLAY:\r\n            return {\r\n                ...state,\r\n                display: state.display === \"table\" ? \"list\" : \"table\"\r\n            };\r\n        case SHOW_EMPTY_RESULTS:\r\n            return {\r\n                ...state,\r\n                status: \"empty\"\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {\n    UPDATE_MODIFIED_FILTER,\n    UPDATE_CREATED_FILTER,\n    CLEAR_ALL_FILTERS,\n    CHANGE_SEARCH_SECTION\n} from \"../../_actions/index\";\nimport { DateRangeSection } from \"../../../DateSelection/DateRangeSelector/index\";\nimport { Action } from \"../../../Component\";\n\nexport interface FiltersState {\n    createdSection?: DateRangeSection;\n    modifiedSection?: DateRangeSection;\n}\nexport const initialState: FiltersState = {};\n\nexport default (state: FiltersState = initialState, action: Action) => {\n    switch (action.type) {\n        case CLEAR_ALL_FILTERS:\n            return {};\n        case UPDATE_MODIFIED_FILTER:\n            return {\n                ...state,\n                modifiedSection: action.payload.section\n            };\n        case UPDATE_CREATED_FILTER:\n            return {\n                ...state,\n                createdSection: action.payload.section\n            };\n        case CHANGE_SEARCH_SECTION:\n            return {};\n        default:\n            return state;\n    }\n}","import { compose } from \"../../../_utils/index\";\r\nimport { removeDupsOnKey } from \"../../../_utils/index\";\r\nimport {\r\n    CHANGE_SEARCH_SECTION,\r\n    LOADING_TAGS,\r\n    LOADING_TAGS_SUCCESS,\r\n    LOADING_TAGS_FAILED,\r\n    LOADING_CONTENT_SUCCESS,\r\n    UPDATE_TAGS_FILTER_STRING\r\n} from \"../../_actions/index\";\r\nimport { Action } from \"../../../Component\";\r\n\r\nexport interface Tag {\r\n    value: string;\r\n    count: number;\r\n}\r\n\r\nexport interface TagsFilterState {\r\n    allTags: Tag[];\r\n    filterString: string;\r\n    visibleTags: Tag[];\r\n}\r\n\r\nexport const initialState = {\r\n    allTags: [],\r\n    filterString: \"\",\r\n    visibleTags: []\r\n};\r\n\r\nexport default (state: TagsFilterState = initialState, action: Action): TagsFilterState => {\r\n    switch (action.type) {\r\n        case CHANGE_SEARCH_SECTION:\r\n            return {\r\n                ...state,\r\n                filterString: \"\"\r\n            };\r\n        case UPDATE_TAGS_FILTER_STRING:\r\n            return {\r\n                ...state,\r\n                filterString: action.payload,\r\n                visibleTags: state.allTags.filter(\r\n                    (tag: Tag) => action.payload.length === 0 || tag.value.indexOf(action.payload) > -1\r\n                )\r\n            };\r\n        case LOADING_TAGS:\r\n            return state;\r\n        case LOADING_TAGS_SUCCESS:\r\n            if (action.payload.aggregations) {\r\n                const taggregations = (action.payload.aggregations.counts.filter((count: any) => (\r\n                    count.fieldName === \"tags\"\r\n                ))[0]);\r\n                if (taggregations) {\r\n                    const allTags = mixinNewTags(state.allTags, taggregations.fieldValues);\r\n                    return {\r\n                        ...state,\r\n                        allTags,\r\n                        visibleTags: allTags.filter(\r\n                            (tag: Tag) => state.filterString.length === 0 || tag.value.indexOf(state.filterString) > -1\r\n                        )\r\n                    };\r\n                }\r\n            }\r\n            return state;\r\n        case LOADING_TAGS_FAILED:\r\n            return state;\r\n        case LOADING_CONTENT_SUCCESS:\r\n            if (action.payload.aggregations) {\r\n                const taggregations = (action.payload.aggregations.counts.filter((count: any) => (\r\n                    count.fieldName === \"tags\"\r\n                ))[0]);\r\n                if (taggregations) {\r\n                    const allTags = trimAndRemoveDups(taggregations.fieldValues);\r\n                    return {\r\n                        ...state,\r\n                        allTags,\r\n                        visibleTags: allTags.filter(\r\n                            (tag: Tag) => state.filterString.length === 0 || tag.value.indexOf(state.filterString) > -1\r\n                        )\r\n                    };\r\n                }\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n/**\r\n * Mix newly acquired tags into an existing array of tags\r\n * @param currentTags - array of existing tags\r\n * @param newTags - array of new tags\r\n */\r\nfunction mixinNewTags(currentTags: Tag[], newTags: Tag[]): Tag[] {\r\n    return trimAndRemoveDups(currentTags.concat(newTags));\r\n}\r\n\r\n/**\r\n * Removes duplicates from an array of tags based on their value\r\n */\r\nconst removeDuplicateTags = removeDupsOnKey(\"value\");\r\n\r\n/**\r\n * Removes whitespace from the value of tags\r\n * @param input - array of tags from which to remove whitespace\r\n */\r\nconst trimTags = (input: Tag[]) => input.map(({ value, count }: Tag) => ({ value: value.trim(), count }));\r\n\r\n/**\r\n * Sorts tags based on their count in descending order\r\n * @param input - array of tags to sort in descending order\r\n */\r\nconst sortTagsDescending = (input: Tag[]) => input.sort((a: Tag, b: Tag) => b.count - a.count);\r\n\r\n/**\r\n * Trims whitespace off tags and removes duplicates\r\n */\r\nconst trimAndRemoveDups = compose(\r\n    removeDuplicateTags,\r\n    trimTags,\r\n    sortTagsDescending\r\n);\r\n","import { CHANGING_PAGE, CHANGE_PAGE_SUCCESS, CHANGE_PAGE_FAIL } from \"../../_actions/ui/pagination\";\r\nimport { LOADING_CONTENT_SUCCESS } from \"../../_actions\";\r\nimport { Action, Pojo } from \"../../../Component\";\r\n\r\nexport interface PaginationState {\r\n    page: number;\r\n    displayItems: Pojo[];\r\n    status: string;\r\n}\r\n\r\nexport const initialState: PaginationState = {\r\n    page: 1,\r\n    displayItems: [],\r\n    status: \"loading\"\r\n};\r\n\r\nexport default (state: PaginationState = initialState, action: Action) => {\r\n    switch (action.type) {\r\n        case CHANGING_PAGE:\r\n            return {\r\n                ...state,\r\n                status: \"loading\"\r\n            };\r\n        case CHANGE_PAGE_SUCCESS:\r\n            return {\r\n                ...state,\r\n                displayItems: action.payload.displayItems,\r\n                page: action.payload.page,\r\n                status: \"success\"\r\n            };\r\n        case CHANGE_PAGE_FAIL:\r\n            return {\r\n                ...state,\r\n                status: \"failed\"\r\n            };\r\n        case LOADING_CONTENT_SUCCESS:\r\n            return {\r\n                ...state,\r\n                displayItems: action.payload.search.results,\r\n                status: \"success\",\r\n                page: 1\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { ItemTypeMap, ItemType, allItemTypes } from \"../../metadata/item/index\";\r\nimport { curry } from \"../../functional/index\";\r\n\r\nexport interface ItemTypeQOptions {\r\n    allowedItemTypes: ItemType[];\r\n    itemTypeFilter?: { value: string, [propName: string]: any };\r\n    specialItemQ?: string;\r\n}\r\n\r\n/**\r\n * (Curried, arity 3) Returns portion of Q for item types based on the current state of the item browser\r\n * and a mapping of item display types to actual item types\r\n * 1. map of display types to actual item types\r\n * 2. configuration options for item types q\r\n * 3. existing q to append item type query to\r\n */\r\nexport const appendItemTypeQ = curry((\r\n    map: ItemTypeMap,\r\n    options: ItemTypeQOptions,\r\n    q: string[]\r\n): string[] => {\r\n    const itemType = options.itemTypeFilter;\r\n    const allowedItemTypes = options.allowedItemTypes;\r\n    const specialItemQ = options.specialItemQ;\r\n    if (!!itemType) {\r\n        return [\r\n            ...q,\r\n            `${map[itemType.value]} AND (${getAllowedItemTypesQuery(allowedItemTypes)}${\r\n                specialItemQ ?\r\n                    ` OR (${specialItemQ})` :\r\n                    \"\"\r\n            })`\r\n        ];\r\n    } else if (specialItemQ) {\r\n        return [ ...q, `(${getAllowedItemTypesQuery(allowedItemTypes)} OR (${specialItemQ}))` ];\r\n    }\r\n    return [ ...q, getAllowedItemTypesQuery(allowedItemTypes) ];\r\n});\r\n\r\n/**\r\n * Converts an array of allowed item types to a string compatible with the sharing API\r\n * @param allowedItemTypes array\r\n */\r\nfunction getAllowedItemTypesQuery(allowedItemTypes: string[]): string {\r\n    const partialMatches = allItemTypes\r\n        .filter((type) => allowedItemTypes.indexOf(type) === -1)\r\n        .filter((type) => allowedItemTypes.reduce(\r\n            (result: boolean, current: ItemType) => {\r\n                if (type.indexOf(current) > -1) {\r\n                    return true;\r\n                }\r\n                return result;\r\n            },\r\n            false\r\n        ));\r\n    return `((type:\"${allowedItemTypes.join(\"\\\" OR type:\\\"\")}\")${\r\n        partialMatches.length > 0 ?\r\n            ` AND (-type:\"${partialMatches.join(\"\\\" AND -type:\\\"\")}\")` :\r\n            ``\r\n    })`;\r\n}","export * from \"./filter\";\r\nexport * from \"./sort\";\r\nexport * from \"./searchString\";\r\nexport * from \"./section\";\r\nexport * from \"./extent\";\r\n","export * from \"./detailsPane/index\";\r\nexport * from \"./resultPanel/index\";\r\nexport * from \"./expanded\";\r\nexport * from \"./pagination\";","export * from \"./viewItemDetails\";\r\nexport * from \"./closeDetailsPane\";\r\nexport * from \"./viewFilters\";\r\nexport * from \"./viewSort\";\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__186__;","import { Component, H, connect, ComponentProps } from \"../../Component\";\r\nimport Header from \"./Header/index\";\r\nimport Body from \"./Body/index\";\r\nimport Overlay from \"../../Modals/Overlay\";\r\nimport { ItemBrowserStore } from \"../../wrappers/ItemBrowser\";\r\n\r\nexport interface ExpandedProps extends ComponentProps {\r\n    /**\r\n     * Mapping of classes to be applied to the container HTML element.\r\n     * @type {object}\r\n     */\r\n    containerClasses: { [className: string]: boolean };\r\n\r\n    /**\r\n     * Indicates if the `ItemBrowser` is currently being closed.\r\n     * @type {boolean}\r\n     */\r\n    closing: boolean;\r\n\r\n    /**\r\n     * Indicates whether or not the filters are visible.\r\n     * @type {boolean}\r\n     */\r\n    filtersVisible: boolean;\r\n\r\n    /**\r\n     * Indicates whether or not the sort dropdown is visible.\r\n     * @type {boolean}\r\n     */\r\n    sortVisible: boolean;\r\n}\r\n\r\n/**\r\n * Root component for the expanded `ItemBrowser` UI.\r\n */\r\nexport class Expanded extends Component<ExpandedProps> {\r\n    constructor(props: ExpandedProps) {\r\n        super(props);\r\n    }\r\n\r\n    public render(tsx: H) {\r\n        return (\r\n            <div id=\"item-browser-container\" classes={this.props.containerClasses} key=\"ib-expanded\">\r\n                <Overlay\r\n                    closing={this.props.closing}\r\n                    key=\"ib-big-overlay\"\r\n                    scrollable={\r\n                        (\r\n                            !this.props.filtersVisible &&\r\n                            !this.props.sortVisible\r\n                        ) ||\r\n                        !window.matchMedia(\"(max-width: 860px)\").matches\r\n                    }\r\n                >\r\n                    <Header key=\"big-browser-header\" />\r\n                    <Body key=\"big-browser-body\" />\r\n                </Overlay>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps {\r\n    closing: boolean;\r\n    filtersVisible: boolean;\r\n    sortVisible: boolean;\r\n}\r\n\r\n/**\r\n * Root component for the expanded `ItemBrowser` UI connected to an `ItemBrowserStore`.\r\n */\r\nexport default connect<ExpandedProps, ItemBrowserStore, StateProps, {}>(\r\n    (state) => ({\r\n        closing: state.ui.expanded.closing,\r\n        filtersVisible: state.ui.expanded.filters,\r\n        sortVisible: state.ui.expanded.sort\r\n    }),\r\n    () => ({})\r\n)(Expanded);\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__188__;","import * as i18n from \"dojo/i18n!../../nls/resources\";\r\nimport { Component, H, ComponentProps } from \"../../../Component\";\r\nimport SvgButton from \"../../../Buttons/SvgButton\";\r\nimport SectionTabs from \"./SectionTabs\";\r\nimport { connect } from \"../../../Component\";\r\nimport { ItemBrowserStore } from \"../../../wrappers/ItemBrowser\";\r\n\r\nexport interface HeaderProps extends ComponentProps {\r\n    /**\r\n     * Unique key for the component.\r\n     * @type {string}\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * Title for the browser.\r\n     * @type {string}\r\n     */\r\n    dialogTitle: string;\r\n\r\n    /**\r\n     * Layout mode of the `ItemBrowser`.\r\n     * @type {string}\r\n     */\r\n    layoutMode: string;\r\n\r\n    /**\r\n     * Handler for when the user wants to navigate away from the browser.\r\n     * @type {function}\r\n     */\r\n    onBack: () => void;\r\n}\r\n\r\n/**\r\n * Header component for the expanded `ItemBrowser`.\r\n */\r\nexport class Header extends Component<HeaderProps> {\r\n    constructor(props: HeaderProps) {\r\n        super(props);\r\n\r\n        this.handleContract = this.handleContract.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n    }\r\n\r\n    public render(tsx: H) {\r\n        return (\r\n            <header class=\"ib__big-header\">\r\n                <div class=\"ib__big-header-title-section\">\r\n                    <h4 class=\"ib__big-header-title\">{this.props.dialogTitle}</h4>\r\n                    {\r\n                        this.props.layoutMode === \"adjustable\" ?\r\n                            (\r\n                                <SvgButton\r\n                                    key=\"contract-btn\"\r\n                                    focusable={true}\r\n                                    handleClick={this.handleContract}\r\n                                >\r\n                                    <svg\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 32 32\"\r\n                                    >\r\n                                        <path d=\"M20 20h12v3h-6.915L32 29.723v2.109l-.168.168h-2.117L23 25.09V32h-3V20zM0 23h6.915L0 29.723v2.109L.168 32h2.117L9 25.09V32h3V20H0v3zM9 6.91L2.285 0H.168L0 .168v2.109L6.915 9H0v3h12V0H9v6.91zM32 .168L31.832 0h-2.117L23 6.91V0h-3v12h12V9h-6.915L32 2.277V.168z\"/>\r\n                                    </svg>\r\n                                </SvgButton>\r\n                            ) : (\r\n                                <SvgButton\r\n                                    key=\"main-close-btn\"\r\n                                    focusable={true}\r\n                                    handleClick={this.handleClose}\r\n                                    title={i18n.close}\r\n                                >\r\n                                    <svg\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 32 32\"\r\n                                    >\r\n                                        <path d=\"M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z\"/>\r\n                                    </svg>\r\n                                </SvgButton>\r\n                            )\r\n                    }\r\n                </div>\r\n                <SectionTabs key=\"big-browser-section-tabs\" />\r\n            </header>\r\n        );\r\n    }\r\n\r\n    private handleContract() {\r\n        this.props.onBack();\r\n    }\r\n\r\n    private handleClose() {\r\n        this.props.onBack();\r\n    }\r\n}\r\n\r\ninterface StateProps {\r\n    dialogTitle: string;\r\n    layoutMode: string;\r\n    onBack: () => void;\r\n}\r\n\r\ninterface DispatchProps {\r\n}\r\n\r\n/**\r\n * `Header` connected to the `ItemBrowserStore`.\r\n */\r\nexport default connect<HeaderProps, ItemBrowserStore, StateProps, DispatchProps>(\r\n    (state) => ({\r\n        dialogTitle: state.settings.config.dialogTitle,\r\n        layoutMode: state.settings.config.layoutMode,\r\n        onBack: () => {\r\n            if (state.settings.config.onBack) {\r\n                state.settings.config.onBack();\r\n            }\r\n        }\r\n    }),\r\n    () => ({})\r\n)(Header);\r\n","import * as i18n from \"dojo/i18n!../../nls/resources\";\r\nimport { Component, H, connect } from \"../../../Component\";\r\nimport { ItemBrowserState } from \"../../index\";\r\nimport { changeSearchSection, search } from \"../../_actions/index\";\r\nimport ClearNav, { Option } from \"../../../Navigation/TabNav\";\r\nimport { Pojo } from \"../../../Component\";\r\nimport { ItemBrowserStore } from \"../../../wrappers/ItemBrowser\";\r\n\r\nexport interface SectionTabsProps {\r\n    /**\r\n     * Unique key for the component.\r\n     * @type {string}\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * Current user.\r\n     * @type {object}\r\n     */\r\n    user: Pojo | undefined;\r\n\r\n    /**\r\n     * Base sections to display.\r\n     * @type {array}\r\n     */\r\n    baseSections: ItemBrowserState[\"settings\"][\"config\"][\"baseSections\"];\r\n\r\n    /**\r\n     * Additional custom sections.\r\n     * @type {array}\r\n     */\r\n    customSections: ItemBrowserState[\"settings\"][\"config\"][\"customSections\"];\r\n\r\n    /**\r\n     * The name of the current section being viewed.\r\n     * @type {string}\r\n     */\r\n    currentSection: string;\r\n\r\n    /**\r\n     * Handler for when the section is changed.\r\n     * @type {function}\r\n     */\r\n    changeSearchSection: (section: string) => void;\r\n\r\n    /**\r\n     * Handler for when a search is initiated.\r\n     * @type {function}\r\n     */\r\n    search: (updateCounts?: boolean) => void;\r\n}\r\n\r\nexport interface SectionTabsState {\r\n    options: Option[];\r\n}\r\n\r\n/**\r\n * The section tabs for the expanded `ItemBrowser`.\r\n */\r\nexport class SectionTabs extends Component<SectionTabsProps, SectionTabsState> {\r\n    constructor(props: SectionTabsProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            options:\r\n                (this.props.user ?\r\n                    this.props.baseSections :\r\n                    this.props.baseSections.filter((section) => (section === \"livingAtlas\" || section === \"all\"))\r\n                )\r\n                .map((category) => ({\r\n                    value: category,\r\n                    text: i18n.header.sectionTitles[category]\r\n                })).concat(this.props.customSections.map((customSection: any) => ({\r\n                    value: customSection.name,\r\n                    text: customSection.name\r\n                })))\r\n        };\r\n\r\n        this.handleTabSelect = this.handleTabSelect.bind(this);\r\n    }\r\n\r\n    public render(tsx: H) {\r\n        return (\r\n            <ClearNav\r\n                key=\"ib-expanded-nav\"\r\n                options={this.state.options}\r\n                onSelect={this.handleTabSelect}\r\n                selectedOptionValue={this.props.currentSection}\r\n            />\r\n        );\r\n    }\r\n\r\n    private handleTabSelect(section: string) {\r\n        this.props.changeSearchSection(section);\r\n        this.props.search(true);\r\n    }\r\n}\r\n\r\ninterface StateProps {\r\n    user: Pojo;\r\n    baseSections: ItemBrowserState[\"settings\"][\"config\"][\"baseSections\"];\r\n    customSections: ItemBrowserState[\"settings\"][\"config\"][\"customSections\"];\r\n    currentSection: string;\r\n}\r\n\r\ninterface DispatchProps {\r\n    changeSearchSection: (section: string) => void;\r\n    search: (updateCounts?: boolean) => void;\r\n}\r\n\r\n/**\r\n * `SectionTabs` component connected to an `ItemBrowserStore`.\r\n */\r\nexport default connect<SectionTabsProps, ItemBrowserStore, StateProps, DispatchProps>(\r\n    (state) => ({\r\n        user: state.settings.utils.portal.user,\r\n        baseSections: state.settings.config.baseSections,\r\n        customSections: state.settings.config.customSections,\r\n        currentSection: state.parameters.section\r\n    }),\r\n    (dispatch) => ({\r\n        changeSearchSection: (section: string) => { dispatch(changeSearchSection(section)); },\r\n        search: (updateCounts?: boolean) => { dispatch(search(updateCounts)); }\r\n    })\r\n)(SectionTabs);\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__191__;","import * as i18n from \"dojo/i18n!../../nls/resources\";\r\nimport { Component, H, Pojo, connect, ComponentProps } from \"../../../Component\";\r\n\r\nimport FilterArea from \"./FilterArea/index\";\r\nimport InputArea from \"./InputArea/index\";\r\nimport ResultPanel from \"./ResultPanel/index\";\r\nimport SearchArea from \"./SearchArea\";\r\nimport Pager from \"../../../Navigation/Pager\";\r\nimport { changePage } from \"../../_actions/ui/pagination\";\r\nimport LoaderBars from \"../../../Loaders/LoaderBars\";\r\nimport MobileWrap from \"../../../Modals/MobileWrap\";\r\nimport Filters from \"../../SidePanel/FilterPane/Filters\";\r\nimport { toggleExpandedFilters } from \"../../_actions\";\r\nimport { ItemBrowserStore } from \"../../../wrappers/ItemBrowser\";\r\n\r\nexport interface BodyProps extends ComponentProps {\r\n    /**\r\n     * Unique key for the component.\r\n     * @type {string}\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * Visibility of the filters panel.\r\n     * @type {boolean}\r\n     */\r\n    expandedFiltersActive: boolean;\r\n\r\n    /**\r\n     * Current state of the results.\r\n     * @type {string}\r\n     */\r\n    resultStatus: \"loading\" | \"loadingNext\" | \"failed\" | \"success\" | \"empty\";\r\n\r\n    /**\r\n     * Current state of the pagination.\r\n     * @type {string}\r\n     */\r\n    paginationStatus: string;\r\n\r\n    /**\r\n     * Array of items displayed on the current page.\r\n     * @type {array}\r\n     */\r\n    pageDisplayItems: Pojo[];\r\n\r\n    /**\r\n     * The page currently being viewed.\r\n     * @type {number}\r\n     */\r\n    currentPage: number;\r\n\r\n    /**\r\n     * The total number of items being displayed.\r\n     * @type {number}\r\n     */\r\n    itemTotal: number;\r\n\r\n    /**\r\n     * The total number of results to return per query.\r\n     * @type {number}\r\n     */\r\n    resultsPerQuery: number;\r\n\r\n    /**\r\n     * Handler for when the page is changed.\r\n     * @type {function}\r\n     */\r\n    changePage: (page: number) => void;\r\n\r\n    /**\r\n     * Handler for when the state of the filter panel is changed.\r\n     * @type {function}\r\n     */\r\n    toggleExpandedFilters: () => void;\r\n}\r\n\r\n/**\r\n * Body of the expanded `ItemBrowser`.\r\n */\r\nclass Body extends Component<BodyProps> {\r\n    constructor(props: BodyProps) {\r\n        super(props);\r\n\r\n        this.handlePageChange = this.handlePageChange.bind(this);\r\n        this.handleCloseMobileFilters = this.handleCloseMobileFilters.bind(this);\r\n    }\r\n\r\n    public render(tsx: H) {\r\n        // const expandedFilters = this.stateTree.ui.expanded.filters;\r\n        const expandedFilters = this.props.expandedFiltersActive;\r\n        const filterClasses = {\r\n            \"ib__big-section\": true,\r\n            \"ib__big-filters\": true,\r\n            \"ib__big-filters--hidden\": !expandedFilters,\r\n            \"ib__big-filters--visible\": expandedFilters\r\n        };\r\n\r\n        const loading = this.props.resultStatus === \"loading\" ||\r\n            this.props.paginationStatus === \"loading\";\r\n\r\n        const fadedClasses = {\r\n            \"ib__big-wrapper\": true,\r\n            \"ib__big-wrapper--faded\": loading,\r\n            \"ib__big-wrapper--transparent\": loading && this.props.pageDisplayItems.length === 0\r\n        };\r\n\r\n        const numPages = Math.ceil(\r\n            this.props.itemTotal > 10000 ?\r\n            10000 / this.props.resultsPerQuery :\r\n            this.props.itemTotal /\r\n            this.props.resultsPerQuery\r\n        );\r\n    \r\n        return (\r\n            <main class=\"ib__big-body\">\r\n                <SearchArea key=\"ib__big-search-area\" />\r\n                <div class=\"ib__big-row\">\r\n                    <section classes={filterClasses} key=\"fullscreen-filters\">\r\n                        <FilterArea />\r\n                    </section>\r\n                    <div class=\"ib__big-overlay-filters\">\r\n                        <MobileWrap\r\n                            key=\"mobile-filter-wrap\"\r\n                            maxHeight={true}\r\n                            open={this.props.expandedFiltersActive}\r\n                            onClose={this.handleCloseMobileFilters}\r\n                            title=\"Filter\"\r\n                            footer={\r\n                                <button\r\n                                    class=\"ib__big-filter-results-btn\"\r\n                                    onclick={this.handleCloseMobileFilters}\r\n                                >\r\n                                    {i18n.viewResults}\r\n                                </button>\r\n                            }\r\n                        >\r\n                            <Filters key=\"mobile-filters\"/>\r\n                        </MobileWrap>\r\n                    </div>\r\n                    <section class=\"ib__big-section ib__big-results\" key=\"results-section\">\r\n                        <div classes={fadedClasses}>\r\n                            <InputArea key=\"big-browser-input-area\" />\r\n                            <ResultPanel key=\"big-browser-result-panel\" />\r\n                            {\r\n                                numPages > 1 ?\r\n                                <Pager\r\n                                    key=\"big-browser-pager\"\r\n                                    onPageChange={this.handlePageChange}\r\n                                    numPages={numPages}\r\n                                    currentPage={this.props.currentPage}\r\n                                    paginationLimitReached={this.props.itemTotal > 10000}\r\n                                /> :\r\n                                null\r\n                            }\r\n                        </div>\r\n                        {\r\n                            loading ? (\r\n                                <div class=\"ib-ex__load-container\" key=\"ib-ex__load-container\">\r\n                                    <LoaderBars key=\"item-ex-loading\" />\r\n                                </div>\r\n                            ) : null\r\n                        }\r\n                    </section>\r\n                </div>\r\n            </main>\r\n        );\r\n    }\r\n\r\n    private handlePageChange(page: number) {\r\n        this.props.changePage(page);\r\n    }\r\n\r\n    private handleCloseMobileFilters() {\r\n        this.props.toggleExpandedFilters();\r\n    }\r\n}\r\n\r\ninterface StateProps {\r\n    expandedFiltersActive: boolean;\r\n    resultStatus: \"loading\" | \"loadingNext\" | \"failed\" | \"success\" | \"empty\";\r\n    paginationStatus: string;\r\n    pageDisplayItems: Pojo[];\r\n    currentPage: number;\r\n    itemTotal: number;\r\n    resultsPerQuery: number;\r\n}\r\n\r\ninterface DispatchProps {\r\n    changePage: (page: number) => void;\r\n    toggleExpandedFilters: () => void;\r\n}\r\n\r\n/**\r\n * `Body` connected to an `ItemBrowserStore`.\r\n */\r\nexport default connect<BodyProps, ItemBrowserStore, StateProps, DispatchProps>(\r\n    (state) => ({\r\n        expandedFiltersActive: state.ui.expanded.filters,\r\n        resultStatus: state.ui.resultPanel.status,\r\n        paginationStatus: state.ui.pagination.status,\r\n        pageDisplayItems: state.ui.pagination.displayItems,\r\n        currentPage: state.ui.pagination.page,\r\n        itemTotal: state.parameters.nextQuery.total,\r\n        resultsPerQuery: state.settings.config.resultsPerQuery\r\n    }),\r\n    (dispatch) => ({\r\n        changePage: (page: number) => { dispatch(changePage(page)); },\r\n        toggleExpandedFilters: () => { dispatch(toggleExpandedFilters()); }\r\n    })\r\n)(Body);\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__193__;","import * as i18n from \"dojo/i18n!../../nls/resources\";\r\nimport { Component, H, connect } from \"../../../Component\";\r\nimport { ItemBrowserState } from \"../../index\";\r\n\r\nimport IconButton from \"../../../Buttons/IconButton\";\r\n\r\nimport {\r\n    search,\r\n    changeSearchString,\r\n    changeSortField,\r\n    changeSortOrder,\r\n    toggleExpandedFilters,\r\n    toggleExpandedSort\r\n} from \"../../_actions/index\";\r\nimport SortDropdown, { SortField, SortOrder } from \"../../../Dropdowns/SortDropdown\";\r\nimport { ItemBrowserStore } from \"../../../wrappers/ItemBrowser\";\r\n\r\nexport interface SearchAreaProps {\r\n    /**\r\n     * Unique key for the component.\r\n     * @type {string}\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * Optional placeholder text for the search input.\r\n     * @type {string}\r\n     */\r\n    searchPlaceholderText: string | undefined;\r\n\r\n    /**\r\n     * The name of the currently active section.\r\n     * @type {string}\r\n     */\r\n    section: string;\r\n\r\n    /**\r\n     * The current search string.\r\n     * @type {string}\r\n     */\r\n    searchString: string;\r\n\r\n    /**\r\n     * The previous search string.\r\n     * @type {string}\r\n     */\r\n    previousSearchString: string;\r\n\r\n    /**\r\n     * The visibility of the sort dropdown.\r\n     * @type {boolean}\r\n     */\r\n    sortActive: boolean;\r\n\r\n    /**\r\n     * The current sort field.\r\n     * @type {string}\r\n     */\r\n    sortField: SortField;\r\n\r\n    /**\r\n     * The current sort order.\r\n     * @type {string}\r\n     */\r\n    sortOrder: SortOrder;\r\n\r\n    /**\r\n     * The visibility of the filter panel.\r\n     * @type {boolean}\r\n     */\r\n    expandedFiltersActive: boolean;\r\n\r\n    /**\r\n     * Handler for when the filter panel visibility is toggled.\r\n     * @type {function}\r\n     */\r\n    toggleExpandedFilters: () => void;\r\n\r\n    /**\r\n     * Handler for when the sort dropdown visibility is toggled.\r\n     * @type {function}\r\n     */\r\n    toggleExpandedSort: () => void;\r\n\r\n    /**\r\n     * Handler for when the sort field is changed.\r\n     * @type {function}\r\n     */\r\n    changeSortField: (field: SortField) => void;\r\n\r\n    /**\r\n     * Handler for when the sort order is changed.\r\n     * @type {function}\r\n     */\r\n    changeSortOrder: (order: SortOrder) => void;\r\n\r\n    /**\r\n     * Handler for when the search string is changed.\r\n     * @type {function}\r\n     */\r\n    changeSearchString: (newString: string) => void;\r\n\r\n    /**\r\n     * Handler for when a search is initiated.\r\n     * @type {function}\r\n     */\r\n    search: (updateCounts?: boolean) => void;\r\n}\r\n\r\nconst defaultOptions = [\"relevance\", \"title\", \"owner\", \"created\", \"modified\", \"numviews\"];\r\nconst availableOptionsMap = {\r\n    myContent: [ \"modified\", \"title\" ],\r\n    myFavorites: [ \"relevance\", \"modified\", \"title\", \"numviews\", \"owner\" ],\r\n    myGroups: [ \"relevance\", \"modified\", \"title\", \"numviews\", \"owner\" ],\r\n    myOrganization: [ \"relevance\", \"modified\", \"title\", \"numviews\", \"owner\" ],\r\n    livingAtlas: [ \"relevance\", \"modified\", \"title\", \"numviews\", \"owner\" ],\r\n    all: [ \"relevance\", \"title\", \"owner\", \"modified\", \"numviews\" ]\r\n};\r\n\r\n/**\r\n * Search area for the expanded `ItemBrowser`.\r\n */\r\nexport class SearchArea extends Component<SearchAreaProps> {\r\n    constructor(props: SearchAreaProps) {\r\n        super(props);\r\n\r\n        this.handleToggleFilters = this.handleToggleFilters.bind(this);\r\n        this.handleSearchChange = this.handleSearchChange.bind(this);\r\n        this.handleSearchKeyDown = this.handleSearchKeyDown.bind(this);\r\n        this.handleSortFieldChange = this.handleSortFieldChange.bind(this);\r\n        this.handleSortOrderChange = this.handleSortOrderChange.bind(this);\r\n        this.handleSortClick = this.handleSortClick.bind(this);\r\n    }\r\n\r\n    public render(tsx: H) {\r\n        const placeholder = this.props.searchPlaceholderText ?\r\n            this.props.searchPlaceholderText :\r\n            i18n.searchPlaceholders.generic;\r\n\r\n        const section = this.props.section;\r\n        let availableOptions =\r\n            availableOptionsMap[section] ?\r\n            [ ...availableOptionsMap[section] ] :\r\n            [ ...defaultOptions ];\r\n        return (\r\n            <div class=\"ib-ex-search-area__container\">\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\r\n                    <path\r\n                        d=\"M19.205 18.295l-7.036-7.035A6.874 6.874 0 0 0 6.875 0 6.874 6.874 0 0 0 0 6.875a6.874 6.874 0 0 0 11.286 5.27l7.035 7.034.884-.884zM1.25 6.875A5.632 5.632 0 0 1 6.875 1.25 5.632 5.632 0 0 1 12.5 6.875 5.632 5.632 0 0 1 6.875 12.5 5.632 5.632 0 0 1 1.25 6.875z\"\r\n                        fill=\"#595959\"\r\n                        fill-rule=\"nonzero\"\r\n                    />\r\n                </svg>\r\n                <input\r\n                    id=\"ib-ex-search-area__input\"\r\n                    class=\"ib-ex-search-area__input\"\r\n                    type=\"search\"\r\n                    oninput={this.handleSearchChange}\r\n                    onkeydown={this.handleSearchKeyDown}\r\n                    value={this.props.searchString}\r\n                    placeholder={placeholder}\r\n                    title={i18n.header.search}\r\n                    aria-label={i18n.header.search}\r\n                />\r\n                <div class=\"ib-ex-search-area__btn-section\">\r\n                    <SortDropdown\r\n                        active={this.props.sortActive}\r\n                        key=\"ib-ex-sort-dropdown\"\r\n                        field={this.props.sortField}\r\n                        order={this.props.sortOrder}\r\n                        availableFields={availableOptions}\r\n                        onFieldChange={this.handleSortFieldChange}\r\n                        onOrderChange={this.handleSortOrderChange}\r\n                        onClick={this.handleSortClick}\r\n                    />\r\n                    <IconButton\r\n                        key=\"ib-ex-filter-btn\"\r\n                        active={this.props.expandedFiltersActive}\r\n                        handleClick={this.handleToggleFilters}\r\n                    >\r\n                        <div class=\"drp-sort__btn-body\">\r\n                            <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\">\r\n                                <g stroke=\"none\" stroke-width=\"1\">\r\n                                    <g id=\"filter-sliders-1px-16\">\r\n                                        <path d=\"M7,13 L0,13 L0,12 L7,12 L7,10 L8,10 L8,15 L7,15 L7,13 Z M12,8 L0,8 L0,7 L12,7 L12,5 L13,5 L13,10 L12,10 L12,8 Z M2,3 L0,3 L0,2 L2,2 L2,0 L3,0 L3,5 L2,5 L2,3 Z M4,2 L16,2 L16,3 L4,3 L4,2 Z M14,7 L16,7 L16,8 L14,8 L14,7 Z M9,12 L16,12 L16,13 L9,13 L9,12 Z\" />\r\n                                    </g>\r\n                                </g>\r\n                            </svg>\r\n                            <span class=\"drp-sort__btn-label\">{i18n.filterPane.filter}</span>\r\n                        </div>\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private handleToggleFilters() {\r\n        this.props.toggleExpandedFilters();\r\n    }\r\n\r\n    private handleSearchChange(e: any) {\r\n        this.props.changeSearchString(e.target.value);\r\n        if (e.target.value === \"\" && this.props.previousSearchString !== \"\") {\r\n            this.props.search(true);\r\n        }\r\n    }\r\n\r\n    private handleSearchKeyDown(e: KeyboardEvent) {\r\n        if (e.key === \"Enter\") {\r\n            this.props.search(true);\r\n        }\r\n    }\r\n\r\n    private handleSortFieldChange(field: SortField) {\r\n        this.props.changeSortField(field);\r\n        this.props.search();\r\n    }\r\n\r\n    private handleSortOrderChange(order: SortOrder) {\r\n        this.props.changeSortOrder(order);\r\n        this.props.search();\r\n    }\r\n\r\n    private handleSortClick() {\r\n        this.props.toggleExpandedSort();\r\n    }\r\n}\r\n\r\ninterface StateProps {\r\n    searchPlaceholderText: string | undefined;\r\n    section: ItemBrowserState[\"parameters\"][\"section\"];\r\n    searchString: string;\r\n    previousSearchString: string;\r\n    sortActive: boolean;\r\n    sortField: SortField;\r\n    sortOrder: SortOrder;\r\n    expandedFiltersActive: boolean;\r\n}\r\n\r\ninterface DispatchProps {\r\n    toggleExpandedFilters: () => void;\r\n    toggleExpandedSort: () => void;\r\n    changeSortField: (field: SortField) => void;\r\n    changeSortOrder: (order: SortOrder) => void;\r\n    changeSearchString: (newString: string) => void;\r\n    search: (updateCounts?: boolean) => void;\r\n}\r\n\r\n/**\r\n * `SearchArea` component connected to an `ItemBrowserStore`.\r\n */\r\nexport default connect<SearchAreaProps, ItemBrowserStore, StateProps, DispatchProps>(\r\n    (state) => ({\r\n        searchPlaceholderText: state.settings.config.searchPlaceholderText,\r\n        section: state.parameters.section,\r\n        searchString: state.parameters.searchString.current,\r\n        previousSearchString: state.parameters.searchString.previous,\r\n        sortActive: state.ui.expanded.sort,\r\n        sortField: state.parameters.sort.field,\r\n        sortOrder: state.parameters.sort.order,\r\n        expandedFiltersActive: state.ui.expanded.filters\r\n    }),\r\n    (dispatch) => ({\r\n        toggleExpandedFilters: () => { dispatch(toggleExpandedFilters()); },\r\n        toggleExpandedSort: () => { dispatch(toggleExpandedSort()); },\r\n        changeSortField: (field: SortField) => { dispatch(changeSortField(field)); },\r\n        changeSortOrder: (order: SortOrder) => { dispatch(changeSortOrder(order)); },\r\n        changeSearchString: (newString: string) => { dispatch(changeSearchString(newString)); },\r\n        search: (updateCounts?: boolean) => { dispatch(search(updateCounts)); }\r\n    })\r\n)(SearchArea);\r\n","import { H } from \"../../../../Component\";\r\nimport Filters from \"../../../SidePanel/FilterPane/Filters\";\r\n\r\n/**\r\n * Filters for the expanded `ItemBrowser`.\r\n */\r\nexport default ({}, tsx: H) => <Filters key=\"big-browser-filters\" />;","module.exports = __WEBPACK_EXTERNAL_MODULE__196__;","module.exports = __WEBPACK_EXTERNAL_MODULE__197__;","module.exports = __WEBPACK_EXTERNAL_MODULE__198__;","module.exports = __WEBPACK_EXTERNAL_MODULE__199__;","module.exports = __WEBPACK_EXTERNAL_MODULE__200__;","module.exports = __WEBPACK_EXTERNAL_MODULE__201__;","module.exports = __WEBPACK_EXTERNAL_MODULE__202__;","module.exports = __WEBPACK_EXTERNAL_MODULE__203__;","module.exports = __WEBPACK_EXTERNAL_MODULE__204__;","import { ItemBrowserState } from \"../../../index\";\r\n\r\nexport function getFilters(state: ItemBrowserState): string[] {\r\n    const user = state.settings.utils.portal.user;\r\n    const anonymous = !user;\r\n    const publicUser = !anonymous && !user.orgId;\r\n    const orgUser = !anonymous && !publicUser;\r\n    let filters: string[];\r\n    if (orgUser) {\r\n        filters = getOrgUserFilters(state);\r\n    } else if (publicUser) {\r\n        filters = getPublicUserFilters(state);\r\n    } else {\r\n        filters = getAnonFilters(state);\r\n    }\r\n    return removeItemTypeFilter(\r\n        state.settings.config.disableItemTypeFilters,\r\n        filters\r\n    );\r\n}\r\n\r\nfunction removeItemTypeFilter(disableItemTypeFilters: boolean, filters: string[]) {\r\n    const itemTypeIndex = filters.indexOf(\"itemType\");\r\n    if (disableItemTypeFilters && itemTypeIndex > -1) {\r\n        filters.splice(itemTypeIndex, 1);\r\n    }\r\n    return filters;\r\n}\r\n\r\nfunction getOrgUserFilters(state: ItemBrowserState): string[] {\r\n    switch (state.parameters.section) {\r\n        case \"myContent\":\r\n            return [ \"folder\", \"orgCategories\", \"itemType\", \"modified\", \"created\", \"tags\", \"shared\", \"status\" ];\r\n        case \"myFavorites\":\r\n            return [ \"itemType\", \"modified\", \"created\", \"tags\", \"shared\", \"status\" ];\r\n        case \"myGroups\":\r\n            return [ \"groupCategories\", \"group\", \"itemType\", \"modified\", \"created\", \"tags\", \"shared\", \"status\" ];\r\n        case \"myOrganization\":\r\n            return [ \"orgCategories\", \"itemType\", \"modified\", \"created\", \"tags\", \"shared\", \"status\" ];\r\n        case \"livingAtlas\":\r\n            return [ \"livingAtlasCategories\", \"livingAtlasRegion\", \"itemType\", \"tags\", \"status\" ];\r\n        case \"all\":\r\n            return [ \"itemType\", \"modified\", \"shared\", \"status\" ];\r\n        default:\r\n            return getCustomSectionFilters(state);\r\n    }\r\n}\r\n\r\nfunction getPublicUserFilters(state: ItemBrowserState): string[] {\r\n    switch (state.parameters.section) {\r\n        case \"myContent\":\r\n            return [ \"folder\", \"itemType\", \"modified\", \"created\", \"tags\", \"shared\" ];\r\n        case \"myFavorites\":\r\n            return [ \"itemType\", \"modified\", \"created\", \"tags\", \"status\" ];\r\n        case \"myGroups\":\r\n            return [ \"groupCategories\", \"group\", \"itemType\", \"modified\", \"tags\", \"created\" ];\r\n        case \"livingAtlas\":\r\n            return [ \"livingAtlasCategories\", \"livingAtlasRegion\", \"itemType\", \"tags\", \"status\" ];\r\n        case \"all\":\r\n            return [ \"itemType\", \"modified\", \"status\" ];\r\n        default:\r\n            return getCustomSectionFilters(state);\r\n    }\r\n}\r\n\r\nfunction getAnonFilters(state: ItemBrowserState): string[] {\r\n    switch (state.parameters.section) {\r\n        case \"livingAtlas\":\r\n            return [ \"livingAtlasCategories\", \"livingAtlasRegion\", \"itemType\", \"tags\", \"status\" ];\r\n        case \"all\":\r\n            return [ \"itemType\", \"modified\", \"status\" ];\r\n        default:\r\n            return getCustomSectionFilters(state);\r\n    }\r\n}\r\n\r\nfunction getCustomSectionFilters(state: ItemBrowserState): string[] {\r\n    return state.settings.config.customSections.reduce((result: any[], current: any) => {\r\n        if (current.name === state.parameters.section && !!current.filters) {\r\n            return current.filters;\r\n        }\r\n        return result;\r\n    }, [ \"itemType\", \"modified\", \"shared\" ]);\r\n}\r\n","import { Component, H } from \"../../../Component\";\r\nimport { CustomFilterTree } from \"../../_reducers/settings/config\";\r\nimport Toggle from \"../../../Buttons/Toggle\";\r\nimport AccordionDropdown from \"../../../Dropdowns/AccordionDropdown\";\r\n\r\nexport interface CustomFilterProps {\r\n    /**\r\n     * A unique key for the component.\r\n     * @type {string}\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * A custom tree of filters.\r\n     * @type {object}\r\n     */\r\n    filter: CustomFilterTree;\r\n\r\n    /**\r\n     * Index of the custom filter.\r\n     * @type {number}\r\n     */\r\n    index: number;\r\n\r\n    /**\r\n     * Handler for when the custom filter is cleared.\r\n     * @type {function}\r\n     */\r\n    onClear: (index: number) => void;\r\n\r\n    /**\r\n     * Handler for when a filter is selected.\r\n     * @type {function}\r\n     */\r\n    onClick: (index: number, value?: string, text?: string) => void;\r\n\r\n    /**\r\n     * The currently selected option in the filter.\r\n     * @type {string}\r\n     */\r\n    selectedOption?: string;\r\n}\r\n\r\n/**\r\n * A filter accordion for custom filters.\r\n */\r\nexport default class CustomFilterAccordion extends Component<CustomFilterProps> {\r\n    constructor(props: CustomFilterProps) {\r\n        super(props);\r\n\r\n        this.handleClear = this.handleClear.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n\r\n    public render(tsx: H) {\r\n        const filter = this.props.filter;\r\n\r\n        return (\r\n            <AccordionDropdown\r\n                key={`${filter.displayName}-filter-accordion`}\r\n                clearable={false}\r\n                onClear={this.handleClear}\r\n                title={filter.displayName}\r\n            >\r\n                <ul\r\n                    aria-label={filter.displayName}\r\n                    id={`${filter.displayName}-filter-accordion-tree`}\r\n                    class=\"ftr-custom__tree\"\r\n                    role=\"tree\"\r\n                >\r\n                    {\r\n                        filter.children ?\r\n                        filter.children.map((option: CustomFilterTree) => (\r\n                            <Toggle\r\n                                key={option.value}\r\n                                value={option.value}\r\n                                name={option.displayName}\r\n                                onToggleClick={this.handleClick}\r\n                                selectedToggle={this.props.selectedOption}\r\n                                childOptions={option.children}\r\n                            />\r\n                        )) : null\r\n                    }\r\n                </ul>\r\n            </AccordionDropdown>\r\n        );\r\n    }\r\n\r\n    private handleClear() {\r\n        this.props.onClear(this.props.index);\r\n    }\r\n\r\n    private handleClick(value: string, text?: string) {\r\n        if (value === this.props.selectedOption) {\r\n            this.props.onClick(this.props.index, undefined);\r\n        } else {\r\n            this.props.onClick(\r\n                this.props.index,\r\n                value,\r\n                text\r\n            );\r\n        }\r\n    }\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__207__;","import * as i18n from \"dojo/i18n!../../../nls/resources\";\r\nimport { Component, H, connect } from \"../../../../Component\";\r\nimport { ItemBrowserStore } from \"../../../../wrappers/ItemBrowser\";\r\nimport ActiveFilters from \"../../../InputArea/ActiveFilters\";\r\n\r\nexport interface InputAreaProps {\r\n    /**\r\n     * Unique key for the component.\r\n     * @type {string}\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * Name of the item type being searching for, if applicable.\r\n     * @type {string}\r\n     */\r\n    itemName: string | undefined;\r\n\r\n    /**\r\n     * Total number of items returned from the query.\r\n     * @type {number}\r\n     */\r\n    itemTotal: number;\r\n\r\n    /**\r\n     * Array of informational static filters to display in the UI.\r\n     * @type {array}\r\n     */\r\n    staticFilters: string[] | undefined;\r\n}\r\n\r\n/**\r\n * The input area for the expanded `ItemBrowser`.\r\n */\r\nexport class InputArea extends Component<InputAreaProps> {\r\n    public render(tsx: H) {\r\n        const resultCount = `${\r\n            this.props.itemTotal.toLocaleString()} ${this.props.itemName ? this.props.itemName : i18n.resultCount\r\n        }`;\r\n\r\n        return (\r\n            <div class=\"ib-ex-input__container\" key=\"ib-result-count-container\">\r\n                <span class=\"ib-ex-input-area__result-count\">{resultCount}</span>\r\n                <ActiveFilters\r\n                    staticFilters={this.props.staticFilters}\r\n                    key=\"ib-ex__active-filters\"\r\n                    theme=\"dark\"\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps {\r\n    itemName: string | undefined;\r\n    itemTotal: number;\r\n    staticFilters: string[] | undefined;\r\n}\r\n\r\n/**\r\n * `InputArea` connected to the `ItemBrowserStore`.\r\n */\r\nexport default connect<InputAreaProps, ItemBrowserStore, StateProps, {}>(\r\n    (state) => ({\r\n        itemName: state.settings.config.itemName,\r\n        itemTotal: state.parameters.nextQuery.total,\r\n        staticFilters: state.settings.config.staticFilters\r\n    }),\r\n    () => ({})\r\n)(InputArea);\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__209__;","import * as i18n from \"dojo/i18n!../../../nls/resources\";\r\nimport { Component, H, connect, ComponentProps } from \"../../../../Component\";\r\nimport { ItemBrowserStore } from \"../../../../wrappers/ItemBrowser\";\r\n\r\nimport ItemList from \"./ItemList\";\r\n\r\nexport interface ResultPanelProps extends ComponentProps {\r\n    /**\r\n     * Current status of the results. Options are: `\"loading\"`, `\"loadingNext\"`, `\"failed\"`, `\"success\"` and `\"empty\"`.\r\n     * @type {string}\r\n     */\r\n    resultStatus: \"loading\" | \"loadingNext\" | \"failed\" | \"success\" | \"empty\";\r\n\r\n    /**\r\n     * Current status of the page. Options are `\"loading\"`, `\"success\"` and `\"failed\"`.\r\n     * @type {string}\r\n     */\r\n    pageStatus: string;\r\n}\r\n\r\n/**\r\n * Panel of results for the expanded `ItemBrowser`.\r\n */\r\nexport class ResultPanel extends Component<ResultPanelProps> {\r\n    public render(tsx: H) {\r\n        if (\r\n            (this.props.resultStatus === \"success\" || this.props.resultStatus === \"loading\") &&\r\n            (this.props.pageStatus === \"success\" || this.props.pageStatus === \"loading\")\r\n        ) {\r\n            return <ItemList key=\"ib-ex-item-list\" />;\r\n        }\r\n        return (\r\n            <div\r\n                key=\"request-error\"\r\n                class=\"ib__results\"\r\n            >\r\n                <div class=\"ib-results__message-container\">\r\n                    <span class=\"ib-results__message\">\r\n                        {i18n.results.requestError}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps {\r\n    resultStatus: \"loading\" | \"loadingNext\" | \"failed\" | \"success\" | \"empty\";\r\n    pageStatus: string;\r\n}\r\n\r\n/**\r\n * `ResultPanel` connected to the `ItemBrowserStore`.\r\n */\r\nexport default connect<ResultPanelProps, ItemBrowserStore, StateProps, {}>(\r\n    (state) => ({\r\n        resultStatus: state.ui.resultPanel.status,\r\n        pageStatus: state.ui.pagination.status\r\n    }),\r\n    () => ({})\r\n)(ResultPanel);\r\n","import * as i18n from \"dojo/i18n!../../../nls/resources\";\r\nimport { Component, H, connect } from \"../../../../Component\";\r\nimport { ItemBrowserState } from \"../../../_reducers\";\r\nimport AnalysisCard from \"../../../../ItemCards/AnalysisCard\";\r\nimport { getCurrentPortal } from \"../../../_utils\";\r\nimport { ItemBrowserStore } from \"../../../../wrappers/ItemBrowser\";\r\n\r\nexport interface ItemListProps {\r\n    /**\r\n     * Unique key for the component.\r\n     * @type {string}\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * State tree of the `ItemBrowser`.\r\n     * @type {object}\r\n     */\r\n    stateTree: ItemBrowserState;\r\n}\r\n\r\n/**\r\n * List of items for the expanded `ItemBrowser`.\r\n */\r\nclass ItemList extends Component<ItemListProps> {\r\n    public render(tsx: H) {\r\n        const portal = getCurrentPortal(this.props.stateTree);\r\n\r\n        const items = this.props.stateTree.ui.pagination.displayItems.map((item) => {\r\n\r\n            const organization = (\r\n                item.contentStatus === \"public_authoritative\" &&\r\n                this.props.stateTree.results.allOrganizations[item.orgId]\r\n            ) ? this.props.stateTree.results.allOrganizations[item.orgId] : undefined;\r\n\r\n            return (\r\n                <AnalysisCard\r\n                    key={item.id}\r\n                    item={item}\r\n                    organization={organization}\r\n                    portal={portal}\r\n                    mainAction={this.props.stateTree.settings.config.onSelect}\r\n                    mainActionTitle={this.props.stateTree.settings.config.mainActionTitle}\r\n                    customActions={this.props.stateTree.settings.config.customActions}\r\n                    sortField={this.props.stateTree.parameters.sort.field}\r\n                />\r\n            );\r\n        });\r\n\r\n        if (items.length > 0) {\r\n            return (\r\n                <div key={this.props.key} class=\"ib-ex-results__item-list\">\r\n                    {items}\r\n                </div>\r\n            );\r\n        }\r\n        return (\r\n            <div key={this.props.key} class=\"ib-ex-results__item-list\">\r\n                <div class=\"ib-ex-results__no-items-container\">\r\n                    <div class=\"ib-ex-results__no-items-centered\">\r\n                        <svg viewBox=\"0 0 256 256\" width=\"256\">\r\n                            <path\r\n                                fill=\"#ccc\"\r\n                                d=\"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z\"\r\n                            >\r\n                            </path>\r\n                        </svg>\r\n                        <p class=\"ib-ex-results__no-items-text\">{i18n.results.noItemsFound}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps {\r\n    stateTree: ItemBrowserState;\r\n}\r\n\r\n/**\r\n * `ItemList` connected to an `ItemBrowserStore`.\r\n */\r\nexport default connect<ItemListProps, ItemBrowserStore, StateProps, {}>(\r\n    (state) => ({ stateTree: state }),\r\n    () => ({})\r\n)(ItemList);\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__212__;","import * as i18n from \"dojo/i18n!../nls/resources\";\nimport { Component, connect, H } from \"../../Component\";\nimport { ItemBrowserState } from \"../index\";\nimport {\n    closeDetailsPane,\n    CLOSE_DETAILS_PANE\n} from \"../_actions/index\";\n\nimport FilterPane from \"./FilterPane/index\";\nimport ItemDetailsPane from \"./ItemDetailsPane/index\";\nimport SortPane from \"./SortPane/index\";\nimport PanelBody from \"./PanelBody\";\nimport { ItemBrowserStore } from \"../../wrappers/ItemBrowser\";\n\nexport interface SidePanelProps {\n    /**\n     * Unique key for the component.\n     * @type {string}\n     */\n    key: string;\n\n    /**\n     * Indicates if the side panel is closing.\n     * @type {boolean}\n     */\n    closing: boolean;\n\n    /**\n     * Type of the `ItemBrowser` details pane.\n     * @type {string}\n     */\n    detailsPaneType: ItemBrowserState[\"settings\"][\"config\"][\"detailsPaneType\"];\n\n    /**\n     * Type of the `ItemBrowser` side panel.\n     * @type {string}\n     */\n    sidePanelType: ItemBrowserState[\"ui\"][\"sidePanel\"][\"type\"];\n\n    /**\n     * Item currently shown in the `ItemBrowser` side panel.\n     * @type {object}\n     */\n    sidePanelItem: ItemBrowserState[\"ui\"][\"sidePanel\"][\"item\"];\n\n    /**\n     * Handler for when the details panel is closed.\n     * @type {function}\n     */\n    closeDetailsPane: () => void;\n\n    /**\n     * Handler for closing the details panel instantly (without animation).\n     * @type {function}\n     */\n    closeDetailsPaneImmediately: () => void;\n}\n\nexport interface SidePanelState {\n    container?: Element;\n}\n\nclass SidePanel extends Component<SidePanelProps, SidePanelState> {\n    constructor(props: SidePanelProps) {\n        super(props);\n\n        this.handleCloseDetailsPane = this.handleCloseDetailsPane.bind(this);\n    }\n\n    public render(tsx: H) {\n        const displayType = this.props.detailsPaneType;\n        const paneType = this.props.sidePanelType;\n        const closing = this.props.closing;\n\n        const containerClasses = {\n            \"ib-side__container--fade-in\": !closing,\n            \"ib-side__container--fade-out\": closing,\n            \"ib-side__container--flyout\": displayType === \"flyout\",\n            \"ib-side__container--flyover\": displayType === \"flyover\"\n        };\n\n        const contentClasses = {\n            // flyout\n            \"ib-side__content--flyout\": displayType === \"flyout\",\n            \"ib-side__content--in-right\": !closing && displayType === \"flyout\",\n            \"ib-side__content--out-left\": closing && displayType === \"flyout\",\n            \n            // flyover\n            \"ib-side__content--flyover\": displayType === \"flyover\",\n            \"ib-side__content--in-left\": !closing && displayType === \"flyover\",\n            \"ib-side__content--out-right\": closing && displayType === \"flyover\"\n        };\n\n        let content;\n        if (paneType === \"sort\") {\n            content = <SortPane key=\"sort-pane\" />;\n        } else if (paneType === \"filter\") {\n            content = <FilterPane key=\"filter-pane\" />;\n        } else if (paneType === \"item\" && this.props.sidePanelItem) {\n            content = (\n                <ItemDetailsPane\n                    key={this.props.sidePanelItem.id}\n                    item={this.props.sidePanelItem}\n                />\n            );\n        } else if (paneType === \"hidden\") {\n            return;\n        }\n\n        return (\n            <PanelBody\n                key={\n                    paneType === \"item\" && this.props.sidePanelItem ?\n                    `${this.props.sidePanelItem.id}` :\n                    paneType\n                }\n                containerClasses={containerClasses}\n                contentClasses={contentClasses}\n                handleClose={this.handleCloseDetailsPane}\n                i18n={i18n}\n                type={paneType}\n            >\n                {content}\n            </PanelBody>\n        );\n    }\n\n    public componentWillReceiveProps(nextProps: SidePanelProps) {\n        if (!this.props.closing && !!nextProps.closing) {\n            if (\n                this.props.sidePanelType === \"item\" &&\n                this.props.sidePanelItem\n            ) {\n                const cardTitle = document.getElementById(`item-${this.props.sidePanelItem.id}-card-title`);\n                if (cardTitle) {\n                    cardTitle.focus();\n                }\n            } else if (this.props.sidePanelType === \"filter\") {\n                const filterBtn = document.getElementById(\"filter-button\");\n                if (filterBtn) {\n                    filterBtn.focus();\n                }\n            } else if (this.props.sidePanelType === \"sort\") {\n                const sortBtn = document.getElementById(\"sort-button\");\n                if (sortBtn) {\n                    sortBtn.focus();\n                }\n            }\n            setTimeout(() => {\n                this.props.closeDetailsPaneImmediately();\n            }, 300);\n        }\n    }\n\n    private handleCloseDetailsPane() {\n        this.props.closeDetailsPane();\n    }\n}\n\ninterface StateProps {\n    detailsPaneType: ItemBrowserState[\"settings\"][\"config\"][\"detailsPaneType\"];\n    sidePanelType: ItemBrowserState[\"ui\"][\"sidePanel\"][\"type\"];\n    sidePanelItem: ItemBrowserState[\"ui\"][\"sidePanel\"][\"item\"];\n}\n\ninterface DispatchProps {\n    closeDetailsPane: () => void;\n    closeDetailsPaneImmediately: () => void;\n}\n\n/**\n * `SidePanel` component connected to an `ItemBrowserStore`.\n */\nexport default connect<SidePanelProps, ItemBrowserStore, StateProps, DispatchProps>(\n    (state) => ({\n        detailsPaneType: state.settings.config.detailsPaneType,\n        sidePanelType: state.ui.sidePanel.type,\n        sidePanelItem: state.ui.sidePanel.item\n    }),\n    (dispatch) => ({\n        closeDetailsPane: () => { dispatch(closeDetailsPane()); },\n        closeDetailsPaneImmediately: () => { dispatch({ type: CLOSE_DETAILS_PANE }); }\n    })\n)(SidePanel);\n","import * as i18n from \"dojo/i18n!../../nls/resources\";\nimport { Component, H, connect, ComponentProps } from \"../../../Component\";\nimport { ItemBrowserState } from \"../../index\";\nimport { changeSortOrder, changeSortField, search } from \"../../_actions/index\";\n\nimport Toggle from \"../../../Buttons/Toggle\";\nimport { SortField, SortOrder } from \"../../../Dropdowns/SortDropdown\";\nimport { ItemBrowserStore } from \"../../../wrappers/ItemBrowser\";\n\nexport interface SortPaneProps extends ComponentProps {\n    /**\n     * The name of the current section being viewed in the item browser.\n     * @type {string}\n     */\n    section: ItemBrowserState[\"parameters\"][\"section\"];\n\n    /**\n     * The current sort field.\n     * @type {string}\n     */\n    sortField: SortField;\n\n    /**\n     * The current sort order.\n     * @type {string}\n     */\n    sortOrder: SortOrder;\n\n    /**\n     * Handler for changing the sort field.\n     * @type {function}\n     */\n    changeSortField: (field: SortField) => void;\n\n    /**\n     * Handler for changing the sort order.\n     * @type {function}\n     */\n    changeSortOrder: (order: SortOrder) => void;\n\n    /**\n     * Handler for initiating a search.\n     * @type {function}\n     */\n    search: (updateCounts?: boolean) => void;\n}\n\nconst defaultOptions = [\"relevance\", \"title\", \"owner\", \"created\", \"modified\", \"numviews\"];\nconst availableOptionsMap = {\n    myContent: [ \"modified\", \"title\" ],\n    myFavorites: [ \"relevance\", \"modified\", \"title\", \"numviews\", \"owner\" ],\n    myGroups: [ \"relevance\", \"modified\", \"title\", \"numviews\", \"owner\" ],\n    myOrganization: [ \"relevance\", \"modified\", \"title\", \"numviews\", \"owner\" ],\n    livingAtlas: [ \"relevance\", \"modified\", \"title\", \"numviews\", \"owner\" ],\n    all: [ \"relevance\", \"title\", \"owner\", \"modified\", \"numviews\" ]\n};\n\n/**\n * Sort panel for the `ItemBrowser`.\n */\nclass SortPane extends Component<SortPaneProps> {\n    constructor(props: SortPaneProps) {\n        super(props);\n\n        this.handleChangeSortField = this.handleChangeSortField.bind(this);\n        this.handleChangeSortAsc = this.handleChangeSortAsc.bind(this);\n        this.handleChangeSortDesc = this.handleChangeSortDesc.bind(this);\n    }\n\n    public render(tsx: H) {\n        const section = this.props.section;\n        let availableOptions =\n            availableOptionsMap[section] ?\n            [ ...availableOptionsMap[section] ] :\n            [ ...defaultOptions ];\n\n        const sortOptions = availableOptions.map((optionKey: string) => (\n            <Toggle\n                key={optionKey}\n                name={i18n.sortOptions[optionKey]}\n                value={optionKey}\n                selectedToggle={this.props.sortField}\n                onToggleClick={this.handleChangeSortField}\n            />\n        ));\n\n        const field = this.props.sortField;\n        const order = this.props.sortOrder;\n\n        return (\n            <div id=\"sort-pane-container\" key=\"sort-pane-container\" class=\"ib-sort-pane__container\">\n                <h4 class=\"ib-sort-pane__title\">{i18n.sortOptions.sort}</h4>\n                <div class=\"ib-sort-pane__body\"> \n                    <h5 id=\"sort-options-title\" class=\"ib-sort-pane__label\">{i18n.sortOptions.sortBy}</h5>\n                    <ul \n                        key=\"sort-option-section\" \n                        class=\"ib-sort-pane__option-section\" \n                        role=\"radiogroup\"\n                        aria-labelledby=\"sort-options-title\"\n                        aria-activedescendent={`${this.props.sortField}-option`}\n                    >\n                        {sortOptions}\n                    </ul>\n                    <h5\n                        id=\"sort-dir-title\"\n                        class=\"ib-sort-pane__label\"\n                        style={`display: ${field === \"relevance\" ? \"none\" : \"auto\"}`}\n                    >\n                        {i18n.sortOptions.sortDir}\n                    </h5>\n                    <ul\n                        key=\"sort-direction-section\"\n                        class=\"ib-sort-pane__dir-section\"\n                        role=\"radiogroup\"\n                        aria-labelledby=\"sort-dir-title\"\n                        aria-activedescendent={`${order}-option`}\n                        style={`display: ${field === \"relevance\" ? \"none\" : \"auto\"}`}\n                    >\n                        <Toggle\n                            key=\"sort-asc-toggle\"\n                            name={i18n.sortOptions.ascending[field]}\n                            value=\"asc\"\n                            onToggleClick={this.handleChangeSortAsc}\n                            selectedToggle={order}\n                        />\n                        <Toggle\n                            key=\"sort-desc-toggle\"\n                            name={i18n.sortOptions.descending[field]}\n                            value=\"desc\"\n                            onToggleClick={this.handleChangeSortDesc}\n                            selectedToggle={order}\n                        />\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n\n    private handleChangeSortField(value: SortField) {\n        this.props.changeSortField(value);\n        this.props.search();\n    }\n\n    private handleChangeSortAsc(value: string) {\n        if (this.props.sortOrder === \"desc\") {\n            this.props.changeSortOrder(\"asc\");\n            this.props.search();\n        }\n    }\n\n    private handleChangeSortDesc(value: string) {\n        if (this.props.sortOrder === \"asc\") {\n            this.props.changeSortOrder(\"desc\");\n            this.props.search();\n        }\n    }\n}\n\ninterface StateProps {\n    section: ItemBrowserState[\"parameters\"][\"section\"];\n    sortField: SortField;\n    sortOrder: SortOrder;\n}\n\ninterface DispatchProps {\n    changeSortField: (field: SortField) => void;\n    changeSortOrder: (order: SortOrder) => void;\n    search: (updateCounts?: boolean) => void;\n}\n\n/**\n * `SortPanel` component connected to an `ItemBrowserStore`.\n */\nexport default connect<SortPaneProps, ItemBrowserStore, StateProps, DispatchProps>(\n    (state) => ({\n        section: state.parameters.section,\n        sortField: state.parameters.sort.field,\n        sortOrder: state.parameters.sort.order\n    }),\n    (dispatch) => ({\n        changeSortField: (field: SortField) => { dispatch(changeSortField(field)); },\n        changeSortOrder: (order: SortOrder) => { dispatch(changeSortOrder(order)); },\n        search: (updateCounts?: boolean) => { dispatch(search(updateCounts)); }\n    })\n)(SortPane);\n","import * as i18n from \"dojo/i18n!../../nls/resources\";\nimport { Component, H } from \"../../../Component\";\n\nimport Filters from \"./Filters\";\n\nexport interface FilterPaneProps {\n    /**\n     * A unique key for the component.\n     * @type {string}\n     */\n    key: string;\n}\n\n/**\n * Filter panel for the `ItemBrowser`.\n */\nexport default class FilterPane extends Component<FilterPaneProps> {\n    public render(tsx: H) {\n        return (\n            <div id=\"filter-pane-container\" key=\"filter-pane-container\" class=\"ib-filter-pane__container\">\n                <h4 class=\"ib-filter-pane__title\">{i18n.filterPane.filter}</h4>\n                <Filters key=\"filter-options\" />\n            </div>\n        );\n    }\n}\n","import * as i18n from \"dojo/i18n!../../nls/resources\";\nimport { Component, H, Pojo, connect } from \"../../../Component\";\nimport { ItemBrowserState } from \"../../index\";\nimport {\n    addToFavorites,\n    removeFromFavorites\n} from \"../../_actions/index\";\nimport { getCurrentPortal } from \"../../_utils/index\";\n\nimport LoaderBars from \"../../../Loaders/LoaderBars\";\nimport NoUserThumb from \"./NoUserThumb\";\nimport AuthoritativeBadge from \"../../../Badges/Authoritative\";\nimport DeprecatedBadge from \"../../../Badges/Deprecated\";\nimport LivingAtlasBadge from \"../../../Badges/LivingAtlas\";\nimport MarketplaceBadge from \"../../../Badges/Marketplace\";\nimport OpenDataBadge from \"../../../Badges/OpenData\";\nimport PremiumBadge from \"../../../Badges/Premium\";\nimport SubscriberBadge from \"../../../Badges/Subscriber\";\nimport SvgButton from \"../../../Buttons/SvgButton\";\nimport FavButton from \"./FavButton\";\nimport SharedInfo from \"./SharedInfo\";\nimport * as dojoDate from \"dojo/date/locale\";\nimport { ItemBrowserStore } from \"../../../wrappers/ItemBrowser\";\n\nexport interface ItemDetailsPaneProps {\n    /**\n     * A unique key for the component.\n     * @type {string}\n     */\n    key: string;\n\n    /**\n     * The item to show details for.\n     * @type {object}\n     */\n    item: Pojo;\n\n    /**\n     * The current state tree of the `ItemBrowser`.\n     * @type {object}\n     */\n    stateTree: ItemBrowserState; // bad\n\n    /**\n     * Handler for adding an item to favorites.\n     * @type {function}\n     */\n    addToFavorites: (item: Pojo) => void;\n\n    /**\n     * Handler for removing an item from favorites.\n     * @type {function}\n     */\n    removeFromFavorites: (item: Pojo) => void;\n}\n\n/**\n * The details panel for an item in the `ItemBrowser`.\n */\nclass ItemDetailsPane extends Component<ItemDetailsPaneProps> {\n    constructor(props: ItemDetailsPaneProps) {\n        super(props);\n\n        this.handleItemDetails = this.handleItemDetails.bind(this);\n        this.handleFavorites = this.handleFavorites.bind(this);\n    }\n\n    public render(tsx: H) {\n        if (\n            (!this.props.stateTree.results.fullItemDetails[this.props.item.id] ||\n            !this.props.stateTree.results.users[this.props.item.owner]) &&\n            !this.props.stateTree.results.failedItemDetails[this.props.item.id]\n        ) {\n            return <LoaderBars key={\"loading-item-details\"} />;\n        } else if (this.props.stateTree.results.failedItemDetails[this.props.item.id]) {\n            return (\n                <div class=\"ib-item-pane__message-container\">\n                    <span class=\"ib-results__message\">\n                        {i18n.results.requestError}\n                    </span>\n                </div>\n            );\n        }\n\n        const item = this.props.stateTree.results.fullItemDetails[this.props.item.id];\n        const owner = this.props.stateTree.results.users[item.owner];\n        const portal = getCurrentPortal(this.props.stateTree);\n        const selected = item && this.props.stateTree.results.selectedItems[item.id];\n        const loading = item && this.props.stateTree.results.loadingItems[item.id];\n\n        const faderClasses = {\n            \"ib-item-pane__fader\": true,\n            \"ib-item-pane__fader--loading\": loading\n        };\n\n        const modifiedDate = new Date(item.modified);\n        const createdDate = new Date(item.created);\n        const organization = this.props.stateTree.results.allOrganizations[item.orgId];\n        const displayPublicAuthoritative = (\n            item.contentStatus === \"public_authoritative\" &&\n            item.orgId &&\n            !!organization\n        );\n\n        return (\n            [(\n                <div\n                    class=\"ib-item-pane__thumb-container\"\n                >\n                    <img\n                        src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n                        class=\"ib-item-pane__thumbnail\"\n                        style={`\n                            display: block;\n                            padding: none;\n                            margin: none;\n                            background-image: url(${item.thumbURI});\n                            width: 15rem;\n                            height: 10rem;\n                        `}\n                        alt=\"\"\n                    />\n                    <FavButton\n                        favorites={this.props.stateTree.results.user.favorites}\n                        item={item}\n                        onToggleFavorite={this.handleFavorites}\n                    />\n                </div>\n            ), (\n                <div\n                    id=\"item-pane-container\"\n                    class=\"ib-item-pane__container\"\n                    key={`${item.id}-container`}\n                >\n                    <div classes={faderClasses}>\n                        <div key=\"item-details\">\n                            <h4\n                                class=\"ib-item-pane__title\"\n                            >\n                                {item.title}\n                                &nbsp;\n                                <SvgButton\n                                    key=\"view-full-item-details\"\n                                    title={i18n.itemDetails.viewDetails}\n                                    handleClick={this.handleItemDetails}\n                                    focusable={true}\n                                >\n                                    <svg\n                                        width=\"16\"\n                                        height=\"16\"\n                                        viewBox=\"0 0 16 16\"\n                                        style=\"transform: translate(0, -2px);\"\n                                    >\n                                        <path d=\"M13 15h-12v-12h10v-1h-11v14h14v-6h-1z\" />\n                                        <path d=\"M13 7.536l3-3-3-3v1.061l1.404 1.404h-1.404c-3.85 0-7 3.15-7 7v1h1v-1c0-3.309 2.691-6 6-6h1.475l-1.475 1.475v1.061z\" />\n                                    </svg>\n                                </SvgButton>\n                            </h4>\n                            <span key=\"item-owner\" class=\"ib-item-pane__owner-text\">\n                                <img\n                                    src={item.iconURI}\n                                    class=\"ib-item-pane__type-icon\"\n                                    title={item.displayName}\n                                />\n                                {item.displayName} {i18n.itemDetails.by}&nbsp;\n                                <a\n                                    class=\"ib-item-pane__owner-link\"\n                                    title={displayPublicAuthoritative ? i18n.itemDetails.viewOrg : i18n.itemDetails.viewUser}\n                                    target=\"_blank\"\n                                    href={\n                                        displayPublicAuthoritative ?\n                                            organization.orgUrl :\n                                            `${portal.baseUrl}/home/user.html?user=${item.owner}`\n                                    }\n                                >\n                                    {\n                                        displayPublicAuthoritative ?\n                                            organization.name :\n                                            item.owner\n                                    }\n                                </a>\n                            </span>\n                            <span key=\"modified-date\" class=\"ib-item-pane__modified\">\n                                {i18n.itemDetails.lastModified}\n                                {`: ${dojoDate.format(modifiedDate, { selector: \"date\", formatLength: \"long\" })}`}\n                            </span>\n                            <div class=\"ib-item-pane__badges\">\n                                {this.renderBadges(item, tsx)}\n                            </div>\n                            <div\n                                class=\"ib-item-pane__line\"\n                                style={`width: 100%; border-bottom: 1px solid #ccc`}\n                            />\n                            <span key=\"snippet\" class=\"ib-item-pane__snippet\">\n                                {item.snippet ? item.snippet : i18n.itemDetails.noSnippet}\n                            </span>\n                            <h5 class=\"ib-item-pane__details\">{i18n.itemDetails.details}</h5>\n                            {\n                                item.patchedDescription ?\n                                    <span\n                                        key=\"item-description\"\n                                        innerHTML={item.patchedDescription}\n                                        class=\"ib-item-pane__description\"\n                                    /> :\n                                    <span\n                                        key=\"item-no-description\"\n                                        class=\"ib-item-pane__description\"\n                                    >\n                                        {i18n.itemDetails.noDescription}\n                                    </span>\n                            }\n                            <h5 class=\"ib-item-pane__terms-of-use\">{i18n.itemDetails.termsOfUse}</h5>\n                            {\n                                item.licenseInfo ?\n                                    <span\n                                        key=\"item-terms-of-use\"\n                                        innerHTML={item.licenseInfo}\n                                        class=\"ib-item-pane__license-info\"\n                                    /> :\n                                    <span\n                                        key=\"item-no-terms-of-use\"\n                                        class=\"ib-item-pane__license-info\"\n                                    >\n                                        {i18n.itemDetails.noTermsOfUse}\n                                    </span>\n                            }\n                            <h5 class=\"ib-item-pane__credits\">{i18n.itemDetails.attribution}</h5>\n                            {\n                                item.accessInformation ?\n                                    <span\n                                        key=\"item-access-information\"\n                                        innerHTML={item.accessInformation}\n                                        class=\"ib-item-pane__attribution\"\n                                    /> :\n                                    <span\n                                        key=\"item-no-access-information\"\n                                        class=\"ib-item-pane__attribution\"\n                                    >\n                                        {i18n.itemDetails.noAttribution}\n                                    </span>\n                            }\n                            {\n                                displayPublicAuthoritative ?\n                                    (\n                                        <p>\n                                            <h5 class=\"ib-item-pane__pa-owner\">{i18n.sortOptions.owner}</h5>\n                                            <div\n                                                class=\"ib-item-pane__pa-org\"\n                                            >\n                                                <img\n                                                    src={organization.thumbURI}\n                                                    alt={organization.name}\n                                                    class=\"ib-item-pane__pa-org-thumb user-image-small-inline padding-right-half display-block js-owner-thumbnail\"\n                                                />\n                                                {organization.name}\n                                            </div>\n                                            <div class=\"ib-item-pane__pa-managed\">\n                                                <span class=\"ib-item-pane__pa-managed-label\">\n                                                    {i18n.itemDetails.managedBy}\n                                                </span>\n                                                <div class=\"ib-item-pane__pa-manager\">\n                                                    {\n                                                        owner.thumbURI ?\n                                                            <img\n                                                                src={owner.thumbURI}\n                                                                class=\"ib-item-pane__pa-managed-thumb\"\n                                                            /> :\n                                                            <NoUserThumb class=\"ib-item-pane__pa-managed-thumb\" />\n                                                    }\n                                                    {item.owner}\n                                                </div>\n                                            </div>\n                                        </p>\n                                    ) :\n                                    null\n                            }\n                            <span key=\"num-views\" class=\"ib-item-pane__num-views\">\n                                <strong>{i18n.itemDetails.views}</strong>{`: ${item.numViews}`}\n                            </span>\n                            <span key=\"created-date\" class=\"ib-item-pane__num-views\">\n                                <strong>\n                                    {i18n.itemDetails.created}\n                                </strong>\n                                {`: ${dojoDate.format(createdDate, { selector: \"date\", formatLength: \"long\" })}`}\n                            </span>\n                            <SharedInfo\n                                baseUrl={portal.baseUrl}\n                                item={item}\n                            />\n                        </div>\n                    </div>\n                    {loading ? <LoaderBars key={\"item-pane-loading\"} /> : null}\n                </div>\n            )]\n        );\n    }\n\n    private renderBadges(item: Pojo, tsx: H) {\n        const user = this.props.stateTree.settings.utils.portal.user;\n\n        return item.badges.map((badgeType: string) => {\n            switch (badgeType) {\n                case \"authoritative\":\n                    return (\n                        <AuthoritativeBadge\n                            altOrg={\n                                item.contentStatus === \"public_authoritative\" &&\n                                    this.props.stateTree.results.allOrganizations[item.orgId] ?\n                                    this.props.stateTree.results.allOrganizations[item.orgId].name :\n                                    undefined\n                            }\n                        />\n                    );\n                case \"deprecated\":\n                    return <DeprecatedBadge />;\n                case \"livingAtlas\":\n                    return <LivingAtlasBadge />;\n                case \"marketplace\":\n                    return <MarketplaceBadge />;\n                case \"openData\":\n                    return <OpenDataBadge />;\n                case \"premium\":\n                    return <PremiumBadge user={user} />;\n                case \"subscriber\":\n                    return <SubscriberBadge user={user} />;\n                default: //\n            }\n            return null;\n        });\n    }\n\n    private handleItemDetails() {\n        const portal = getCurrentPortal(this.props.stateTree);\n        const item = this.props.stateTree.ui.sidePanel.item;\n        if (item) {\n            window.open(`${portal.baseUrl}/home/item.html?id=${item.id}`, \"_blank\");\n        }\n    }\n\n    private formatSize(val: number, tsx: H) {\n        if (!val) {\n            return [\"0 \", <small key=\"0kb-size\">KB</small>]\n        } else if (val <= 1024) {\n            return [\"1 \", <small key=\"1kb-size\">KB</small>];\n        } else if (val < 1048576) {\n            return [\n                `${Math.round(val / 1024).toLocaleString()} `,\n                <small key=\"1kb-size\">KB</small>\n            ];\n        } else {\n            return [\n                `${Math.round(val / 1048576).toLocaleString()} `,\n                <small key=\"1kb-size\">MB</small>\n            ];\n        }\n    }\n\n    private handleFavorites() {\n        const item = this.props.stateTree.ui.sidePanel.item;\n        const favorites = this.props.stateTree.results.user.favorites;\n        if (item && favorites && favorites[item.id]) {\n            this.props.removeFromFavorites(item);\n        } else if (item && favorites && !favorites[item.id]) {\n            this.props.addToFavorites(item);\n        }\n    }\n}\n\ninterface StateProps {\n    stateTree: ItemBrowserState\n}\n\ninterface DispatchProps {\n    addToFavorites: (item: Pojo) => void;\n    removeFromFavorites: (item: Pojo) => void;\n}\n\n/**\n * `ItemDetailsPane` component connected to an `ItemBrowserStore`.\n */\nexport default connect<ItemDetailsPaneProps, ItemBrowserStore, StateProps, DispatchProps>(\n    (state) => ({\n        stateTree: state\n    }),\n    (dispatch) => ({\n        addToFavorites: (item: Pojo) => { dispatch(addToFavorites(item)); },\n        removeFromFavorites: (item: Pojo) => { dispatch(removeFromFavorites(item)); }\n    })\n)(ItemDetailsPane);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__217__;","module.exports = __WEBPACK_EXTERNAL_MODULE__218__;","module.exports = __WEBPACK_EXTERNAL_MODULE__219__;","module.exports = __WEBPACK_EXTERNAL_MODULE__220__;","module.exports = __WEBPACK_EXTERNAL_MODULE__221__;","module.exports = __WEBPACK_EXTERNAL_MODULE__222__;","module.exports = __WEBPACK_EXTERNAL_MODULE__223__;","import * as i18n from \"dojo/i18n!../../nls/resources\";\r\nimport { H, Pojo } from \"../../../Component\";\r\n\r\nexport interface FavButtonProps {\r\n    /**\r\n     * Mapping of favorite items.\r\n     * @type {object}\r\n     */\r\n    favorites: { [itemId: string]: boolean } | undefined;\r\n\r\n    /**\r\n     * Handler for adding/removing the item from favorites.\r\n     * @type {function}\r\n     */\r\n    onToggleFavorite: (e: any) => void;\r\n\r\n    /**\r\n     * The item to be added/removed from favorites.\r\n     * @type {object}\r\n     */\r\n    item: Pojo;\r\n}\r\n\r\n/**\r\n * A button to add/remove an item in the `ItemBrowser` from favorites.\r\n */\r\nexport default ({ favorites, onToggleFavorite, item }: FavButtonProps, tsx: H) => {\r\n    if (!favorites) {\r\n        return null;\r\n    }\r\n    const favorite = !!favorites[item.id];\r\n    const favClasses = {\r\n        \"ib-item-pane__favorites-btn\": true,\r\n        \"ib-item-pane__favorites-btn--active\": favorite\r\n    };\r\n    return (\r\n        <button onclick={onToggleFavorite} classes={favClasses}>\r\n            <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"32\"\r\n                height=\"32\"\r\n                viewBox=\"0 0 32 32\"\r\n            >\r\n                <path \r\n                    d=\"M16.043.367L19.813 12H32l-9.859 7.172 3.789 11.625-9.887-7.193-9.889 7.193 3.787-11.625L0 12h12.271z\"\r\n                />\r\n            </svg>\r\n            {\r\n                favorite ?\r\n                    i18n.itemDetails.removeFromFavorites :\r\n                    i18n.itemDetails.addToFavorites\r\n            }\r\n        </button>\r\n    );\r\n};\r\n","import { H } from \"../../../Component\";\r\n\r\nexport interface NoUserThumbProps {\r\n    /**\r\n     * CSS class for the thumbnail container.\r\n     * @type {string}\r\n     */\r\n    class: string;\r\n}\r\n\r\n/**\r\n * Image displayed when there is no thumbnail for a user.\r\n */\r\nexport default (props: NoUserThumbProps, tsx: H) => {\r\n    return (\r\n        <div class={props.class}>\r\n            <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 150 150\"\r\n                height=\"100%\"\r\n                width=\"100%\"\r\n            >\r\n                <path\r\n                    id=\"path3727\"\r\n                    d=\"m 52,148.35766 c -2.475,-0.18484 -10.8,-0.45343 -18.5,-0.59687 L 19.5,147.5 19.194994,142.1708 C 18.780069,134.92106 24.675201,110.99518 28,106.43495 c 2.119734,-2.90738 3.184268,-3.40501 11.820245,-5.52557 14.015326,-3.441464 12.799724,-4.197584 21.447495,13.34062 4.135724,8.3875 8.291761,16.93353 9.235637,18.99118 0.943876,2.05765 2.065683,3.52516 2.492905,3.26112 0.427221,-0.26404 4.718162,-8.47257 9.535425,-18.24118 4.817262,-9.76862 9.137298,-18.24997 9.600081,-18.847444 1.07417,-1.386813 10.747512,-0.129937 19.839562,2.577794 7.37115,2.19522 11.16896,5.44708 12.85677,11.00853 6.69283,22.05341 7.84944,32.33763 3.67188,32.64913 -1.1,0.082 -6.95,0.62022 -13,1.19598 -11.23048,1.06878 -55.365488,2.12006 -63.5,1.51255 z m 20,-17.37753 c 0,-0.56093 -1.107043,-2.77354 -2.460095,-4.91692 -1.353052,-2.14337 -2.772339,-5.17193 -3.153972,-6.73012 C 66.0043,117.77489 65.377929,116.275 64.993998,116 c -0.383932,-0.275 -2.303235,-3.7147 -4.265118,-7.64379 -2.997369,-6.00286 -3.476188,-7.83951 -2.998076,-11.499996 0.312942,-2.395918 0.973535,-4.62137 1.467986,-4.94545 0.494451,-0.32408 2.959173,0.453755 5.47716,1.728522 2.517988,1.274768 6.181951,2.618632 8.142141,2.986366 3.484798,0.653752 4.619546,0.375908 12.565461,-3.076659 3.34951,-1.455391 3.803432,-1.47865 3.300927,-0.169142 -0.398242,1.037802 -0.124039,1.342318 0.866449,0.962233 C 92.04719,93.384178 91.914975,93.739792 82.242203,114 79.747646,119.225 76.801902,125.4125 75.696105,127.75 73.817142,131.72187 72,133.30992 72,130.98013 Z M 70.29923,93.893977 C 68.538807,93.384871 66.824749,92.525456 66.490213,91.984165 66.155677,91.442874 65.211939,91 64.393017,91 c -1.502433,0 -6.302871,-4.784056 -6.361416,-6.339707 -0.01738,-0.461839 -0.887451,-1.586839 -1.933489,-2.5 C 50.802328,77.537229 48.879628,58.999483 52.441931,46.909154 54.720369,39.176219 55.37403,38.7615 68,37.038257 72.675,36.400195 79.341587,35.480846 82.814638,34.995261 86.28769,34.509675 89.663822,34.317502 90.317154,34.568209 91.693801,35.096478 97,43.197939 97,44.771524 c 0,0.583995 0.454771,1.2134 1.010602,1.398677 1.503878,0.501292 2.439668,18.675087 1.175539,22.829799 -2.185196,7.181885 -3.87855,11.047986 -5.800118,13.242269 -1.087422,1.241752 -2.586953,3.479873 -3.332291,4.973602 -0.745338,1.493728 -1.684447,2.51236 -2.086909,2.263625 -0.402462,-0.248735 -1.79714,0.347041 -3.099286,1.323947 -5.368623,4.027692 -8.806128,4.756927 -14.568307,3.090534 z M 47.015313,60.25 C 47.006891,59.5625 46.333573,59 45.519052,59 43.283015,59 42.644845,54.707151 43.38075,44.616059 44.166271,33.844619 44.896556,30 46.15707,30 c 1.316225,0 7.090208,-4.174219 8.645304,-6.25 0.721069,-0.9625 1.890773,-1.75 2.599342,-1.75 0.70857,0 2.102798,-0.9 3.098284,-2 1.625205,-1.795832 3.079967,-2 14.250617,-2 14.795202,0 15.235286,0.195009 24.330624,10.781341 1.078019,1.254737 2.667599,4.179737 3.532399,6.5 0.86481,2.320262 1.94546,5.118659 2.40144,6.218659 1.51768,3.661163 2.10273,13.653118 0.88532,15.120015 -2.35184,2.833785 -3.74627,1.464615 -4.45065,-4.370015 -0.68461,-5.670783 -5.785078,-16.623556 -8.973492,-19.269704 -1.58533,-1.315707 -2.444358,-1.239512 -24.630153,2.184678 -15.102822,2.330992 -14.275738,1.799234 -17.29574,11.119973 -0.852701,2.631721 -1.557256,6.456721 -1.565678,8.5 C 48.976265,56.828226 48.533156,59.175 48,60 c -0.64625,1 -0.974479,1.083333 -0.984687,0.25 z\"\r\n                    fill=\"#fff\"\r\n                />\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n","import * as i18n from \"dojo/i18n!../../nls/resources\";\r\nimport { H, Pojo } from \"../../../Component\";\r\n\r\nexport interface SharedInfoProps {\r\n    /**\r\n     * The item that details are being shown for.\r\n     * @type {object}\r\n     */\r\n    item: Pojo;\r\n\r\n    /**\r\n     * The base url for the current portal.\r\n     * @type {string}\r\n     */\r\n    baseUrl: string;\r\n}\r\n\r\nexport default ({ item, baseUrl }: SharedInfoProps, tsx: H) => {\r\n    let sharedString = i18n.itemDetails.shared[item.access];\r\n    if (!!item.sharedToGroups && item.sharedToGroups.length > 0) {\r\n        const groupsList = item.sharedToGroups\r\n            .map((group: Pojo) =>\r\n                (\r\n                    <a\r\n                        class=\"ib-item-pane__group-link\"\r\n                        href={`${baseUrl}/home/group.html?owner=${group.owner}&title=${group.title}`}\r\n                        key={group.id}\r\n                        target=\"_blank\"\r\n                    >\r\n                        {group.title}\r\n                    </a>\r\n                )\r\n            ).reduce((result: any[], current: any, i: number) => {\r\n                if (!!result[i - 1]) {\r\n                    result.push(\", \");\r\n                }\r\n                result.push(current);\r\n                return result;\r\n            }, []);\r\n        if (item.access === \"public\" || item.access === \"org\") {\r\n            sharedString = [`${sharedString}, `, groupsList];\r\n        } else {\r\n            sharedString = groupsList;\r\n        }\r\n    } else if (item.access === \"shared\" && (!item.sharedToGroups || item.sharedToGroups.length === 0)) {\r\n        return null;\r\n    }\r\n    return (\r\n        <span key=\"shared-with\" class=\"ib-item-pane__shared\">\r\n            <strong>{i18n.itemDetails.sharedWith}</strong>: {sharedString}\r\n        </span>\r\n    );\r\n};\r\n","import { ItemBrowserState } from \"../index\";\n\nexport interface DynamicClasses {\n    [className: string]: boolean;\n}\n\nimport SvgButton from \"../../Buttons/SvgButton\";\nimport ItemDetailsFooter from \"./ItemDetailsPane/Footer\";\nimport { H, ComponentProps, Pojo } from \"../../Component\";\n\nexport interface DetailsPaneBodyProps extends ComponentProps {\n    /**\n     * CSS class mapping for the container element.\n     * @type {object}\n     */\n    containerClasses: DynamicClasses;\n\n    /**\n     * CSS class mapping for the content element.\n     * @type {object}\n     */\n    contentClasses: DynamicClasses;\n\n    /**\n     * Handler for when the details panel is closed.\n     * @type {function}\n     */\n    handleClose: (e?: any) => void;\n\n    /**\n     * nls for the component.\n     * @type {object}\n     */\n    i18n: Pojo;\n\n    /**\n     * `ItemBrowser` side panel type.\n     * @type {string}\n     */\n    type: ItemBrowserState[\"ui\"][\"sidePanel\"][\"type\"];\n}\n\nexport default (\n    {\n        key,\n        containerClasses,\n        contentClasses,\n        handleClose,\n        i18n,\n        type,\n        children\n    }: DetailsPaneBodyProps,\n    tsx: H\n) => {\n\n    let footer = null;\n    if (type === \"item\") {\n        footer = <ItemDetailsFooter key=\"item-details-footer\" />;\n    }\n\n    return (\n        <div \n            key=\"details-pane\" \n            classes={containerClasses}\n            aria-expanded=\"true\"\n        >\n            <div\n                key=\"content-container\"\n                classes={contentClasses}\n            >\n                <header class=\"ib-side-body__header\">\n                    <div class=\"ib-side-body__btn-container\">\n                        <SvgButton\n                            afterCreate={focusMe}\n                            focusable={true}\n                            handleClick={handleClose}\n                            key=\"side-panel-close-btn\"\n                            title={i18n.close}\n                        >\n                            <svg\n                                width=\"16\"\n                                height=\"16\"\n                                viewBox=\"0 0 16 16\"\n                                style=\"transform: translate(0, -1px);\"\n                            >\n                                <path d=\"M13.314 1.99l0.707 0.707-11.314 11.313-0.707-0.707 11.314-11.313z\" />\n                                <path d=\"M2 2.697l0.707-0.707 11.313 11.314-0.707 0.707-11.313-11.314z\" />\n                            </svg>\n\n                        </SvgButton>\n                    </div>\n                </header>\n                <section\n                    key={key}\n                    class=\"ib-side-body__content\"\n                >\n                    {children}\n                </section>\n                {footer}\n            </div>\n        </div>\n    );\n};\n\nfunction focusMe(e: HTMLElement) {\n    e.focus();\n}\n","import { Component, connect, H, Pojo, ComponentProps } from \"../../../Component\";\nimport { ItemBrowserState } from \"../../index\";\nimport {\n    deselectItem,\n    selectItem,\n    customAction\n} from \"../../_actions/index\";\nimport { ItemBrowserStore } from \"../../../wrappers/ItemBrowser\";\n\n/**\n * A custom action from the `ItemBrowser` configuration.\n */\nexport type CustomAction = ItemBrowserState[\"settings\"][\"config\"][\"customActions\"][number]\n\nexport interface FooterProps extends ComponentProps {\n    /**\n     * The current state tree of the `ItemBrowser`.\n     * @type {object}\n     */\n    stateTree: ItemBrowserState;\n\n    /**\n     * Handler for deselecting an item.\n     * @type {function}\n     */\n    deselectItem: (item: Pojo) => void;\n\n    /**\n     * Handler for selecting an item.\n     * @type {function}\n     */\n    selectItem: (item: Pojo) => void;\n\n    /**\n     * Handler for performing a custom action on an item.\n     * @type {function}\n     */\n    customAction: (actionName: string, item: Pojo) => void;\n}\n\n/**\n * Footer component for the `ItemBrowser` item details panel.\n */\nexport class Footer extends Component<FooterProps> {\n    constructor(props: FooterProps) {\n        super(props);\n\n        this.handleAddBtnClick = this.handleAddBtnClick.bind(this);\n        this.handleCustomActionClick = this.handleCustomActionClick.bind(this);\n    }\n\n    public render(tsx: H) {\n        const item = this.props.stateTree.ui.sidePanel.item;\n        const selected = item && !!this.props.stateTree.results.selectedItems[item.id];\n        const loading = item && !!this.props.stateTree.results.loadingItems[item.id];\n        const btnClasses = { \"ib-item-pane__btn--disabled\": loading };\n        const addBtnClasses = { ...btnClasses, \"ib-item-pane__btn--active\": selected };\n\n        const availableActions = this.props.stateTree.settings.config.customActions.filter((action: CustomAction) => {\n            return action.allowed(item ? item : {});\n        });\n\n        return (\n            <footer class=\"ib-item-pane__footer\">\n                {\n                    this.props.stateTree.settings.config.disableMainAction ?\n                    null :\n                    <button\n                        key=\"select-btn\"\n                        class=\"ib-item-pane__select-btn\"\n                        classes={addBtnClasses}\n                        onclick={this.handleAddBtnClick}\n                    >\n                        {\n                            selected ? this.props.stateTree.settings.config.mainInverseActionTitle :\n                            this.props.stateTree.settings.config.mainActionTitle\n                        }\n                    </button>\n                }\n                {\n                    availableActions.map((action: CustomAction) => (\n                        <button\n                            key=\"usage\"\n                            class=\"ib-item-pane__btn\"\n                            classes={btnClasses}\n                            value={action.name}\n                            onclick={this.handleCustomActionClick}\n                        >\n                            {action.name}\n                        </button>\n                    ))\n                }\n            </footer>\n        )\n    }\n\n    private handleAddBtnClick() {\n        const item = this.props.stateTree.ui.sidePanel.item;\n        if (item) {\n            if (!!this.props.stateTree.results.selectedItems[item.id]) {\n                this.props.deselectItem(item);\n            } else {\n                this.props.selectItem(item);\n            }\n        }\n    }\n\n    private handleCustomActionClick(e: any) {\n        const item = this.props.stateTree.ui.sidePanel.item;\n        if (item) {\n            this.props.customAction(e.target.value, item);\n        }\n    }\n}\n\ninterface StateProps {\n    stateTree: ItemBrowserState;\n}\n\ninterface DispatchProps {\n    deselectItem: (item: Pojo) => void;\n    selectItem: (item: Pojo) => void;\n    customAction: (actionName: string, item: Pojo) => void;\n}\n\n/**\n * `Footer` component connected to an `ItemBrowserStore`.\n */\nexport default connect<FooterProps, ItemBrowserStore, StateProps, DispatchProps>(\n    (state) => ({ stateTree: state }),\n    (dispatch) => ({\n        deselectItem: (item: Pojo) => { dispatch(deselectItem(item)); },\n        selectItem: (item: Pojo) => { dispatch(selectItem(item)); },\n        customAction: (actionName: string, item: Pojo) => { dispatch(customAction(actionName, item)); }\n    })\n)(Footer);\n","import * as i18n from \"dojo/i18n!../nls/resources\";\nimport { Component, H, connect, ComponentProps } from \"../../Component\";\nimport SectionDropdown from \"./SectionDropdown\";\nimport SvgButton from \"../../Buttons/SvgButton\";\nimport { ItemBrowserStore } from \"../../wrappers/ItemBrowser\";\n\nexport interface HeaderProps extends ComponentProps {\n    /**\n     * If true, a back button will be shown in the top left.\n     * @type {boolean}\n     */\n    showBackBtn: boolean;\n\n    /**\n     * If true, a close button will be shown in the top right.\n     * @type {boolean}\n     */\n    showCloseBtn: boolean;\n\n    /**\n     * Handler for when the user exits the `ItemBrowser`.\n     * @type {function}\n     */\n    onBack: () => void;\n}\n\n/**\n * Header for the side panel `ItemBrowser`.\n */\nexport class Header extends Component<HeaderProps> {\n    public render(tsx: H) {\n        const searchHeaderClasses = {\n            \"ib__header\": true\n        };\n\n        let backBtn = <div class=\"ib-header__spacer\" />;\n        if (this.props.showBackBtn) {\n            backBtn = (\n                <SvgButton\n                    handleClick={this.props.onBack}\n                    key=\"main-back-btn\"\n                    title={i18n.back}\n                    focusable={true}\n                >\n                    <svg\n                        width=\"16\"\n                        height=\"16\"\n                        viewBox=\"0 0 16 16\"\n                        style=\"transform: translate(0, -1px);\"\n                    >\n                        <path\n                            d=\"M8 1.288l-7.212 7.212 7.212 7.212v-1.414l-5.288-5.297h13.288v-0.99h-13.307l5.307-5.307z\"\n                        />\n                    </svg>\n                </SvgButton>\n            );\n        }\n    \n        let closeBtn = <div class=\"ib-header__spacer\" />;\n        if (this.props.showCloseBtn) {\n            closeBtn = (\n                <SvgButton\n                    key=\"main-close-btn\"\n                    title={i18n.close}\n                    focusable={true}\n                    handleClick={this.props.onBack}\n                >\n                    <svg\n                        width=\"16\"\n                        height=\"16\"\n                        viewBox=\"0 0 32 32\"\n                    >\n                        <path d=\"M31.047 28h-5l-12-12 12-12h5l-12 12 12 12zm-26-12l12-12h-5l-12 12 12 12h5l-12-12z\"/>\n                    </svg>\n                </SvgButton>\n\n            );\n        }\n\n        return (\n            <div classes={searchHeaderClasses} key=\"header\">\n                <div key=\"section-title-container\" class=\"ib-header__search-section\">\n                    {backBtn}\n                    <SectionDropdown key=\"section-dropdown\" />\n                    {closeBtn}\n                </div>\n            </div>\n        );\n    }\n}\n\ninterface StateProps {\n    showBackBtn: boolean;\n    showCloseBtn: boolean;\n    onBack: () => void;\n}\n\n/**\n * `Header` component connected to an `ItemBrowserStore`.\n */\nexport default connect<HeaderProps, ItemBrowserStore, StateProps, {}>(\n    (state) => ({\n        showBackBtn: state.settings.config.showBackBtn,\n        showCloseBtn: state.settings.config.showCloseBtn,\n        onBack: () => { state.settings.config.onBack(); }\n    }),\n    () => ({})\n)(Header);\n","import * as i18n from \"dojo/i18n!../nls/resources\";\nimport { Component, H, connect } from \"../../Component\";\nimport { ItemBrowserState } from \"../index\";\nimport { changeSearchSection, search } from \"../_actions/index\";\nimport TextOptionDropdown from \"../../Dropdowns/TextOptionDropdown\";\nimport SvgButton from \"../../Buttons/SvgButton\";\nimport { ItemBrowserStore } from \"../../wrappers/ItemBrowser\";\n\nexport interface SectionDropdownProps {\n    /**\n     * Unique key for the component.\n     * @type {string}\n     */\n    key: string;\n\n    /**\n     * Array of available base sections.\n     * @type {array}\n     */\n    baseSections: ItemBrowserState[\"settings\"][\"config\"][\"baseSections\"];\n\n    /**\n     * Array of custom sections.\n     * @type {array}\n     */\n    customSections: ItemBrowserState[\"settings\"][\"config\"][\"customSections\"];\n\n    /**\n     * The portal currently being queried against.\n     * @type {object}\n     */\n    portal: ItemBrowserState[\"settings\"][\"utils\"][\"portal\"];\n\n    /**\n     * Indicates whether a dropdown should be shown or just the title.\n     * @type {boolean}\n     */\n    replaceSectionDropdownWithTitle: ItemBrowserState[\"settings\"][\"config\"][\"replaceSectionDropdownWithTitle\"];\n\n    /**\n     * The title of the browser.\n     * @type {string}\n     */\n    dialogTitle: ItemBrowserState[\"settings\"][\"config\"][\"dialogTitle\"];\n\n    /**\n     * The name of the currently active section.\n     * @type {string}\n     */\n    section: ItemBrowserState[\"parameters\"][\"section\"];\n\n    /**\n     * Handler for when a search section is changed.\n     * @type {function}\n     */\n    changeSearchSection: (section: string) => void;\n\n    /**\n     * Handler for when a search is initiated.\n     * @type {function}\n     */\n    search: (updateCounts?: boolean) => void;\n}\n\nexport interface SectionDropdownState {\n    options: { value: string, text: string }[];\n}\n\n/**\n * Section dropdown for the `ItemBrowser`.\n */\nclass SectionDropdown extends Component<SectionDropdownProps, SectionDropdownState> {\n    constructor(props: SectionDropdownProps) {\n        super(props);\n\n        const options = (this.props.portal.user ?\n                this.props.baseSections :\n                this.props.baseSections.filter((section) => (section === \"livingAtlas\" || section === \"all\"))\n            )\n            .map((category) => ({\n                value: category,\n                text: i18n.header.sectionTitles[category]\n            }));\n        this.props.customSections.forEach((customSection: any) => {\n            const section = {\n                value: customSection.name,\n                text: customSection.name\n            };\n            if (customSection.addToFront) {\n                options.splice(0, 0, section);\n            } else {\n                options.push(section);\n            }\n        });\n        this.state = {\n            options\n        };\n\n        this.handleOptionSelect = this.handleOptionSelect.bind(this);\n    }\n\n    public render(tsx: H) {\n        const section = this.props.section;\n        const sectionTitle = i18n.header.sectionTitles[section];\n\n        if (this.state.options.length < 2 || this.props.replaceSectionDropdownWithTitle) {\n            return (\n                <h3 id=\"ib-dialog-title\" class=\"ib-header__dialog-title\">\n                    {this.props.dialogTitle}\n                </h3>\n            );\n        }\n        return (\n            <TextOptionDropdown\n                key=\"section-dropdown-base\"\n                options={this.state.options}\n                onSelect={this.handleOptionSelect}\n                selectedOptionValue={this.props.section}\n            >\n                <h3\n                    key={`search-${section}-dropdown`}\n                    id=\"section-dropdown-toggle\"\n                    class=\"ib-section-dropdown__toggle\"\n                >\n                    {sectionTitle ? sectionTitle : section}&nbsp;\n                    <SvgButton\n                        key=\"section-dropdown-button\"\n                    >\n                        <svg\n                            width=\"12\"\n                            height=\"12\"\n                            viewBox=\"0 0 16 16\"\n                        >\n                            <path\n                                d=\"M1.5,4 L8,11 L14.5,4 C11.893,4 4.101,4 1.5,4 Z\"\n                            />\n                        </svg>\n                    </SvgButton>\n                </h3> \n            </TextOptionDropdown>\n        );\n    }\n\n    private handleOptionSelect(section: ItemBrowserState[\"parameters\"][\"section\"]) {\n        this.props.changeSearchSection(section);\n        this.props.search(true);\n    }\n}\n\ninterface StateProps {\n    baseSections: ItemBrowserState[\"settings\"][\"config\"][\"baseSections\"];\n    customSections: ItemBrowserState[\"settings\"][\"config\"][\"customSections\"];\n    portal: ItemBrowserState[\"settings\"][\"utils\"][\"portal\"];\n    replaceSectionDropdownWithTitle: ItemBrowserState[\"settings\"][\"config\"][\"replaceSectionDropdownWithTitle\"];\n    dialogTitle: ItemBrowserState[\"settings\"][\"config\"][\"dialogTitle\"];\n    section: ItemBrowserState[\"parameters\"][\"section\"];\n}\n\ninterface DispatchProps {\n    changeSearchSection: (section: string) => void;\n    search: (updateCounts?: boolean) => void;\n}\n\n/**\n * `SectionDropdown` component connected to an `ItemBrowserStore`.\n */\nexport default connect<SectionDropdownProps, ItemBrowserStore, StateProps, DispatchProps>(\n    (state) => ({\n        baseSections: state.settings.config.baseSections,\n        customSections: state.settings.config.customSections,\n        portal: state.settings.utils.portal,\n        replaceSectionDropdownWithTitle: state.settings.config.replaceSectionDropdownWithTitle,\n        dialogTitle: state.settings.config.dialogTitle,\n        section: state.parameters.section\n    }),\n    (dispatch) => ({\n        changeSearchSection: (section: string) => { dispatch(changeSearchSection(section)); },\n        search: (updateCounts: boolean) => { dispatch(search(updateCounts)); }\n    })\n)(SectionDropdown);\n","import * as i18n from \"dojo/i18n!../nls/resources\";\nimport { Component, H, connect } from \"../../Component\";\nimport { ItemBrowserState } from \"../index\";\n\nimport IconButton from \"../../Buttons/IconButton\";\nimport ActiveFilters from \"./ActiveFilters\";\n\nimport {\n    search,\n    changeSearchString,\n    closeDetailsPane,\n    viewFilters,\n    viewSort,\n    CHANGE_RESULT_DISPLAY\n} from \"../_actions/index\";\nimport { ItemBrowserStore } from \"../../wrappers/ItemBrowser\";\n\nexport interface InputAreaProps {\n    /**\n     * A unique key for the component.\n     * @type {string}\n     */\n    key: string;\n\n    /**\n     * Total number of results from the next query.\n     * @type {number}\n     */\n    nextTotal: ItemBrowserState[\"parameters\"][\"nextQuery\"][\"total\"];\n\n    /**\n     * Placeholder text for the `ItemBrowser` search input.\n     * @type {string}\n     */\n    placeholderText: ItemBrowserState[\"settings\"][\"config\"][\"searchPlaceholderText\"];\n\n    /**\n     * Name of the type of items being searched for.\n     * @type {string}\n     */\n    replacementItemName: ItemBrowserState[\"settings\"][\"config\"][\"itemName\"];\n\n    /**\n     * Display type of the result panel. Options are `\"list\"` or `\"table\"`.\n     * @type {string}\n     */\n    resultPanelType: ItemBrowserState[\"ui\"][\"resultPanel\"][\"display\"];\n\n    /**\n     * The currently entered search string.\n     * @type {string}\n     */\n    searchString: ItemBrowserState[\"parameters\"][\"searchString\"][\"current\"];\n\n    /**\n     * The previously entered search string.\n     * @type {string}\n     */\n    previousSearchString: ItemBrowserState[\"parameters\"][\"searchString\"][\"previous\"];\n\n    /**\n     * The type of the side panel currently displayed.\n     * @type {string}\n     */\n    sidePanelType: ItemBrowserState[\"ui\"][\"sidePanel\"][\"type\"];\n\n    /**\n     * Handler for when a search is initiated.\n     * @type {function}\n     */\n    search: (updateCounts?: boolean) => void;\n\n    /**\n     * Handler for when the result display type is changed.\n     * @type {function}\n     */\n    changeResultDisplay: () => void;\n\n    /**\n     * Handler for when the search string is changed.\n     * @type {function}\n     */\n    changeSearchString: (newString: string) => void;\n\n    /**\n     * Handler for when the details panel is closed.\n     * @type {function}\n     */\n    closeDetailsPane: () => void;\n\n    /**\n     * Handler for when the filters panel is opened.\n     * @type {function}\n     */\n    viewFilters: () => void;\n\n    /**\n     * Handler for when the sort panel is opened.\n     * @type {function}\n     */\n    viewSort: () => void;\n}\n\n/**\n * Input area for the `ItemBrowser` component.\n */\nexport class InputArea extends Component<InputAreaProps> {\n    constructor(props: InputAreaProps) {\n        super(props);\n\n        this.handleSearchChange = this.handleSearchChange.bind(this);\n        this.handleSearchKeyDown = this.handleSearchKeyDown.bind(this);\n        this.handleListClick = this.handleListClick.bind(this);\n        this.handleTableClick = this.handleTableClick.bind(this);\n        this.handleSortClick = this.handleSortClick.bind(this);\n        this.handleFilterClick = this.handleFilterClick.bind(this);\n    }\n\n    public render(tsx: H) {\n        const resultCount = `${this.props.nextTotal.toLocaleString()} ${\n            this.props.replacementItemName ?\n                this.props.replacementItemName :\n                i18n.resultCount\n        }`;\n\n        const placeholder = this.props.placeholderText ?\n            this.props.placeholderText :\n            i18n.searchPlaceholders.generic;\n        \n        return (\n            <div>\n                <div\n                    key=\"search-input-area\"\n                    class=\"ib__input-area\"\n                >\n                    <div key=\"search-bar-container\" class=\"ib-input-area__search-bar\">\n                        <input\n                            id=\"item-browser-search-input\"\n                            class=\"ib-input-area__search-input\"\n                            type=\"search\"\n                            oninput={this.handleSearchChange}\n                            onkeydown={this.handleSearchKeyDown}\n                            placeholder={placeholder}\n                            aria-label={placeholder}\n                            value={this.props.searchString}\n                        />\n                    </div>\n                    <div class=\"ib-input-area__result-bar-container\">\n                        <span class=\"ib-input-area__result-count\">{resultCount}</span>\n                        <div class=\"ib-input-area__icon-button-container\">\n                            <IconButton\n                                active={this.props.resultPanelType === \"table\"}\n                                key=\"table-button\"\n                                handleClick={this.handleTableClick}\n                                title={i18n.compactView}\n                            >\n                                <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\">\n                                    <g stroke=\"none\" stroke-width=\"1\">\n                                        <g>\n                                            <path\n                                                d=\"M4 14h11v1H4v-1zm0-4h11v1H4v-1zm0-3h11V6H4v1zm0-4h11V2H4v1zM3 14H1v1h2v-1zm0-4H1v1h2v-1zm0-4H1v1h2V6zm0-4H1v1h2V2z\"\n                                            />\n                                        </g>\n                                    </g>\n                                </svg>\n                            </IconButton>\n                            <IconButton\n                                active={this.props.resultPanelType === \"list\"}\n                                handleClick={this.handleListClick}\n                                key=\"list-button\"\n                                title={i18n.listView}\n                            >\n                                <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\">\n                                    <g stroke=\"none\" stroke-width=\"1\">\n                                        <g>\n                                            <path\n                                                d=\"M7 13h8v1H7zm-2-1H2v3h3zm2-8h8V3H7zm0 5h8V8H7zM5 2H2v3h3zm0 5H2v3h3z\"\n                                            />\n                                        </g>\n                                    </g>\n                                </svg>\n                            </IconButton>\n                            <div class=\"ib-input-area__spacer\" />\n                            <IconButton\n                                active={this.props.sidePanelType === \"filter\"}\n                                handleClick={this.handleFilterClick}\n                                key=\"filter-button\"\n                                title={this.props.sidePanelType === \"filter\" ? i18n.close : i18n.filterPane.filter}\n                            >\n                                <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\">\n                                    <g  stroke=\"none\" stroke-width=\"1\">\n                                        <g id=\"filter-sliders-1px-16\">\n                                            <path d=\"M7,13 L0,13 L0,12 L7,12 L7,10 L8,10 L8,15 L7,15 L7,13 Z M12,8 L0,8 L0,7 L12,7 L12,5 L13,5 L13,10 L12,10 L12,8 Z M2,3 L0,3 L0,2 L2,2 L2,0 L3,0 L3,5 L2,5 L2,3 Z M4,2 L16,2 L16,3 L4,3 L4,2 Z M14,7 L16,7 L16,8 L14,8 L14,7 Z M9,12 L16,12 L16,13 L9,13 L9,12 Z\" />\n                                        </g>\n                                    </g>\n                                </svg>\n                            </IconButton>\n                            <IconButton\n                                active={this.props.sidePanelType === \"sort\"}\n                                handleClick={this.handleSortClick}\n                                key=\"sort-button\"\n                                title={this.props.sidePanelType === \"sort\" ? i18n.close : i18n.sortOptions.sort}\n                            >\n                                <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\">\n                                    <g  stroke=\"none\" stroke-width=\"1\">\n                                        <g id=\"sort-1px-16\">\n                                            <path\n                                                d=\"M1,1 L15,1 L15,2 L1,2 L1,1 Z M4,5 L15,5 L15,6 L4,6 L4,5 Z M7,9 L15,9 L15,10 L7,10 L7,9 Z M11,13 L15,13 L15,14 L11,14 L11,13 Z\"\n                                            />\n                                        </g>\n                                    </g>\n                                </svg>\n                            </IconButton>\n                        </div>\n                    </div>\n                </div>\n                <ActiveFilters key=\"active-filters\" theme=\"light\" />\n            </div>\n        );\n    }\n    \n    private handleSearchChange(e: any) {\n        this.props.changeSearchString(e.target.value);\n        if (e.target.value === \"\" && this.props.previousSearchString !== \"\") {\n            this.props.search(true);\n        }\n    }\n\n    private handleSearchKeyDown(e: KeyboardEvent) {\n        if (e.key === \"Enter\") {\n            this.props.search(true);\n        }\n    }\n\n    private handleTableClick(e: Event) {\n        e.preventDefault();\n        if (this.props.resultPanelType === \"list\") {\n            this.props.changeResultDisplay();\n        }\n    }\n    \n    private handleListClick(e: Event) {\n        e.preventDefault();\n        if (this.props.resultPanelType === \"table\") {\n            this.props.changeResultDisplay();\n        }\n    }\n\n    private handleFilterClick(e: Event) {\n        e.preventDefault();\n        if (this.props.sidePanelType === \"filter\") {\n            this.props.closeDetailsPane();\n        } else {\n            this.props.viewFilters();\n        }\n    }\n\n    private handleSortClick(e: Event) {\n        e.preventDefault();\n        if (this.props.sidePanelType === \"sort\") {\n            this.props.closeDetailsPane();\n        } else {\n            this.props.viewSort();\n        }\n    }\n}\n\ninterface StateProps {\n    nextTotal: ItemBrowserState[\"parameters\"][\"nextQuery\"][\"total\"];\n    placeholderText: ItemBrowserState[\"settings\"][\"config\"][\"searchPlaceholderText\"];\n    previousSearchString: ItemBrowserState[\"parameters\"][\"searchString\"][\"previous\"];\n    replacementItemName: ItemBrowserState[\"settings\"][\"config\"][\"itemName\"];\n    resultPanelType: ItemBrowserState[\"ui\"][\"resultPanel\"][\"display\"];\n    searchString: ItemBrowserState[\"parameters\"][\"searchString\"][\"current\"];\n    sidePanelType: ItemBrowserState[\"ui\"][\"sidePanel\"][\"type\"];\n}\n\ninterface DispatchProps {\n    search: (updateCounts?: boolean) => void;\n    changeResultDisplay: () => void;\n    changeSearchString: (newString: string) => void;\n    closeDetailsPane: () => void;\n    viewFilters: () => void;\n    viewSort: () => void;  \n}\n\n/**\n * `InputArea` connected to an `ItemBrowserStore`.\n */\nexport default connect<InputAreaProps, ItemBrowserStore, StateProps, DispatchProps>(\n    (state) => ({\n        nextTotal: state.parameters.nextQuery.total,\n        placeholderText: state.settings.config.searchPlaceholderText,\n        previousSearchString: state.parameters.searchString.previous,\n        replacementItemName: state.settings.config.itemName,\n        resultPanelType: state.ui.resultPanel.display,\n        searchString: state.parameters.searchString.current,\n        sidePanelType: state.ui.sidePanel.type\n    }),\n    (dispatch) => ({\n        search: (updateCounts: boolean) => { dispatch(search(updateCounts)); },\n        changeResultDisplay: () => { dispatch({ type: CHANGE_RESULT_DISPLAY }); },\n        changeSearchString: (newString: string) => { dispatch(changeSearchString(newString)); },\n        closeDetailsPane: () => { dispatch(closeDetailsPane()); },\n        viewFilters: () => { dispatch(viewFilters()); },\n        viewSort: () => { dispatch(viewSort()); }\n    })\n)(InputArea);\n","import * as i18n from \"dojo/i18n!../nls/resources\";\nimport { Component, H, connect } from \"../../Component\";\nimport { ItemBrowserState } from \"../index\";\nimport { loadMoreContent } from \"../_actions/index\";\n\nimport ItemList from \"./ItemList\";\nimport ItemMapping from \"./ItemMapping\";\nimport LoaderBars from \"../../Loaders/LoaderBars\";\nimport { ItemBrowserStore } from \"../../wrappers/ItemBrowser\";\n\nexport interface ResultPanelProps {\n    /**\n     * A unique key for the component.\n     * @type {string}\n     */\n    key: string;\n\n    /**\n     * Items currently being displayed in the results list.\n     * @type {array}\n     */\n    displayItems: ItemBrowserState[\"results\"][\"displayItems\"];\n\n    /**\n     * The start number of the next result query in the set.\n     * @type {number}\n     */\n    nextStart: ItemBrowserState[\"parameters\"][\"nextQuery\"][\"nextStart\"];\n\n    /**\n     * If true, will show a submit button when items have been selected.\n     * @type {boolean}\n     */\n    showSubmitButton: ItemBrowserState[\"settings\"][\"config\"][\"showSubmitButton\"];\n\n    /**\n     * The display type of the result panel. Options are `\"list\"` or `\"table\"`.\n     * @type {string}\n     */\n    resultPanelDisplayType: ItemBrowserState[\"ui\"][\"resultPanel\"][\"display\"];\n\n    /**\n     * The status of the result panel. Options are `\"loading\"`, `\"loadingNext\"`, `\"failed\"`, `\"success\"` or `\"empty\"`.\n     * @type {string}\n     */\n    resultPanelStatus: ItemBrowserState[\"ui\"][\"resultPanel\"][\"status\"];\n\n    /**\n     * Handler for loading additional content.\n     * @type {function}\n     */\n    loadMoreContent: (num?: number) => void;\n}\n\n/**\n * The result panel for the `ItemBrowser` component.\n */\nexport class ResultPanel extends Component<ResultPanelProps> {\n    constructor(props: ResultPanelProps) {\n        super(props);\n\n        this.handleScroll = this.handleScroll.bind(this);\n        this.handleCreate = this.handleCreate.bind(this);\n    }\n\n    public render(tsx: H) {\n        const status = this.props.resultPanelStatus;\n\n        if (status === \"success\" || status === \"loadingNext\") {\n            return (\n                <ItemList\n                    key={`item-list-${this.props.resultPanelDisplayType}`}\n                    i18n={i18n}\n                    showSubmitButton={this.props.showSubmitButton}\n                    results={this.props.displayItems}\n                    loadingNext={this.props.resultPanelStatus === \"loadingNext\"}\n                    handleScroll={this.handleScroll}\n                    handleCreate={this.handleCreate}\n                >\n                    <ItemMapping key=\"result-items\" />\n                </ItemList>\n            );\n        } else if (status === \"loading\") {\n            return (\n                <div key=\"loading-items\" class=\"ib__results\">\n                    <LoaderBars key=\"item-loader\" text={i18n.results.loadingItems} />\n                </div>\n            );\n        } else if (status === \"empty\") {\n            return (\n                <div\n                    key=\"empty-state\"\n                    class=\"ib__results\"\n                >\n                    <div class=\"ib-results__message-container\">\n                        <span class=\"ib-results__message\">\n                            {i18n.results.empty}\n                        </span>\n                    </div>\n                </div>\n            );\n        }\n        return (\n            <div\n                key=\"request-error\"\n                class=\"ib__results\"\n            >\n                <div class=\"ib-results__message-container\">\n                    <span class=\"ib-results__message\">\n                        {i18n.results.requestError}\n                    </span>\n                </div>\n            </div>\n        );\n    }\n\n    private handleScroll(e: any) {\n        const scrollFraction = ((e.target.scrollTop + e.target.offsetHeight) / e.target.scrollHeight);\n        // Scroll fraction and optimism of loading have inverse relationship\n        if (\n            scrollFraction >= 0.99 &&\n            this.props.resultPanelStatus !== \"loadingNext\" &&\n            this.props.nextStart !== -1\n        ) {\n            this.props.loadMoreContent();\n        }\n    }\n\n    private handleCreate(e: HTMLElement) {\n        setTimeout(() => {\n            if (\n                e.scrollHeight <= e.clientHeight &&\n                this.props.resultPanelStatus !== \"loadingNext\" &&\n                this.props.nextStart !== -1\n            ) {\n                this.props.loadMoreContent(50);\n            }\n        }, 10);\n    }\n}\n\ninterface StateProps {\n    displayItems: ItemBrowserState[\"results\"][\"displayItems\"];\n    nextStart: ItemBrowserState[\"parameters\"][\"nextQuery\"][\"nextStart\"];\n    showSubmitButton: ItemBrowserState[\"settings\"][\"config\"][\"showSubmitButton\"];\n    resultPanelDisplayType: ItemBrowserState[\"ui\"][\"resultPanel\"][\"display\"];\n    resultPanelStatus: ItemBrowserState[\"ui\"][\"resultPanel\"][\"status\"];\n}\n\ninterface DispatchProps {\n    loadMoreContent: (num?: number) => void;\n}\n\n/**\n * `ResultPanel` connected to an `ItemBrowserStore`.\n */\nexport default connect<ResultPanelProps, ItemBrowserStore, StateProps, DispatchProps>(\n    (state) => ({\n        displayItems: state.results.displayItems,\n        nextStart: state.parameters.nextQuery.nextStart,\n        showSubmitButton: state.settings.config.showSubmitButton,\n        resultPanelDisplayType: state.ui.resultPanel.display,\n        resultPanelStatus: state.ui.resultPanel.status\n    }),\n    (dispatch) => ({\n        loadMoreContent: (num?: number) => { dispatch(loadMoreContent(num)); }\n    })\n)(ResultPanel);\n","import LoaderBars from \"../../Loaders/LoaderBars\";\nimport { SFCProps, H, Pojo } from \"../../Component\";\n\nexport interface ItemListProps extends SFCProps {\n    /**\n     * A unique key for this component.\n     * @type {string}\n     */\n    key: string;\n\n    /**\n     * nls for the item browser.\n     * @type {object}\n     */\n    i18n: Pojo;\n\n    /**\n     * If true, will show a submit button at the bottom of the item list.\n     * @type {boolean}\n     */\n    showSubmitButton: boolean;\n\n    /**\n     * Array of results to show.\n     * @type {array}\n     */\n    results: Pojo[];\n\n    /**\n     * If true, will show a loader indicating that additional content is being retrieved.\n     * @type {boolean}\n     */\n    loadingNext: boolean;\n\n    /**\n     * Handler for the user scrolling the item list.\n     * @type {function}\n     */\n    handleScroll: (e: any) => void;\n\n    /**\n     * Handler for when the item list is rendered to the DOM.\n     * @type {function}\n     */\n    handleCreate: (e: any) => void;\n}\n\n/**\n * List of items for the `ItemBrowser`.\n */\nexport default (\n    {\n        key,\n        i18n,\n        results,\n        loadingNext,\n        handleScroll,\n        handleCreate,\n        children\n    }: ItemListProps,\n    tsx: H\n) => {\n    if (results.length > 0) {\n        return (\n            <div\n                key={key}\n                class=\"ib-results__item-list\"\n                onscroll={handleScroll}\n                afterCreate={handleCreate}\n            >\n                {children}\n                {\n                    loadingNext ?\n                    (\n                        <div class=\"ib-results__load-container\">\n                            <LoaderBars key=\"more-items-loader\" />\n                        </div>\n                    ) :\n                    null\n                }\n            </div>\n        );\n    }\n    return (\n        <div\n            key=\"no-items-found\"\n            class=\"ib-results__item-list ib-results__item-list--none\"\n        >\n            <span style=\"font-size: 0.9375rem;\">\n                {i18n.results.noItemsFound}\n            </span>\n        </div>\n    );\n};\n","import { Component, H, Pojo, connect, ComponentProps } from \"../../Component\";\nimport { ItemBrowserState } from \"../index\";\nimport { getCurrentPortal } from \"../_utils/index\";\nimport {\n    closeDetailsPane,\n    viewItemDetails,\n    selectItem,\n    deselectItem,\n    customAction\n} from \"../_actions/index\";\n\nimport MiniCard from \"../../ItemCards/MiniCard/index\";\nimport MiniCardRow from \"../../ItemCards/MiniCardRow/index\";\nimport { ItemBrowserStore } from \"../../wrappers/ItemBrowser\";\n\nexport interface ItemMappingProps extends ComponentProps {\n    /**\n     * Current state tree of the `ItemBrowser`.\n     * @type {object}\n     */\n    stateTree: ItemBrowserState; // bad\n\n    /**\n     * Handler for when the details panel is closed.\n     * @type {funtion}\n     */\n    closeDetailsPane: () => void;\n\n    /**\n     * Handler for when an item's details are viewed.\n     * @type {function}\n     */\n    viewItemDetails: (item: Pojo) => void;\n\n    /**\n     * Handler for when an item is deselected.\n     * @type {function}\n     */\n    deselectItem: (item: Pojo) => void;\n\n    /**\n     * Handler for when an item is selected.\n     * @type {function}\n     */\n    selectItem: (item: Pojo) => void;\n\n    /**\n     * Handler for when a custom action is executed.\n     * @type {function}\n     */\n    customAction: (actionName: string, item: Pojo) => void;\n}\n\nexport interface ItemMappingState {\n    constrained: boolean;\n}\n\n/**\n * Mapping of item results to cards for the `ItemBrowser`.\n */\nclass ItemMapping extends Component<ItemMappingProps, ItemMappingState> {\n    constructor(props: ItemMappingProps) {\n        super(props);\n\n        this.handleShowItemDetails = this.handleShowItemDetails.bind(this);\n        this.handleSelectionClick = this.handleSelectionClick.bind(this);\n        this.handleCustomActionClick = this.handleCustomActionClick.bind(this);\n        this.startResizePoll = this.startResizePoll.bind(this);\n        this.resizePoll = this.resizePoll.bind(this);\n    }\n\n    public render(tsx: H) {\n        const results = this.props.stateTree.results;\n\n        if (results.displayItems.length > 0) {\n            return (\n                <div key=\"item-wrapper\" id=\"resize-detector\" afterCreate={this.startResizePoll}>\n                    {this.mapItemsToChildren(results.displayItems, tsx)}\n                </div>\n            );\n        }\n        return;\n    }\n\n    private mapItemsToChildren(results: Pojo[], tsx: H) {\n        return results.map(\n            (item: Pojo) => {\n                const portal = getCurrentPortal(this.props.stateTree);\n                if (this.props.stateTree.ui.resultPanel.display === \"list\") {\n\n                    const organization = (\n                        item.contentStatus === \"public_authoritative\" &&\n                        this.props.stateTree.results.allOrganizations[item.orgId]\n                    ) ? this.props.stateTree.results.allOrganizations[item.orgId] : undefined;\n\n\n                    return (\n                        <MiniCard\n                            constrained={this.state.constrained}\n                            key={`${item.id}-card`}\n                            item={item}\n                            loadingItems={this.props.stateTree.results.loadingItems}\n                            selectedItems={this.props.stateTree.results.selectedItems}\n                            activeItem={this.props.stateTree.ui.sidePanel.item}\n                            portal={portal}\n                            onShowItemDetails={this.handleShowItemDetails}\n                            onSelectionClick={this.handleSelectionClick}\n                            customActions={this.props.stateTree.settings.config.customActions}\n                            onCustomActionClick={this.handleCustomActionClick}\n                            disableMainAction={this.props.stateTree.settings.config.disableMainAction}\n                            sortField={this.props.stateTree.parameters.sort.field}\n                            hideEllipses={this.props.stateTree.settings.config.hideEllipses}\n                            organization={organization}\n                        />\n                    );\n                } else {\n                    return (\n                        <MiniCardRow\n                            key={`${item.id}-cardrow`}\n                            item={item}\n                            loadingItems={this.props.stateTree.results.loadingItems}\n                            selectedItems={this.props.stateTree.results.selectedItems}\n                            activeItem={this.props.stateTree.ui.sidePanel.item}\n                            portal={portal}\n                            onShowItemDetails={this.handleShowItemDetails}\n                            onSelectionClick={this.handleSelectionClick}\n                            customActions={this.props.stateTree.settings.config.customActions}\n                            onCustomActionClick={this.handleCustomActionClick}\n                            disableMainAction={this.props.stateTree.settings.config.disableMainAction}\n                            sortField={this.props.stateTree.parameters.sort.field}\n                            hideEllipses={this.props.stateTree.settings.config.hideEllipses}\n                        />\n                    );\n                }\n            }\n        );\n    }\n\n    private handleShowItemDetails(item: Pojo) {\n        const sidePanelState = this.props.stateTree.ui.sidePanel;\n        if (sidePanelState.item && sidePanelState.item.id === item.id) {\n            this.props.closeDetailsPane();\n        } else {\n            this.props.viewItemDetails(item);\n        }\n    }\n\n    private handleSelectionClick(item: Pojo) {\n        const selectedItems = this.props.stateTree.results.selectedItems;\n        if (selectedItems[item.id]) {\n            this.props.deselectItem(item);\n        } else {\n            this.props.selectItem(item);\n        }\n    }\n\n    private handleCustomActionClick(actionName: string, item: Pojo) {\n        this.props.customAction(actionName, item);\n    }\n\n    private startResizePoll(e: HTMLElement) {\n        this.resizePoll(e);\n    }\n\n    private resizePoll(e: HTMLElement) {\n        if (e && e.clientWidth > 0) {\n            if (e.clientWidth < 300 && !this.state.constrained) {\n                this.setState({ constrained: true });\n            } else if (e.clientWidth > 300 && this.state.constrained) {\n                this.setState({ constrained: false });\n            }\n\n            setTimeout(() => {\n                this.resizePoll(e);\n            }, 250)\n        }\n    }\n}\n\ninterface StateProps {\n    stateTree: ItemBrowserState;\n}\n\ninterface DispatchProps {\n    closeDetailsPane: () => void;\n    viewItemDetails: (item: Pojo) => void;\n    deselectItem: (item: Pojo) => void;\n    selectItem: (item: Pojo) => void;\n    customAction: (actionName: string, item: Pojo) => void;\n}\n\n/**\n * `ItemMapping` connected to an `ItemBrowserStore`.\n */\nexport default connect<ItemMappingProps, ItemBrowserStore, StateProps, DispatchProps>(\n    (state) => ({ stateTree: state }),\n    (dispatch) => ({\n        closeDetailsPane: () => { dispatch(closeDetailsPane()); },\n        viewItemDetails: (item: Pojo) => { dispatch(viewItemDetails(item)); },\n        deselectItem: (item: Pojo) => { dispatch(deselectItem(item)); },\n        selectItem: (item: Pojo) => { dispatch(selectItem(item)); },\n        customAction: (actionName: string, item: Pojo) => { dispatch(customAction(actionName, item)); }\n    })\n)(ItemMapping);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__235__;","module.exports = __WEBPACK_EXTERNAL_MODULE__236__;","import { compose } from \"../../functional/index\";\r\nimport { mixinOrgBaseUrl } from \"./baseUrl\";\r\nimport { mixinOrgThumbnail } from \"./thumbnail\";\r\nimport { mixinOrgUrl } from \"./url\";\r\n\r\nexport * from \"./baseUrl\";\r\nexport * from \"./thumbnail\";\r\nexport * from \"./url\";\r\n\r\nexport const mixinOrgInfo = compose(\r\n    mixinOrgThumbnail,\r\n    mixinOrgUrl,\r\n    mixinOrgBaseUrl\r\n);\r\n","import { curry } from \"../../functional/index\";\r\n\r\nconst appendTimeRangeQ = curry((\r\n    type: string,\r\n    range: { start: number, end: number } | undefined,\r\n    q: string[]\r\n): string[] => {\r\n    if (range) {\r\n        return [...q, `(${type}:${formatDateRange(range)})`];\r\n    }\r\n    return q;\r\n});\r\n\r\n/**\r\n * (Curried, arity 2) Returns new q including the date modified query based on a time range\r\n * 1. time range with start and end equal to ms since the epoch\r\n * 2. previous q\r\n */\r\nexport const appendDateModifiedQ = appendTimeRangeQ(\"modified\");\r\n\r\n/**\r\n * (Curried, arity 2) Returns new q including the date created query based on a time range\r\n * 1. time range with start and end equal to ms since the epoch\r\n * 2. previous q\r\n */\r\nexport const appendDateCreatedQ = appendTimeRangeQ(\"uploaded\");\r\n\r\n/**\r\n * Returns a time range as string formatted for the sharing API\r\n * @param date Object with 'start' and 'end' indicating milliseconds elapsed since January 1, 1970 00:00:00 UTC\r\n */\r\nfunction formatDateRange(range: { start: number, end: number }): string {\r\n    return `[000000${range.start} TO 000000${range.end}]`;\r\n}\r\n","import { curry } from \"../../functional/index\";\r\n\r\n/**\r\n * (Curried, arity 2) Returns new q including the access query based on a tags filter\r\n * @param tags current value of a tags filter\r\n * @param q previous q\r\n */\r\nexport const appendTagsQ = curry((tags: { [tagName: string]: boolean } | undefined, q: string[]) => {\r\n    if (tags) {\r\n        const tagsArr = Object.keys(tags);\r\n        if (tagsArr.length > 0) {\r\n            return [ ...q, `tags:(${tagsArr.join(\" AND \")})` ];\r\n        }\r\n    }\r\n    return q;\r\n});\r\n\r\n/**\r\n * Returns new q based on supplied tag\r\n * @param tag string representing the tag\r\n * @param q previous q\r\n */\r\nexport const appendTagQ = curry((tag: string, q: string[]) => {\r\n    if (tag.length > 2) {\r\n        return [ ...q, `tags:(${tag}* OR ${tag})` ];\r\n    }\r\n    return q;\r\n});\r\n","import { CustomSection } from \"../_reducers/settings/config\";\r\n\r\n/**\r\n * The request for tag aggregations cannot be sent in all cases due to backend performance limitations.\r\n * This returns a boolean indicating whether the tag aggregations query is allowed or not\r\n * @param section - the current item browser section\r\n */\r\nexport function allowTagsQuery(section: string | CustomSection): boolean {\r\n    if (typeof section === \"string\") {\r\n        return (\r\n            [ \"myContent\", \"myFavorites\", \"myGroups\", \"myOrganization\", \"livingAtlas\" ]\r\n                .indexOf(section) > -1\r\n        );\r\n    } else if (!section.filters) {\r\n        return false;\r\n    }\r\n    return section.filters.indexOf(\"tags\") > -1;\r\n}\r\n","import { Component, H, connect } from \"../Component\";\nimport { ItemBrowserState } from \"./_reducers/index\";\nexport { ItemBrowserState, defaultConfig, reducers, initialState } from \"./_reducers/index\";\nexport {\n    SELECT_ITEM_SINGLE,\n    SELECT_ITEM,\n    DESELECT_ITEM,\n    SELECT_ITEM_ASYNC,\n    SELECT_ITEM_ASYNC_FAILED,\n    search,\n    updateExtent,\n    viewItemDetails,\n    changeSearchSection\n} from \"./_actions/index\";\n\nimport Header from \"./Header/index\";\nimport InputArea from \"./InputArea/index\";\nimport ResultPanel from \"./ResultPanel/index\";\nimport SidePanel from \"./SidePanel/index\";\nimport Expanded from \"./Expanded/index\";\nimport { ItemBrowserStore } from \"../wrappers/ItemBrowser\";\n\nexport interface ItemBrowserProps extends Partial<ItemBrowserState> {\n    /**\n     * Unique key for the `ItemBrowser` component.\n     * @type {string}\n     */\n    key: string;\n\n    /**\n     * Layout mode for the `ItemBrowser`. Options are `\"fullscreen\"`, `\"confined\"` or `\"adjustable\"`.\n     * @type {string}\n     */\n    layoutMode: \"fullscreen\" | \"confined\" | \"adjustable\";\n\n    /**\n     * When in adjustable mode, indicates whether the `ItemBrowser` is currently in its expanded state.\n     * @type {boolean}\n     */\n    expanded: boolean;\n\n    /**\n     * Indicates whether the side panel is currently being closed.\n     * @type {boolean}\n     */\n    sidePanelClosing: boolean;\n}\n\n/**\n * A component used for browsing items on AGOL & Portals.\n */\nclass ItemBrowser extends Component<ItemBrowserProps> {\n    public render(tsx: H) {\n        const layoutMode = this.props.layoutMode;\n\n        const containerClasses = {\n            \"ib__container\": true,\n            \"ib__container--expanded\": this.props.expanded && layoutMode === \"adjustable\" ||\n                layoutMode === \"fullscreen\",\n        };\n\n        if (layoutMode === \"fullscreen\") {\n            return <Expanded key=\"big-browser\" containerClasses={containerClasses} />;\n        }\n        return (\n            <div id=\"item-browser-container\" classes={containerClasses}>\n                <SidePanel key=\"side-panel\" closing={this.props.sidePanelClosing} />\n                <Header key=\"header\" />\n                <InputArea key=\"input-area\" />\n                <ResultPanel key=\"result-panel\" />\n            </div>\n        );\n    }\n}\n\ninterface StateProps {\n    layoutMode: \"fullscreen\" | \"confined\" | \"adjustable\";\n    expanded: boolean;\n    sidePanelClosing: boolean;\n}\n\n/**\n * `ItemBrowser` component connected to an `ItemBrowserStore`.\n */\nexport default connect<ItemBrowserProps, ItemBrowserStore, StateProps, {}>(\n    (state) => ({\n        layoutMode: state.settings.config.layoutMode,\n        expanded: state.ui.expanded.maximized,\n        sidePanelClosing: state.ui.sidePanel.closing\n    }),\n    () => ({})\n)(ItemBrowser);\n","import { curry } from \"../../functional/index\";\r\n\r\n/**\r\n * Returns new q including the group query based on a supplied group\r\n * @param group id of the group\r\n * @param q previous q\r\n */\r\nexport const appendGroupQ = curry((group: { id: string } | undefined, q: string[]): string[] => {\r\n    if (!!group) {\r\n        return [ ...q, `(group:${group.id})` ];\r\n    }\r\n    return q;\r\n});","import { curry } from \"../../functional/index\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\n/**\r\n * (Curried, arity 2) Returns new q including the status query based on a status filter\r\n * 1. the value for the status filter\r\n * 2. existing q to append access query to\r\n */\r\nexport const appendStatusQ = curry((\r\n    status: { value: string } | undefined,\r\n    user: Pojo,\r\n    q: string[]\r\n): string[] => {\r\n    if (!!status) {\r\n        switch (status.value) {\r\n            case \"authoritative\":\r\n                if (user && user.orgId) {\r\n                    return [\r\n                        ...q,\r\n                        `((contentstatus:org_authoritative orgid:${user.orgId}) OR contentstatus:public_authoritative)`\r\n                    ];\r\n                }\r\n                return [ ...q, `(contentstatus:public_authoritative)` ];\r\n            case \"deprecated\":\r\n                return [ ...q, `(contentstatus:deprecated)` ];\r\n            default:\r\n                return q;\r\n        }\r\n    }\r\n    return q;\r\n});","import { curry } from \"../../functional/index\";\r\n\r\n/**\r\n * (Curried, arity 2) Returns new q including the access query based on a shared filter\r\n * 1. the value for the shared filter\r\n * 2. existing q to append access query to\r\n */\r\nexport const appendAccessQ = curry((shared: { value: string } | undefined, q: string[]): string[] => {\r\n    if (!!shared) {\r\n        return [ ...q, `(access:${shared.value})` ];\r\n    }\r\n    return q;\r\n});","import * as Deferred from \"dojo/Deferred\";\r\nimport {\r\n    fetchGroupByQuery,\r\n    fetchGroupCategorySchema,\r\n    fetchItemData,\r\n    requestJSON,\r\n    Request\r\n} from \"./general\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\n/**\r\n * Retrieve the item containing the living atlas categories\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param groupId - group id to query for categories\r\n * @param typekeywords - typekeywords for item containing LA categories\r\n */\r\nexport const fetchLivingAtlasCategoryItem = (\r\n    request: Request,\r\n    portal: Pojo,\r\n    groupId: string,\r\n    typekeywords: string\r\n) =>\r\n    requestJSON(\r\n        request, \r\n        `${portal.restUrl}/content/groups/${groupId}/search`, \r\n        { q: `typekeywords: ${typekeywords}` }\r\n    );\r\n\r\n/**\r\n * Retrieve the regions for a particular portal\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param culture - optional string representing the culture for which to obtain regions\r\n */\r\nexport const fetchPortalRegions = (request: Request, portal: Pojo, culture?: string) =>\r\n    requestJSON(request, `${portal.restUrl}/portals/regions`, { culture });\r\n\r\n/**\r\n * Retrieve the living atlas group ID, category schema and region schema\r\n * @param request - 4x or shimmed request\r\n * @param portal - 4x or shimmed portal to query\r\n * @param defaultSelf - self response with default set to true\r\n * @param locale - string representing the locale for which the living atlas categories should be retrieved\r\n */\r\nexport const fetchAllLivingAtlasInfo = (\r\n    request: Request,\r\n    portal: Pojo,\r\n    defaultSelf: Pojo,\r\n    locale: string = \"en\"\r\n) => {\r\n    const dfd = new Deferred();\r\n\r\n    let livingAtlasGroupId: any;\r\n    let livingAtlasCategoryTypeKeywords: any;\r\n    let livingAtlasCategorySchema: any;\r\n    let livingAtlasRegionSchema: any;\r\n\r\n    fetchGroupByQuery(request, portal, defaultSelf.livingAtlasGroupQuery)\r\n        .then(handleLAGroupSuccess, handleLivingAtlasError);\r\n\r\n    return dfd;\r\n\r\n    function handleLAGroupSuccess(response: any) {\r\n        if (response.results[0] && response.results[0].id) {\r\n            livingAtlasGroupId = response.results[0].id;\r\n\r\n            fetchGroupCategorySchema(request, portal, livingAtlasGroupId)\r\n                .then(handleLASchemaSuccess, handleLivingAtlasError);\r\n        } else {\r\n            handleLivingAtlasError(\"The living atlas group could not be found.\");\r\n        }\r\n    }\r\n\r\n    function handleLASchemaSuccess(response: any) {\r\n        livingAtlasCategoryTypeKeywords = response.categorySchema[0].source.split(\".\")[1];\r\n        fetchGroupByQuery(request, portal, defaultSelf.contentCategorySetsGroupQuery)\r\n            .then(handleCategorySetsGroupSuccess, handleLivingAtlasError);\r\n\r\n        fetchPortalRegions(request, portal, locale)\r\n            .then(handlePortalRegionSuccess, handleLivingAtlasError);\r\n    }\r\n\r\n    function handleCategorySetsGroupSuccess(response: any) {\r\n        if (response.results[0]) {\r\n            fetchLivingAtlasCategoryItem(request, portal, response.results[0].id, livingAtlasCategoryTypeKeywords)\r\n                .then(handleLACategoryItemSuccess, handleLivingAtlasError);\r\n        } else {\r\n            handleLivingAtlasError(\"The content category sets group could not be found.\");\r\n        }\r\n    }\r\n\r\n    function handleLACategoryItemSuccess(response: any) {\r\n        if (response.results.length === 1 && response.results[0]) {\r\n            fetchItemData(request, portal, response.results[0].id)\r\n                .then(handleLAItemDataSuccess, handleLivingAtlasError);\r\n        } else {\r\n            handleLivingAtlasError(\"The item containing the living atlas categories could not be determined.\");\r\n        }\r\n    }\r\n\r\n    function handleLAItemDataSuccess(response: any) {\r\n        livingAtlasCategorySchema = response.categorySchema[0];\r\n\r\n        if (defaultSelf.isPortal && !!livingAtlasRegionSchema) {\r\n            handleLivingAtlasCategorySchemaSuccess([livingAtlasCategorySchema]);\r\n        } else if (!!livingAtlasRegionSchema) {\r\n            handleLivingAtlasCategorySchemaSuccess([livingAtlasCategorySchema, livingAtlasRegionSchema]);\r\n        }\r\n    }\r\n\r\n    function handlePortalRegionSuccess(response: any) {\r\n        const regions = response.map((region: any) => ({\r\n            displayName: region.localizedName,\r\n            title: region.region\r\n        })).sort(function(a: { displayName: string, title: string }, b: { displayName: string, title: string }) {\r\n            if (a.title.toLowerCase() === \"wo\") {\r\n                return -1;\r\n            }\r\n            return a.displayName.localeCompare(b.displayName);\r\n        });\r\n\r\n        livingAtlasRegionSchema = {\r\n            categories: regions,\r\n            description: \"2.0\",\r\n            displayName: \"Regions\",\r\n            title: \"region\"\r\n        };\r\n        \r\n        if (defaultSelf.isPortal && !!livingAtlasCategorySchema) {\r\n            handleLivingAtlasCategorySchemaSuccess([livingAtlasCategorySchema]);\r\n        } else if (!!livingAtlasCategorySchema) {\r\n            handleLivingAtlasCategorySchemaSuccess([livingAtlasCategorySchema, livingAtlasRegionSchema]);\r\n        }\r\n    }\r\n\r\n    function handleLivingAtlasCategorySchemaSuccess(schema: any[]) {\r\n        dfd.resolve({ schema, id: livingAtlasGroupId });\r\n    }\r\n\r\n    function handleLivingAtlasError(err: any) {\r\n        dfd.reject(err);\r\n    }\r\n};\r\n","import { compose } from \"../../functional/index\";\r\nimport { mixinUserThumbnail } from \"./thumbnail\";\r\nimport { Pojo } from \"../../../Component\";\r\n\r\nexport * from \"./thumbnail\";\r\n\r\nexport const mixinUserInfo = (portal: Pojo, user: Pojo) => compose(\r\n    mixinUserThumbnail(portal)\r\n)(user);"],"sourceRoot":""}