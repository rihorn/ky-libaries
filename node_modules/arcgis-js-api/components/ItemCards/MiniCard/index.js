// COPYRIGHT Â© 2018 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.10/esri/copyright.txt for details.

/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */

define(["../../Component","dojo/i18n!../../ItemCards/nls/resources","dojo/date/locale","../../Buttons/SvgButton","../../Badges/Authoritative","../../Badges/Deprecated","../../Badges/LivingAtlas","../../Badges/Marketplace","../../Badges/OpenData","../../Badges/Premium","../../Badges/Subscriber","../../Dropdowns/TextOptionDropdown","../../Loaders/LoaderIcon","../../Loaders/LoaderBars"],function(t,e,n,i,o,r,a,s,c,l,p,u,d,h){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(e){return t[e]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=291)}({0:function(t,e,n){"use strict";function i(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},r=function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)}},16:function(t,n){t.exports=e},20:function(t,e){t.exports=n},237:function(t,e){t.exports=h},238:function(t,e,n){"use strict";function i(t){t.stopPropagation()}var o=n(0),r=n(5),a=n(20),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.b(e,t),e.prototype.render=function(t){var e,n=this.props,o=n.active,r=n.classes,s=(n.handleShowItemDetails,n.item),c=n.iconUrl,l=n.userUrl,p=(n.portal,n.sortField),u=n.i18n;return e="numviews"===p?u.viewCount+": "+s.numViews:"avgrating"===p?u.rating+": "+s.avgRating.toFixed(2):"created"===p?u.created+": "+a.format(new Date(s.created),{selector:"date",formatLength:"short"}):u.updated+": "+a.format(new Date(s.modified),{selector:"date",formatLength:"short"}),t("header",{classes:r},t("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",alt:"",class:"card-mc__thumbnail",style:"\n                        background-image: url("+this.props.thumbURI+");\n                    "}),t("div",{class:"card-mc__title-container"},t("button",{id:"item-"+s.id+"-card-title",class:"card-mc__title",title:o?u.hideItem:u.viewItem,tabindex:"0"},s.title),t("div",{class:"card-mc__author-row"},t("img",{src:c,class:"content-search-item-icon",title:s.displayName}),t("span",{class:"card-mc__author-text"},u.by,t("a",{class:"content-search-selectable card-mc__author-link",title:this.props.organization?u.viewOrg:u.viewProfile,href:this.props.organization?this.props.organization.orgUrl:l,target:"_blank",onclick:i}," "+(this.props.organization?this.props.organization.name:s.owner)))),t("p",{class:"card-mc__info"},e)))},e}(r.Component);e.a=s},239:function(t,e,n){"use strict";var i=n(85),o=n.n(i),r=n(35),a=n.n(r),s=n(86),c=n.n(s);e.a=function(t,e){var n=t.selected,i=t.handleSelectionClick,r=t.handleIconActionClick,s=t.handleCustomActionClick,l=t.availableMiscActions,p=t.availableIconActions,u=t.loading,d=t.disableMainAction,h=t.children,m=t.id,f=t.hideEllipses,g=t.i18n,v=null;d||(v=u?e(c.a,null):e(a.a,{focusable:!0,handleClick:i,key:m+"-selection-btn",title:n?g.remove:g.add},e("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16"},e("g",{id:"16px",stroke:"none","stroke-width":"1"},e("g",null,e("g",null,e("polygon",n?{points:"3 7 12 7 12 8 3 8"}:{points:"12 7 7.999 7 8 3 7.001 3 7 7 2.999 7 2.999 8 7 8 6.999 12 7.998 12 7.999 8 12 8"}),e("path",{d:"M7.501,0 C3.365,0 0,3.364 0,7.5 C0,11.636 3.365,15 7.501,15 C11.636,15 15,11.636 15,7.5 C15,3.364 11.636,0 7.501,0 Z M7.501,14 C3.916,14 1,11.084 1,7.5 C1,3.916 3.916,1 7.501,1 C11.085,1 14,3.916 14,7.5 C14,11.084 11.085,14 7.501,14 Z"})))))));var b=p.map(function(t){return e(a.a,{focusable:!0,handleClick:r,key:m+"-"+t.text,title:t.text,value:t.value},e("div",{class:"card-mc__custom-icon-container",innerHTML:t.icon}))});return e("div",{id:"item-"+m+"-action-row",class:"content-search-item-action-row card-mc__action-row"},h,e("div",{key:"action-container",class:"card-mc__action-container"},e(a.a,{key:m+"-spacer"},e("svg",{height:"16px",width:"0px"})),v,b,l.length>0&&!f?e(o.a,{key:m+"-actions",options:l,onSelect:s,selectedOptionValue:void 0,justify:"right"},e(a.a,{focusable:!1,key:m+"-action-btn",title:g.actions},e("svg",{width:"16px",height:"16px",style:"transform: translate(0, -2px);"},e("g",{stroke:"none","stroke-width":"1"},e("g",null,e("path",{d:"M1,7 L3,7 L3,9 L1,9 L1,7 Z M7,7 L9,7 L9,9 L7,9 L7,7 Z M13,7 L15,7 L15,9 L13,9 L13,7 Z"})))))):null))}},291:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n(16),r=n(5),a=n(238),s=n(239),c=n(237),l=n.n(c),p=n(78),u=n.n(p),d=n(79),h=n.n(d),m=n(80),f=n.n(m),g=n(81),v=n.n(g),b=n(82),A=n.n(b),_=n(83),y=n.n(_),k=n(84),C=n.n(k),w=function(t){function e(e){var n=t.call(this,e)||this;return n.handleShowItemDetails=n.handleShowItemDetails.bind(n),n.handleSelectionClick=n.handleSelectionClick.bind(n),n.handleCustomActionClick=n.handleCustomActionClick.bind(n),n.handleIconActionClick=n.handleIconActionClick.bind(n),n}return i.b(e,t),e.prototype.render=function(t){var e=this,n=!!this.props.selectedItems[this.props.item.id],i=!!this.props.loadingItems[this.props.item.id],r=!(!this.props.activeItem||this.props.activeItem.id!==this.props.item.id),c=this.props.customActions.filter(function(t){return t.allowed(e.props.item)}).map(function(t){return{value:t.name,text:t.name,icon:t.icon}}),p=c.filter(function(t){return!!t.icon}),u=c.filter(function(t){return!t.icon}),d={"card-mc__container":!0,"card-mc__container--selected":n,"card-mc__container--active":r},h={"card-mc__fader":!0,"card-mc__fader--loading":i},m={"card-mc__header":!0,"card-mc__header--constrained":!!this.props.constrained};return t("section",{key:this.props.item.id,classes:d},t("div",{classes:h,onclick:this.handleShowItemDetails},t(a.a,{active:r,classes:m,handleShowItemDetails:this.handleShowItemDetails,i18n:o,iconUrl:this.props.item.iconURI,item:this.props.item,key:"mini-card-header",portal:this.props.portal,sortField:this.props.sortField,thumbURI:this.props.item.thumbURI,userUrl:this.props.portal.baseUrl+"/home/user.html?user="+this.props.item.owner,organization:this.props.organization}),t(s.a,{selected:n,handleSelectionClick:this.handleSelectionClick,loading:i,id:this.props.item.id,i18n:o,availableMiscActions:u,availableIconActions:p,handleIconActionClick:this.handleIconActionClick,handleCustomActionClick:this.handleCustomActionClick,disableMainAction:this.props.disableMainAction,hideEllipses:this.props.hideEllipses},t("div",{key:"badges"},this.renderBadges(t)))),i?t(l.a,{key:"item-card-loader-bars"}):null)},e.prototype.renderBadges=function(t){var e=this;return this.props.item.badges.map(function(n){switch(n){case"authoritative":return t(u.a,{size:"small",altOrg:e.props.organization?e.props.organization.name:void 0});case"deprecated":return t(h.a,{size:"small"});case"livingAtlas":return t(f.a,{size:"small"});case"marketplace":return t(v.a,{size:"small"});case"openData":return t(A.a,{size:"small"});case"premium":return t(y.a,{size:"small",user:e.props.portal.user});case"subscriber":return t(C.a,{size:"small",user:e.props.portal.user})}return null})},e.prototype.handleShowItemDetails=function(t){this.props.onShowItemDetails(this.props.item)},e.prototype.handleSelectionClick=function(t){t.stopPropagation(),this.props.onSelectionClick(this.props.item)},e.prototype.handleIconActionClick=function(t){t.stopPropagation(),t.target.value&&this.props.onCustomActionClick(t.target.value,this.props.item)},e.prototype.handleCustomActionClick=function(t){this.props.onCustomActionClick(t,this.props.item)},e}(r.Component);e.default=w},35:function(t,e){t.exports=i},5:function(e,n){e.exports=t},78:function(t,e){t.exports=o},79:function(t,e){t.exports=r},80:function(t,e){t.exports=a},81:function(t,e){t.exports=s},82:function(t,e){t.exports=c},83:function(t,e){t.exports=l},84:function(t,e){t.exports=p},85:function(t,e){t.exports=u},86:function(t,e){t.exports=d}})});