// COPYRIGHT Â© 2018 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.10/esri/copyright.txt for details.

define(["require","exports","../../../../core/tsSupport/assignHelper","../../../../core/compilerUtils","../../../../core/has","./primitiveObjectSymbolUtils","../../webgl-engine/lib/Util","../../webgl-engine/lib/lodRendering/LodResources"],function(e,r,t,i,o,a,s,m){function y(e){return"web-style"===e.type?r.emptySymbolComplexity:n(e.symbolLayers.toArray().map(function(r){return P(e,r)}))}function n(e){for(var r=0,t=0,i={bytesPerFeature:0,bytesPerCoordinate:0,draped:{bytesPerFeature:0,bytesPerCoordinate:0}},o=0,a=e;o<a.length;o++){var s=a[o];s&&(r+=s.primitivesPerFeature,t+=s.primitivesPerCoordinate,i.bytesPerFeature+=s.memory.bytesPerFeature,i.bytesPerCoordinate+=s.memory.bytesPerCoordinate,i.draped.bytesPerFeature+=s.memory.bytesPerFeature,i.draped.bytesPerCoordinate+=s.memory.bytesPerCoordinate)}return{primitivesPerFeature:r,primitivesPerCoordinate:t,memory:i}}function P(e,r){var o=d(e,r);switch(r.type){case"extrude":return{primitivesPerFeature:-4,primitivesPerCoordinate:4,memory:o};case"fill":return"mesh-3d"===e.type?{primitivesPerFeature:0,primitivesPerCoordinate:0,memory:o}:r.outline&&r.outline.size>0?{primitivesPerFeature:-4,primitivesPerCoordinate:3,memory:o}:{primitivesPerFeature:-2,primitivesPerCoordinate:1,memory:o};case"line":return{primitivesPerFeature:-2,primitivesPerCoordinate:2,memory:o};case"object":if(r.resource&&r.resource.href)return{primitivesPerFeature:16,primitivesPerCoordinate:0,memory:o};var a=r.resource&&r.resource.primitive||"sphere";return t({},u(a),{memory:o});case"path":;return{primitivesPerFeature:-4,primitivesPerCoordinate:20,memory:o};case"text":case"icon":return{primitivesPerFeature:2,primitivesPerCoordinate:0,memory:o};default:i.neverReached(r)}}function d(e,t){var a="point-3d"===e.type;switch(t.type){case"extrude":return t.edges&&t.edges.size>0?r.memoryEstimators.EXTRUDE_EDGES:r.memoryEstimators.EXTRUDE;case"fill":return t.outline&&t.outline.size>0?r.memoryEstimators.FILL_OUTLINE:r.memoryEstimators.FILL;case"line":return r.memoryEstimators.LINE;case"path":return r.memoryEstimators.PATH;case"object":return o("enable-feature:skallweit/lod-rendering")?a?r.memoryEstimators.OBJECT_POINT_LOD:r.memoryEstimators.OBJECT_POLYGON_LOD:a?r.memoryEstimators.OBJECT_POINT:r.memoryEstimators.OBJECT_POLYGON;case"icon":case"text":return a?r.memoryEstimators.ICON_POINT:r.memoryEstimators.ICON_POLYGON;default:i.neverReached(t)}}function u(e){var r=b[e];if(r)return r;if(o("enable-feature:skallweit/lod-rendering")){var t=a.primitiveLodResources(e,null,null),i=m.geometriesFromLodLevelResources(t.levels[0]),y=i.reduce(function(e,r){return e+r.data.getIndices(s.VertexAttrConstants.POSITION).length/3},0);r={primitivesPerFeature:y,primitivesPerCoordinate:0}}else{var n=a.primitiveGeometryData(e),y=n.getIndices(s.VertexAttrConstants.POSITION).length/3;r={primitivesPerFeature:y,primitivesPerCoordinate:0}}return b[e]=r,r}Object.defineProperty(r,"__esModule",{value:!0}),r.emptySymbolComplexity={primitivesPerFeature:0,primitivesPerCoordinate:0,memory:{bytesPerFeature:0,bytesPerCoordinate:0,draped:{bytesPerFeature:0,bytesPerCoordinate:0}}},r.defaultSymbolComplexity=y,r.totalSymbolComplexities=n;var b={};r.defaultSymbolLayerComplexity=P,r.defaultSymbolLayerMemoryComplexity=d,r.memoryEstimators={ICON_POINT:{bytesPerFeature:7478.781325779039,bytesPerCoordinate:0,draped:{bytesPerFeature:5712.082651558076,bytesPerCoordinate:0}},ICON_POLYGON:{bytesPerFeature:9679.372971750396,bytesPerCoordinate:56.86422538239579,draped:{bytesPerFeature:7883.966873022898,bytesPerCoordinate:56.89697037586389}},OBJECT_POINT:{bytesPerFeature:5177.80657223796,bytesPerCoordinate:0,draped:{bytesPerFeature:5177.80657223796,bytesPerCoordinate:0}},OBJECT_POLYGON:{bytesPerFeature:7372.024890546556,bytesPerCoordinate:56.80425878144206,draped:{bytesPerFeature:7372.024890546556,bytesPerCoordinate:56.80425878144206}},OBJECT_POINT_LOD:{bytesPerFeature:1770.211558073654,bytesPerCoordinate:0,draped:{bytesPerFeature:1770.211558073654,bytesPerCoordinate:0}},OBJECT_POLYGON_LOD:{bytesPerFeature:3958.8422890890743,bytesPerCoordinate:56.88697205558441,draped:{bytesPerFeature:3958.8422890890743,bytesPerCoordinate:56.88697205558441}},LINE:{bytesPerFeature:7586.045782417972,bytesPerCoordinate:112.02132538683836,draped:{bytesPerFeature:4775.97368572266,bytesPerCoordinate:111.85995483757563}},PATH:{bytesPerFeature:7563.020535856769,bytesPerCoordinate:119.1242257528872,draped:{bytesPerFeature:7563.020535856769,bytesPerCoordinate:119.1242257528872}},FILL:{bytesPerFeature:8702.040510627665,bytesPerCoordinate:56.610361738134486,draped:{bytesPerFeature:5921.70744530372,bytesPerCoordinate:56.58839624148057}},FILL_OUTLINE:{bytesPerFeature:12168.362923563885,bytesPerCoordinate:56.265773613009564,draped:{bytesPerFeature:7929.090679733446,bytesPerCoordinate:56.17528027868163}},EXTRUDE:{bytesPerFeature:11409.738625531325,bytesPerCoordinate:56.99136098105536,draped:{bytesPerFeature:11409.738625531325,bytesPerCoordinate:56.99136098105536}},EXTRUDE_EDGES:{bytesPerFeature:19399.52461450617,bytesPerCoordinate:52.052414603432105,draped:{bytesPerFeature:19399.52461450617,bytesPerCoordinate:52.052414603432105}}}});